(function(window) {
var __jsRegistry = {},
	__globalRegistry = window.okModules || (window.okModules = {}),
	document = window.document,
	__js_temp_htmlTag=document.documentElement,
	undefined;

__jsRegistry.a = __globalRegistry["suN7Qvg"] || (__globalRegistry["suN7Qvg"] = (function(){var v=window.okHead,m=v.beacon;function d(a,t,o,i,l,r){var g=window.okSMod,c=new Image,n=m+"&st.opid="+a;if(o)for(var e=0;e<o.length&&e<5;e++)n+="&st.prm"+(e+1)+"="+encodeURIComponent(o[e]);t&&(n+="&st.tint="+t),i&&(n+="&st.descr="+encodeURIComponent(i)),l&&(n+="&st.objid="+encodeURIComponent(l)),n+="&rnd="+Math.floor(Math.random()*9999999),r&&r(c),g&&(n+=g()),setTimeout(function(){c.src=n},10)}function f(a,t,o,i,l){d(a,null,t,o,i,l)}return window.logTimedClientEvent=d,window.logClientEvent=f,{log:f,logTimed:d}})()||window);
__jsRegistry.b = __globalRegistry["re2JFYg"] || (__globalRegistry["re2JFYg"] = (function(u){var d=!1,a="",o="";function w(n,f,l,e,i){if(!(d||!n||!window.logClientEvent||window.okIjse)){d=!0,typeof n!="string"&&(i=n.error||n,f=i.fileName||i.filename,l=i.lineNumber||i.lineno,e=i.columnNumber||i.colno,n=i.message),n=(i.name||"No_name")+". "+n+";",i&&i.stack&&(n+=" \nStack: "+i.stack+".");var p=window.pageCtx,s=(/st\.cmd=([^&]+)/i.exec(window.location.href)||[])[1]||p&&p.stateId||"notState",j=(/[^/]+\.js/i.exec(f||"")||[])[0]||"inlineJS",t=n+" @"+s+", "+j+":"+(l||"*")+":"+(e||"*");if(/[\W]+\$[\W]|\b(jQuery|hookAppData|__show__deepen)\b/gi.test(t))d=!1;else{var c=a?a+(o?"."+o:""):"";t=(c?c+"\n":"")+t.replace(/https?\:\/\/[^/]+/gi,""),u.log("js",["jserror",s,(c?c+"@":"")+j],t),window.okSjse&&alert("JS ERROR: "+t)}}}return window.onerror=w,{info:function(f,l){a=f,o=l},clean:function(){a="",o=""},send:w}})(__jsRegistry.a)||window);
__jsRegistry.c = __globalRegistry["gh4Wvfw"] || (__globalRegistry["gh4Wvfw"] = (function(){if(window.OK)return window.OK.storeFields||(window.OK.storeFields=i),window.OK;return window.OK={storeFields:i},window.OK;function i(n){Object.keys(n).forEach(function(o){this[o]=n[o]},this)}})()||window);
__jsRegistry.d = __globalRegistry["tZ1fdwg"] || (__globalRegistry["tZ1fdwg"] = (function(){var i={};function c(t,r){for(var o in r)Object.defineProperty(t,o,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,o).get})}c(i,{get isArray(){return y},get isDate(){return m},get isElem(){return S},get isFunction(){return g},get isNonEmptyStr(){return b},get isNotBlankString(){return p},get isNum(){return A},get isObject(){return l},get isStr(){return e}});function u(t,r){return r!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](t):t instanceof r}var s="[object Array]",a="[object Object]",f="[object String]",n=Object.prototype.toString;typeof Array.isArray!="function"&&(Array.isArray=function(t){return n.call(t)===s});var y=Array.isArray;function l(t){return n.call(t)===a}function g(t){return typeof t=="function"}function e(t){return n.call(t)===f}function b(t){return e(t)&&t.length!==0}function p(t){return e(t)&&t.trim().length!==0}function A(t){return Number.isFinite(t)}function S(t){return u(t,HTMLElement)}function m(t){return u(t,Date)}return i})()||window);
__jsRegistry.e = __globalRegistry["td56Sg"] || (__globalRegistry["td56Sg"] = (function(a){var c={};Object.defineProperty(c,"tracerWrapper",{enumerable:!0,get:function(){return v}});var h=(function(){function s(){this.infos=[],this._tracerInstance=null}var i=s.prototype;return i.init=function(){var r=this;if(this._tracerInstance===null){var n=window.okHead,t=(0,a.isObject)(n)&&(0,a.isObject)(n.tracer)&&(0,a.isNotBlankString)(n.tracer.appToken)?n.tracer:null;if(t!==null){var e=function(){r._tracerInstance={tracerError:window.tracerForHead.initTracerError({filterError:r.shouldFilterError.bind(r)}),tracerLog:window.tracerForHead.initTracerLog()},r.initUploader(t)};window.tracerForHead?e():u(window,"tracerForHead",function(){e()})}}},i.shouldFilterError=function(r){var n,t;if(!r||r!=null&&r.skipFilter)return!0;var e=(t=window.okHead)==null||(n=t.tracer)==null?void 0:n.nonFatalErrors;if(!e)return!0;var p=e.some(function(l){var d,f;return((d=r.stack)==null?void 0:d.includes(l))||((f=r.message)==null?void 0:f.includes(l))});return p?(r.skipFilter=!0,this.sendError(r),!1):!0},i.initUploader=function(r){var n={versionName:((0,a.isNotBlankString)(r.appVersionPrefix)?r.appVersionPrefix+"_":"")+r.mobVersion,versionCode:r.mobVersionHashCode,appToken:r.appToken},t=function(){var e=window.remainingTracerSdk;e&&(e.initTracerErrorUploader(n),e.initTracerSessionUploader(n))};window.remainingTracerSdk?t():u(window,"remainingTracerSdk",function(){t()})},i.setAdditionalInfo=function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];var e;(e=this.infos).splice.apply(e,[].concat([0,this.infos.length],n))},i.clearInfo=function(){this.setAdditionalInfo("")},i.sendInfo=function(r){var n;(n=this._tracerInstance)==null||n.tracerLog.log(r)},i.sendError=function(r){if(this._tracerInstance!==null){var n,t=this.getInfoStr();(0,a.isNotBlankString)(t)&&(n={keys:{additionalInfo:t}}),this._tracerInstance.tracerError.error(r,n)}},i.setErrorKey=function(r,n){this._tracerInstance!==null&&this._tracerInstance.tracerError.setErrorKey(r,n)},i.removeErrorKey=function(r){this._tracerInstance!==null&&this._tracerInstance.tracerError.removeErrorKey(r)},i.sendErrorWithInfo=function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];this.setAdditionalInfo.apply(this,[].concat(t)),this.sendError(r),this.clearInfo()},i.getInfoStr=function(){return this.infos.filter(a.isNotBlankString).join("; ")},s})();function u(s,i,o){var r=s[i];Object.defineProperty(s,i,{configurable:!0,get:function(){return r},set:function(t){Object.defineProperty(s,i,{configurable:!0,value:t}),o()}})}var v=new h;return c})(__jsRegistry.d)||window);
__jsRegistry.f = __globalRegistry["r1E86KA"] || (__globalRegistry["r1E86KA"] = (function(c,u,a){var d={};Object.defineProperty(d,"INSTANCE",{enumerable:!0,get:function(){return s}});var I=(function(){function f(){a.tracerWrapper.init()}var o=f.prototype;return o.setAdditionalInfo=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var t;c.info(e[0],e[1]),(t=a.tracerWrapper).setAdditionalInfo.apply(t,[].concat(e))},o.clearInfo=function(){c.clean(),a.tracerWrapper.clearInfo()},o.sendInfo=function(r){a.tracerWrapper.sendInfo(r)},o.sendError=function(r){c.send({error:r}),a.tracerWrapper.sendError(r)},o.setErrorKey=function(r,e){a.tracerWrapper.setErrorKey(r,e)},o.removeErrorKey=function(r){a.tracerWrapper.removeErrorKey(r)},o.sendErrorWithInfo=function(r){for(var e=arguments.length,n=new Array(e>1?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];var i;c.info(n[0],n[1]),c.send({error:r}),c.clean(),(i=a.tracerWrapper).sendErrorWithInfo.apply(i,[].concat([r],n))},f})(),s=new I;return u.storeFields({errorReporter:s}),d})(__jsRegistry.b, __jsRegistry.c, __jsRegistry.e)||window);
__jsRegistry.g = __globalRegistry["csugA3g"] || (__globalRegistry["csugA3g"] = (function(){var l={};Object.defineProperty(l,"default",{enumerable:!0,get:function(){return w}});function s(a,f){return f!=null&&typeof Symbol<"u"&&f[Symbol.hasInstance]?!!f[Symbol.hasInstance](a):a instanceof f}var p=(function(){function a(){}var f=a.prototype;return f.activate=function(){var t={log:window.console.log,warn:window.console.warn,error:window.console.error};Object.assign(window.console,{info:function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];window.OK.errorReporter.sendInfo("[Info]: "+r.join(" ")),t.log.apply(this,r)},warn:function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];window.OK.errorReporter.sendInfo("[Warning]: "+r.join(" ")),t.warn.apply(this,r)},error:function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];if(r.length>0){var i=r[0],u;s(i,Error)?u=i:typeof i=="string"?u=a.formatError(new Error(i.includes("%s")?a.format.apply(this,r):r.join(" "))):u=a.formatError(new Error(JSON.stringify(i))),window.OK.errorReporter.sendError(u)}t.error.apply(this,r)},originalError:function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];t.error.apply(this,r)}})},a.format=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var r=e[0];return e.slice(1).reduce(function(n,i){return n.replace(/%s/,i)},r)},a.formatError=function(t){var e=t.stack;if(e){var o=t.message,r=e.indexOf(o);if(r!==-1){var n=r+o.length;o=e.substring(0,n),e=e.substring(n+1)}var i=e.split("\n").filter(function(u,m){return m!==0&&!u.includes("chrome-extension")}).join("\n");t.stack=o+"\n"+i}return t},a})(),w=new p;return l})()||window);
__jsRegistry.h = __globalRegistry["cifLZ3g"] || (__globalRegistry["cifLZ3g"] = (function(o){var e;(e=window.okHead)!=null&&e.consoleWrapper&&o.default.activate()})(__jsRegistry.g)||window);
__jsRegistry.i = __globalRegistry["bZb4w9Q"] || (__globalRegistry["bZb4w9Q"] = (function(){function r(t,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n}Function.prototype.bind||(Function.prototype.bind=function(t){var n=Array.prototype.slice.call(arguments,1),i=this,o=function(){},e=function(){return i.apply(r(this,o)&&t?this:t,n.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,e.prototype=new o,e})})()||window);
__jsRegistry.j = __globalRegistry["aAMEJeg"] || (__globalRegistry["aAMEJeg"] = (function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,a){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if(i===0)return!1;for(var n=a|0,r=Math.max(n>=0?n:i-Math.abs(n),0);r<i;){if(t[r]===e||typeof e=="number"&&isNaN(e)&&isNaN(t[r]))return!0;r++}return!1},configurable:!0,writable:!0})})()||window);
__jsRegistry.k = __globalRegistry["ffi0zg"] || (__globalRegistry["ffi0zg"] = (function(){var i=function(f,h,v,d,n){var r,u,a;for(n=n||1,r=0,u=f.length;r<u;r+=n)if(a=h.call(v,f[r],r,f,d),a!==void 0)return a;return f};return i})()||window);
__jsRegistry.l = __globalRegistry["fR7JqXA"] || (__globalRegistry["fR7JqXA"] = (function(){return function(n,e,i,u){var r,f;for(r in n)if(n.hasOwnProperty(r)&&(f=e.call(i,n[r],r,n,u),typeof f<"u"))return f;return n}})()||window);
__jsRegistry.m = __globalRegistry["uih3DA"] || (__globalRegistry["uih3DA"] = (function(q){var m={};function R(r,e){for(var n in e)Object.defineProperty(r,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,n).get})}R(m,{get endWithSlash(){return x},get formatParams(){return y},get insertParam(){return O},get insertParams(){return i},get params(){return u},get paramsFromQuery(){return b},get path(){return p},get preparePostRequest(){return C},get query(){return P},get removeQuery(){return I},get replaceParams(){return f}});function U(r,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):r instanceof e}function d(r){var e=r.indexOf("?");if(e===-1)return"";var n=r.indexOf("#");return n===-1&&(n=r.length),r.substring(e+1,n)}function v(r){var e=d(r);return e?g(e.split("&")):{}}function Q(r){return g(r.split("&"))}function g(r){for(var e={},n=0,t=r.length;n<t;n++){var a=r[n],s=a.split("=");s.length>0&&(e[decodeURIComponent(s[0])]=decodeURIComponent(s.length>1?s[1]:""))}return e}function o(r,e){e===void 0&&(e="");var n=[];return Object.keys(r).forEach(function(t){var a=r[t];U(a,Array)?a.forEach(function(s){return h(n,t,s)}):h(n,t,a)}),e+n.join("&")}function h(r,e,n){F(n)&&(n=JSON.stringify(n));var t=encodeURIComponent(e);n!=null&&(t+="=",t+=encodeURIComponent(n)),r.push(t)}function F(r){return!!r&&r.toString()==="[object Object]"}function _(r){var e=/^[^\?\#]+/gi.exec(r);return e&&e[0]||r}var p=_,P=d,u=v,b=Q,y=o;function i(r,e){var n=r.indexOf("?"),t=r.indexOf("#"),a=t===-1?r.length:t;return[r.substring(0,a),o(e,n!==-1?"&":"?"),r.substring(a)].join("")}function O(r,e,n){var t,a=(t={},t[e]=n,t);return i(r,a)}function f(r,e){var n=v(r);Object.keys(e).forEach(function(l){var S=e[l];S===null?delete n[l]:n[l]=S});var t=r.indexOf("#"),a="";t!==-1&&(a=r.substring(t),r=r.substring(0,t));var s=r.indexOf("?"),W=s!==-1?r.substring(0,s):r,j=o(n),c=W;return c+=j.length?"?":"",c+=j,c+a}function x(r){return r.lastIndexOf("/")!==r.length-1?r+"/":r}function I(r){var e=r.split(/[?#]/),n=e[0],t,a=(t=e[r.indexOf("?")>-1?2:1])!=null?t:null;return a!=null&&(n+="#"+a),n}function C(r,e){var n=u(r);if(e!=null){var t=e.split(/\s+/gi);if(t.length)return{uri:f(r,t.reduce(M,{})),payload:t.reduce(function(a,s){return a[s]=n[s],a},{})}}return{uri:I(r),payload:n}}function M(r,e){return r[e]=null,r}var E={path:p,query:P,params:u,paramsFromQuery:b,insertParams:i,insertParam:O,formatParams:y,replaceParams:f,endWithSlash:x};return q.storeFields({uriUtils:E}),m})(__jsRegistry.c)||window);
__jsRegistry.n = __globalRegistry["taWQcQ"] || (__globalRegistry["taWQcQ"] = (function(v,j){function s(n,t,e){t.call(n,n.result,e)}function c(n,t,e){if(n.done)throw new Error;n.done=!0,n.result=e;var o=n[t];n.onSuccess=null,n.onFailure=null;for(var r=0,l=o?o.length:0;r<l;r+=2)s(n,o[r],o[r+1]);n.onSuccess=null,n.onFailure=null}function i(n,t,e,o){e&&(n[t]||(n[t]=[])).push(e,o)}function u(){var n=this;n.done=!1,n.rejected=!1,n.result=null,n.onSuccess=null,n.onFailure=null}return u.prototype={resolve:function(t){var e=this;return c(e,"onSuccess",t),e},reject:function(t){var e=this;return e.rejected=!0,c(e,"onFailure",t),this},resolveIfNotDone:function(t){var e=this;return e.done||e.resolve(t),e},rejectIfNotDone:function(t){var e=this;return e.done||e.reject(t),null},then:function(t,e,o){var r=this;if(r.done){var l=r.rejected?e:t;l&&s(r,l,o)}else i(r,"onSuccess",t,o),i(r,"onFailure",e,o);return r},anyway:function(t,e){return this.then(t,t,e)},join:function(t){var e=this;return t.then(e.resolve.bind(e),e.reject.bind(e)),e}},v.TaskFactory={constructor:u,start:function(){return new u},all:function(t){var e=new u,o=arguments.length===1&&j.isArray(t)?t:arguments,r=o.length,l=0,a=r,f=!1;function h(){r--,r||(f?e.reject():e.resolve())}function d(){f=!0,h()}for(;l<a;l++)o[l].then(h,d);return a===0&&e.resolve(),e},runCallback:s,resolved:new u().resolve(),rejected:new u().reject()}})(__jsRegistry.c, __jsRegistry.d)||window);
__jsRegistry.o = __globalRegistry["anMiJqQ"] || (__globalRegistry["anMiJqQ"] = (function(){return function(e,n,v,t){var i=!1,r=function(f){e.removeEventListener(n,r,t),i||(i=!0,v(f))};e.addEventListener(n,r,t)}})()||window);
__jsRegistry.p = __globalRegistry["lEjiK2w"] || (__globalRegistry["lEjiK2w"] = (function(d,n){var o=d.start(),e=d.start();return n(window,"load",o.resolveIfNotDone.bind(o)),window.okDebug&&document.readyState!=="loading"?e.resolve():n(document,"DOMContentLoaded",e.resolve.bind(e)),{fullyLoaded:o,domLoaded:e,stopLoading:function(){o.done||(window.stop&&window.stop(),o.resolveIfNotDone())}}})(__jsRegistry.n, __jsRegistry.o)||window);
__jsRegistry.q = __globalRegistry["rS1Fsew"] || (__globalRegistry["rS1Fsew"] = (function(l,m,b,M,o,S,L){var i,f,u={},y=!1,h,a,E={},V=10*1e3;function j(){if(!y){y=!0,h=o.start(),h.resolve(),a=0,C(),m(document.styleSheets,function(s){w(s,h)});var e=window.okHead.staticResourceUrl;f={jQuery:e+"mres/default/js/jquery-1.5.2.min.js","leaflet-js":e+"mres/default/js/leaflet.js","leaflet-css":e+"mres/default/css/leaflet.min.css","streamsense-js":e+"mres/default/js/streamsense.5.2.0.160629.min.js",lottie:e+"mres/default/js/lottie.min.5.7.6.js","ractive-js":e+"mres/default/js/ractive-1.3.14.min.js",promise:e+"mres/default/js/promise.min.js","addtohomescreen-js":e+"mres/default/js/addtohomescreen.js","addtohomescreen-css":e+"mres/default/css/addtohomescreen.css","chart-lib":e+"mres/default/js/chart-lib-3.9.1.min.js","vk-uxpolls-js":e+"mres/default/js/vk-uxpolls-sdk.1.0.16.min.js"}}}function v(e){if(!i&&(i=document.head,!i)){setTimeout(v.bind(0,e),100);return}e()}function C(){for(var e=document.styleSheets;a<e.length;a++){var s=e[a];E[c(s.href)]=1}}function c(e){return M.path(e)}function W(e,s){u[e]=s}function w(e,s){W(c(e.href),s)}function D(e,s){var t=c(e.href);if(t in u)return u[t];var p=function(){++d%5===0&&(a=0),C(),t in E||Date.now()-r>V?n.resolve():setTimeout(p,50)},P=p,n=o.start(),r=Date.now(),d=0;return a=0,setTimeout(p,50),v(function(){s?i.insertBefore(e,i.firstChild):i.appendChild(e)}),w(e,n),n}function x(e){var s=document.createElement("link");return s.type="text/css",s.rel="stylesheet",s.href=e,D(s)}function A(e){e.onload=null,e.onerror=null}function I(e,s){s=s||o.start();var t=document.createElement("script");return t.type="text/javascript",t.onload=function(){A(t),setTimeout(function(){s.resolve()},4)},t.onerror=function(){var n=s.tryCount||0;n>=3?(A(t),s.reject()):(s.tryCount=++n,setTimeout(function(){I(e,s)},250))},u[c(e)]=s,t.src=e,v(function(){i.appendChild(t)}),s}function N(e){return e in f}function O(e){if(N(e))e=f[e];else if(e.indexOf("/")===-1)throw S.INSTANCE.setAdditionalInfo("noAlias",e),new Error("No such alias found.");return e}function R(e,s,t,n){j();var r;if(!n&&!N(e))r=o.start(),L.domLoaded.then(function(){r.join(R(e,s,t,!0))});else{e=O(e);var d=c(e);if(d in u)r=u[d];else{var P=e.match(/\.css$/);P?r=x(e):r=I(e)}s&&r.then(function(){s.call(t)})}return r}function q(e){j(),b(e,function(s,t){f[t]=s})}var T={use:R,alias:q,aliasToUrl:O,addCss:Q,loadCss:x,launchServices:H,launchService:U};l.loader=T;function U(e){try{l[e.service](e)}catch(s){S.INSTANCE.sendErrorWithInfo(s,e.service,"service")}}function H(e){m(e,U)}function B(e,s){var t=!1;function n(){if(s.length>0&&!l[s[0].service]&&!t){t=!0,setTimeout(n,200);return}H(s)}e?l.loader.use(e,n):n()}function Q(e,s){j();var t=[],n=s==="TOP";return m(Array.prototype.slice.call(e.children),function(r){t.push(D(r,n))}),o.all.apply(o,t)}return l.launchServices=B,T})(__jsRegistry.c, __jsRegistry.k, __jsRegistry.l, __jsRegistry.m, __jsRegistry.n, __jsRegistry.f, __jsRegistry.p)||window);
__jsRegistry.r = __globalRegistry["tRKdv8A"] || (__globalRegistry["tRKdv8A"] = (function(){String.prototype.trim||(function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"")}})()})()||window);
__jsRegistry.s = __globalRegistry["drmw1pw"] || (__globalRegistry["drmw1pw"] = (function(H,j){var p={};function P(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}P(p,{get addClass(){return l},get addClasses(){return d},get clear(){return L},get closest(){return R},get getTotalOffsetLeft(){return T},get getTotalOffsetTop(){return b},get hasClass(){return c},get indexOfChild(){return E},get matches(){return f},get preventDefault(){return M},get pushManyToArray(){return O},get remove(){return A},get removeClass(){return o},get removeClasses(){return C},get replace(){return w},get selectClass(){return y},get switchClass(){return u},get toggleAttribute(){return x},get toggleClass(){return m}});function _(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var i=HTMLElement.prototype,g=Array.prototype,v=typeof i.remove=="function",S=typeof i.replaceWith=="function",N=typeof i.toggleAttribute=="function",a=__js_temp_htmlTag.classList;function h(e,t){var r=e.className;r.indexOf(t)===-1&&(e.className=r+" "+t)}var l=a?function(e,t){e.classList.add(t)}:h,d=a?function(e,t){e.classList.add.apply(e.classList,t.trim().split(" "))}:h,o=a?function(e,t){e.classList.remove(t)}:function(e,t){e.className=(e.className||"").replace(new RegExp("(?:^|\\s)"+t+"(?=$|\\s)","g"),"")},C=a?function(e,t){if(e.classList.length){var r=t.split(" ");r.forEach(function(s){e.classList.remove(s)})}}:function(e,t){if(e.className){for(var r=e.className.split(" "),s=t.split(" "),n=0,F=s.length;n<F;n++){var D=r.indexOf(s[n]);D>-1&&r.splice(D,1)}e.className=r.join(" ")}},c=a?function(e,t){return e.classList.contains(t)}:function(e,t){var r=new RegExp("\\b"+t+"\\b");return r.test(e.className)};function y(e,t,r){for(var s=0,n=r.length;s<n;s+=1)u(e,r[s]===t,r[s])}function u(e,t,r){var s=t?l:o;s(e,r)}var m=a?function(e,t){e.classList.toggle(t)}:function(e,t){var r=c(e,t)?o:l;r(e,t)};function O(e,t){t&&t.length>0&&g.splice.apply(e,[].concat([e.length,0],t))}function b(e){return e.getBoundingClientRect().top+window.pageYOffset-e.clientTop}function T(e){return e.getBoundingClientRect().left+window.pageXOffset-e.clientLeft}function E(e,t){return g.indexOf.call(e.childNodes,t)}var w=S?function(t,r){t.replaceWith(r)}:function(t,r){var s=t.parentElement;s&&s.replaceChild(r,t)};function A(e){var t;e&&v?e.remove():e.parentNode&&(t=e.parentNode,t.removeChild(e))}var L=v?function(e){for(;e.lastChild;)e.lastChild.remove()}:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)};function M(e){_(e.preventDefault,Function)?e.preventDefault():e.returnValue=!1}var x=N?function(e,t,r){e.toggleAttribute(t,r)}:function(e,t,r){r?e.removeAttribute(t):e.setAttribute(t,"")};function f(e,t){var r=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;return r.call(e,t)}function R(e,t){if(Element.prototype.closest)return Element.prototype.closest.call(e,t);do{if(f(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}var B={addClass:l,addClasses:d,removeClass:o,removeClasses:C,hasClass:c,selectClass:y,switchClass:u,toggleClass:m,pushManyToArray:O,getTotalOffsetTop:b,getTotalOffsetLeft:T,indexOfChild:E,replace:w,remove:A,clear:L,preventDefault:M,toggleAttribute:x,matches:f,closest:R};return j.storeFields({Dom:B}),p})(__jsRegistry.r, __jsRegistry.c)||window);
__jsRegistry.t = __globalRegistry["dkYTtkQ"] || (__globalRegistry["dkYTtkQ"] = (function(o,a,c){function i(t,e,n,r){for(r=r||1/0;r--&&t&&t!==n;){if(e(t))return t;t=t.parentElement}return null}var u,s=__js_temp_htmlTag;c(["matches","webkitMatchesSelector","matchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector"],function(t){if(s[t])return u=t});function l(t,e){do e=e[t];while(e&&e.nodeType!=1);return e}return o.DOMTraverse={findParent:i,isChildOf:function(e,n){return n===document||i(e,function(r){return r===n})!==null},parentBySelector:function(e,n,r,f){return i(e,function(m){return m[u](n)},r,f)},getTextNode:function(e){var n;return n=c(e.childNodes,function(r){if(r.nodeName==="#text")return r}),n.nodeName!=="#text"&&(n=document.createTextNode(""),e.appendChild(n)),n},setText:function(e,n){var r=this.getTextNode(e);return r.nodeValue=n,r},next:l.bind(0,"nextSibling"),previous:l.bind(0,"previousSibling"),matches:function(e,n){return e[u](n)}}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.k)||window);
__jsRegistry.u = __globalRegistry["enDyBg"] || (__globalRegistry["enDyBg"] = (function(){var c={};function u(a,r){for(var i in r)Object.defineProperty(a,i,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,i).get})}u(c,{get OkEvent(){return l},get create(){return f}});var l=(function(){function a(){this.list=[],this.inProgress=!1,this.maintenance=null}var r=a.prototype;return r._init=function(){this.list=[],this.inProgress=!1,this.maintenance=null},r._callHandler=function(t,e,n){t.call(e,n)},r.trigger=function(t){var e=arguments[1];this.runMaintenance(),this.inProgress=!0;for(var n=0,s=this.list.length;n<s;n++){var h=this.list[n];h&&(h.once&&(this.list.splice(n--,1),s--),this._callHandler(h.handler,h.context,t,e))}return this.inProgress=!1,this.runMaintenance(),this},r.runMaintenance=function(){var t=this.maintenance;if(t){this.maintenance=null;for(var e=0;e<t.length;e++){var n=t[e];this[n.name].apply(this,n.args)}}},r.attach=function(t,e){return this.inProgress?this.deferMaintenance("attach",[t,e]):this.list.push(this.wrapMethod(e,t)),this},r.deferMaintenance=function(t,e){this.maintenance||(this.maintenance=[]),this.maintenance.push({name:t,args:e})},r.wrapMethod=function(t,e){return{context:t,handler:e,once:!1}},r.attachOnce=function(t,e){if(this.inProgress)this.deferMaintenance("attachOnce",[t,e]);else{var n=this.wrapMethod(e,t);n.once=!0,this.list.push(n)}return this},r.detach=function(t,e){if(this.inProgress)this.deferMaintenance("detach",[t,e]);else for(var n=this.list.length;n-- >0;){var s=this.list[n];s.handler===t&&s.context===e&&this.list.splice(n,1)}return this},r.hasHandlers=function(){return this.list.length!==0},a})();function f(){return new l}return c})()||window);
__jsRegistry.v = __globalRegistry["cTB47WQ"] || (__globalRegistry["cTB47WQ"] = (function(e){return{adBannerClicked:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.w = __globalRegistry["inIv7XA"] || (__globalRegistry["inIv7XA"] = (function(a){return{finished:a.create(),navigating:a.create(),rendering:a.create(),navigated:a.create(),navigationFailed:a.create(),programmaticBack:a.create(),requestAot:a.create(),ready:function(e){e(),this.navigated.attach(e)},pageLinks:null,attachUntilRendering:function(e,i,n){e.attach(i,n),this.rendering.attachOnce(function(){e.detach(i,n)})}}})(__jsRegistry.u)||window);
__jsRegistry.x = __globalRegistry["sq2VowA"] || (__globalRegistry["sq2VowA"] = (function(u,r){function f(t){var n,i=!1;function e(a){a=a||{},!i&&t.init&&t.init(a),n&&t.dispose&&t.dispose(n),t.discard&&r.rendering.attachOnce(function(){t.discard(n)}),i=!0,t.update&&t.update(a),t.lateUpdate&&setTimeout(function(){t.lateUpdate(a)},17),n=a}var d=t.name;return d?u[d]=e:e}return{create:f}})(__jsRegistry.c, __jsRegistry.w)||window);
__jsRegistry.y = __globalRegistry["i1cv4hw"] || (__globalRegistry["i1cv4hw"] = (function(){return{log:function(o,l,t){var n=window.pageCtx,e=window.logClientEvent,i=[o,l||"UNKNOWN",n&&n.stateId||"noState"];e&&e("alf",i,null,null,t)},bannerActionType:{IGNORE:"ignore",SHOWN:"shown",SHOWN_ON_SCROLL:"shownOnScroll",CLICK:"onClick",AUTHOR_CLICK:"authorClick",LIKE:"like",RESHARE:"reshare",COMMENT:"comment",LINK_EXT:"linkExt",PLAY_MUSIC:"playMusic",VOTE:"vote",OPEN_APP:"openApp",JOIN_GROUP:"join",PLAY_VIDEO:"playVideo",CLOSED_BY_USER:"closedByUser"}}})()||window);
__jsRegistry.z = __globalRegistry["c0CIuA"] || (__globalRegistry["c0CIuA"] = (function(p,b,d,C,x,m){var O="data-pixel",g,v;p.initClickPixels=x.create({init:function(r){g=r,v=r.log}});function D(l){var r,n=l.getAttribute(O);if(n)try{r=JSON.parse(n)}catch(a){}return r}function A(l,r,n){for(var a=0,t=l.length;a<t;a++){var i=new Image;typeof r=="function"&&!n&&a+1===t&&(i.onload=i.onerror=r),i.src=l[a]}}return{handleClick:function(r){var n=!1;if(!g)return n;var a=r.target,t=a,i=!1,s,o,f,k,y=!1;if(d.findParent(t,function(e){if(!e.tagName||e.getAttribute("data-model")===m.bannerActionType.IGNORE)return!1;var u=e.getAttribute("data-btype"),c=D(e);return c&&c.length&&b.hasClass(e,"js-adv-px")?(s=c,t=e,y=!0,!0):(!o&&e.tagName==="A"&&(c&&c.length&&(s=c),o=e.href,t=e,i=b.hasClass(t,"js-adv")&&!t.getAttribute("data-model")),u&&u.length?(k=u,!0):!1)}),y)return A(s),!1;f=g.targetBlankEnabled&&t.target==="_blank";function T(){C.adBannerClicked.trigger(),n=!0}if(s&&o)if(T(),f||r.preventDefault(),v&&i){var E=A.bind(this,s,h,f);j(E)}else A(s,h,f);else v&&o&&i&&(T(),f?j(function(){}):(r.preventDefault(),j(h)));function h(){t._loadingDocument=!0;var e=p.Location;e?e.change(o):window.location.assign(o)}function j(e){m.log("click",k,function(u){f?e():u.onerror=u.onload=e})}return n}}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.v, __jsRegistry.x, __jsRegistry.y)||window);
__jsRegistry.aa = __globalRegistry["oLP05wA"] || (__globalRegistry["oLP05wA"] = (function(d,s){function u(e,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}function c(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function l(e){if(e==null||(typeof e>"u"?"undefined":c(e))!=="object")return e;var n;if(u(e,Date))return n=new Date,n.setTime(e.getTime()),n;if(u(e,Array)){n=[];for(var r=0,f=e.length;r<f;r++)n[r]=l(e[r]);return n}if(u(e,Object)){n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=l(e[t]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")}function y(e,n){if(e===n)return!0;if((typeof e>"u"?"undefined":c(e))==="object"&&(typeof n>"u"?"undefined":c(n))==="object"){if(s.isObject(e)){if(Object.keys(e).length===Object.keys(n).length){for(var r in e)if(!(e.hasOwnProperty(r)&&n.hasOwnProperty(r)&&y(e[r],n[r])))return!1;return!0}}else if(s.isArray(e)){if(e.length===n.length){for(var f=0,t=e.length;f<t;f++)if(!y(e[f],n[f]))return!1}}else if(s.isDate(e))return e.toString()===n.toString()}return!1}function o(e){if(e){for(var n in e)if(e.hasOwnProperty(n))return!1}return!0}return{clone:l,copy:function(n,r){d(n,function(f,t){r[t]=f})},copySet:function(n,r,f){if(r&&f)for(var t=0,i=n.length;t<i;t++){var a=n[t];f[a]=r[a]}},fillObject:function(n,r){var f;return s.isFunction(r)?f=r:r===void 0&&(r=null),d(n,function(t,i){f?n[i]=f(t,i,n):n[i]=r}),n},getObjectFieldSafe:function(n,r){for(var f=n,t=r.split("."),i=0,a=t.length;i!==a;i+=1){var p=t[i];if(f.hasOwnProperty(p))f=f[p];else return null}return f},resetObjectState:function(n,r,f){for(var t in n)if(r.hasOwnProperty(t)){if(f){var i=r[t];(u(i,Array)||u(i,Object))&&(n[t]=l(i))}n[t]=r[t]}else delete n[t]},compareValues:y,isNullOrEmpty:o}})(__jsRegistry.l, __jsRegistry.d)||window);
__jsRegistry.ab = __globalRegistry["o32dCkQ"] || (__globalRegistry["o32dCkQ"] = (function(f,u,d,v){function a(){this._init()}a.prototype=v.clone(f.OkEvent.prototype),a.prototype._callHandler=function(s,e,t,n){s.call(e,t,n)};function c(s){this._init(s)}function _(s,e,t,n){var r=s._events,o=r[e];o||(s._controlledModelFields[e]&&s._startSyncControlledField(e),o=new a,r[e]=o),o.attach(t,n)}return c.prototype={_init:function(e){var t=this;return t.model=e||null,t._events={},t._controlledModelFields={},t},_modelContainsField:function(e,t){return e!==null&&e.hasOwnProperty(t)},resetModel:function(e){var t=this,n=t.model,r=t._events,o;t.model=e;for(o in r)if(r.hasOwnProperty(o)){var l=r[o],i=t._modelContainsField(n,o);t._modelContainsField(e,o)?(!i||e[o]!==n[o])&&l.trigger(t._getModelFieldValue(e,o),i?n[o]:null):i&&l.trigger(null,n[o])}return t},set:function(e,t){var n=this,r=n.model;if(!n._modelContainsField(r,e)||r[e]!==t){var o=r[e]!==void 0?r[e]:null,l=n._events[e];r[e]=t,l&&l.trigger(t,o)}return n},setPart:function(e){var t=this,n=t.model,r={};return u(e,function(o,l){(!t._modelContainsField(n,l)||n[l]!==o)&&(r[l]=n[l],n[l]=o)}),u(r,function(o,l){var i=t._events[l];i&&i.trigger(n[l],o)}),t},contains:function(e){return this._modelContainsField(this.model,e)},get:function(e){var t=this,n=t.model;return t._modelContainsField(n,e)?t._getModelFieldValue(n,e):null},onChanged:function(e,t,n){var r=this;return typeof e=="string"?_(r,e,t,n):d(e,function(o){r.onChanged(o,t,n)}),r},offChanged:function(e,t,n){var r=this,o=r._events[e];return o&&(o.detach(t,n),o.hasHandlers()||(delete r._events[e],r._controlledModelFields[e]&&r._controlledModelFields[e].stopSync.call(r))),r},switchChanges:function(e,t,n,r){return e?this.onChanged(t,n,r):this.offChanged(t,n,r)},_getModelFieldValue:function(e,t){var n=this;return n._controlledModelFields[t]&&!n._events[t]?n._controlledModelFields[t].get.call(n):e[t]},synced:function(e,t,n){var r=this,o=r.model;return r._modelContainsField(o,e)&&t.call(n,r._getModelFieldValue(o,e),null),r.onChanged(e,t,n)},_startSyncControlledField:function(e,t){var n=this,r=t||n._controlledModelFields[e];return n.set(e,r.get.call(n)),r.startSync.call(n),n},addControlledField:function(e,t){var n=this;if(!n._controlledModelFields[e])n._controlledModelFields[e]=t,n._events[e]&&n._startSyncControlledField(e,t);else throw new Error;return n},removeControllerField:function(e){var t=this,n=t._controlledModelFields[e];return n&&(n.stopSync.call(t),delete n[e]),t}},{Observable:c,create:function(e){return new c(e)}}})(__jsRegistry.u, __jsRegistry.l, __jsRegistry.k, __jsRegistry.aa)||window);
__jsRegistry.ac = __globalRegistry["tj5MoQ"] || (__globalRegistry["tj5MoQ"] = (function(e){var o=(0,e.create)({isPositionFixed:!1});return o})(__jsRegistry.ab)||window);
__jsRegistry.ad = __globalRegistry["tB2Q1qQ"] || (__globalRegistry["tB2Q1qQ"] = (function(i,o,l,s){var u="__active",d="__toolbar-fixed",c;function r(){return c||(c=document.getElementsByClassName("toolbar-w")[0])}function b(e){o.addClass(e,u),o.addClass(document.body,d),s.set("isPositionFixed",!0)}function m(e){o.removeClass(e,u),o.removeClass(document.body,d),s.set("isPositionFixed",!1)}i.initToolbar=l.create({init:function(){setTimeout(function(){var a=r();a&&b(a)},0),document.addEventListener("focus",function(a){var t=a.target,n=t.tagName,g=t.type;if((n==="INPUT"&&!g.match(/\b(checkbox|radio|submit|button)\b/)||n==="TEXTAREA"||n==="SELECT"||t.nodeType===1&&t.hasAttribute("contenteditable"))&&!t.getAttribute("data-toolbar-allow-fixed")||typeof t.getAttribute=="function"&&t.getAttribute("data-do-not-fix-header-on-focus")){var f=r();f&&m(f)}},!0),document.addEventListener("blur",function(a){var t=r();t&&v(a.target)&&b(t)},!0)}}),i.isInitToolbarActive&&i.initToolbar();function v(e){return!(e!==document&&o.hasClass(e,"finp"))}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.x, __jsRegistry.ac)||window);
__jsRegistry.ae = __globalRegistry["pqIV3MA"] || (__globalRegistry["pqIV3MA"] = (function(o,a){var u=["resolve","reject","all","allSettled","any","race","finally"];function s(n){var t=window.Promise;if(!t)return!1;var l=n||u,i=l.every(function(e){var r=e in t;return!r&&e==="finally"?e in t.prototype:r});return i&&(i=(function(){var e;return new Promise(function(r){e=r}),typeof e=="function"})()),i}function f(n){return s(n)?a.resolved:o.use("promise")}return{test:s,get:f}})(__jsRegistry.q, __jsRegistry.n)||window);
__jsRegistry.af = __globalRegistry["fDfeuPQ"] || (__globalRegistry["fDfeuPQ"] = (function(R,I,r){function E(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}var e=I.isFunction,i="string",o=!1,a=Object.defineProperty({},"capture",{get:function(){return o=!0}});window.addEventListener("resize",function(){},a),window.removeEventListener("resize",function(){},a);var u="₽",c="￾";function O(){var t=document.createElement("canvas");if(t){var P=t.getContext("2d");return P.measureText(u).width!==P.measureText(c).width}}var s="performance"in window&&window.PerformanceTiming,n="performance"in window&&e(performance.getEntriesByType),A=n&&e(performance.measure);function d(){return E(document.visibilityState)===i?"visibilityState":E(document.webkitVisibilityState)===i?"webkitVisibilityState":void 0}var S="matchMedia"in window,m="visualViewport"in window,_=r.test(["resolve","reject"]);return R.features={PROMISE_BASIC:_,PROMISE_FULL:_&&r.test(),OBJECT_CREATE:e(Object.create),EVENT_OPTS:o,RUR_SYM_UNICODE:O(),RANGE:e(document.createRange),FIELD_VALIDITY:HTMLInputElement.prototype.hasOwnProperty("checkValidity"),DEDICATED_WORKER:e(window.Worker),BEACON_API:e(navigator.sendBeacon),IDLE_CALLBACK:e(window.requestIdleCallback),PERFORMANCE_LEVEL1_API:s,PERFORMANCE_LEVEL2_API:n,PERFORMANCE_LEVEL2_MEASURE_API:A,MEDIA_QUERY_LIST_API:S,PERFORMANCE_OBSERVER:n&&e(window.PerformanceObserver),PERFORMANCE_HIRES_TIMESTAMP:s&&e(performance.now),VISIBILITY_PROPERTY_KEY:d(),WEAK_MAP:e(window.WeakMap),VISUAL_VIEWPORT_API:m}})(__jsRegistry.c, __jsRegistry.d, __jsRegistry.ae)||window);
__jsRegistry.ag = __globalRegistry["EkrsU3A"] || (__globalRegistry["EkrsU3A"] = (function(l){var a={};Object.defineProperty(a,"EventListenerStore",{enumerable:!0,get:function(){return u}});var u=(function(){function v(o){this.element=o,this.store={}}var i=v.prototype;return i.add=function(t,r,e){return this.element.addEventListener(t,r,l.EVENT_OPTS?e:typeof e=="boolean"?!1:e.capture),this.store[t]={handler:r,options:e},this},i.remove=function(t){var r=this.store,e=r[t],n=e.handler,s=e.options;return n!=null&&(this.element.removeEventListener(t,n,s),delete r[t]),this},i.removeAll=function(){var t=this.store,r=this.element,e;for(e in t)if(t.hasOwnProperty(e)){var n=t[e],s=n.handler,f=n.options;r.removeEventListener(e,s,f),delete t[e]}return this},v})();return a})(__jsRegistry.af)||window);
__jsRegistry.ah = __globalRegistry["evIYUUw"] || (__globalRegistry["evIYUUw"] = (function(){var e={};Object.defineProperty(e,"emptyFunction",{enumerable:!0,get:function(){return n}});var n=function(){};return e})()||window);
__jsRegistry.ai = __globalRegistry["pUR9NiQ"] || (__globalRegistry["pUR9NiQ"] = (function(w,d){var m={};function h(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}h(m,{get addAllPointerListeners(){return L},get addPointerListener(){return E},get getFirstPointerX(){return A},get getFirstPointerY(){return H},get normalizeEventType(){return D},get removeAllPointerListeners(){return F}});var y=100;function c(e,t,r,i,o){t===void 0&&(t=d.emptyFunction),r===void 0&&(r=d.emptyFunction),i===void 0&&(i=d.emptyFunction),o===void 0&&(o=!1);var s=!1,p=Date.now();return new w.EventListenerStore(e).add("touchstart",a(P),o).add("mousedown",f(P),o).add("touchmove",a(g),o).add("mousemove",f(g),o).add("touchend",a(v),o).add("mouseup",f(v),o).add("touchcancel",a(v),o);function a(n){return function(u){n(u),p=Date.now()}}function f(n){return function(u){if(!(u.button>0)){var O=Date.now()-p;O>y&&n(u)}}}function P(n){s=!0,l(t,n)}function g(n){s&&l(r,n)}function v(n){s&&(s=!1,l(i,n))}function l(n,u){typeof n=="function"?n.call(e,u):n.handleEvent(u)}}function E(e,t,r,i){switch(t){case"pointerdown":return c(e,r,void 0,void 0,i);case"pointermove":return c(e,void 0,r,void 0,i);case"pointerup":return c(e,void 0,void 0,r,i)}}function L(e,t,r){return c(e,t,t,t,r)}function F(e){return e.removeAll()}function D(e){var t=e.type;switch(t){case"touchstart":case"mousedown":case"pointerdown":return"pointerdown";case"touchmove":case"mousemove":case"pointermove":return"pointermove";case"touchend":case"touchcancel":case"mouseup":case"pointerup":return"pointerup"}return t}function A(e){return"clientX"in e?e.clientX:e.touches[0].clientX}function H(e){return"clientY"in e?e.clientY:e.touches[0].clientY}return m})(__jsRegistry.ag, __jsRegistry.ah)||window);
__jsRegistry.aj = __globalRegistry["eZbnNRg"] || (__globalRegistry["eZbnNRg"] = (function(){function n(t){return t.clientX!==void 0?t:((t.touches&&t.touches.length?t.touches:null)||t.changedTouches||[{clientX:0,clientY:0}])[0]}function r(t){return{x:t.clientX,y:t.clientY,pageX:t.pageX,pageY:t.pageY}}function o(t){if(t.clientX)return[r(t)];var e=t.touches;(!e||!e.length)&&(e=t.changedTouches);var c=[];if(e)for(var u=0,f=e.length;u<f;u++)c[u]=r(e[u]);return c}var i={touchX:function(e){return n(e).clientX},touchY:function(e){return n(e).clientY},firstTouch:function(e){return r(n(e))},firstTouchRaw:n,touches:o,isDefaultPrevented:function(e){if("defaultPrevented"in e)return e.defaultPrevented;if("returnValue"in e)return e.returnValue===!1;if("getPreventDefault"in e)return e.getPreventDefault()}};return window.OK.eventNormalizationUtils=i,i})()||window);
__jsRegistry.ak = __globalRegistry["p5v5Bpg"] || (__globalRegistry["p5v5Bpg"] = (function(){var i=navigator.userAgent,r={},p=[],d={winphone:v,chrome:function(){return i.indexOf("Chrome")!==-1},android:m(function(){var n=i.match(/Android\s([0-9\.]*)/),o=n?n[1]:!1;return o&&(r.androidVersion={number:parseFloat(o),string:o}),n&&(r.androidDevice={isStockVersion:!r.chrome&&i.indexOf("UCBrowser")<0}),n!=null}),iOS:m(function(){var n=/iPhone|iPad|iPod/g.test(i);if(n){var o=i.match(/OS\s+(\d{1,2}).(\d)/);r.iOSVersion=o?o[1]+"."+o[2]:0,r.isIPad=i.indexOf("iPad")!==-1,r.isIPhone=i.indexOf("iPhone")!==-1,r.isIPod=i.indexOf("iPod")!==-1;var t=window.screen,f=window.devicePixelRatio||1,e=t.width*f,a=t.height*f;(r.iPhoneXSeries=Math.min(a,e)===1125&&Math.max(a,e)===2436||Math.min(a,e)===1242&&Math.max(a,e)===2688||Math.min(a,e)===828&&Math.max(a,e)===1792)&&__js_temp_htmlTag.classList.add("__iphonex")}return n}),firefox:function(){return/Firefox\/\d+\./.test(i)},ie:function(){return i.indexOf("Trident")!==-1},operamini:function(){return window.operamini},yandexBrowser:function(){return i.indexOf("YaBrowser")!==-1},okApp:function(){var o=i.match(/OK(iOS|Android)\/([0-9.]+).*(\bO[k|K]App\b)/);if(o){var t=r.OKAppInfo={};t.platform=o[1];var f=o[2];t.versionString=f;var e=f.split("."),a=[];t.version=a;for(var s=0,O=e.length;s<O;s++)a.push(Number(e[s]));return!0}else if(/OK(iOS|Android).*(\bO[k|K]App\b)/.test(i))return r.OKAppInfo={},!0;return!1},desktop:function(){return!r.android&&!r.iOS&&!r.winphone&&i.indexOf("Mobile")===-1}};function v(){var n=i.match(/(Windows Phone)\s+(?:OS\s+)?(\d+(?:\.\d)?)?/i);return n&&(r.winphoneVersion=n[2]),n!=null}function m(n){return function(){return r.winphone?!1:n()}}function l(n,o){if(n){if(o)for(var t=0,f=o.length;t<f;t++){var e=n[t]||0,a=o[t];if(e>a)return!0;if(e<a)return!1}return!0}return!1}for(var u in d)if(d.hasOwnProperty(u)){var h=d[u]();r[u]=h,h&&p.push(u)}return r.name=p.join(",")||"unknown",r.supportVersion=l,r})()||window);
__jsRegistry.al = __globalRegistry["bc8tbaw"] || (__globalRegistry["bc8tbaw"] = (function(){var e={};function u(c,t){for(var r in t)Object.defineProperty(c,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}u(e,{get TOUCH_EVENTS(){return n},get UI_EVENTS_MAPPING(){return o}});var o={click:"tap",pointerdown:"touchStart",pointermove:"touchMove",pointerup:"touchEnd",keyup:"keyUp",keydown:"keyDown",change:"change",input:"input",focus:"focus",blur:"blur",mousewheel:"wheel",wheel:"wheel"},n={tap:!0,touchStart:!0,touchMove:!0,touchEnd:!0,wheel:!0};return e})()||window);
__jsRegistry.am = __globalRegistry["bNXpVIA"] || (__globalRegistry["bNXpVIA"] = (function(k,E,ce,A,fe,H,R){var g={},Y=E.create(),W=E.create(),N=E.create(),U=E.create(),z=E.create(),P,S,V,G=0,q=H.androidVersion&&H.androidVersion.number<4.4,y=null,b={target:null,model:null,behavior:null,view:null},w={target:null,clientX:0,clientY:0},c={startX:0,startY:0,x:0,y:0},O,T=0,K=0,D,L,M=!0,Q=window.okHead,de=!Q||Q.jsReliable,he=R.UI_EVENTS_MAPPING,Z=1200,$="data-view-level",J=".view",m=[];function we(e,t,r){var n=e.okData&&e.okData[t];if(!n){var a=null;r&&(a=e.getAttribute("data-model")),(!r||!a)&&(a=e.getAttribute("data-model-"+t)),a&&(n=JSON.parse(a),e.okData=e.okData||{},e.okData[t]=n)}return n}function ge(e){var t=ee(e);return t&&t.defaultBehavior}function ee(e){return e&&(e.okBehaviors||C(e))}function te(e,t){e.forEach(function(r){r.okBehavior=t.defaultBehavior,r.okBehaviors=t})}function pe(e,t,r){for(var n=[],a={list:n},o=0,s=t.length;o<s;o++){var i=t[o];if(!(i in a)){var v=we(e,i,o==0);k.INSTANCE.setAdditionalInfo(i,"constructor");var u=new g[i](v,e);k.INSTANCE.clearInfo(),a[i]=u,n.push(u),o==0&&(e.okBehavior=u,a.defaultView=i,a.defaultBehavior=u),u[J]=i,u.companions=a,b.view=i,b.target=e,b.model=v,b.behavior=u,Y.trigger(b)}}e.okBehaviors=a,te(r,a);for(var d=0;d<n.length;d++){var l=n[d];l.postConstruct&&l.postConstruct()}return a}function re(e){var t=e.getAttribute("data-view")||e.okView;return t?t.split(/\s+/gi,20).filter(function(r){return r.length>0}):null}function x(e){var t=re(e);if(t){for(var r=0,n=t.length;r<n;r++)if(!g[t[r]])return m}return t}function Ee(e){var t=e.getAttribute("data-view-level-selector");if(t){var r=document.querySelector(t);if(r)return r}return null}function C(e){for(var t=[],r,n=null,a=null;e;){var o=e.okBehaviors;if(o&&a&&!(a in o)&&(o=null),o)te(t,o),r=o;else{if(a||(t.push(e),a=e.getAttribute($)),n=Ee(e),n){e=n;continue}var s=x(e);s&&(!a||s.indexOf(a)!=-1)&&(s===m?t=[]:r=pe(e,s,t))}if(r)return r;e=e.parentElement}return null}function be(e){var t=null,r=e.getAttribute("data-func");if(r){var n,a=ee(e);if(a){r.indexOf(" ")===-1?n=[r]:n=r.split(/\s+/g,20),t=[];for(var o=0,s=n.length;o<s;o++){var i=n[o];if(i){var v,u,d=i.indexOf(".");d!==-1?(v=i.substring(0,d),i=i.substring(d+1),u=a[v]):(v=a.defaultView,u=a.defaultBehavior);var l=u&&u[i];if(l){var h=e.getAttribute("data-func-"+v+"-"+i+"-arg");if(h)try{h=JSON.parse(h)}catch(p){}t.push({behavior:u,handlers:l,arg:h,name:i})}}}t.length===0&&(t=null)}}else t=G;return t}function F(e){P=null,V=0,S=e}function _(e){(e!==P||V<S)&&e.cancelable&&(ce.preventDefault(e),e.stopPropagation())}function f(e){var t=he[A.normalizeEventType(e)];B(e,t)}function Te(e){var t=Date.now()-Z;T<t?(T=Date.now(),B(e,"longTap")):T>t&&(F(0),_(e))}function B(e,t){var r=M;M=!0;var n=y||e.target,a=n,o,s,i=null,v=!1;if(r&&t in R.TOUCH_EVENTS){var u=fe.firstTouchRaw(e);w.target=a,o=u.clientX,w.clientX=o,s=u.clientY,w.clientY=s}switch(t){case"touchStart":r&&(W.trigger(w),c.startX=o,c.startY=s,c.x=0,c.y=0),O=null,v=!0;break;case"touchMove":r&&(N.trigger(w),c.x=o-c.startX,c.y=s-c.startY);break;case"touchEnd":r&&(U.trigger(w),L&&(F(0),_(e),i=function(){K=Date.now()})),L=!1,ae(),y=null;break;case"tap":if(e.type==="click"&&Date.now()-K<48){e.preventDefault();return}r&&z.trigger(w);var d=O;if(O=null,d&&a!==d)return;break}for(var l,h,p,oe;!l&&a;){if(oe){var le=a.getAttribute($),j;do a=a.parentElement,j=a&&x(a);while(le&&(!j||j.indexOf(le)===-1))}a&&(l=a.okFuncs,l==null&&(l=be(a),a.okFuncs=l),l==G&&(l=null)),oe=!0}if(l){F(l.length);for(var ue=!1,se=!1,X=0;X<l.length;X++){var I=l[X];h=I.behavior;var ve=I.handlers;p=ve[t],v&&(p&&q&&(O=n),!se&&ve.longTap&&(se=!0,De(e))),p?(k.INSTANCE.setAdditionalInfo(h[J],I.name),p.call(h,e,a,I.arg),k.INSTANCE.clearInfo(),ue=!0,v&&p.captureTarget&&(y=a)):S--}ue&&_(e),i&&(i(),i=null)}}function De(e){ae(),D=setTimeout(function(){D=-1,Math.abs(c.x)<20&&Math.abs(c.y)<20&&T<Date.now()-Z&&(T=Date.now(),L=!0,B(e,"longTap"))},500)}function ae(){D!==-1&&(clearTimeout(D),D=-1)}function ke(){if(de){var e=__js_temp_htmlTag;e.addEventListener("click",f),e.addEventListener("contextmenu",Te),window.addEventListener("keyup",f),window.addEventListener("keydown",f),e.addEventListener("change",f),e.addEventListener("focus",f,!0),e.addEventListener("blur",f,!0),e.addEventListener("input",f),A.addAllPointerListeners(e,f),e.addEventListener("onwheel"in e?"wheel":"mousewheel",f)}}ke();function ne(e){e.stopPropagation(),f(e)}function ie(e){M=!1,ne(e)}return OK.BehaviorFactory={register:function(t,r){g[t]=r},getOrMakeBehavior:ge,getFuncByName:function(t,r){var n=g[t];if(n)return n[r]||n.prototype[r]},resolveAll:C,resolve:function(t,r){var n=C(t);return n&&n[r||"defaultBehavior"]},touchStartPreview:W,touchMovePreview:N,touchEndPreview:U,tapPreview:z,behaviorCreated:Y,handle:function(t,r){return r[t]=r,r},allowDefault:function(t){P=t,V++},forbidScroll:function(t,r){var n=t[r]||(t[r]={});n.touchMove=n.wheel=function(){}},listenPreventable:function(t){q||A.addAllPointerListeners(t,ne)},listenCritical:function(t){A.addAllPointerListeners(t,ie),t.addEventListener("click",ie)},exists:function(t){return!!g[t]},getBehaviorIfExist:function(t,r){var n=t.okBehaviors;return n&&n[r]},isInstant:function(t){var r=x(t);if(r===m)return!1;for(var n=0;n<r.length;n++){var a=g[r[n]];if(a&&a.isInstant)return!0}return!1},callFunc:function(t,r){B({type:r,target:t},"init")},parseViewNames:re}})(__jsRegistry.f, __jsRegistry.u, __jsRegistry.s, __jsRegistry.ai, __jsRegistry.aj, __jsRegistry.ak, __jsRegistry.al)||window);
__jsRegistry.an = __globalRegistry["dAScy1A"] || (__globalRegistry["dAScy1A"] = (function(i,o,p,v){var a,u=i.create(),d=i.create(),c=i.create(),l=i.create(),s;window.XMLHttpRequest&&v.addClass(__js_temp_htmlTag,"ajax-on");function m(t,e){}o.register("doc",m);function f(t,e){var n=null;return t&&(a&&(n=a.handleSubmit(e||t)),(!n||!n.handled)&&t.submit()),n}function r(t){return function(e){o.allowDefault(e),t.trigger(e)}}s=m.prototype={onTap:function(e){o.allowDefault(e),!p.handleClick(e)&&a&&a.handleClick(e)},any:{tap:function(e){this.onTap(e)},touchStart:r(d),touchMove:r(c),touchEnd:r(l),keyUp:function(e){e.key==="Escape"||e.keyCode===27?u.trigger(e):o.allowDefault(e)}},autoSubmit:{change:function(e){var n=e.target;f(n.form,n)}}};function g(t,e){return s[t]=e,h}var h={setNavigation:function(e){a=e},keyPressed:{escape:u},submitForm:f,addFuncHandler:g,onTap:function(e){o.getOrMakeBehavior(__js_temp_htmlTag).onTap(e)},lowPriority:{touchStart:d,touchMove:c,touchEnd:l}};return h})(__jsRegistry.u, __jsRegistry.am, __jsRegistry.z, __jsRegistry.s)||window);
__jsRegistry.ao = __globalRegistry["tFQn7A"] || (__globalRegistry["tFQn7A"] = (function(t){var i=(function(){var n=__js_temp_htmlTag.style;return"webkitTransition"in n?"webkitTransitionEnd":"MozTransition"in n||"transition"in n?"transitionend":"OTransition"in n?"oTransitionEnd":null})();return t.storeFields({transitionEndEvent:i}),i})(__jsRegistry.c)||window);
__jsRegistry.ap = __globalRegistry["cSkJoQg"] || (__globalRegistry["cSkJoQg"] = (function(){var C=0;function f(r,l){var e=this;e._callbacks=[],e._fn=r,e._onRemoveCallback=l||null,e._wrappedFunctionContext=null,e.processingCallbacks=v.bind(e),e.wrappedCall=null}function v(){for(var r=this,l=r._callbacks,e=l.length;e--;){var a=l.shift();a.args?a.fn.apply(a.ctx,a.args):a.fn.call(a.ctx)}}function d(r,l,e,a){var n={fn:l,args:a||null,ctx:e||null,id:null};return r._callbacks.push(n),n}f.prototype={callCallback:function(l,e,a){var n=this,t,o,c,u=2,i,p;if(typeof l=="function"?(i=null,p=l,u=1):(i=l,p=e),arguments.length>u)for(o=arguments.length,c=[],t=u;t<o;t+=1)c.push(arguments[t]);var b=d(n,p,i,c),s;return n._wrappedFunctionContext?s=n._fn.call(n._wrappedFunctionContext,n.processingCallbacks):s=n._fn(n.processingCallbacks),s===void 0&&(s=C--),b.id=s,s},setSupplierContext:function(l){var e=this;return e._wrappedFunctionContext=l,e},removeCallback:function(l){for(var e=this,a=e._callbacks,n=0,t=a.length;n<t;n+=1)a[n].id===l&&(a.splice(n,1),n-=1,t-=1);return e._onRemoveCallback&&e._onRemoveCallback(l),e},getCallCallbacksArgumentsProvider:function(){var l=this;return l.wrappedCall||(l.wrappedCall=g.bind(l)),l.wrappedCall}};function g(r,l,e){return this.callCallback.apply(this,arguments)}return{create:function(l,e){return new f(l,e)}}})()||window);
__jsRegistry.aq = __globalRegistry["aSQOUbQ"] || (__globalRegistry["aSQOUbQ"] = (function(r){var o=typeof window.requestAnimationFrame=="function",i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(n){return window.setTimeout(n,15)},t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(n){window.clearTimeout(n)},a=r.create(i).setSupplierContext(window);return{request:a.getCallCallbacksArgumentsProvider(),run:function(e){return i.call(window,e)},cancel:function(e){a.removeCallback(e),t.call(window,e)},stop:function(e){t.call(window,e)},isNativeRAFSupported:o}})(__jsRegistry.ap)||window);
__jsRegistry.ar = __globalRegistry["lfEjqEA"] || (__globalRegistry["lfEjqEA"] = (function(e){return{init:e.create(),updated:e.create(),cancelled:e.create(),returnToSearch:e.create(),queryChange:e.create(),layoutChanged:e.create(),searchConfiguration:{}}})(__jsRegistry.u)||window);
__jsRegistry.as = __globalRegistry["sCNXRig"] || (__globalRegistry["sCNXRig"] = (function(e){return{opening:e.create(),open:e.create(),closed:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.at = __globalRegistry["srbkIYw"] || (__globalRegistry["srbkIYw"] = (function(e){return e.create({inited:!1,configured:!1,enabled:!1,active:!1,asColumn:!1,isShowedInViewport:!0})})(__jsRegistry.ab)||window);
__jsRegistry.au = __globalRegistry["tTkx9Vg"] || (__globalRegistry["tTkx9Vg"] = (function(){var i={};function s(r,n){for(var t in n)Object.defineProperty(r,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(n,t).get})}s(i,{get transform(){return c},get transition(){return v}});function f(r){var n=__js_temp_htmlTag.style,t=["webkit"];if(r in n)return r;var o=r.charAt(0).toUpperCase()+r.substr(1);if(t.length===1){var u=t[0]+o;if(u in n)return u}else for(var e=0;e<t.length;e++){var a=t[e]+o;if(a in n)return a}return r}var c=f("transform"),v=f("transition");return i})()||window);
__jsRegistry.av = __globalRegistry["tn0yWTQ"] || (__globalRegistry["tn0yWTQ"] = (function(A){var R=A.transform,n=")",f="translate(",c="translateX(",_="translateY(",E=f+"0, 0"+n,N="translate3d(",S=N+"0, 0, 0"+n,T=", ",d="scale(",h="rotate(",u="";function i(){this.result=u}function l(e,t){return e?e.toFixed(t)+"px":"0"}function a(e,t){return e.result+=e.result===u?t:" "+t,e}return i.prototype={translateX:function(t,r){return a(this,c+t+(r!=null?r:"")+n),this},translateY:function(t,r){return a(this,_+t+(r!=null?r:"")+n),this},translate:function(t,r){var s=this;return arguments.length===0?a(s,E):a(s,f+l(t)+T+l(r)+n),s},translate3d:function(t,r,s){var o=this;return t===void 0?a(o,S):a(o,N+l(t)+T+l(r)+T+l(s)+n),o},scale:function(t){var r=this;return typeof t=="number"&&a(r,d+(t%1===0?t:t.toFixed(3))+n),r},rotate:function(t,r){var s=this;return typeof t=="number"&&a(s,h+t+(r!=null?r:"")+n),s},getResult:function(){return this.result},clean:function(){var t=this;return t.result=u,t},applyTo:function(t){var r=this;return t.style[R]=r.getResult(),r}},OK.TransformRuleBuilder={TransformRuleBuilder:i,create:function(){return new i}}})(__jsRegistry.au)||window);
__jsRegistry.aw = __globalRegistry["tHdjjgg"] || (__globalRegistry["tHdjjgg"] = (function(m,l,u){var i=m.transform,f,n,T=/-?\d+\.?\d*/g;return f={create:function(){return l.create()},start:function(){return n?n.clean():n=l.create(),n},empty:function(){return this.start().translate3d()},moveAndScale:function(t,r,s,o){var a=f.start();u.ie?a.translate(r,s):a.translate3d(r,s),a.scale(o).applyTo(t)},setStyle:function(t,r){t.style[i]=r||""},getTransformMatrix:function(t){var r=t[i];return r&&r.match(T)},getTransformStyleTranslateX:function(t){var r=this.getTransformMatrix(t);return r&&r.length>=6?r[4]:0},getTransformStyleTranslateY:function(t){var r=this.getTransformMatrix(t);return r&&r.length>=6?r[5]:0},getTransformStyleAngleDegrees:function(t){var r=this.getTransformMatrix(t);if(!r||r.length<6)return 0;var s=r[0],o=r[1],a=Math.round(Math.atan2(o,s)*(180/Math.PI));return a<0?a+360:a}}})(__jsRegistry.au, __jsRegistry.av, __jsRegistry.ak)||window);
__jsRegistry.ax = __globalRegistry["pDEtI1A"] || (__globalRegistry["pDEtI1A"] = (function(u,p,f){var e=[],r,a,c={id:"default",style:{height:"",overflow:""}};function s(){return r||(r=document.querySelector(".portal.wrapper"),r&&(a=r.style)),r}function d(){return e.length?e[e.length-1]:c}function o(){s()&&p.copy(d().style,a)}function h(){e.length&&(e.length=0,o())}f.rendering.attach(h);function n(i,l){u.switchClass(document.body,l,i)}return{unlock:n.bind(0,"__under-layer",!1),lock:n.bind(0,"__under-layer",!0),content:{show:n.bind(0,"__under-layer-only-content",!1),hide:n.bind(0,"__under-layer-only-content",!0)},height:{override:function(l,y,v){var t=d();t.id!==l&&(t={id:l,style:{}},e.push(t)),t.style.height=y,t.style.overflow=v,o()},revert:function(){e.length&&e.pop(),o()}},getWrapper:function(){return s()}}})(__jsRegistry.s, __jsRegistry.aa, __jsRegistry.w)||window);
__jsRegistry.ay = __globalRegistry["soifKuQ"] || (__globalRegistry["soifKuQ"] = (function(i){var a,r=400;function g(e,t){var n=(a||new Date).getTime()+r,o=new Date().getTime()+r;o=Math.max(o,n),setTimeout(function(){logClientEvent(e,t)},o-new Date().getTime()),a=new Date(n)}function u(e){e||(e=document.querySelector("[data-logloc]"));var t;return i.findParent(e,function(n){return t=n.getAttribute("data-logloc")}),t}return{log:g,getLogLoc:u}})(__jsRegistry.t)||window);
__jsRegistry.az = __globalRegistry["s4bYXpw"] || (__globalRegistry["s4bYXpw"] = (function(q,s,h,p,_,I,g,o,V,U,S,u,b,x,z){var T="sidebarOverlay",D="__sidebar-active",v="__sidebar-animated",C="__column",L="__showed",Y="head",M="the-sidebar",G=".l-sidebar_cnt",H="__hide-movetop",d=!1,f=!1,X=20,A,n,r,m,R,E,w,j={options:null,sidebar:null};function W(){A=s.hasClass(__js_temp_htmlTag,"messaging")}W();function B(t){var a=this;return n=this,a._isOpen=!1,a._isOpenAnimated=!1,a.sidebar=t,a.sidebarContent=t.querySelector(G),a._currentPCLeftMargin=0,a.touchY=0,o.synced("enabled",a.enable,a).onChanged("asColumn",Q,a),d&&f&&u.start().translate3d(-(a.sidebarContent.offsetWidth+F())).applyTo(t),a}B.prototype={isOpen:function(){return this._isOpen},handleEvent:function(a){var e=this;switch(a.type){case p:a.target===e.sidebar&&(s.removeClass(r,v),e._isOpenAnimated||O(e),e.isOpen()&&P(e));break}},open:function(a){var e=this,l,i;if(!e.isOpen()){var c=e.sidebarContent,y=f&&d&&!a;i=F(),i<0&&(i=0),e._currentPCLeftMargin=i,y&&u.start().translate3d(-(c.offsetWidth+i)).applyTo(e.sidebar),!f&&!A&&(l=c.offsetHeight,b.height.override("sidebar",l+"px","hidden")),i>0&&(c.style.paddingLeft=i+"px"),g.opening.trigger(),o.set("active",!0),o.get("asColumn")&&s.removeClass(e.sidebar,C),N(e),y?(e._isOpenAnimated=!0,_.request(Z,e)):(N(e),P(e)),e._isOpen=!0}return e},close:function(a){var e=this;return e.isOpen()&&(!f&&!A&&b.height.revert(),f&&d&&!a?(e._isOpenAnimated=!1,u.empty(),_.run(function(){K(e)})):O(e),e._isOpen=!1),e},enable:function(a){var e=this,l=e.sidebar;return a?d&&l.addEventListener(p,e,!1):(e.isOpen()&&e.close(!0),d&&l.removeEventListener(p,e,!1)),e},getOffsetHeight:function(){return this.sidebar.offsetHeight}};function F(){return(r.offsetWidth-(R.offsetWidth||E.clientWidth))/2}function Z(t){_.request(J,t)}function J(t){s.addClass(r,v),u.empty().applyTo(t.sidebar)}function K(t){s.addClass(r,v),u.start().translate3d(-(t.sidebarContent.offsetWidth+t._currentPCLeftMargin+X)).applyTo(t.sidebar)}function Q(t){s.switchClass(this.sidebar,t,C)}function P(t){s.addClass(t.sidebar,L),g.open.trigger(t)}function N(t){s.addClass(r,D),s.addClass(r,H),t.sidebarContent.scrollTop=0,s.hasClass(__js_temp_htmlTag,"messaging")&&window.scrollTo(0,0)}function O(t){s.removeClass(t.sidebar,L),s.removeClass(r,D),s.removeClass(r,H),s.removeClass(r,v),t.sidebarContent.style.paddingLeft="",o.set("active",!1),o.get("asColumn")&&s.addClass(t.sidebar,C),g.closed.trigger()}function $(t){var a,e=0;function l(){var i=document.getElementById(M);if(i){var c=function(){a.close(!0)};E=__js_temp_htmlTag,r=document.body,R=document.getElementById(Y)||E,t.isSwipeEnabled,d=t.isAnimateEnabled||!1,f=t.isFixedView||!1,w=b.getWrapper(),m=document.createElement("div"),m.className="l-sidebar_c_overlay",m.setAttribute("data-view",T),m.setAttribute("data-func","all"),w.appendChild(m),o.set("configured",!0),a=new B(i),I.init.attach(c),I.returnToSearch.attach(c),h.keyPressed.escape.attach(a.close,a),S.navigating.attach(function(){a.close(!1)}),S.rendering.attach(function(){O(a)}),S.navigated.attach(W),j.options=t,j.sidebar=a,o.set("inited",!0)}else++e<11&&setTimeout(l,300)}l()}function k(){}return k.prototype={all:{touchStart:function(a){var e=n&&n.swipeInstance;e&&e.touchStart(a)},touchEnd:function(){n&&n.close()}}},x.register(T,k),h.addFuncHandler("openSidebar",{tap:function(){n&&o.get("enabled")&&n.open()}}),h.addFuncHandler("toggleSidebar",{tap:function(){n&&o.get("enabled")&&(n._isOpen?n.close():n.open())}}),h.addFuncHandler("closeProfileButton",{tap:function(){var a=z.getLogLoc(),e="/dk?bk=UserCloseProfileSwitch";e+="&st.cmd=userCloseProfileSwitchState",e+="&st.rts="+a,e+="&st.clrq=true",window.location.href=e}}),q.initializeSidebar=$,j})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.an, __jsRegistry.ao, __jsRegistry.aq, __jsRegistry.ar, __jsRegistry.as, __jsRegistry.at, __jsRegistry.t, __jsRegistry.ak, __jsRegistry.w, __jsRegistry.aw, __jsRegistry.ax, __jsRegistry.am, __jsRegistry.ay)||window);
__jsRegistry.ba = __globalRegistry["tkjLYA"] || (__globalRegistry["tkjLYA"] = (function(){var i={};Object.defineProperty(i,"throttle",{enumerable:!0,get:function(){return f}});function f(l,s){var r=!1,n=!1,e;return function o(){for(var v=this,u=arguments.length,a=new Array(u),t=0;t<u;t++)a[t]=arguments[t];r?(e=a,n=!0):(r=!0,n=!1,l.apply(this,a),setTimeout(function(){r=!1,n&&e&&(o.apply(v,e),e=void 0)},s))}}return i})()||window);
__jsRegistry.bb = __globalRegistry["t06j1LA"] || (__globalRegistry["t06j1LA"] = (function(e){return e.throttle})(__jsRegistry.ba)||window);
__jsRegistry.bc = __globalRegistry["dZOX2ow"] || (__globalRegistry["dZOX2ow"] = (function(){return{keyboard:{closeTimeout:100}}})()||window);
__jsRegistry.bd = __globalRegistry["vz5ZtYw"] || (__globalRegistry["vz5ZtYw"] = (function(y,S,V){var a=y.create(),g=y.create(),w,j=S(W,200),D=S(R,window.okHead.scrollThrottle),f=__js_temp_htmlTag,b=document.scrollingElement,s=null,i={width:0,height:0,scrollTop:0,scrollBottom:0,lastModified:Date.now()},H=!1,B=!1,u,c,m=window.performance&&window.performance.timing;window.addEventListener("resize",j),window.addEventListener("scroll",D),document.addEventListener("blur",function(){setTimeout(function(){u(),c()},V.keyboard.closeTimeout)},!0);function R(){u(),a.trigger(d())}function E(t){w&&(clearTimeout(w),w=null),a.hasHandlers()&&a.trigger(t),g.hasHandlers()&&g.trigger(t)}function M(t,e){var o=t.width,l=t.height;w=setTimeout(function(){c();var r=d();r.width!==o||r.height!==l?E(r):e<3&&M(t,e+1)},350)}function W(){c();var t=d();E(t),M(t,0)}u=function(){u=function(){var e=window.pageYOffset||(b?b.scrollTop:document.body?document.body.scrollTop||f.scrollTop:0);i.scrollTop=e,i.scrollBottom=e+i.height,i.lastModifiedScroll=Date.now()},u(),H=m?Date.now()-m.domComplete>0:!0},c=function(){c=function(){i.width=f.clientWidth;var e=window.innerHeight;i.height=e,i.scrollBottom=i.scrollTop+e,i.lastModifiedViewport=Date.now()},c(),B=m?Date.now()-m.domComplete>0:!0};function d(t){return(t||!H)&&u(),(t||!B)&&c(),i}var n;function z(t){C(),t<8?setTimeout(function(){n&&Math.abs(Math.floor(i.scrollTop)-Math.floor(n))>10?z(t+1):n!==null&&(C(),n=null)},125):n=null}function C(){window.scrollTo(0,n)}function v(t,e,o,l){var r=t.getBoundingClientRect(),O=d(),h={width:r.width,height:r.height},T,p;return l=l||0,e&&(T=r.left,h.fitLeft=T>l,h.fitRight=T+t.offsetWidth+l<O.width),o&&(p=r.top,h.fitTop=p>l,h.fitBottom=p+t.offsetHeight+l<O.height),h}function L(t,e){t.call(e||null,d()),a.attach(t,e)}return OK.Viewport={calc:d,fit:v,fitWidth:function(e,o){return v(e,1,0,o)},fitHeight:function(e,o){return v(e,0,1,o)},changed:a,resize:g,manageSyncChanged:function(e,o,l){return e?L(o,l):a.detach(o,l),this},recordScroll:function(){var e=document.body;return{body:n||(e?e.scrollTop:0),doc:n||f.scrollTop}},resetScroll:function(e){typeof e=="number"?n=e:n=e?e.body||e.doc:0,z(0)},hasScrollTarget:function(){return n!=null},cancelScrollTarget:function(){n=null},setOverflow:function(){if(!s){var e=f.style,o=document.body.style;s={doc:e.overflow,body:o.overflow},e.overflow="hidden",o.overflow="hidden"}},resetOverflow:function(){s&&(f.style.overflow=s.doc,document.body.style.overflow=s.body,s=null)},isPortraitMode:function(){var e=(window.screen.orientation||{}).type;if(e!==void 0)return e==="portrait-secondary"||e==="portrait-primary";var o=window.orientation;return o!==void 0?o===0||o===180:window.innerHeight>window.innerWidth}}})(__jsRegistry.u, __jsRegistry.bb, __jsRegistry.bc)||window);
__jsRegistry.be = __globalRegistry["utwcflA"] || (__globalRegistry["utwcflA"] = (function(){var e={};Object.defineProperty(e,"isPwa",{enumerable:!0,get:function(){return n}});function n(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone}return e})()||window);
__jsRegistry.bf = __globalRegistry["dIqx1A"] || (__globalRegistry["dIqx1A"] = (function(h,l,f,u){var s,v=navigator.userAgent,g=v.indexOf("IEMobile")!=-1,w="orientation"in window||v.indexOf("Mobile")!=-1,r=!w,c="devicePixelRatio";function d(){var a=window.screen,o=a.width,i=a.height,e={};c in window&&(e.dpr=window[c]);var n=window.innerWidth||__js_temp_htmlTag.offsetWidth,t=window.innerHeight||__js_temp_htmlTag.offsetHeight;if(w){var j=i,m=n/t>1==o/i>1;i=m?i:o,o=m?o:j,t=Math.round(n*i/o)}e.vw=r?n:Math.min(n,t),e.vh=r?t:Math.max(n,t),e.o=r&&f.isPortraitMode()||!r&&n<t?"p":"l",e.sw=r?o:Math.min(o,i),g&&(e.dpr=e.sw/e.vw),u.isPwa()&&(e.pwa="1"),p(e)}function p(a){var o=[],i;for(var e in a)o.push(e,"^",a[e],"|");var n;if(s>0){var t=new Date;t.setTime(t.getTime()+s*1e3),n=";expires="+t.toUTCString()}else n="";i=o.join(""),i=window.encodeURIComponent(i),document.cookie=["DCAPS=",i,n,";path=/"].join("")}h.deviceCaps=function(a){s=a.age,d(),window.addEventListener("resize",d,!1),l.domLoaded.then(d)}})(__jsRegistry.c, __jsRegistry.p, __jsRegistry.bd, __jsRegistry.be)||window);
__jsRegistry.bg = __globalRegistry["pULNjqA"] || (__globalRegistry["pULNjqA"] = (function(){var u={};function s(t,f){for(var l in f)Object.defineProperty(t,l,{enumerable:!0,get:Object.getOwnPropertyDescriptor(f,l).get})}s(u,{get addListener(){return g},get isHidden(){return b},get removeListener(){return m},get visibilityChangeEventName(){return n}});var e="hidden",r="visibilitychange",a=!1;if(!(e in document)){e=null;for(var d=["webkit","moz"],i=0,c=d.length;i<c;i++){var o=d[i],v=o+"Hidden";if(v in document){e=v,o==="webkit"&&(a=!0);break}}e==null&&(r=null),a&&(r="webkit"+r)}function b(){return e!=null&&document[e]}var n=r;function g(t){return n!=null?(document.addEventListener(n,t),!0):!1}function m(t){return n!=null?(document.removeEventListener(n,t),!0):!1}return u})()||window);
__jsRegistry.bh = __globalRegistry["gtnGEyw"] || (__globalRegistry["gtnGEyw"] = (function(i,t,M,P,B){var w=window,D=w.document,V,N=[null,null,null],C=0,g,c,y,f="__loading",d="__playing",j="__fade-in",L="__fade-out",_="__video",z="__audio",v="VIDEO",W="IMG",T=1,A=!1;i.gifPlayer={play:function(e,r,p,s,I){var o=Object.assign({},p);if(e.getAttribute("data-gifsrc")){var b=JSON.parse(e.getAttribute("data-gifsrc"));Object.assign(o,b)}var u=Object.keys(o).length!==0,F=u?o.src:e.getAttribute("data-gif"),U=u?o.mp4:e.getAttribute("data-mp4"),q=u?o.webm:e.getAttribute("data-webm"),a,E,x;if(g&&U!=null||c&&q!=null){var m=t.hasClass(e.parentElement,"__live"),X=m&&e.parentElement.hasAttribute("data-audio"),S=m&&t.hasClass(e.parentElement.parentElement,"js-sticker-modal-content");if((m||P.winphone)&&Y())if(P.winphone){var O=document.getElementsByClassName(d)[0];O&&(i.gifPlayer.decreaseSize(s,O),i.gifPlayer.stop(O))}else return;return m&&(t.hasClass(e,"dsn")||(e.parentElement.style.height=e.offsetHeight+"px"),G(e.parentElement,!0)),a=D.createElement(v),i.gifPlayer.increaseSize(s,e),a.width=m?e.parentElement.offsetWidth:e.width,a.height=e.height,a.className="gif_video",r&&a.setAttribute("style",e.getAttribute("style")),m?(e.parentElement.height=e.offsetHeight,e.parentElement.hasAttribute("data-loop-count")&&(T=parseInt(e.parentElement.getAttribute("data-loop-count"))),K(a,e),P.iOS&&a.setAttribute("playsinline","")):I||J(a),a.addEventListener("playing",function(h){a.removeEventListener(h.type,arguments.callee),t.removeClass(e.parentElement,f),t.hasClass(e.parentElement,"__live")&&t.removeClass(e.parentElement,L),t.addClass(e.parentElement,d)},!1),m||a.addEventListener("click",function(h){i.gifPlayer.decreaseSize(s,e),i.gifPlayer.stop(a),h.preventDefault(),h.stopPropagation()},!1),a.addEventListener("error",function(h){a.removeEventListener(h.type,arguments.callee),e.parentElement&&(t.removeClass(e.parentElement,f),t.removeClass(e.parentElement,_),t.removeClass(e.parentElement,d),a.parentElement.removeChild(a),i.gifPlayer.decreaseSize(s,e))},!1),a.addEventListener("webkitendfullscreen",function(){m||(t.removeClass(e.parentElement,f),t.removeClass(e.parentElement,_),t.removeClass(e.parentElement,d),a.parentElement.removeChild(a),i.gifPlayer.decreaseSize(s,e))},!1),S||a.addEventListener("canplay",function(){m?a.playStarted||(logClientEvent("live.sticker.played"),a.playStarted=!0,setTimeout(function(){l(a)},500)):l(a)},!1),x=g&&U||c&&q,a.src=x,m?a.addEventListener("loadeddata",function(){(!t.hasClass(document.body,"app")||S)&&(t.removeClass(e.parentElement,f),t.addClass(e.parentElement,L),S?l(a):a.pause())},!1):a.poster=e.getAttribute("src"),e.parentElement.appendChild(a),t.addClass(e.parentElement,f),t.addClass(e.parentElement,_),a.tmpHeight=a.clientHeight,a.load(),m||l(a),X&&H(e.parentElement),a}else return i.gifPlayer.increaseSize(s,e),C=(C+1)%N.length,e.setAttribute("data-poster",e.getAttribute("data-poster")||e.getAttribute("src")),e.src=F||e.src,E=new Image,N[C]=E,E.onload=E.onerror=function(){t.addClass(e.parentElement,d),t.removeClass(e.parentElement,f)},N[C].src=F,E.complete||t.addClass(e.parentElement,f),E},touch:function(e,r,p,s,I){var o,b;(g===V||c===V)&&(/Android 2/g.test(w.navigator.userAgent)?g=c=y=!1:(o=D.createElement(v),!o||typeof o.canPlayType!="function"?g=c=y=!1:(g=o.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').length>0,c=o.canPlayType("video/webm").length>0,y=/(iPad|iPhone|iPod)/g.test(w.navigator.userAgent))));var u=t.hasClass(e.parentElement,d);return u?this.stop(e.parentElement):b=this.play(e,r,p,s,I),{element:b,isPlaying:!u}},stop:function(e){var r,p,s=!1;e.tagName==="DIV"&&(s=t.hasClass(e,"__live"),t.hasClass(e,d)&&(r=e.getElementsByTagName(v),p=e.getElementsByTagName(W).item(0),r&&r.length>0?e=r.item(0):e=p),s&=e.tagName===v),t.removeClass(e.parentElement,f),t.removeClass(e.parentElement,_),s?(t.addClass(e.parentElement,j),setTimeout(function(){e.parentElement&&(t.removeClass(e.parentElement,j),t.removeClass(e.parentElement,d),e.parentElement.removeChild(e))},300),e.pause()):(t.removeClass(e.parentElement,d),e.tagName===v?(e.pause(),e.parentElement.removeChild(e)):e.src=e.getAttribute("data-poster"))},reset:function(e){i.gifPlayer.stop(e)},increaseSize:function(e,r){e&&(r.old_width||(r.old_width=r.width,r.old_height=r.height),r.width=r.old_width*2,r.height=r.old_height*2)},decreaseSize:function(e,r){e&&r.old_width&&(r.width=r.old_width,r.height=r.old_height)},toggleAudio:function(e){e.stopPropagation();var r=e.target,p=M.findParent(r,function(s){return t.hasClass(s,"js-livesticker")});A=!A,H(p)}};function J(n){y?n.setAttribute("loop",!0):(n.setAttribute("loop",!1),n.loop=!1,n.addEventListener("ended",function(){n.currentTime=.01,l(n)}))}function Y(){return document.getElementsByClassName(d).length||document.getElementsByClassName(j).length||document.getElementsByClassName(L).length}function G(n,e){t.switchClass(n.getElementsByClassName("__first")[0],!e,"dsn"),t.switchClass(n.getElementsByClassName("__last")[0],e,"dsn")}function K(n,e){var r=e.parentElement.hasAttribute("data-loop-infinity");n.addEventListener("ended",function(){T>1||r?(T--,n.currentTime=.01,l(n)):(G(e.parentElement,!1),i.gifPlayer.stop(e.parentElement))})}function Q(){if(B.isHidden()){var n=document.querySelector(".__playing.__live");n&&i.gifPlayer.stop(n)}}function l(n){var e=n.play();e!==void 0&&e.catch(function(r){r.name==="NotAllowedError"&&!n.muted&&(n.muted=!0,l(n))})}function H(n){var e=n.querySelector("video");e&&(e.muted=!A),A?t.addClass(n,z):t.removeClass(n,z)}B.addListener(Q)})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.ak, __jsRegistry.bg)||window);
__jsRegistry.bi = __globalRegistry["airA"] || (__globalRegistry["airA"] = (function(l,c){var n={},s=__js_temp_htmlTag;function t(a){for(var e=a.target;e;)if(e.tagName=="A"&&e.className.indexOf("js-click")!==-1){n.link=e,n.event=a,c.preventDefault(a);break}else e=e.parentNode}s.addEventListener("click",t,!1),n.dispose=function(){s.removeEventListener("click",t,!1)},l.asapHandle=n})(__jsRegistry.c, __jsRegistry.s)||window);
__jsRegistry.bj = __globalRegistry["dD1FbwA"] || (__globalRegistry["dD1FbwA"] = (function(d,s,f){d.doublePostPrevention=function(l){var c=l.disableAfterSubmit,o=l.postDelay;function r(e,i){for(var t=e.getElementsByTagName("input"),u=t.length,a,n=0;n<u;n++)a=t[n],a.type=="submit"&&(a.disabled=i,s.switchClass(a,i,"__tmp-disable"))}function m(e){var i=new Date().getTime(),t=e.target;if(t){if(s.hasClass(t,"js-noprevent"))return;if(t.nodeType==3&&(t=t.parentNode),e.type=="click"){var u=t.tagName.toLowerCase();if(u!=="input"||t.type!=="submit"||(t=t.form,!t))return}var a=t.getAttribute("data-submitted");if(a&&a.length>0&&i-parseInt(a)<o){s.preventDefault(e);return}if(t.setAttribute("data-submitted",i),c){var n=function(){r(t,!1)};setTimeout(function(){r(t,!0),setTimeout(n,o),f.rendering.attachOnce(n)},10)}}}f.finished.attach(function(e){s.hasClass(e,"js-prevent-ajax-clearance")||r(e,!1)}),document.addEventListener("click",m,!1)}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.w)||window);
__jsRegistry.bk = __globalRegistry["lK2Wdw"] || (__globalRegistry["lK2Wdw"] = (function(){var e={};function o(h,r){for(var t in r)Object.defineProperty(h,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,t).get})}o(e,{get breakpoint(){return u},get iosApproxKeyboardHeight(){return p},get iosXSeriesApproxKeyboardHeight(){return s},get offsets(){return n},get smartBanner(){return i},get tablet(){return b},get toolbar(){return a},get twoColumns(){return g}});var n={normal:12},a={height:48,searchShowingScreenWidth:480},i={height:56},g={minWidth:810},p=271,s=300,u={phone:320,phablet:480},b=810;return e})()||window);
__jsRegistry.bl = __globalRegistry["aCr3dbg"] || (__globalRegistry["aCr3dbg"] = (function(){var l={};function g(r,t){for(var e in t)Object.defineProperty(r,e,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,e).get})}g(l,{get areEqual(){return v},get filterSelf(){return i},get filterToCopy(){return c},get first(){return h},get has(){return A},get htmlElementsAsArray(){return y},get isEmpty(){return p},get joinNullableArray(){return a},get merge(){return E}});var f=Array.prototype,s=f.slice;function a(r){return r.filter(Boolean).join(", ")}function i(r,t){for(var e=r.length-1;e>=0;e--)t(r[e],e)||r.splice(e,1)}function c(r,t,e){for(var u=[],n=0,m=r.length;n<m;n+=1){var o=r[n];t.call(e,o,n,r)&&u.push(o)}return u}function p(r){return!r||!r.length}function h(r,t){for(var e=0,u=r.length;e<u;e++){var n=r[e];if(t(n))return n}return null}function v(r,t){if(r==t)return!0;if(!r||!t||r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!=t[e])return!1;return!0}function A(r,t){for(var e=!1,u=0;u<r.length;u++){var n=r[u];if(t(n))return e=!0}return e}function y(r){return s.call(r)}function E(r,t){f.push.apply(r,t)}return l})()||window);
__jsRegistry.bm = __globalRegistry["snrKpaQ"] || (__globalRegistry["snrKpaQ"] = (function(e){return e.create({isToolbarSearchOn:!1,isToolbarSearchMode:!1,isSearchResultState:!1,isGlobalSearchState:!1,isContextSearchState:!1,isSearchFieldActive:!1,isGlobalSearchOn:!1,globalSearchEndpoint:"",contextSearchEndpoint:"",globalSearchQuery:"",clientGlobalSearchQuery:"",contextSearchQuery:"",globalSearchFieldId:""})})(__jsRegistry.ab)||window);
__jsRegistry.bn = __globalRegistry["sMgQSJQ"] || (__globalRegistry["sMgQSJQ"] = (function(a,t,d,F,g){var u="GlobalSearchFormField",i="ToolbarSearchFormField",f="SidebarSearchFormField",I="UserDialogsSearchFormField",h=!1,m={COMMON:0,COMPLETION:1};function s(n){c(function(e){e.setEndpoint(n)})}function c(n){var e=t.get("globalSearchFieldId")===i?l.getSearchFieldInstance(i):l.getSearchFieldInstance(u);e&&n(e)}var l={init:function(){function e(){var r=d.calc().width>=F.toolbar.searchShowingScreenWidth&&t.get("isToolbarSearchOn")&&!!document.getElementById(i);t.set("globalSearchFieldId",r?i:u),t.set("isToolbarSearchMode",r)}d.manageSyncChanged(!0,e),t.onChanged("isToolbarSearchOn",e).onChanged("globalSearchFieldId",function(r,o){if(t.get("isGlobalSearchOn")){var S=l.getSearchFieldInstance(o);S!==null&&S.deactivate(),c(function(v){v.performSearch(t.get("globalSearchQuery"),{checkBeforeSearch:!0})})}}),t.onChanged("globalSearchEndpoint",s)},initGlobalSearchFields:function(){if(!h){var e=document.getElementById(f),r=document.getElementById(I);a.getOrMakeBehavior(e),a.getOrMakeBehavior(r),c(function(){}),h=!0}},initSearchFieldFilters:function(e){var r=[];return g(document.querySelectorAll(".search-filters, .js-search-filters"),function(o){o.getAttribute("data-search-filter-for")===e&&r.push(a.getOrMakeBehavior(o))}),r.length!==0?r:null},getSearchFieldInstance:function(e){var r=document.getElementById(e);return r?a.getOrMakeBehavior(document.getElementById(e)):null},useFilterForField:function(e){var r=l.getSearchFieldInstance(e);return r?r.initialSearch(!0):null},provideQueryForGlobalSearch:function(e){return a.getOrMakeBehavior(document.getElementById(t.get("globalSearchFieldId"))).performSearch(e,{checkBeforeSearch:!0})},provideEndpointForGlobalSearch:function(e){s(e),c(function(r){r.initialSearch(!0)})},activateSearchField:function(e){var r=a.getOrMakeBehavior(document.getElementById(e));return r!==null?r.activate():null},QueryType:m};return l})(__jsRegistry.am, __jsRegistry.bm, __jsRegistry.bd, __jsRegistry.bk, __jsRegistry.k)||window);
__jsRegistry.bo = __globalRegistry["cRU0JhA"] || (__globalRegistry["cRU0JhA"] = (function(){var n;return window.CustomEvent==="function"?n=function(t,e){return new CustomEvent(t,e)}:n=function(t,e){var r=document.createEvent("Event");return r.initEvent(t,e&&e.bubbles,e&&e.cancelable),r},n})()||window);
__jsRegistry.bp = __globalRegistry["tnt542Q"] || (__globalRegistry["tnt542Q"] = (function(D,_,s,b,p,m,w,E,F,P,y,j,B){var k=w.offsets.normal,d="hidden",N="__popup-on",c="__active",g="aslnk",O="tabs_initialized",x={},u;function f(i,t){this._init(t)}_.register("tabsSwitch",f),f.isInstant=!0,f.prototype={_init:function(t){this._actionSwitcher=t,this._isFirstCalc=!0,this._isOpen=!0,this._calc(),m.attachUntilRendering(p.resize,this._calc,this)},_toggle:function(t){this._isOpen=t,s.switchClass(this._actionSwitcher,t,"__expand")},_getTogglerWidth:function(){var t=this._actionSwitcher.getElementsByClassName("tabs_toggler")[0];return t.getBoundingClientRect().width+k},_showToggler:function(t){var e=this._actionSwitcher;s.switchClass(e,t,"__js-isMultiline"),t?e.style.paddingRight=this._getTogglerWidth()+"px":e.style.padding=""},_calc:function(){var t=this._actionSwitcher,e=t.getElementsByClassName("ai"),r=t.getElementsByClassName("js-tabs-list-items-space")[0],o=r.getBoundingClientRect().width,a=o,n=!0;if(b(e,function(l){if(a-=l.getBoundingClientRect().width,a<0)return n=!1,!0}),this._isFirstCalc){this._isFirstCalc=!1;var h=!1;n||(a=o,s.hasClass(this._actionSwitcher.parentNode,"feed-exp")||(a-=this._getTogglerWidth()),b(e,function(l){if(a-=l.getBoundingClientRect().width,s.hasClass(l,g))return a<0&&(h=!0),!0})),this._toggle(h)}this._showToggler(!n)},more:{tap:function(){this._toggle(!this._isOpen)}}};function C(i,t){var e;this.tabContainer=t,this.tabContainerParent=e=t.parentNode,this.tabContainerRightX=t.getBoundingClientRect().right,this.currentWidth=t.offsetWidth,this.edgeTabIndex=1,this.isTogglerShown=null,this.isPopupOpen=!1,this.isCatsOpen=!1,this.togglerNode=t.getElementsByClassName("tabs_toggler")[0],this.togglerTab=this.togglerNode.parentNode,this.popupNode=t.getElementsByClassName("tabs_popup")[0],this.popupWrapper=this.popupNode.parentNode,this.categoriesWrapper=e.getElementsByClassName("tabs_category")[0],this.title=e.getElementsByClassName("tabs_title")[0],this.titleText=e.getElementsByClassName("title_text_main")[0],this.categoryTabText=null,this.isAdaptive=s.hasClass(e,"__adaptive"),this.isAdaptive&&(this.togglerMoreNode=this.togglerNode.querySelector(".tabs-toggler-more"),this.togglerNodeText=this.togglerNode.innerText),this._initAndUpdate()}_.register("tabsPopupSwitch",C),C.isInstant=!0,C.prototype={_initAndUpdate:function(){var t=this;this.tabContainer.classList.add("__shown"),t._initTabsAndUpdate(),t.updateTabsDOMPosition(),t._initTogglerAndUpdate(),p.resize.attach(v,t),p.changed.attach(t.closePopup,t);var e=t.clickHandler.bind(t);document.addEventListener("click",e),m.navigating.attachOnce(function(){p.changed.detach(t.closePopup,t),t.closePopup(),p.resize.detach(v,t),document.removeEventListener("click",e)}),this.tabContainer.classList.remove("__shown"),this.tabContainer.dispatchEvent(B(O))},_initTabsAndUpdate:function(){var t=P.htmlElementsAsArray(this.tabContainer.getElementsByClassName("tabs_item"));if(this.tabsArray=t,t.length){var e=t.lastIndexOf(this.togglerTab);t.splice(e,1);var r=t.length,o=t[r-1];this.isTogglerShown=o.getBoundingClientRect().right>this.tabContainerRightX;for(var a=0;a<r;a++){var n=t[a];s.hasClass(n,c)&&(this.activeTab=n)}}},openPopup:function(){this.isPopupOpen=!0,s.addClass(this.tabContainer,N),s.removeClass(this.popupWrapper,d),this._initTogglerAndUpdate()},closePopup:function(){this.isPopupOpen=!1,s.addClass(this.popupWrapper,d),s.removeClass(this.tabContainer,N),this._initTogglerAndUpdate()},makeActive:function(t){var e=this.activeTab;e&&(s.removeClass(e,c),s.removeClass(T(e),g)),this.activeTab=t,s.addClass(t,c),s.addClass(T(t),g)},_initTogglerAndUpdate:function(){var t=this._isPopupTab(this.activeTab);t?(s.switchClass(this.togglerTab,t,c),s.switchClass(this.togglerNode,t,g),this.isAdaptive&&(this.togglerMoreNode.innerHTML=this.activeTab.querySelector(".tabs_action-title").innerHTML)):this.isAdaptive&&(this.togglerMoreNode.innerHTML=this.togglerNodeText)},clickHandler:function(t){var e=t.target;!this._isPopupTab(e)&&this.isPopupOpen&&this.closePopup()},_isPopupTab:function(t){return t&&this.popupNode.contains(t)},updateTabsDOMPosition:v,more:{tap:function(){this.isPopupOpen?this.closePopup():this.openPopup()}},openCats:{tap:function(t,e){this.isCatsOpen?this.closePopup():(R(this.titleText,this.categoryTabText||(this.categoryTabText=e.textContent||e.innerText||e.childNodes[0].nodeValue)),s.removeClass(this.title,d),s.addClass(e,g),s.addClass(e.parentNode,c),s.removeClass(this.categoriesWrapper,d),this.closePopup(),this.makeActive(this.togglerTab),this.isCatsOpen=!this.isCatsOpen)}},switchFilter:{tap:function(t){t.preventDefault();var e=y.parentBySelector(t.target,".global-search-tabs .tabs_action",this.domRoot);e&&j.provideEndpointForGlobalSearch(e.getAttribute("data-endpoint"))}}};function R(i,t){i.textContent=t,i.replaceChild(document.createTextNode(t),i.firstChild)}function M(i,t,e){i.map(function(r){r._okTabs_menu=!0,r._okTabs_w||(r._okTabs_w=r.offsetWidth),t.push(r),e.appendChild(r)})}function L(i,t){return i.popupNode.contains(t.parentNode)}function v(){var i=this.tabsArray,t=this.tabContainer,e=t.getBoundingClientRect().right;this.tabContainerRightX=e-(this.isTogglerShown?this.togglerNode.offsetWidth:0);for(var r=this.popupNode,o=[],a=0;a<i.length;a++){var n=i[a];if(n.getBoundingClientRect().right>this.tabContainerRightX&&!n._okTabs_menu){M(i.slice(a,i.length),o,r);break}else if(n._okTabs_menu||L(this,n)){var h=i[a-1];if(h){var l=this.tabContainerRightX-h.getBoundingClientRect().right;if(l>n._okTabs_w)n._okTabs_menu=!1,this.activeTab===n&&(s.removeClass(this.togglerTab,c),s.removeClass(this.togglerNode,g)),t.insertBefore(T(r),this.togglerTab),o=o.splice(0,1);else{o.push(n),n._okTabs_menu=!0;break}}else break}}this.isTogglerShown=!!o.length,s.switchClass(this.togglerTab,!this.isTogglerShown,d)}function T(i){return i.firstElementChild||i.firstChild||i.children&&i.children[0]}var W=E.create({discard:function(t){var e=document.activeElement;t.root.contains(e)&&(x[t.id]=e.getBoundingClientRect().right)}});function S(i,t){this.root=t;var e=this.container=t.parentNode,r=this.id=e.id,o=e.getBoundingClientRect().right,a=t.getElementsByClassName("tabs_item __active")[0],n=a.getBoundingClientRect().right,h=0,l=a.nextElementSibling;l&&(h=l.offsetWidth),u=u||parseInt(getComputedStyle(a).marginLeft),isNaN(u)&&(u=0);var I=Math.min(o-u),A=n-I;A>0&&(e.scrollLeft+=Math.abs(A+h/2)),r&&W(this)}S.isInstant=!0,_.register("tabsScrollableSwitch",S)})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.s, __jsRegistry.k, __jsRegistry.bd, __jsRegistry.w, __jsRegistry.bk, __jsRegistry.x, __jsRegistry.m, __jsRegistry.bl, __jsRegistry.t, __jsRegistry.bn, __jsRegistry.bo)||window);
__jsRegistry.bq = __globalRegistry["hKFfvg"] || (__globalRegistry["hKFfvg"] = (function(){})(__jsRegistry.a, __jsRegistry.f, __jsRegistry.h, __jsRegistry.i, __jsRegistry.j, __jsRegistry.q, __jsRegistry.p, __jsRegistry.z, __jsRegistry.ad, __jsRegistry.az, __jsRegistry.bf, __jsRegistry.bh, __jsRegistry.bi, __jsRegistry.bj, __jsRegistry.an, __jsRegistry.bp)||window);
__jsRegistry.br = __globalRegistry["LjzRMLg"] || (__globalRegistry["LjzRMLg"] = (function(){var a={};Object.defineProperty(a,"Logger",{enumerable:!0,get:function(){return u}});var u={debug:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r]},warn:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r]},info:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r]},error:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r]}};return a})()||window);
__jsRegistry.bs = __globalRegistry["wbuPdGQ"] || (__globalRegistry["wbuPdGQ"] = (function(){var c={};function f(n,a){for(var t in a)Object.defineProperty(n,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(a,t).get})}f(c,{get NamespaceStorage(){return s},get localStorage(){return g},get sessionStorage(){return d}});function o(n,a){for(var t=0;t<a.length;t++){var e=a[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function l(n,a,t){return a&&o(n.prototype,a),n}var s=(function(){function n(t,e){this.namespace=t,this.parent=e,this._data=null,this.checkedKeys=[]}var a=n.prototype;return a.getItem=function(e){if(e in this.data)return this.data[e];if(this.checkedKeys.indexOf(e)===-1){var r=this.parent.getItem(e);if(r!=null)return this.checkedKeys.push(e),this.setItem(e,r),r}return null},a.setItem=function(e,r){this.data[e]=r,this.flush()},a.removeItem=function(e){e in this.data&&(delete this.data[e],this.flush(),this.checkedKeys.indexOf(e)!==-1&&this.parent.removeItem(e))},a.clear=function(){this._data&&(this._data=Object.create(null)),this.flush()},a.key=function(e){var r=Array.prototype.slice.call(Object.keys(this.data)),i;return(i=r[e])!=null?i:null},a.flush=function(){var e=[],r=this.data;Object.keys(r).forEach(function(i){return e.push([i,r[i]])}),this.parent.setItem(this.namespace,JSON.stringify(e))},l(n,[{key:"length",get:function(){return Object.keys(this.data).length}},{key:"data",get:function(){if(!this._data){var e=Object.create(null),r=this.parent.getItem(this.namespace);if(r)try{var i=JSON.parse(r);i.forEach(function(u){var m=u[0],v=u[1];return e[m]=v})}catch(u){}this._data=e}return this._data}}]),n})(),h="ok-mob",g=new s(h,localStorage),d=new s(h,sessionStorage);return c})()||window);
__jsRegistry.bt = __globalRegistry["rkxiB0A"] || (__globalRegistry["rkxiB0A"] = (function(){var t=(function(){var n=document.createElement("a");return n.href="/",n.href})(),r=/^(\w{1,40}\:)|((\w{1,10}\:)?[\/\\]{2})/gi;function o(n){return n.search(r)==0}return{see:function(e){return{internal:e.indexOf(t)==0,appHook:e.indexOf("/apphook/")!=-1}},abs:function(e){return o(e)?e:t+(e[0]=="/"?e.substr(1):e)},relative:function(e){return e.indexOf(t)===0?e.substr(t.length-1):e}}})()||window);
__jsRegistry.bu = __globalRegistry["iQlh52w"] || (__globalRegistry["iQlh52w"] = (function(n){function r(t){var e=function(){};e.prototype=t.prototype;var o=new e;return e.prototype=null,o}function p(t,e){return t.prototype=n.OBJECT_CREATE?Object.create(e.prototype):r(e),Object.defineProperties(t.prototype,{constructor:{writable:!0,value:t},superclass:{writable:!0,value:e}}),t}return p})(__jsRegistry.af)||window);
__jsRegistry.bv = __globalRegistry["pRsodQ"] || (__globalRegistry["pRsodQ"] = (function(){var r={};function g(e,n){for(var u in n)Object.defineProperty(e,u,{enumerable:!0,get:Object.getOwnPropertyDescriptor(n,u).get})}g(r,{get getExternalLinkToken(){return a},get getPts(){return o},get getStateId(){return i},get getStaticResourceUrl(){return s},get getUserId(){return c},get pageCtx(){return t}});var t=window.pageCtx;function i(){return t.stateId}function o(){var e=t.pts;return typeof e=="string"?t.pts=JSON.parse(e):e||{}}function a(){return t.externalLinkToken}function c(){return t.uid}function s(){return t.staticResourceUrl}return r})()||window);
__jsRegistry.bw = __globalRegistry["aGvMJ9g"] || (__globalRegistry["aGvMJ9g"] = (function(b,l,x,d,f,X,C){var T=window.navigator,p=T&&T.appVersion;if(p&&p.indexOf&&p.indexOf("MSIE 9")!=-1){var g=window.XMLHttpRequest.prototype,E=g.getResponseHeader;g.getResponseHeader=function(e){var t=E.apply(this,arguments);return t==""?null:t}}var j=l.create(),k=l.create(),m=l.create(),v="GET",H=window.okHead,R=H.xtkn;H.xtkn="";function h(e,t){(t||!e.aborted)&&(e.reject(),k.trigger(e.xhr))}function D(e){var t=e.target,r=t.okTask;if(t.readyState===4&&r&&!r.aborted){if(t.status===200){var a={xhr:t};try{j.trigger(a)}catch(i){}a.rejected?h(r):r.resolveIfNotDone(t)}else h(r);t.onreadystatechange=t.onerror=t.ontimeout=t.okTask=null}}function w(e){h(e.target.okTask)}function q(e,t,r){try{e.setRequestHeader("Content-Disposition","attachment; filename="+encodeURI(t))}catch(a){e.setRequestHeader("Content-Disposition","attachment; filename="+encodeURI(r))}}function A(){var e=this.postData,t=this.postFormData,r=this.xhr,a=f.see(f.abs(this.url)).internal;this.useXHRHeader&&o(r,"X-Requested-With","XMLHttpRequest"),C.getUserId()&&a&&o(r,"X-Logged","1"),e&&o(r,"Content-Type",this.contentType||"application/x-www-form-urlencoded"),this.xhrWithCredentials&&(r.withCredentials=!0),m.trigger(this);var i;if(this.postAttachFile){i=this.postAttachFile,q(r,this.postAttachFile.name,"image.jpg"),r.setRequestHeader("Content-Type","application/x-binary; charset=x-user-defined");var n=i.size,c="bytes 0-"+(n-1)+"/"+n;r.setRequestHeader("Content-Range",c)}else i=e||t;return this.withXtkn&&R&&!this.xhrExternal&&a&&o(r,"X-XTKN",R),r.send(i),this}function o(e,t,r){e.setRequestHeader(t,r)}function F(e,t){return o(this.xhr,e,t),this}function I(e){return this.postData=e,this}function S(e){return this.data(JSON.stringify(e)),this.contentType="application/json;charset=UTF-8",this}function O(e){return this.xhr.responseType=e,this}function U(e){return this.postAttachFile=e,this}function W(e){return this.postFormData=e,this}function G(){return this.xhrWithCredentials=!0,this}function M(){return this.xhrExternal=!0,this}function N(){return this.xhrExternal}function L(){return this.withXtkn=!0,this}function P(e){return this.useXHRHeader=e,this}function J(e){return this.done||(this.aborted=!0,this.xhr.abort(),e?this.reject():h(this,!0)),this}function V(){return this.xhr.responseText}function u(e,t){x.constructor.call(this),this.url=e,this.xhr=t,this.useXHRHeader=!0}X(u,x.constructor);var s=u.prototype;return s.send=A,s.header=F,s.data=I,s.dataJson=S,s.responseType=O,s.formData=W,s.attachFile=U,s.withCredentials=G,s.setExternal=M,s.isExternal=N,s.abort=J,s.response=V,s.withToken=L,s.withXHRHeader=P,b.Ajax={preview:m,success:j,error:k,resolved:new u().resolve(),request:function(t,r,a,i){r||(r=v);var n=new XMLHttpRequest,c=r.toUpperCase()===v;c&&a&&(t=i?d.replaceParams(t,a):d.insertParams(t,a)),n.open(r,t),n.onreadystatechange=D,n.onerror=w,n.ontimeout=w;var y=n.okTask=new u(t,n);return!c&&a&&y.data(d.formatParams(a)),y}}})(__jsRegistry.c, __jsRegistry.u, __jsRegistry.n, __jsRegistry.m, __jsRegistry.bt, __jsRegistry.bu, __jsRegistry.bv)||window);
__jsRegistry.bx = __globalRegistry["wC0ffBg"] || (__globalRegistry["wC0ffBg"] = (function(x,h,O,P,T){var l={};function y(r,t){for(var e in t)Object.defineProperty(r,e,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,e).get})}y(l,{get WEB_API_PREFIX(){return m},get getSharedApiPrefix(){return c},get invoke(){return E},get invokeBase(){return d},get invokeShared(){return b}});var c=function(){var r,t=window.location.origin,e=(r=window.okHead)==null?void 0:r.webApiUrlReplacements;if(e)for(var n in e){var a=e[n];t=t.replace(new RegExp(n),a)}return t},m="/web-api/v2",A="Ux2124679",S="6",I=0,v=!1,s="api.communication-error";function C(){return++I}function q(r){return m+(r.indexOf("/")===0?"":"/")+r}function g(r){return new Promise(r)}P.PROMISE_BASIC||(g=function(t){var e=(0,O.start)();return t(e.resolve.bind(e),e.reject.bind(e)),e});function p(r,t,e,n){return g(function(a,o){var w=q(r),u=n?""+n+w:w,B=(0,T.hasClass)(document.body,"mob-detect-on-web");n&&B&&(u+="?"+A+"="+S);var i=x.request(u,"POST").dataJson(t).withToken();i.then(function(){v=!1,R();var f;try{f=JSON.parse(i.response())}catch(_){o({url:u,type:200,typeName:"SERVER_ERROR",errorCode:s,errorMessage:(_==null?void 0:_.message)||s});return}f.success===!0?a(f.result):o(f.error)},function(){if(R(),i.aborted){o({url:u,type:2,typeName:"ABORT",errorCode:"abort",errorMessage:i.xhr.statusText||"abort"});return}v||h.log(s),v=!0,o({url:u,type:200,typeName:"SERVER_ERROR",errorCode:s,errorMessage:i.xhr.statusText||s})}),i.send();function k(){i.abort()}function R(){e.signal&&e.signal.removeEventListener("abort",k)}e.signal&&e.signal.addEventListener("abort",k)})}function E(r,t,e){var n=d(t,e),a=n.request,o=n.options;return p(r,a,o)}function b(r,t,e){var n=d(t,e),a=n.request,o=n.options;return p(r,a,o,c())}function d(r,t){var e={id:C(),parameters:{},filter:void 0};t=t||{};var n=t.filter;return r!=null&&(e.parameters=r),n!=null&&(e.filter=n),{request:e,options:t}}return typeof window<"u"&&(window.webapi={invoke:E,invokeShared:b}),l})(__jsRegistry.bw, __jsRegistry.a, __jsRegistry.n, __jsRegistry.af, __jsRegistry.s)||window);
__jsRegistry.by = __globalRegistry["dyy2LIQ"] || (__globalRegistry["dyy2LIQ"] = (function(){var a={};Object.defineProperty(a,"debounce",{enumerable:!0,get:function(){return d}});function d(o,f,c){var r=null,e=null;return function(){var n=this||{delay:0,debounceId:null},i=f||n.delay,t=arguments.length,u=new Array(t);if(t)for(var l=0;l<t;l++)u[l]=arguments[l];r&&window.clearTimeout(r),e&&window.clearTimeout(e),c&&e===null?(o.apply(n,u),e=window.setTimeout(function(){e=null},i)):r=n.debounceId=window.setTimeout(function(){o.apply(n,u),e=null},i)}}return a})()||window);
__jsRegistry.bz = __globalRegistry["w0achOQ"] || (__globalRegistry["w0achOQ"] = (function(N,F,E,P,p,j){var V={};Object.defineProperty(V,"default",{enumerable:!0,get:function(){return Y}});function w(){return w=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},w.apply(this,arguments)}function y(n,a){return a!=null&&typeof Symbol<"u"&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](n):n instanceof a}var I="webVitals",S=function(){return{reports:{cls:[],lcp:[],inp:[],fid:[]},meta:{hostname:"",artifactVersion:"",branchName:"",commitHash:"",isAutotest:!1,retries:0}}},h=function(){var n=S();try{var a,t,e,r,o=N.sessionStorage.getItem(I);if(!o)return n;var d=JSON.parse(o),m,l,s,i;return{reports:{cls:(m=(a=d.reports)==null?void 0:a.cls)!=null?m:[],lcp:(l=(t=d.reports)==null?void 0:t.lcp)!=null?l:[],inp:(s=(e=d.reports)==null?void 0:e.inp)!=null?s:[],fid:(i=(r=d.reports)==null?void 0:r.fid)!=null?i:[]},meta:w({},n.meta,d.meta)}}catch(c){return p.Logger.warn("[WebVitals] Failed to load from sessionStorage",c),n}},L=function(n){try{N.sessionStorage.setItem(I,JSON.stringify(n))}catch(a){p.Logger.warn("[WebVitals] Failed to save to sessionStorage: ",a)}};if(!window.webVitals||!window.webVitals.reports||!window.webVitals.meta){var T=S(),O=T.reports,k=T.meta;window.webVitals=w({},window.webVitals||{},{reports:O,meta:k})}var x=1e3,W=function(n,a){var t=a==="LCP"?"renderTime":"duration";return n.sort(function(e,r){return G(e,r,t)}),n[0]},G=function(n,a,t){var e=t;return n[e]<a[e]?1:n[e]>a[e]?-1:0},C=function(n,a,t,e){return{htmlElementsInfo:n,metric:e,value:parseFloat(a.toFixed(3)),url:window.location.pathname,state:"MOBILE_"+(0,j.getStateId)(),rating:t,isForAbMetrics:!0}},g=function(n){var a={CLS:"cls",LCP:"lcp",INP:"inp"};if("metric"in n){var t=a[n.metric];t&&window.webVitals.reports[t].push(n),p.Logger.info("[WebVitals] Report",n)}else p.Logger.info("[WebVitals] Listener target",n)},J=(function(){function n(){var t=this;this.reportsToSend=[],this.worstClsReports=[],this.worstInpReports=[],this.metaData=S().meta,this.listenerTarget=null,this.eventHandler=function(e){t.listenerTarget=e.target,t.isConsoleClicksEnabled&&g(t.listenerTarget)},this.visibilityEventHandler=function(){if(E.isHidden()){var e=[];if(t.worstClsReports.length){var r;(r=e).push.apply(r,[].concat(t.worstClsReports)),t.worstClsReports=[]}if(t.worstInpReports.length){var o;(o=e).push.apply(o,[].concat(t.worstInpReports)),t.worstInpReports=[]}t.initiateSendReports(e)}},this.sendReports=(0,P.debounce)(function(){var e={reports:t.reportsToSend};t.isAutotestMetaDataSupported&&t.metaData.isAutotest&&(e.meta=t.metaData,e.meta.hostname=window.location.hostname),F.invokeShared("web-vitals/send",e),t.reportsToSend=[]},x)}var a=n.prototype;return a.addWorstReport=function(e,r,o,d){var m,l=o==="CLS"?this.worstClsReports:this.worstInpReports,s=C(d,e,r,o),i=h();i.reports[o.toLowerCase()].push(s),L(i),this.consoleLogsEnabled&&g(s),l.length&&(l[l.length-1].isForAbMetrics=!1),l.push(s),l.length>((m=this.reportsCapacityMap)==null?void 0:m[o])&&l.shift()},a.initiateSendReports=function(e){var r;e.length&&((r=this.reportsToSend).push.apply(r,[].concat(e)),this.sendReports())},a.activate=function(e){var r=this,o,d,m,l;this.consoleLogsEnabled=e.consoleLogsEnabled,this.isListenerEnabled=e.isListenerEnabled,this.isConsoleClicksEnabled=e.isConsoleClicksEnabled,this.isAutotestMetaDataSupported=e.isAutotestMetaDataSupported,this.metaData=h().meta,this.reportsCapacityMap={INP:e.inpReportsCapacity,CLS:e.clsReportsCapacity},(o=window.webVitals.monitors)==null||o.onLCP(function(s){var i=W(s.entries,s.name).element,c=f(i),u=C(i?[{tag:i.localName,className:c}]:null,s.value,s.rating,"LCP"),v=h();v.reports.lcp.push(u),L(v),r.consoleLogsEnabled&&g(u),r.initiateSendReports([u])}),(d=window.webVitals.monitors)==null||d.onFID(function(s){var i=s.entries[0].target,c=f(i),u=C(i?[{tag:i.localName,className:c}]:null,s.value,s.rating,"FID"),v=h();v.reports.fid.push(u),L(v),r.consoleLogsEnabled&&g(u),r.initiateSendReports([u])}),(m=window.webVitals.monitors)==null||m.onCLS(function(s){if(s.value){var i={},c=s.entries.reduce(function(u,v){var b;return(b=v.sources)==null||b.forEach(function(B){var R=B.node;if(R){var D={className:f(R),localName:R.localName},H=D.className,M=D.localName,A=M+H;i[A]||(u.push({className:H,tag:M}),i[A]=!0)}}),u},[]);r.addWorstReport(s.value,s.rating,"CLS",c)}},{reportAllChanges:!0}),this.isListenerEnabled&&(window.addEventListener("click",this.eventHandler,{capture:!0}),window.addEventListener("keydown",this.eventHandler,{capture:!0})),(l=window.webVitals.monitors)==null||l.onINP(function(s){var i=W(s.entries,s.name).target,c=function(){if(i){var u=f(i);return[{tag:i.localName,className:u}]}else if(r.listenerTarget){var v=f(r.listenerTarget),b=r.listenerTarget.localName;return r.listenerTarget=null,[{tag:b,className:v}]}return null};r.addWorstReport(s.value,s.rating,"INP",c())},{reportAllChanges:!0}),E.addListener(this.visibilityEventHandler)},a.deactivate=function(){this.isListenerEnabled&&(window.removeEventListener("click",this.eventHandler,{capture:!0}),window.removeEventListener("keydown",this.eventHandler,{capture:!0})),E.removeListener(this.visibilityEventHandler)},n})();function f(n){return n?y(n,SVGElement)?n.className.baseVal:y(n,Element)?n.className:"":""}var Y=new J;return V})(__jsRegistry.bs, __jsRegistry.bx, __jsRegistry.bg, __jsRegistry.by, __jsRegistry.br, __jsRegistry.bv)||window);
__jsRegistry.ca = __globalRegistry["wAPC6Yw"] || (__globalRegistry["wAPC6Yw"] = (function(s,w,n){var r,e,i=(r=window.okHead)==null?void 0:r.webVitals,o=(e=window.webVitals)==null?void 0:e.monitors;if(i){if(!o){var a="Ошибка инициализации web-vitals.js, пустые функции мониторинга";s.Logger.error(a),n.INSTANCE.sendError(new Error(a))}o&&w.default.activate(i)}})(__jsRegistry.br, __jsRegistry.bz, __jsRegistry.f)||window);
__jsRegistry.cb = __globalRegistry["cObjQ9g"] || (__globalRegistry["cObjQ9g"] = (function(){var f="z";function u(){}u.prototype={setItem:function(t,n){this[t]=n},getItem:function(t){return this[t]}};function d(e){return f+e}function s(e){return e}function c(e,t){typeof e=="function"&&e(t)}function r(e,t){this.objectStorage=e,this.keyFactory=t||s}r.prototype={fixKey:function(t){return d(this.keyFactory(t))},store:function(t,n){this.objectStorage.setItem(this.fixKey(t),n)},get:function(t){return this.objectStorage.getItem(this.fixKey(t))},update:function(t,n,i){n(t,(function(o){this.store(t,o),c(i,o)}).bind(this))},getOrAdd:function(t,n,i){var o=this.get(t);return o!=null?c(i,o):this.update(t,n,i),o},getOrAddAndUpdate:function(t,n,i){var o=this.getOrAdd(t,n,i);o!=null&&this.update(t,n,i)}};function a(e){if(e in window)try{var t=window[e],n="t"+Date.now(),i;if(t.setItem(n,n),i=t.getItem(n)===n,t.removeItem(n),i)return t}catch(o){}return new u}return{makePermanentCache:function(t){return new r(a("localStorage"),t)},makeSessionCache:function(t){return new r(a("sessionStorage"),t)},makeObjectsCache:function(t){return new r(new u,t)}}})()||window);
__jsRegistry.cc = __globalRegistry["rcv7FFg"] || (__globalRegistry["rcv7FFg"] = (function(m,D,E,c,p,w,h){var u=window.performance,o=u&&u.timing,d=!1,a,f,i,l=w.makeSessionCache(),v=400,k=2e3,C="NONE";function r(e){m.measure=e}if(!o){r(function(){});return}function g(e){m.cookie=e?{setCookie:function(t,s,L){t==="CDN"&&e(s),g(null)}}:null}function j(){if(!i){i=p.start();var e=l.get("CDN");if(!f||e)i.resolve(e);else{setTimeout(function(){i.resolveIfNotDone(e)},k),g(function(t){t||(t=C),l.store("CDN",t),i.resolveIfNotDone(t)});var n=document.createElement("script");n.src="//okcdn.ru/static/cdn/cdn.js?timestamp="+Date.now(),document.head.appendChild(n),i.anyway(function(){E.remove(n)})}}return i}function T(e,n){j().then(function(t){var s="/dk?st.cmd=clientStat&st.opid="+window.pageCtx.stateId+"&st.rtime="+e+"&st.dtime="+n+"&st.cdn="+(t||C);!window._ok_tmp_beaconEnabled&&h.BEACON_API?navigator.sendBeacon(s):new Image().src=s})}function N(){d||(d=!0,setTimeout(function(){var e=o.loadEventEnd-o.navigationStart,n=o.domContentLoadedEventEnd-o.navigationStart;e<0&&(e=a),n<0&&(n=a),T(e,n)},v))}function A(e){a=e.timeout,f=e.detectCdn;var n=setTimeout(function(){n=null,N()},a);D.fullyLoaded.then(function(){clearTimeout(n),N()})}function _(){r(I)}function O(e){setTimeout(function(){T("x",e.domLoadedTime)},v)}function I(){c.navigated.attachOnce(O)}return r(A),c.navigating.attach(_),{detectCdn:j}})(__jsRegistry.c, __jsRegistry.p, __jsRegistry.s, __jsRegistry.w, __jsRegistry.n, __jsRegistry.cb, __jsRegistry.af)||window);
__jsRegistry.cd = __globalRegistry["pGswjBw"] || (__globalRegistry["pGswjBw"] = (function(){var e={};function A(_,r){for(var t in r)Object.defineProperty(_,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,t).get})}A(e,{get AJAXNAV_RENDER_MARK_START(){return R},get AJAX_NAV_RENDER_MEASURE(){return n}});var R="ajaxnavRender:start",n="ajaxnavRender";return e})()||window);
__jsRegistry.ce = __globalRegistry["ct2wHtg"] || (__globalRegistry["ct2wHtg"] = (function(G,d,x,k,V,R,U,Y,J){function K(e,r){return r!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r}var j=d.PERFORMANCE_LEVEL1_API,w=d.PERFORMANCE_LEVEL2_API,z=d.PERFORMANCE_OBSERVER,b=d.VISIBILITY_PROPERTY_KEY,u,C=U.create(),S=J.localStorage,c={stalled:0,stalledByEvent:{},webVitals:{CLS:0,CLS_count:0,LCP_count:0}},N=!0,l,p,g,D=!1,_=!1;if(0)var oe;function F(){var e=Date.now();document[b]==="visible"?p&&(c.stalled+=e-p):p=e}function q(){var e=$();if(e){var r=e.domainLookupStart,n=e.connectStart,a=e.requestStart,t=e.responseStart,o=e.responseEnd,i=e.domInteractive,s=e.domContentLoadedEventStart,v=e.domComplete,m=e.loadEventStart||void 0;return{timestamps:ne(A(r,n,a,t,i,s,v,m),e),durations:te(A(e.domainLookupEnd-r,e.connectEnd-n,t-a,o-t,i-o,e.domContentLoadedEventEnd-s,v-i,e.loadEventEnd-m),e),timing:e}}return null}function f(e){return new PerformanceObserver(function(r){T(r.getEntries(),e||Q)})}function X(){var e=f(),r=f(),n=f(),a=f(),t=f(W),o="first-input",i="largest-contentful-paint",s="paint",v="layout-shift",m="measure";try{e.observe({entryTypes:[o]}),r.observe(E(i)),n.observe(E(s)),a.observe(E(v)),t.observe(E(m))}catch(se){var B=["all"],y=PerformanceObserver.supportedEntryTypes;y&&y.length&&(B=["navigation",o,i,s,v,m].filter(function(ie){return y.indexOf(ie)===-1})),logClientEvent("performanceObserver:unsupportedTypes",[B.join(",")])}return{FID:e,LCP:r,paint:n,CLS:a}}function E(e){return{type:e,buffered:!0}}function P(e,r){if(_){var n=c.stalled;return e-=n-(c.stalledByEvent[r]||0),c.stalledByEvent[r]=n,e}return e}function Q(e,r){if(!b||document[b]==="visible"){var n=c.webVitals;switch(e.entryType){case"largest-contentful-paint":var t="LCP",a=P(e.startTime,t);t in n?n.LCP_last=a:n[t]=a,n.LCP_count++;break;case"paint":var t;e.name==="first-contentful-paint"?t="FCP":e.name==="first-paint"&&(t="FP"),t&&(n[t]=P(e.startTime,t));break;case"layout-shift":e.hadRecentInput||(n.CLS+=e.value,n.CLS_count++);break;case"first-input":var t="FID",o=e.processingEnd-e.startTime,i=P(e.startTime-(o||0),t);n[t]=i,ee(function(s){s.webVitals.FID=i});break}}}function W(e){C.trigger(e)}function Z(e){e.name===Y.AJAX_NAV_RENDER_MEASURE&&O({lifecycle:{ajaxnavRender:e.duration},stateId:M()},"/reports/lifecycle")}function $(){var e;return w&&(e=I("navigation")[0]),!e&&j&&(e=performance.timing),e}function H(){var e=R.start(),r=q();if(r){var n=r.timing,a={timestamps:r.timestamps,durations:r.durations,webVitals:c.webVitals,misc:{unixTimeOffset:K(n,PerformanceTiming)&&n.navigationStart?performance.timeOrigin||n.navigationStart:0,stateId:M(),navType:j?performance.navigation.type:w?n.type:void 0}};return D?(k.detectCdn().then(function(){a.misc.CDN=name||void 0}).anyway(function(){e.resolve(a)}),e):e.resolve(a)}return e.reject()}function L(){var e;try{var r=S.getItem(u);r&&(S.removeItem(u),e=JSON.parse(r))}catch(n){e=l,l=void 0}return e}function h(e){try{S.setItem(u,JSON.stringify(e))}catch(r){l=e,logClientEvent("performanceObserver:localStorageOff")}}function ee(e){var r=L();r&&(e(r),h(r))}G.create({name:"perfReports",init:function(r){u="performanceObserver",O(L()),r.countStalled&&document.addEventListener("visibilitychange",F),z&&(g=X()),C.attach(Z),V.fullyLoaded.then(function(){setTimeout(function(){H().then(h)},50)})},update:function(r){D=r.detectCDN,_=r.countStalled},discard:function(){N&&O(L()).then(re)}});function O(e,r){return e?x.invoke(r||"/reports/performance",e):R.rejected}function re(){for(var e in g)g[e].disconnect();g=void 0,p=void 0,c=void 0,l=void 0,u=void 0,document.removeEventListener("visibilitychange",F),N=!1}function A(e,r,n,a,t,o,i,s){return{DNS:e,TCP:r,request:n,TTFB:a,DOMInteractive:t,DOMContentLoaded:o,DOMComplete:i,loaded:s}}function ne(e,r){return e.redirectCount=r.redirectCount,e.size=r.transferSize,e}function te(e,r){return e.redirect=r.redirectEnd-r.redirectStart,e.duration=r.duration,_&&(e.stalled=c.stalled),e}function M(){return window.pageCtx&&pageCtx.stateId||"unknown"}function I(e){return performance.getEntriesByType(e)}function ae(e,r){return T(I(e),r)}function T(e,r){return e.forEach(r)}return{createPerformanceObserver:f,getEntries:I,processEntries:T,processEntriesOfType:ae,markMeasureEvent:C}})(__jsRegistry.x, __jsRegistry.af, __jsRegistry.bx, __jsRegistry.cc, __jsRegistry.p, __jsRegistry.n, __jsRegistry.u, __jsRegistry.cd, __jsRegistry.bs)||window);
__jsRegistry.cf = __globalRegistry["iv2Gm6g"] || (__globalRegistry["iv2Gm6g"] = (function(t){var e=navigator.serviceWorker;t.create({name:"serviceWorker",init:function(r){e&&r.install&&e.register("/mres/pwa/sw.js",{scope:"/"}).then(s,c)},update:function(r){e&&r.uninstall&&(e.getRegistrations().then(function(i){for(var o in i)i.hasOwnProperty(o)&&i[o].unregister()}),logClientEvent("frontend.serviceWorker",["remove"]))}});function s(n){logClientEvent("frontend.serviceWorker",["ok"])}function c(n){logClientEvent("frontend.serviceWorker",["fail"])}})(__jsRegistry.x)||window);
__jsRegistry.cg = __globalRegistry["UEjqV2A"] || (__globalRegistry["UEjqV2A"] = (function(){function t(){}return t.UUID="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",t.UUID_VERSIONED="xxxxxxxx-xxxx-vxxx-xxxx-xxxxxxxxxxxx",t.prototype={constructor:t,withPattern:function(x){return this.pattern=x,this},createToken:function(x){return this.token=this.pattern.replace(/[xv]/gi,function(n,r){return(n==="x"?Math.random()*16|0:x!==void 0?x&255:r&3|8).toString(16)}),this},getNewToken:function(x){return this.createToken(x),this.getToken()},getToken:function(){return this.token}},t})()||window);
__jsRegistry.ch = __globalRegistry["lo4ogMg"] || (__globalRegistry["lo4ogMg"] = (function(i,c,g){var l="IOS_TEST",e=g.localStorage,S=(function(){try{if(typeof window.localStorage<"u"&&window.localStorage!==null)return c.iOS&&(window.localStorage.setItem(l,"OK"),window.localStorage.removeItem(l)),e.length>-1}catch(n){}return!1})();function d(n,f){for(var m=e.length,o=[],a=0;a<m;a++){var r=e.key(a);r&&r.indexOf(n)===0&&o.push(r)}for(var s=o.length,t;s--;)t=o[s],f(t),e.removeItem(t)}return i.localStorage={isSupported:S,clear:d}})(__jsRegistry.c, __jsRegistry.ak, __jsRegistry.bs)||window);
__jsRegistry.ci = __globalRegistry["ULrj7Bw"] || (__globalRegistry["ULrj7Bw"] = (function(e,u){var g={};Object.defineProperty(g,"default",{enumerable:!0,get:function(){return i}});var i=(function(){function a(s,l){this.storageKey=a.ORIGIN_SUFFIX+"."+l+"."+s,this.metaKey=this.storageKey+a.META_SUFFIX}var n=a.prototype;return n.save=function(l,o){if(a.isLocalStorageAvailable()){var r=Date.now(),t={lastUsed:r,expires:o?r+o:null};e.localStorage.setItem(this.storageKey,JSON.stringify(l)),e.localStorage.setItem(this.metaKey,JSON.stringify(t))}},n.get=function(){if(!a.isLocalStorageAvailable())return null;var l=e.localStorage.getItem(this.metaKey);if(!l)return null;var o=JSON.parse(l),r=Date.now();if(o.expires!==null&&r>o.expires)return this.remove(),null;o.lastUsed=r,e.localStorage.setItem(this.metaKey,JSON.stringify(o));var t=e.localStorage.getItem(this.storageKey);return t?JSON.parse(t):null},n.remove=function(){a.isLocalStorageAvailable()&&(e.localStorage.removeItem(this.storageKey),e.localStorage.removeItem(this.metaKey))},a.isLocalStorageAvailable=function(){return u.isSupported},a.cleanup=function(l){if(a.isLocalStorageAvailable())for(var o=Date.now(),r=0;r<e.localStorage.length;r++){var t=e.localStorage.key(r);if(t&&t.startsWith(this.ORIGIN_SUFFIX)&&t.endsWith(this.META_SUFFIX)){var S=e.localStorage.getItem(t);if(!S)continue;var c=JSON.parse(S);if(c.lastUsed&&o-c.lastUsed>l){var m=t.slice(0,-this.META_SUFFIX.length);e.localStorage.removeItem(m),e.localStorage.removeItem(t)}}}},a})();return i.ORIGIN_SUFFIX="@ok",i.META_SUFFIX=".meta",window.OK.UserLocalStorage=i,g})(__jsRegistry.bs, __jsRegistry.ch)||window);
__jsRegistry.cj = __globalRegistry["wsStfFw"] || (__globalRegistry["wsStfFw"] = (function(p,G,T,g,U,B,M){var w={};function W(e,n){for(var t in n)Object.defineProperty(e,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(n,t).get})}W(w,{get NotificationStatusType(){return A},get getStatus(){return $},get subscribe(){return m},get unsubscribe(){return I}});var A=(function(e){return e.STATUS_DEFAULT="DEFAULT",e.STATUS_DENIED="DENIED",e.STATUS_GRANTED="GRANTED",e.STATUS_SUBSCRIBED="SUBSCRIBED",e.STATUS_UNSUBSCRIBED="UNSUBSCRIBED",e})(A||{}),H="notification_enabled_messenger",_="/webpush",V=_+"/syncSubscription",Y=_+"/logAction",R="webpush-device-id",C="webpush-polling",c=navigator.serviceWorker,y=60*1e3,f=!1,u,h=null;function x(e,n){return n===void 0&&(n=null),(0,g.invoke)("notifications/getItems",{deviceId:e,marker:n}).then(function(t){var r=t.items,l=r===void 0?[]:r,o=t.marker,v=t.isPolling,s=t.isEnabled,d=t.pollInterval,a=t.applicationServerKey;return c.ready.then(function(b){var F=[];l.forEach(function(i){var E=!i.title,S=i.body||i.msg;F.push(b.showNotification((E?S:i.title)||location.hostname,{body:E?"":S,icon:i.icon,tag:i.tag||"webpush",data:{userId:i.userId,url:i.url||i.uri,type:i.type}}).then(function(){return{userId:i.userId||"",actionType:"show",messageType:i.type,failure:""}}))}),M.get(["allSettled"]).then(function(){Promise.allSettled(F).then(function(i){var E=[];return i.forEach(function(S){S.status==="fulfilled"&&E.push(S.value)}),ee(E)})})}),{marker:o,isPolling:v,isEnabled:s,pollInterval:d,applicationServerKey:a}})}function K(e,n,t,r){t===void 0&&(t=null),r===void 0&&(r=null);var l=t;h=setTimeout(function(){x(e,t).then(function(o){var v=o.marker,s=o.isPolling,d=o.isEnabled,a=o.pollInterval,b=o.applicationServerKey;if(l=v,d){if(f&&s&&P()&&K(e,a,l,h),!s&&b)return k({applicationServerKey:b,notificationsPollInterval:a,pollEnabled:!1})}else return I()})},r?n:0)}function q(e,n){h&&clearTimeout(h),K(e,n)}function z(e,n){return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:J(n)})}function J(e){for(var n=v("=",(4-e.length%4)%4),t=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(t),l=new Uint8Array(r.length),o=0;o<r.length;++o)l[o]=r.charCodeAt(o);return l;function v(s,d){for(var a="";d-- >0;)a+=s;return a}}function Q(){var e=p.localStorage.getItem(R);if(!e){var n=new T().withPattern(T.UUID_VERSIONED);e=n.getNewToken(4),c.ready.then(function(t){t.active&&t.active.postMessage({type:"WEB_PUSH_DEVICE_ID",payload:e})}),p.localStorage.setItem(R,e)}return e}function X(){return p.localStorage.getItem(C)==="1"}function Z(e){return p.localStorage.setItem(C,e?"1":"0")}function L(e,n,t,r){var l={status:e,place:r||"unknown",userAction:t};return n&&(l.subscription={deviceId:Q(),endpoint:n.endpoint,auth:O(n,"auth"),p256dh:O(n,"p256dh")},f&&e==="SUBSCRIBED"&&q(n.endpoint,y)),(0,g.invoke)(V,l)}function O(e,n){return btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey(n))))}function D(e){if(u&&U.default.isLocalStorageAvailable()){var n=u.get()||{};n.isEnable=e,u.save(n)}}function P(){return"Notification"in window&&Notification.permission==="granted"}function j(){if(u&&U.default.isLocalStorageAvailable()){var e=u.get()||{};return e.isEnable}return!1}function m(e,n,t){return n===void 0&&(n=!1),f=e.pollEnabled,y=e.notificationsPollInterval,c.ready.then(function(r){return z(r,e.applicationServerKey)}).then(function(r){return L("SUBSCRIBED",r,n,t).catch(function(l){})}).then(function(){D(!0)})}function I(e,n){return e===void 0&&(e=!1),N().then(function(t){if(t!==null)return Promise.all([t.unsubscribe(),L("UNSUBSCRIBED",t,e,n).catch(function(r){})])}).then(function(){D(!1)})}function N(){if(!c)return Promise.resolve(null);var e=c.getRegistration();return e?e.then(function(n){return n&&n.pushManager?n.pushManager.getSubscription():null}):Promise.resolve(null)}function $(){return!("Notification"in window)||Notification.permission==="denied"?Promise.resolve("DENIED"):Notification.permission==="default"?Promise.resolve("DEFAULT"):N().then(function(e){return e?"SUBSCRIBED":"GRANTED"})}function k(e){return I().then(function(){return m(e)}).then(function(){Z(e.pollEnabled)})}function ee(e){if(e.length>0)return(0,g.invoke)(Y,{actions:e})}return(0,G.create)({name:"webPushService",init:function(n){var t=(0,B.getUserId)();t?(u=new U.default(H,t),j()?P()?m(n):D(!1):I()):N().then(function(r){r!==null&&r.unsubscribe()})},update:function(n){f=n.pollEnabled,y=n.notificationsPollInterval,(0,B.getUserId)()&&j()&&P()&&f!=X()&&k(n)}}),w})(__jsRegistry.bs, __jsRegistry.x, __jsRegistry.cg, __jsRegistry.bx, __jsRegistry.ci, __jsRegistry.bv, __jsRegistry.ae)||window);
__jsRegistry.ck = __globalRegistry["sHsL3w"] || (__globalRegistry["sHsL3w"] = (function(v,t,m,E){var u="",S=!1,d=60*1e3,f="js-subscription-toggle-button",N="pushNotificationsSettingsSection",n=null,o=(0,m.create)({isLoading:!1});v.create({name:"pushNotificationsSettings",update:function(e){S=e.pollEnabled,d=e.notificationsPollInterval,u=e.applicationServerKey,n=document.getElementById(N),(0,t.getStatus)().then(r),n==null||n.addEventListener("click",g),o.onChanged("isLoading",T)},discard:function(e){n==null||n.removeEventListener("click",g),o.offChanged("isLoading",T)}});function T(i){var e=n==null?void 0:n.getElementsByClassName(f);e&&Array.from(e).forEach(function(c){(0,E.switchClass)(c,i,"__process")})}function p(){o.set("isLoading",!1)}function g(i){i.stopPropagation();var e=i.target;e.classList&&e.classList.contains(f)&&!o.get("isLoading")&&(0,t.getStatus)().then(U)}function U(i){switch(i){case t.NotificationStatusType.STATUS_SUBSCRIBED:return o.set("isLoading",!0),(0,t.unsubscribe)(!0,"settings").then(p).then(t.getStatus).then(r);case t.NotificationStatusType.STATUS_DEFAULT:case t.NotificationStatusType.STATUS_GRANTED:case t.NotificationStatusType.STATUS_UNSUBSCRIBED:return y().then(p).then(t.getStatus).then(r)}}function y(){return Notification.requestPermission().then(function(i){if(i==="granted")return o.set("isLoading",!0),(0,t.subscribe)({applicationServerKey:u,notificationsPollInterval:d,pollEnabled:S},!0,"settings")})}var a,s=(a={},a[t.NotificationStatusType.STATUS_DEFAULT]="__default",a[t.NotificationStatusType.STATUS_GRANTED]="__default",a[t.NotificationStatusType.STATUS_DENIED]="__denied",a[t.NotificationStatusType.STATUS_SUBSCRIBED]="__granted",a[t.NotificationStatusType.STATUS_UNSUBSCRIBED]="__default",a);function r(i){var e;if(n){var c=s[i],L=Object.keys(s).filter(function(l){return l!==i}).map(function(l){return s[l]}).concat("__hidden");(e=n.classList).remove.apply(e,[].concat(L)),n.classList.add(c)}}})(__jsRegistry.x, __jsRegistry.cj, __jsRegistry.ab, __jsRegistry.s)||window);
__jsRegistry.cl = __globalRegistry["pcJ6slg"] || (__globalRegistry["pcJ6slg"] = (function(s){})(__jsRegistry.cf, __jsRegistry.cj, __jsRegistry.ck)||window);
__jsRegistry.cm = __globalRegistry["tVdLm9g"] || (__globalRegistry["tVdLm9g"] = (function(o,m){var r={};function u(t,e){for(var a in e)Object.defineProperty(t,a,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,a).get})}u(r,{get isDarkThemeEnabled(){return s},get themeChangeEvent(){return n},get toggleTheme(){return d}});var g="dark-theme",n=(0,m.create)(),s=function(){return __js_temp_htmlTag.className.indexOf("dark-theme")>-1},d=function(){var t=__js_temp_htmlTag,e=!!o.toggleClass(t,g);n.trigger(e)};return r})(__jsRegistry.s, __jsRegistry.u)||window);
__jsRegistry.cn = __globalRegistry["pKS0myw"] || (__globalRegistry["pKS0myw"] = (function(e){return{darkTheme:e.isDarkThemeEnabled()}})(__jsRegistry.cm)||window);
__jsRegistry.co = __globalRegistry["b8nwuaQ"] || (__globalRegistry["b8nwuaQ"] = (function(a,m,o,s,c,d){function i(e,t){this.root=e,this.bindListeners()}i.prototype={constructor:i,bindListeners:function(){s.onChanged("active",n,this),c.navigating.attachOnce(function(){s.offChanged("active",n,this)})},setActive:function(t,b){var r=document.getElementById("bottombar-item-"+t);r&&d.switchClass(r,b,"__active")},openSidebar:{tap:function(){var t=o.sidebar;s.get("active")?t.close():t.open()}}};function n(e){this.setActive("sidebar",e)}a.register("bottomNavbar",i)})(__jsRegistry.am, __jsRegistry.as, __jsRegistry.az, __jsRegistry.at, __jsRegistry.w, __jsRegistry.s)||window);
__jsRegistry.cp = __globalRegistry["baYFGtA"] || (__globalRegistry["baYFGtA"] = (function(a,t){var e=t.create({enabled:!1,active:!1});return a.create({name:"bottomNavbarService",update:function(r){e.set("enabled",r.enabled)}}),e})(__jsRegistry.x, __jsRegistry.ab)||window);
__jsRegistry.cq = __globalRegistry["mNKAJAg"] || (__globalRegistry["mNKAJAg"] = (function(){var e={};Object.defineProperty(e,"createDomTree",{enumerable:!0,get:function(){return t}});function t(n,o){var r=document.createElement(o||"div");return r.insertAdjacentHTML("beforeend",n),r}return e})()||window);
__jsRegistry.cr = __globalRegistry["ssHLxcA"] || (__globalRegistry["ssHLxcA"] = (function(c,i){function t(r){var e=document.createElement("script"),n=r.type||"text/javascript",s=n.match(/javascript/i);s&&(e.type=n,r.src?e.src=r.src:e.innerHTML=r.innerHTML,document.head.appendChild(e),i.remove(e))}return{run:t,runAll:function(e,n){n&&n.indexOf("<script")===-1||c(e.querySelectorAll("script"),t)}}})(__jsRegistry.k, __jsRegistry.s)||window);
__jsRegistry.cs = __globalRegistry["p3k7WdQ"] || (__globalRegistry["p3k7WdQ"] = (function(){var r={};function o(e,t){for(var u in t)Object.defineProperty(e,u,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,u).get})}o(r,{get get(){return g},get put(){return i}});var n={};function i(e,t){n[e]=t}function g(e){return n[e]}return r})()||window);
__jsRegistry.ct = __globalRegistry["gqLTew"] || (__globalRegistry["gqLTew"] = (function(o){function t(n,e,d,r){r.appendChild(d[0])}return function(n){var e=document.createDocumentFragment();return o(n.childNodes,t,null,e),e}})(__jsRegistry.k)||window);
__jsRegistry.cu = __globalRegistry["anHJ8iA"] || (__globalRegistry["anHJ8iA"] = (function(u,t,m,f){var a=20,v=f.toolbar.height+a;return{needsContainer:!1,parseDomNode:function(e,r){},run:function(e){var r=document.getElementById(e.targetId)||document.querySelector(e.targetSelector);if(r){var s=t.calc(),g=r.offsetHeight,l=u.getTotalOffsetTop(r),n=l-v,i=s.scrollTop,o=!1,c;n<0&&(n=0);var j=u.hasClass(__js_temp_htmlTag,"messaging")||m.parentBySelector(r,"#bottom-menu-body");j?(r.scrollIntoView(),o=!0):n<i?(t.resetScroll(n),o=!0):(c=l+g-(s.scrollTop+s.height))>0&&(t.resetScroll(s.scrollTop+c+a),o=!0),o&&(e.wasScrolled=!0,e.savedScrollPosition=s)}},invert:function(e,r){e.wasScrolled&&t.resetScroll(e.savedScrollPosition)}}})(__jsRegistry.s, __jsRegistry.bd, __jsRegistry.t, __jsRegistry.bk)||window);
__jsRegistry.cv = __globalRegistry["dPovqyw"] || (__globalRegistry["dPovqyw"] = (function(i,d){var n=[];return d.rendering.attach(function(){if(n.length>0){var r=n.slice();n.length=0;for(var e=0,t=r.length;e<t;e++){var a=r[e];clearTimeout(a.timeoutId),a.delayedApply()}}}),{needsContainer:!1,parseDomNode:function(e,t){t.delay=e.getAttribute("data-delay")},run:function(e){e.delayedApply=function(){i.processAjaxEnvelope(e.content);var t=n.indexOf(e);t!==-1&&n.splice(t,1)},e.timeoutId=setTimeout(e.delayedApply,e.delay),n.push(e)},invert:function(e,t){throw new Error}}})(__jsRegistry.c, __jsRegistry.w)||window);
__jsRegistry.cw = __globalRegistry["dTJ13LA"] || (__globalRegistry["dTJ13LA"] = (function(){var r="stickers-gallery-js",a="campaigns-js",e="posting-module-js",s="react-loader-js",n="landing-module-js",i="fapi-js",o="app-stub-js",t="registration-js";return{services:{animateSticker:r,adsGeoManagerPage:a,adsExtraManagerPage:a,adsInterestsManagerPage:a,postingFormView:e,promoBlock:n,runFapi:i,callinTimer:t},behaviors:{expandableMenu:a,formAjaxSubmitProxy:a,anonymAppStub:o,reactLoader:s}}})()||window);
__jsRegistry.cx = __globalRegistry["ao0DpBA"] || (__globalRegistry["ao0DpBA"] = (function(m,v,C,l,h,o,d,E){var i="js-call",w="react-tag";l.behaviorCreated.attach(function(e){var n=e.behavior,t=n.discard;t&&v.rendering.attachOnce(t,n)}),E.domLoaded.then(function(){o.use("common-js",u)});function g(e,n){var t=n||{},a=window.pageCtx.tmpFilterReactServicesInit?t.needToFilterReactElements:!1,r=C.htmlElementsAsArray(e.getElementsByClassName(i));e.classList.contains(i)&&!a&&r.push(e),a&&(r=T(e,r));for(var s=0;s<r.length;s++)L(r[s]);if(0)var p}function T(e,n){var t=Array.prototype.slice.call(e.querySelectorAll("."+w+" ."+i));if(!window.Map)return n.filter(function(r){return t.indexOf(r)});var a=new Map(t.map(function(r){return[r,!0]}));return n.filter(function(r){return!a.has(r)})}function L(e){e.okProc||(e.okProc=!0,O(e),R(e))}function O(e){var n=e.getAttribute("data-services");if(n){var t;if(n.indexOf("[")===0){t=JSON.parse(n);for(var a=0,r=t.length;a<r;a++)t[a].target=e}else{t=n.split(",");for(var s=0,p=t.length;s<p;s++)t[s]={service:t[s],target:e}}for(var c=null,f=0,I=t.length;f<I;f++){var S=t[f].service,_=m[S];if(!_){var A=d.services[S];A&&(c||(c=[])).push(A)}}j(c).then(function(){o.launchServices(t)})}}function j(e){if(e!=null&&e.length>0){for(var n=[],t=0;t<e.length;t++)n.push(o.use(e[t]));return h.all.apply(window,n)}else return h.resolved}function R(e){var n=l.parseViewNames(e);if(n){for(var t=null,a=n.length;a--;){var r=n[a];if(!l.exists(r)){var s=d.behaviors[r];s&&(t||(t=[])).push(s)}}j(t).then(function(){l.isInstant(e)&&l.getOrMakeBehavior(e)})}}m.initFunc=function(e){l.callFunc(e.target,"init")},v.requestAot.attach(u);function u(){g(__js_temp_htmlTag,{needToFilterReactElements:!0})}return OK.ServicesInit={process:u,processScope:g}})(__jsRegistry.c, __jsRegistry.w, __jsRegistry.bl, __jsRegistry.am, __jsRegistry.n, __jsRegistry.q, __jsRegistry.cw, __jsRegistry.p)||window);
__jsRegistry.cy = __globalRegistry["tjvWMA"] || (__globalRegistry["tjvWMA"] = (function(i,u,f,d,m){function r(e,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}var a=500,l=25;function s(e,n,t){m.request(function(){setTimeout(function(){if(r(n,Function)&&(t=n,n=null),n)for(var o in n)n.hasOwnProperty(o)&&i.switchClass(e,n[o],o);r(t,Function)&&t(e)},l)})}return{start:s,startRemoval:function(n,t,o){t&&s(n,t),setTimeout(function(){i.remove(n)},o||a)},setStyle:function(n,t){n.style[f.transition]=t||""},pause:function(n,t){n.style[t]=window.getComputedStyle(n).getPropertyValue(t)},css:{shown:{__shown:!0},hidden:{__hidden:!0,__shown:!1}},onEnd:function(n,t){d(n,u,t)}}})(__jsRegistry.s, __jsRegistry.ao, __jsRegistry.au, __jsRegistry.o, __jsRegistry.aq)||window);
__jsRegistry.cz = __globalRegistry["pjLo1bQ"] || (__globalRegistry["pjLo1bQ"] = (function(s,r){function n(t){var e=this;e.config=t,e.onTaskComplete=function(){setTimeout(function(){(!e.task||e.task.done)&&e.hide()},4)}}return n.prototype={show:function(){var e=this.domNode;e&&s.start(e,s.css.shown)},hide:function(){var e=this,o=e.domNode;o&&(s.startRemoval(o,{__obsolete:!0},1e3),e.domNode=null,e.task=null)},start:function(e){if(!e.done){var o=this;o.domNode=o.config.getDomNode(),o.show(),o.task=o.task?r.all(o.task,e):e,o.task.then(o.onTaskComplete,o.onTaskComplete)}}},{create:function(e){return new n(e)}}})(__jsRegistry.cy, __jsRegistry.n, __jsRegistry.s)||window);
__jsRegistry.da = __globalRegistry["psf6SqA"] || (__globalRegistry["psf6SqA"] = (function(t,a,n){var s=n.create({getDomNode:function(){return r||(r=document.getElementById("toolbarProgress"),r&&(o=r.parentNode,d(),o.replaceChild(e,r))),e&&!e.parentNode&&(d(),o.appendChild(e)),e}}),r,e,o;function d(){e=r.cloneNode(!0),a.addClass(e,"__unlocked")}return t.ProgressBar={start:s.start.bind(s)}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.cz)||window);
__jsRegistry.db = __globalRegistry["hfBkjuw"] || (__globalRegistry["hfBkjuw"] = (function(d,s,o){var e={};Object.defineProperty(e,"addHeadLink",{enumerable:!0,get:function(){return i}});var r=new Set;function i(n){if(n.content){var u=d.createDomTree(n.content);s((0,o.htmlElementsAsArray)(u.children),function(t){var a=t.href;r.has(a)||(r.add(a),window.document.head.appendChild(t))})}}return e})(__jsRegistry.cq, __jsRegistry.k, __jsRegistry.bl)||window);
__jsRegistry.dc = __globalRegistry["s3A13yw"] || (__globalRegistry["s3A13yw"] = (function(f,p,v,l,j,o,S){var s,c;return{fixScrollRecord:function(){c=o.recordScroll()},createScroll:function(n){return{action:"special",specialTarget:"scroll",options:n}},processing:{js:{run:function(n){var e=n.context;if(e.postponeJs){e.postponedJs=n;return}var r=l.createDomTree(n.content);j.runAll(r,n.content),s=r},invert:function(n,e){if(s)e.content=s.innerHTML;else{var r=document.getElementById("beforeBodyClose");if(r){var a=Array.prototype,u=r&&r.parentNode.childNodes,d=r&&a.indexOf.call(u,r);if(d!=-1){var g=a.slice.call(u,d+1),m=document.createElement("div");f(g,function(i){i.tagName=="SCRIPT"&&!i.src&&m.appendChild(i.cloneNode(!0))}),e.content=m.innerHTML}}}}},css:{run:function(n){var e=p.addCss(l.createDomTree(n.content),n.priority);return v.start(e),{task:e}},parseDomNode:function(n,e){e.priority=n.getAttribute("priority")}},scroll:{run:function(n){o.resetScroll(n.scroll)},invert:function(n,e){e.scroll=c||o.recordScroll(),c=null}},link:{run:S.addHeadLink}}}})(__jsRegistry.k, __jsRegistry.q, __jsRegistry.da, __jsRegistry.cq, __jsRegistry.cr, __jsRegistry.bd, __jsRegistry.db)||window);
__jsRegistry.dd = __globalRegistry["l9hvufg"] || (__globalRegistry["l9hvufg"] = (function(u,l){var c={};Object.defineProperty(c,"logging",{enumerable:!0,get:function(){return m}});var i=80;function e(){for(var g=arguments.length,r=new Array(g),n=0;n<g;n++)r[n]=arguments[n];for(var o=[],t=0;t<arguments.length;t++)arguments[t]!==void 0&&o.push(arguments[t]);return o}function v(g,r,n,o){r&&r.length>i&&(r=r.substring(0,i)),u.log("js",["jserror",g,n,o],r)}function d(g,r,n,o){u.log("js",e("jsInfo",g,r,n,o))}var m={logger:{success:function(r,n,o,t){u.log(r,e(n,o,t))},duration:function(g,r,n,o,t){u.logTimed(g,r,e(n,o,t))},error:function(r,n,o,t){u.log("js",e("jserror",r,n,o,t))},errorEx:function(r,n,o,t){var h=t||"error",s="";if(r){var f=String(r),a=r.stack;s=f,a&&(s+="  "+(a.startsWith(f)?a.substring(f.length):a))}v(h,s,n,o)},info:d,clob:v,log:function(r,n){n===void 0&&(n=[]),u.log(r,e.apply(void 0,[].concat(n)))},trace:function(r,n,o,t){n&&n.length>i&&(n=n.substring(0,i)),d(r,t,o,n)}},info:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o]},warn:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o]}};return l.storeFields({react:Object.assign(l.react||{},{logging:m})}),c})(__jsRegistry.a, __jsRegistry.c)||window);
__jsRegistry.de = __globalRegistry["pOrhggw"] || (__globalRegistry["pOrhggw"] = (function(F,R,_,p,B,K,L,S,G,z,J,H,k){function O(t,r){return r!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](t):t instanceof r}var I=_;function A(){throw new Error}function P(t){return{position:t,relaunchScripts:!1,run:function(e){var n=e.container,a=e.contentDom;a?n.insertBefore(S(a),this.position==="beforeend"?null:n.firstChild):e.content&&n.insertAdjacentHTML(this.position,e.content)},invert:A}}function w(t,r,e,n){if(r==="special")return null;var a=n.targetId;if(!a){var c=n.targetsSelector,l=n.targetSelector||c;return l?c?document.querySelectorAll(l):document.querySelector(l):null}return document.getElementById(a)}function Q(t){var r={};L.copy(t,r);var e=r;return e.container=null,e.content=null,e.contentDom=null,e}var E={content:{relaunchScripts:!0,run:function(r){r.container.innerHTML=r.content},invert:function(r,e){e.content=r.container.innerHTML}},replace:{relaunchScripts:!0,run:function(r){var e=r.container,n=r.contentDom,a=e.parentNode;if(n){r.container=n.firstChild;var c=S(n);a.replaceChild(c,e)}else{var l=p.indexOfChild(a,e);e.outerHTML=r.content,r.container=a.childNodes[l]}},invert:function(r,e){e.content=r.container.outerHTML}},append:P("beforeend"),prepend:P("afterbegin"),remove:{run:function(r){var e=!0,n=r.container,a=r.options,c=a.onBeforeRemove;c&&(e=c(r.index,r.content,n)),e!==!1&&p.remove(n)},invert:A},attribute:{parseDomNode:function(r,e){e.name=r.getAttribute("name"),e.value=r.getAttribute("value")},run:function(r){var e=r.name,n=r.value;e&&e.length&&(n===null?r.container.removeAttribute(e):r.container.setAttribute(e,n))},invert:function(r,e){var n=r.name;if(n&&n.length){var a=r.container;e.value=a.getAttribute(n)}}},switch_class:{parseDomNode:function(r,e){e.value=r.getAttribute("value"),e.checkAdd=r.getAttribute("checkAdd")==="true"},run:function(r){p.switchClass(r.container,r.checkAdd,r.value)},invert:function(r,e){e.checkAdd=p.hasClass(r.container,r.value)}},insert:{needsContainer:!1,parseDomNode:function(r,e){e.beforeId=r.getAttribute("before")},run:function(r){var e=r.beforeId,n=r.content,a=r.container;if(e&&e.length>0){var c=document.getElementById(e);c&&c.insertAdjacentHTML("beforebegin",n)}else a&&a.insertAdjacentHTML("beforeend",n)},invert:A},special:{needsContainer:!1,parseDomNode:function(r,e){var n=r.getAttribute("target-special");e.specialTarget=n;var a=e.options.special,c=a[n],l=c.parseDomNode;l&&l(r,e)},run:function(r){var e=r.options.special;return e[r.specialTarget].run(r)},invert:function(r,e){var n=r.options.special,a=n[r.specialTarget].invert;a&&a(r,e)}},scroll_to:G,delay:z};function D(t,r,e){if(t){var n=K.get(t),a=n&&n[r];a&&a.call(n,e)}}function j(t,r,e){return{pushType:t,envelope:r,domNode:e}}function U(t,r){return{error:t,message:r}}function V(t,r,e){var n=[],a=R.createDomTree(t),c=r.onDomParsed,l=r.parseDomEnvelope;return I(a.childNodes,function(u,b){if(u.getAttribute){var i=u.getAttribute("action");if(i==null){var f=U("invalid_envelope_format");r.onEnvelopeParseError&&r.onEnvelopeParseError(f),k.logging.warn("Envelope parsing failure",f);return}var h=u.getAttribute("target-id"),d=h?null:u.getAttribute("target-qs"),m=h||d?null:u.getAttribute("targets-qs"),s=u.getAttribute("push-type"),o={pushType:s,action:i,isCritical:u.hasAttribute("data-critical"),irreversible:u.hasAttribute("data-irreversible"),index:b,options:r,context:e,content:u.innerHTML,contentDom:m?null:u,contentDomFirst:u.firstChild,contentDomLast:u.lastChild,targetId:h,targetSelector:d,targetsSelector:m},g=E[o.action];g&&"parseDomNode"in g&&g.parseDomNode(u,o),l&&l(u,o),D(s,"pushParse",j(s,o,u)),D(s,"pushReceived",j(s,o)),n.push(o)}}),e&&(e.envelopes=n),c&&c(e||{envelopes:n}),n.length===0&&k.logging.info("No envelopes received or successfully parsed from input:\n",n),n}function M(t,r){return t||r.needsContainer===!1}var W=function(t,r){return function(n){requestAnimationFrame(requestAnimationFrame.bind(this,t.bind(r,n)))}};function y(t,r,e){var n=t.getContainer,a=n===void 0?w:n,c=t.onEnvelope,l=t.onComplete,u=t.onCompleteDeferred,b=!0;I(r,function(i,f){var h=i.pushType,d=i.action,m=i.content,s=a(f,d,m,i);s===!1&&(s=w(f,d,m,i)),i.content=m,i.container=s;var o=E[d],g=null,N;if(o)if(M(s,o)){var T=0,v=O(s,NodeList)?s:null;if(v&&(s=v[T],i.container=s,i.containers=v),t.computeUndo&&!i.irreversible&&o.invert){e=e||{};var X=e.undo||(e.undo=[]),q=Q(i);o.invert(i,q),X.push(q)}do if(M(s,o)&&(g=o.run(i),s=i.container,s&&"relaunchScripts"in o&&o.relaunchScripts&&B.runAll(s,i.content)),v)i.container=s=++T<v.length?v[T]:null;else break;while(s);v&&(i.container=null)}else e&&i.isCritical&&(e.failed||(e.failed=[])).push(i);if(c&&c(f,d,m,s),D(h,"pushProcessed",j(h,i)),N=g&&g.task,N&&f!==r.length-1)return N.anyway(function(){y(t,r.slice(f+1),e)}),b=!1,!0}),b&&l&&(l(e),u&&W(u,null)(e)),J.process()}var C=function(t,r,e){r=r||{},r.special||(r.special={}),r.special.css=H.processing.css,r.special.link=H.processing.link,y(r,V(t,r,e),e)};return C.processAjaxEnvelopes=y,F.storeFields({processAjaxEnvelope:C}),C})(__jsRegistry.c, __jsRegistry.cq, __jsRegistry.k, __jsRegistry.s, __jsRegistry.cr, __jsRegistry.cs, __jsRegistry.aa, __jsRegistry.ct, __jsRegistry.cu, __jsRegistry.cv, __jsRegistry.cx, __jsRegistry.dc, __jsRegistry.dd)||window);
__jsRegistry.df = __globalRegistry["iPG21BQ"] || (__globalRegistry["iPG21BQ"] = (function(){var o={};Object.defineProperty(o,"isScrollable",{enumerable:!0,get:function(){return i}});function r(e){return e!=="visible"&&(e==="auto"||e==="scroll")}function i(e,n){var l="overflowX",u="overflowY",t=window.getComputedStyle(e);return n?r(t[n==="x"?l:u]):r(t[l])||r(t[u])}return o})()||window);
__jsRegistry.dg = __globalRegistry["s6a9iGw"] || (__globalRegistry["s6a9iGw"] = (function(){var d=.34,s={DISCARDING:"discard"};return{IObserverPhases:s,defaultViewThreshold:d,discardItem:function(e,a){var r=e.listener;e.phase=s.DISCARDING,a&&Object.assign(e,a),r.track(e),r.discard&&r.discard(e)}}})()||window);
__jsRegistry.dh = __globalRegistry["v9FpOqw"] || (__globalRegistry["v9FpOqw"] = (function(u,T,v){function G(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}if(!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype))return{isNative:!1};var a={},b={},h={};function d(e){return b[e]}function R(e,t){b[e]=t}function A(e){delete b[e]}var w={};function O(e){var t=w[e];return t===void 0&&(t=[],k(e,t)),t}function k(e,t){w[e]=t}function D(e){delete w[e]}function B(e,t,r,i){var n=d(r);p(e,r,i);var s=O(r);return s.push(e),n&&n.observe(e),t.registered(i),i}function y(e,t,r){var i=d(r),n={target:e,inViewport:!1,viewThreshold:i&&i.viewThreshold||u.defaultViewThreshold,reachedViewThreshold:!1,observerName:r,listener:t};p(e,r,n);var s=O(r);return s.push(e),i&&i.observe(e),t.registered(n),n}function g(e,t){return e.okTrackNoticeMap[t]}function p(e,t,r){return e.okTrackNoticeMap||(e.okTrackNoticeMap={}),e.okTrackNoticeMap[t]=r}function S(e,t){var r=d(t);r&&r.unobserve(e);var i=O(t),n=i.indexOf(e);n>-1&&(u.discardItem(g(e,t)),i.splice(n,1)),M(t)}function U(e,t){T(e,function(r){K(r,t)})}function K(e,t){var r=e.target,i=g(r,t.observerName),n=i.listener;n.trackV2(i,e)}var l=null;function j(e,t){T(e,function(H){x(H,t)});var r=t.observerName,i=L(r),n=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s],c=o.intersectionRatio>(n&&n.intersectionRatio||0);(!n||c)&&(n=o)}if(n&&G(n.target,HTMLElement)&&(l&&l.target)!==n.target){l=n;var f=g(n.target,r),E=f.listener;E.track(f)}}function L(e){return h[e]}function M(e){delete h[e]}function V(e,t,r){e.inViewport=t,e.reachedViewThreshold=r}function x(e,t){var r=e.target,i=t.observerName,n=g(r,i),s=e.intersectionRatio,o=s>0,c=s>=n.viewThreshold,f=n.listener;if(f.supportsTrackWithIntersectedEntries){V(n,o,c),h[i]||(h[i]={});var E=h[i];c?E[r.dataset.options]=e:(E[r.dataset.options]&&(f.track(n),delete E[r.dataset.options]),r===(l&&l.target)&&(l=null));return}(n.inViewport!==o||n.reachedViewThreshold!==c)&&(V(n,o,c),f.track(n))}function C(e){var t=d(e);N(t,e)}function N(e,t){if(e){e.disconnect();var r=O(t),i=[];k(t,i),T(r,function(n){z(n,t,i)})}}function I(e){var t=d(e);t&&t.disconnect(),A(e),D(e)}function P(e,t){var r=t.viewablePercents.map(function(o){return o/100}),i=t.useCached||!1,n=d(e);if(n&&i)return!1;C(e);var s=new IntersectionObserver(U,{threshold:r});return s.observerName=e,s.optionsV2=t,_(e,s),!0}function q(e,t){var r=t.viewThreshold||u.defaultViewThreshold,i=t.intersectionObserverThresholds||[0,r];C(e);var n=new IntersectionObserver(j,{threshold:i});n.observerName=e,n.viewThreshold=r,_(e,n)}function _(e,t){R(e,t);for(var r=O(e),i=0,n=r.length;i<n;i++)t.observe(r[i])}function z(e,t,r){__js_temp_htmlTag.contains(e)?r.push(e):u.discardItem(g(e,t),{inViewport:!1,reachedViewThreshold:!1})}return{isNative:!0,Phase:u.IObserverPhases,initObserverV2:function(t,r,i){if(0&&i)var n,s;var o=r.useCached||!1,c=P(t,r);o?c&&(delete a[t],v.rendering.attachOnce(function(){a[t]=!0,a[t]&&(delete a[t],I(t))})):(delete a[t],v.rendering.attachOnce(function(){a[t]=!0}),v.navigated.attachOnce(function(){a[t]&&(delete a[t],I(t))}))},initObserver:function(t,r){q(t,r),delete a[t],v.rendering.attachOnce(function(){a[t]=!0}),v.navigated.attachOnce(function(){a[t]&&(delete a[t],I(t))})},observe:y,observeV2:B,unobserve:S,addListener:function(t){},reflow:function(){}}})(__jsRegistry.dg, __jsRegistry.k, __jsRegistry.w)||window);
__jsRegistry.di = __globalRegistry["fMMcdA"] || (__globalRegistry["fMMcdA"] = (function(v,R,A,S,f,B){if(S.isNative)return S;var L=3,h=0,y=1,I=2,m=!1,l=[],D=R(q,window.okHead.scrollThrottle),s=v.calc(),M={x:0,y:0},U={top:0,left:0,width:0,height:0},w=[],G=A.isScrollable,O={};function H(e){return O[e]||f.defaultViewThreshold}function W(e,r){O[e]=r}function z(e,r,t){var n=H(t),o=r.supportsScrollParent?F(e):__js_temp_htmlTag;Y(o,r);var a={target:e,inViewport:!1,viewThreshold:n,reachedViewThreshold:!1,listener:r},i={index:l.length,element:e,listener:r,scrollParent:o,isInViewport:!1,rect:null,state:h,notice:a};return r.registered(a),l.push(i),E(i),a}function K(e){var r=-1;l.forEach(function(t,n){if(t.element===e)return r=n}),r>-1&&(f.discardItem(l[r].notice),l.splice(r,1))}function F(e){var r=null,t=e,n;do n=t!==e&&t.okIsSP?t:t.okIOSP,n||(G(t)?(t.okIOSP=__js_temp_htmlTag,t.okIsSP=!0,n=t===e?__js_temp_htmlTag:t):((r||(r=[])).push(t),t=t.parentElement));while(!n&&t);return n||(n=__js_temp_htmlTag),r&&r.forEach(function(o){o.okIOSP=n}),n}function Y(e,r){if(e!==__js_temp_htmlTag){var t=b(e);t?t.indexOf(r)===-1&&t.push(r):(e.okISOSP=[r],e.okSO={x:0,y:0},e.addEventListener("scroll",D))}}function b(e){return e.okISOSP}function T(e){return e.okSO}function g(e){var r=T(e);r.x=e.scrollLeft,r.y=e.scrollTop}function q(e){var r=e.target;g(r),P();var t=b(r);t.forEach(x);for(var n=0,o=l.length;n<o;n++){var a=l[n];t.indexOf(a.listener)!==-1&&E(a)}}function x(e){e.lastVisibleIndex=null}function V(e){s=e,P(),w.forEach(x),l.forEach(E)}function E(e){var r=e.element,t=e.listener,n=t.supportsScrollParent,o=n&&T(e.scrollParent)||M,a=e.rect;if(!a)if(t.aheadOfTime||t.lastVisibleIndex==null||e.index<t.lastVisibleIndex+L){var i=J(r),_=n?i.left-r.clientLeft+o.x:0,C=n?i.width:0,j=i.top+s.scrollTop-r.clientTop+o.y,N=i.height;e.rect=a={left:_,right:_+C,width:C,top:j,bottom:j+N,height:N}}else return;var ee=e.state,d=e.notice,c=h,re=d.viewThreshold,te=s.scrollTop+o.y,ne=s.scrollBottom+o.y,u=Math.max(0,Math.min(a.bottom,ne)-Math.max(a.top,te))/a.height;if(u>0){if(n){var oe=o.x,ae=o.x+s.width,le=Math.max(0,Math.min(a.right,ae)-Math.max(a.left,oe))/a.width;u*=le}u>0&&(c=u>=re?I:y,(t.lastVisibleIndex==null||t.lastVisibleIndex<e.index)&&(t.lastVisibleIndex=e.index))}c!==ee&&(e.state=c,d.inViewport=c!==h,d.reachedViewThreshold=c===I,t.track(d))}function J(e){try{return e.getBoundingClientRect()}catch(r){return U}}function Q(e){var r=l;l=[],r.forEach(X)}function X(e){if(__js_temp_htmlTag.contains(e.element))l.push(e);else{var r=e.listener,t=e.notice;t.inViewport=!1,t.reachedViewThreshold=!1,r.track(t),r.discard&&r.discard(t)}}function Z(e){e.target.tagName==="IMG"&&k()}var p=-1;function k(){p===-1&&(p=setTimeout($,17))}function $(){p=-1,m=!0,V(v.calc())}function P(){if(m){var e=[];l.forEach(function(r){r.rect=null;var t=r.listener,n=t.supportsScrollParent,o=n&&r.scrollParent;o&&T(o)&&e.indexOf(o)===-1&&e.push(o)}),e.forEach(function(r){g(r)}),m=!1}}return{isNative:!1,Phase:f.IObserverPhases,initObserver:function(r,t){var n=t.viewThreshold||f.defaultViewThreshold;W(r,n),v.changed.attach(V),__js_temp_htmlTag.addEventListener("load",Z,!0),B.navigated.attachOnce(function(){Q()})},observe:z,unobserve:K,addListener:function(r){w.push(r)},reflow:k}})(__jsRegistry.bd, __jsRegistry.bb, __jsRegistry.df, __jsRegistry.dh, __jsRegistry.dg, __jsRegistry.w)||window);
__jsRegistry.dj = __globalRegistry["i2u1ldQ"] || (__globalRegistry["i2u1ldQ"] = (function(i,e){return e.isNative?e:i})(__jsRegistry.di, __jsRegistry.dh)||window);
__jsRegistry.dk = __globalRegistry["aCPSXSg"] || (__globalRegistry["aCPSXSg"] = (function(n,i,c,t){n.autoPausableAnimation=function(r){var e=r.target,s={registered:function(){},track:function(o){e.style.animationPlayState=o.inViewport?"":"paused"}};t.observe(e,s),i.rendering.attachOnce(function(){t.unobserve(e)})}})(__jsRegistry.c, __jsRegistry.w, __jsRegistry.bd, __jsRegistry.dj)||window);
__jsRegistry.dl = __globalRegistry["tS3B5mw"] || (__globalRegistry["tS3B5mw"] = (function(d,l,i,v){var a="touchOverlay",t,e;l.addFuncHandler(a,{touchStart:function(r){u(r.target)}});function u(o){var r=t;r&&(t=null,r.resolve()),o&&i.remove(o),e=null}return{lockScreen:function(r,s){var c=r||document.body,n;return s&&(n=s.prepend),e||(t=d.start(),e=document.createElement("div"),e.className="touch-overlay",e.setAttribute("data-view-level","doc"),e.setAttribute("data-func",a),v.listenPreventable(e),n?c.insertBefore(e,c.children[0]):c.appendChild(e)),r&&r!==e.parentNode&&(n?r.insertBefore(e,r.children[0]):r.appendChild(e)),t},unlockScreen:function(){u(e)}}})(__jsRegistry.n, __jsRegistry.an, __jsRegistry.s, __jsRegistry.am)||window);
__jsRegistry.dm = __globalRegistry["pSyOnNA"] || (__globalRegistry["pSyOnNA"] = (function(e){return{htmlFromEnvelopeInserted:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.dn = __globalRegistry["p5Cg5CQ"] || (__globalRegistry["p5Cg5CQ"] = (function(g){var p="png",S=window.devicePixelRatio||1,u="image",k=S>=1.5?"@2x":"";function l(c,d){var o=g.start(),A=0,C=0,I=c.length,i={};return c.map(function(r){var e={},a,t,n;for(var v in r)r.hasOwnProperty(v)&&(t=v,n=r[v],a=n.name||v);n.ext=n.ext||p;var f=n.variants||{};n.useCustomVariants||(f[u]=k);var E=0;for(var h in f)E++,E>1&&I++,e[h]=w(a,f[h],n);i[t]=e;for(var T in e){var _=e[T];(function(s){_.onerror=function(P){delete e[s],e.needCheck=!0,m(i)}})(T),_.onload=function(s){C++,d&&d(s.target),m(i)}}}),o;function w(r,e,a){e=e||"";var t=new Image;return t.src=a.path+r+e+"."+a.ext,t}function m(r){if(A++,A===I)if(C===0)o.reject(r);else{for(var e in r){var a=r[e],t=!0;if(a.needCheck){for(var n in a)if(a[n]&&n!=="needCheck"){t=!1,delete a.needCheck;break}t&&delete i[e]}}o.resolve(r)}}}return l._OKinterop={_baseKey:u},l})(__jsRegistry.n)||window);
__jsRegistry.dp = __globalRegistry["pxsC3GQ"] || (__globalRegistry["pxsC3GQ"] = (function(g){var _=g._OKinterop,c=function(e,r){return r[e]},u=function(e){return e[_._baseKey]};return function(e,r){var s=window.devicePixelRatio||1,n=c,h=u,d,t;r&&(n=r.getAsset||n,h=r.getResource||h,d=r.width,t=r.height);for(var w in e)if(e.hasOwnProperty(w)){var f=n(w,e);if(f){var i=h(f);if(i){var v=document.createElement("canvas"),a=v.getContext("2d"),l=d||i.width,R=t||i.height;v.width=l*s,v.height=R*s,a.scale(s,s),a.shadowOffsetX=0,a.shadowOffsetY=1,a.shadowBlur=5*s,a.shadowColor="rgba(0,0,0,.35)",a.drawImage(i,0,0,l,R),f.canvas=v}}}}})(__jsRegistry.dn)||window);
__jsRegistry.dq = __globalRegistry["Axua2g"] || (__globalRegistry["Axua2g"] = (function(N,U,w){var p=window.performance,I=p&&typeof p.now=="function",k=U.isNativeRAFSupported;function z(i){return window.setTimeout(i,15)}function H(i){return window.clearTimeout(i)}var P=(function(){return k?window.requestAnimationFrame:z})(),E=(function(){return k?window.cancelAnimationFrame:H})(),J="@no_name_animation";function x(i,a,n){this.props=n,this.animationData=i,this.dataProcessor=a||new Error("Render function must be specified."),this.animationId=null,this.animationsDone=[],this.animationsStopped=[],this.animationsSet=[],this.animationsCount=0,this.loop=!0,this.onAnimationStart=w.create(),this.onAnimationChainStart=w.create(),this.onAnimationStop=w.create(),this.onAnimationEnd=w.create(),this.onAllAnimationsEnd=w.create(),this.callback=null,this.onAnimationEnd.attach(K,this)}x.prototype={drawFrame:function(){var a=this.props;for(var n in a){var r=a[n],s=r.progressMap;s&&!(r.done||r.stopped)&&r.dataProcessor(s,r,this.animationData)}},run:function(){var a=this.props;if(a.name)this.animationsCount=1,this._animate(a);else for(var n in a)if(a.hasOwnProperty(n)){this.animationsSet.push(n),this.animationsCount++;var r=a[n];r.name=n,this._animate(r)}return this},stop:function(a,n){var r=this;a&&(r=this.props[a]),r.stopped=!0,E(r.animationId),this.animationsStopped.push(a||"##all")},addProps:function(a){return this.props=a,this},disableLoop:function(){this.loop=!1},_animate:function(a){var n=0,r=this.loop,s=this.animationData,F=a.dataProcessor||(a.dataProcessor=this.dataProcessor),S=a.name||J,e=a.group,v=a.duration,A=a.delay,d=a.from,u=a.to,D=a.timingFn;if(e){if(a.totalTypesCount=0,Object.keys)a.totalTypesCount=Object.keys(e).length;else for(var $ in e)a.totalTypesCount++;v=v||e.duration,A=A||e.delay,d=d||e.from,u=u||e.to,D=D||e.timingFn,this.animationsCount+=a.totalTypesCount-1}v=v||150,A=A||0,d=d||0,u=u||0;var O=(I?p:Date).now(),Q=u-d,V=O+A,o=this;e?a.animationId=P(W):(a.animationId=P(L),o.onAnimationStart.trigger({animationData:s,name:S}),a.started=!0);function W(m){m=I&&m||Date.now();var l=a.progressMap||(a.progressMap={}),j;for(var h in e){var t=e[h];if(t.goNext){var C=t.next;C.from===void 0&&(C.from=t.endPoint),e[h]=t=C,t.isNext=!0,t.startWithDelay=m+(t.delay||0)}var X=t.to||u,T=t.from||d,R=t.delay||A,q=t.startWithDelay||(t.startWithDelay=O+R);if(t.done){l[h]=t.endPoint;continue}if(!t.started)if(t.started=m>=q)t.eventData={animationData:s,name:S,type:h},t.isNext?(t.eventData.chain=t.name,o.onAnimationChainStart.trigger(t.eventData)):o.onAnimationStart.trigger(t.eventData);else{l[h]=T;continue}t.notSameProgress===void 0&&(t.notSameProgress=t.duration>0||t.timingFn||R>0);var Y=t.duration||v,M=t.progress=Math.min(1,(m-q)/Y),Z=t.diff=X-T,G=t.timingFn||D,b;t.notSameProgress||j===void 0?(b=G?G(M):M,t.notSameProgress||(j=b)):t.progress=b=j,l[h]=T+b*Z,M===1&&(t.next?t.goNext=!0:(t.done=!0,a.totalTypesCount-=1,o.onAnimationEnd.trigger(t.eventData)),t.endPoint=l[h])}if(o.stopped||a.stopped)return o.onAnimationStop.trigger(t.eventData);if(r&&F(l,a,s),a.totalTypesCount===0){E(a.animationId),a.done=!0,a.animationId=null;return}a.animationId=P(W)}function L(m){m=I&&m||Date.now(),n=a.progress=Math.min((m-V)/v,1);var l=a.tweenProgress=D?D(n):n;if(n>=1){r&&F(u,a,s),E(a.animationId),a.animationId=null,o.onAnimationEnd.trigger({animationData:s,name:S});return}else if(o.stopped||a.stopped)return o.onAnimationStop.trigger({animationData:s,name:S});r&&F(d+l*Q,a,s),a.animationId=P(L)}}};function K(i){var a=this.animationsDone;if(a.push(i.type||i.name),a.length===this.animationsCount){var n=this;setTimeout(function(){n.done=!0,n.onAllAnimationsEnd.trigger(i)},0)}}return N.Animatable={build:x},N.Animatable})(__jsRegistry.c, __jsRegistry.aq, __jsRegistry.u)||window);
__jsRegistry.dr = __globalRegistry["aHEJ56w"] || (__globalRegistry["aHEJ56w"] = (function(c){function f(n){return n*(n>1?f(n-1):1)}var d=function(r,t,e){var o=1-r;return 3*r*(o*o)*t+3*(r*r)*o*e+r*r*r},s=function(r,t,e,o){return{getYByX:function(a){return(a-r)/(e-r)*(o-t)+t},getXByY:function(a){return(a-t)/(o-t)*(e-r)+r}}};function g(){var n=!0,r,t,e;return function(i,a){var u;if(i=i||0,a=a||1,n){do u=2*Math.random()-1,r=2*Math.random()-1,e=u*u+r*r;while(e>1||e===0);return t=Math.sqrt(-2*Math.log(e)/e),n=!1,u*t*a+i}return n=!0,r*t*a+i}}var h=function(){for(var r=Math.random(),t=11;t--;)r+=Math.random();return r/12},l=function(r,t){return r=typeof r>"u"?0:r,t=t||1,function(){return r+Math.floor(Math.random()*(t-r+1))}};return c.animationUtils={easings:{swing:function(r){return .5-Math.cos(r*Math.PI)/2},quad:function(r){return Math.pow(r,2)},cubic:function(r){return Math.pow(r,3)},easeOutQuad:function(r){return r*(2-r)}},getCubicBezierTiming:d,createVector:s,factorial:f,createGaussRandomizer:g,normalizedRandomBy12:h,createSimplerRandomizer:l},c.animationUtils})(__jsRegistry.c)||window);
__jsRegistry.ds = __globalRegistry["mmytIDw"] || (__globalRegistry["mmytIDw"] = (function(){var a=180/Math.PI,o=Math.PI/180,u=2*Math.PI,I=4*Math.PI;function N(t,r,n){r=r||1;var e=t/r;return t%r&&(e=n?parseFloat(e.toFixed(n)):Math.round(e)),e}function d(t,r){return Math.floor(t/r*100)}function A(t,r,n){return Math.min(Math.max(t,r),n)}return{ANGLES_IN_RADIAN:a,RADIANS_IN_ANGLE:o,TWO_PI:u,QUAD_PI:I,clampNumber:N,truncateNumber:A,getFlooredPercent:d,randomSign:function(){return Math.random()>.5?1:-1},degToRad:function(r){return r*o},radToDeg:function(r){return r*a}}})()||window);
__jsRegistry.dt = __globalRegistry["CCPe3w"] || (__globalRegistry["CCPe3w"] = (function(){function c(i){this.canvas=i,this.ctx=i.getContext("2d"),this.busy=!1,this.activeAnimations=[]}return c.prototype={process:function(t){var e=this,o=this.canvas,u=this.ctx,n=this.activeAnimations,r=!1;n.forEach(function(s,a){s.done||s.stopped?delete n[a]:(s.drawFrame(),r=!0)}),r?requestAnimationFrame(function(s){if(u.clearRect(0,0,o._okReact_w,o._okReact_h),n.length>15){var a=[];n.forEach(function(h){a.push(h)}),e.activeAnimations=a}e.process(s)}):(this.activeAnimations=[],this.busy=!1)},run:function(t){this.busy||(this.process(t),this.busy=!0)},add:function(t){t.disableLoop(),this.activeAnimations.push(t)},remove:function(t){var e=this.activeAnimations;delete e[e.indexOf(t)]},addAndRun:function(t){this.add(t),t.disableLoop(),t.run(),this.run()}},c})()||window);
__jsRegistry.du = __globalRegistry["r7rJtDw"] || (__globalRegistry["r7rJtDw"] = (function(){var I="reaction-source",O="reactions_item_img",C="__active",S="g--untouchable",T="__waiting",a="longtap-reaction-hint-shown",A=5,N=Math.PI*3,_=48,L=2,r=600,n=185,t=2.5*_;function i(E){return Math.abs(Math.sin(N*E))*Math.pow(1-E,1.5)}return{REACTION_SOURCE_ID:I,REACTION_IMG_CLASS:O,REACTION_ACTIVE_CLASS:C,UNTOUCHABLE_CSS_MOD:S,WAITING_CSS_MOD:T,HINT_LONGTAP_LS_KEY:a,LONGTAP_HINT_SHOWN_LIMIT:A,REACTION_SIZE:_,SCALE_WHILE_FLY:L,SCALE_BOUNCE_DUR:r,BOUNCE_OUT_DUR:n,FLY_OFFSET_Y:t,tripleBounceEaseOutTiming:i}})()||window);
__jsRegistry.dv = __globalRegistry["rXXC3ug"] || (__globalRegistry["rXXC3ug"] = (function(We,E,Xe,f,k,le,ce,y,D,qe,Ge,z,ue,J,ve,Ue,fe,Ve,ze,p,Je){var P=p.REACTION_SOURCE_ID,de=p.REACTION_IMG_CLASS,F=p.REACTION_ACTIVE_CLASS,Ke=p.UNTOUCHABLE_CSS_MOD,Qe=p.WAITING_CSS_MOD,Ze=p.HINT_LONGTAP_LS_KEY,$e=p.LONGTAP_HINT_SHOWN_LIMIT,he=p.FLY_OFFSET_Y,C=p.REACTION_SIZE,Y=p.SCALE_WHILE_FLY,ea=p.SCALE_BOUNCE_DUR,aa=p.BOUNCE_OUT_DUR,ta=p.tripleBounceEaseOutTiming,me="__processing",H="__closing",b="__chosen",ra="__private",K="private-reaction-hint-shown",W="__super-react",sa=15,Se=50,X=146,x=5,ia=425,_e=1300,Q=2.8,na=350,oa=Math.PI/180,la=window.devicePixelRatio||1,pe=1300/2,ca=sa*1.5,ge=C*4,ua=C*5,va=C*6,Ae=X*X,Ee=Math.sqrt(Ae+Ae),Ce=1.5*C,fa=C/2,Re=Q*.9,da=Y*.9,ha=pe/3,S,_,Oe,Ie,Z=Ue.build,Te,g,v,ma=fe.createGaussRandomizer(),Sa=fe.createGaussRandomizer(),_a=Ve.randomSign,M=z.create(),q=z.create(),ke=z.create();function pa(t){if(!t)return{};var e=Object.assign(t);return e.reactionMap.length&&(e.reactionMap=JSON.parse(t.reactionMap)),e}function $(t){return ke.trigger(pa(t))}Xe.create({name:"initReactions",init:function(e){$(e),_=e.reactionMap,S=e||{};var a=[],r=[],s=[];for(var i in _){var n={},l={},o={},c=_[i],d=c.name,h=L(i).isSuper;l[i]={path:c.extraAssets?c.extraAssets.main:"/mres/img/react/l/",name:d},o[i]={path:c.extraAssets?c.extraAssets.widget:"/mres/img/react/w/",name:d},h&&(l[i].name=d+"_sup",o[i].name=d+"_sup",n[i]={path:c.extraAssets?c.extraAssets.large:"/mres/img/react/xl/",name:d,useCustomVariants:!0,variants:{sup:"_sup"}},r.push(n)),a.push(l),s.push(o)}var m=[{"btn-hor-loader":{path:"/mres/img/loaders/",ext:"gif",useCustomVariants:!0,variants:{x1:""}}},{shadow_c_55:{path:"/mres/img/react/",useCustomVariants:!0,variants:{x1:""}}}];Oe=J(a).then(function(u){ve(u,{width:Se,height:Se})}),Ie=J(r).then(function(u){ve(u,{width:X,height:X,getResource:function(O){return O.sup}})}),J(s.concat(m))},update:function(e){$(e),x=e.tapsToSuper||x,S=e||{},Te=document.getElementById("content");var a=Je.resolved;g=document.getElementById(P),g==null&&(a=D.request("/dk?bk="+e.fetchMarkupBk,"POST",{compToken:"reactionPanel"}).then(function(r){var s=r.responseText;s&&document.body.insertAdjacentHTML("beforeend",s)}).withToken().send()),a.then(function(){g=document.getElementById(P),v=E.getOrMakeBehavior(g),v.update(e)})},discard:function(e){$(e),v&&(k.changed.detach(R,v),ie.close())}});function ee(t,e){this.model=t,this.elem=e,this.widgetBehavior=null,this.lastSuper=null,this.lastSelected=null,this.animationStorage={},this.canvas=document.getElementById("all-react-canvas"),this.canvas&&(this.canvasAnimator=new ze(this.canvas))}ee.isInstant=!0,ee.prototype={update:function(e){var a;for(var r in _)a=!1,this.animationStorage[r]=[];if(a)for(var r in JSON.parse(e.reactionMap))this.animationStorage[r]=[]},flushStorageOfType:function(e){this.animationStorage[e]=[]},removeInstanceFromStorage:function(e,a){var r=this.animationStorage[e],s=r.indexOf(a);s>-1&&r.splice(s,1)},getInstancesFromStorage:function(e){return this.animationStorage[e]},isSuper:function(e){return e===this.lastSuper},clearLastSuper:function(){var e=this.lastSuper;e&&(e._okRId-=100,e.setAttribute("data-reaction",e._okRId),e.setAttribute("aria-label",_[e._okRId].text),f.removeClass(e,W)),this.lastSuper=null},lockTap:function(e){var a=this;a.tapLocked=!0,setTimeout(function(){a.tapLocked=!1},e)},launchReaction:{touchStart:function(e,a,r,s){if(typeof s!="boolean"&&(s=!0),!this.tapLocked){var i=this,n=i.widgetBehavior,l=i.isSuper(a),o=a._okRId,c=i.canvas;if(r=r||S.advancedAnimationsEnabled,a!==i.lastSelected&&(i.lastSelected&&(i.clearLastSuper(),f.removeClass(i.lastSelected,b)),f.addClass(a,b),s&&te(a,n)),this.lastSelected=a,!r){xe(n);return}var d={reactionBehavior:i,reactionId:o,target:a},h=new be(parseInt(a.getAttribute("data-reaction"))).addRectBox(a.getBoundingClientRect());h.centerPosX-=c._okReact_x,h.centerPosY-=c._okReact_y,d.animatable=h,d.ctx=c.getContext("2d");var m=Oe.result[o];m&&(d.asset=m.canvas);var u=new Z(d,ye,{transform:{duration:ia,group:{translateY:{to:-Math.min(he,he+Sa(0,.5)*C)},translateX:{to:C*ma(0,.75)},rotate:{to:30*_a()},scale:{from:1,to:Y,next:{name:"scale-out",to:Y*.925,duration:20,timingFn:null,next:{name:"scale-bounce",to:Y*1.15,duration:ea,timingFn:ta,next:{name:"scale-end",to:0,duration:aa,delay:200}}}}}}});this.animationStorage[o].push(u),l||(s?u.onAnimationStart.attach(ae,u):u.onAnimationStart.attach(we,u)),s?u.onAllAnimationsEnd.attachOnce(Le,u):u.onAllAnimationsEnd.attachOnce(ga,u),i.canvasAnimator.addAndRun(u)}},touchEnd:function(e,a){},touchMove:function(){},keyDown:function(e,a){if(e.keyCode===13){var r=E.getOrMakeBehavior(a);r.launchReaction.touchStart.call(this,e,a,!1)}}},emitterReaction:{touchStart:function(e,a,r){var s=E.getOrMakeBehavior(a);s.launchReaction.touchStart.call(this,e,a,r,!1)},keyDown:function(e,a){if(e.keyCode===13){var r=E.getOrMakeBehavior(a);r.launchReaction.touchStart.call(this,e,a,!1,!1)}}}},E.register("reactionsBehavior",ee);function be(t){this.id=t}be.prototype={addRectBox:function(e){return this.box=e,this.width=e.width,this.height=e.height,this.halfWidth=this.width>>1,this.halfHeight=this.height>>1,this.centerPosX=this.halfWidth+e.left,this.centerPosY=this.halfHeight+e.top,this}};function Le(t,e){typeof e!="boolean"&&(e=!0);var a=this,r=t.animationData,s=r.reactionId,i=r.reactionBehavior;i.removeInstanceFromStorage(s,a),setTimeout(function(){e?a.onAnimationStart.detach(ae,a):a.onAnimationStart.detach(we,a)},0)}function ga(t){return Le.call(this,t,!1)}function ae(t,e){if(typeof e!="boolean"&&(e=!0),t.type==="translateX"){var a=t.animationData,r=a.reactionBehavior,s=a.target,i=a.reactionId,n=_[i].text,l=r.getInstancesFromStorage(i).length;if(l===x&&M.trigger({id:s&&s.getAttribute("data-reaction-modifier")?_[i].name:i,text:n,isSuper:!1}),l>x){this.stop(),r.removeInstanceFromStorage(i,this),r.canvasAnimator.remove(this),r.clearLastSuper(),f.addClass(s,W);var o=s._okRId+=100,c=_[o].text;s.setAttribute("data-reaction",o),s.setAttribute("aria-label",_[o].text),r.lastSuper=s,M.trigger({id:o,text:c,isSuper:!0}),Aa(s,r),e&&te(s,r.widgetBehavior)}}}function we(t){return ae.call(this,t,!1)}function Aa(t,e){for(var a=t._okRId-100,r=e.getInstancesFromStorage(a),s=0,i=0,n=[],l=0,o=r.length;l<o;l++){var c=r[l];c.stop();var d=c.props.transform,h=d.progressMap;if(h){var m=h.translateX,u=h.translateY,A=h.rotate;s+=m,i+=u;var O=c.animationData;n.push({startX:m,startY:u,rotateFrom:A,animation:new Z(O,ye)})}}e.flushStorageOfType(a);var G=n.length;s/=G,i/=G,i>-Ce&&(i=-(Ce+Math.random()*C));var I=t.getBoundingClientRect(),T=e.canvas,ne=new Z({ctx:T.getContext("2d"),x:I.left+(I.width>>1)-T._okReact_x,y:I.top+(I.height>>1)-T._okReact_y,xSum:s,ySum:i,asset:Ie.result[t._okRId].canvas},Ea,{transform:{duration:_e,timingFn:Ne,group:{scale:{from:.8,to:Q,duration:400,next:{name:"scale-in-1",to:Re,duration:200,next:{name:"scale-out-1",to:Q,duration:200,next:{name:"scale-in-2",to:Re,duration:200,next:{name:"scale-out-2",to:0,delay:100,duration:200}}}}}}}});e.canvasAnimator.addAndRun(ne);for(var l=0,o=n.length;l<o;l++){var w=n[l],N=w.animation,U=w.startX,V=w.startY,De=w.rotateFrom;N.onAllAnimationsEnd.attach(function(){e.canvasAnimator.remove(this)});var B,j;x===1?(B=0,j=0):(B=U-s,j=V-i);var Fe=Math.sqrt(B*B+j*j),oe=5;Ee>Fe&&(oe*=Ee/Fe*.2);var ba={duration:pe,timingFn:Ne,group:{translateX:{from:U,to:B*oe},translateY:{from:V,to:j*oe},rotate:{from:De,to:De+270},scale:{from:da,to:0,delay:ha}}},Ye=_e*.5,La={duration:Ye,delay:Ye/2,from:1,to:0},He={transform:ba};He.transform.group.opacity=La,N.addProps(He),e.canvasAnimator.addAndRun(N)}e.lockTap(na)}function Ne(t){return Math.pow(t,.5)}function Ea(t,e,a){var r=a.ctx,s=t.scale;r.save(),r.translate(a.x,a.y);var i=C*s,n=fa*s;r.drawImage(a.asset,a.xSum-n,a.ySum-n,i,i),r.restore()}function ye(t,e,a){var r=a.ctx,s=a.animatable,i=t.scale,n=s.halfWidth*i,l=s.width*i;r.save(),r.globalAlpha=t.opacity||1,r.translate(s.centerPosX+t.translateX,s.centerPosY+t.translateY),r.rotate(oa*t.rotate),r.drawImage(a.asset,-n,-n,l,l),r.restore()}function Ca(t,e,a){var r=a.offsetLeft,s=a.offsetWidth,i=e.offsetWidth,n;if(r+s<i)return NaN;var l=s-i,o=i/2;if(r+l*2<o)n=r+l/2;else{var c=t.right,d=Math.floor(t.width/2),h=Math.floor(t.left);if(c-d>o){var m=h+d;r+s-m>o?n=m-o:n=c-i}else n=h}return Math.floor(n)-4}function Ra(t,e){var a=Math.min(2.5,la),r=e.bottom,s=e.width,i=e.left,n=e.right,l=k.calc(),o=l.width,c=l.height,d=Math.min(i,ge),h=Math.min(o-n,ge),m=Math.min(o,s+d+h);t.forEach(function(u){var A=Math.min(r,va),O=Math.min(c-r,ua),G=r-A,I=A+O;u._okReact_w=m,u._okReact_h=I,u.width=m*a,u.height=I*a;var T=u.style;T.height=I+"px",T.width=m+"px",T.top=window.pageYOffset+G+"px";var ne=i-d;T.left=ne+"px";var w=u.getContext("2d"),N=u.getBoundingClientRect(),U=N.left,V=N.top;w.scale(a,a),u._okReact_x=U,u._okReact_y=V})}function te(t,e){var a=e.likeReaction,r=a.classList.contains(F);if(a){var s=t._okRId,i,n=a.getElementsByClassName("fi")[0];!r&&n?i=n:!r&&S.replaceDefaultIconEnabled?i=a.getElementsByClassName("ic_w")[0]:i=a.getElementsByClassName("ic-react")[0],requestAnimationFrame(function(){f.addClass(a,F),f.switchClass(a,v.isSuper(t),"__super"),a.parentNode.setAttribute("data-subtype-id",s),i.className="ic ic-react ic16 "+t._okRClass+(v.isSuper(t)?" __super-react":"");var l=je(i);if(l&&l.childNodes&&l.childNodes[0]&&(l.childNodes[0].nodeValue=_[s].text),!r){var o=i.querySelector(".widget_action_count");if(o&&o.childNodes&&o.childNodes[0]){var c=o._okWidgetCount;c==null&&(o._okWidgetCount=c=parseInt(o.getAttribute("data-w-count"),10)),o.childNodes[0].nodeValue=c+1}}})}}function Oa(t,e){var a=t.getAttribute("data-widget-id");return a?y.insertParams(e,{"st.wid":a}):e}function re(t,e){setTimeout(function(){f.removeClass(t,H),t.removeAttribute("style")},e)}function se(t,e,a,r,s,i,n){D.request(Oa(t,e)).then(function(l){var o=l.responseText;if(o&&o.length!==0){var c={},d=typeof n=="boolean"?n:!0,h={special:{applyUIChanges:{parseDomNode:function(u,A){A.isHideWidgetDivider=u.getAttribute("hide-widget-divider")==="true",A.isHideWidgetContainer=u.getAttribute("hide-widget-container")==="true"},run:function(u){var A=document.querySelector(u.content);if(A){var O=A.querySelector(".widget-list_infos_i")==null;f.switchClass(A,O&&u.isHideWidgetDivider,"__no-divider"),f.switchClass(A,O&&u.isHideWidgetContainer,"__hidden")}}}}};qe(o,h,c),d&&E.getOrMakeBehavior(t).replaceLikeLink(),Ge.htmlFromEnvelopeInserted.trigger(c),i&&setTimeout(function(){i(this)},0)}},function(){logClientEvent("reaction",["backend-failure"])}).anyway(function(){if(a){if(le.isSupported&&(S.longTapLearningEnabled&&window.localStorage.setItem(Ze,$e+1),f.hasClass(a,ra))){var l=window.localStorage.getItem(K)||0;window.localStorage.setItem(K,parseInt(l)+1)}f.removeClass(a,b),f.removeClass(t,Ke),f.removeClass(t,Qe)}r&&(r.lastSelected=null,r.clearLastSuper(),re(s,250))}).withToken().send()}function Pe(){k.changed.detach(R,v),f.removeClass(v.canvas,"__open"),f.addClass(v.canvas,"__closed"),v.canvas.removeAttribute("style"),f.removeClass(g,"__open"),f.addClass(g,H)}function xe(t){v.widgetBehavior=null,Pe();var e=v&&v.lastSelected,a=t.likeReaction,r=a.parentNode;if(a&&r&&(r.style.zIndex="1"),e){var s=t.likeReactionLink,i=e._okRId;s=y.insertParams(s,{"st.rid":i}),s=y.replaceParams(s,{"st.u":"off"}),se(t.likeReaction,s,e,v,g),logClientEvent("reaction",["reaction-send",e._okRId]),D.request("/dk?st.cmd=clickLog","POST",{"_cl.id":Date.now(),_clickLog:JSON.stringify([{target:"like-as-reaction"},{feedLocation:"main"}])}).send()}else re(g,250)}function R(t){var e=g,a,r=this===v,s=e.style;r?(f.addClass(e,me),clearTimeout(R._tid),R._tid=setTimeout(function(){f.removeClass(e,me)},400),t=this.widgetBehavior.likeReaction,a=parseInt(s.height)):(e=e||document.getElementById(P),a=e.firstChild.offsetHeight);var i=t.getBoundingClientRect(),n=Ca(i,e,Te),l=Math.floor(k.calc().scrollTop+i.top-a-ca);r||(s.height=a+"px"),s.top=l+"px",s.left=isNaN(n)?"auto":n+"px",s.visibility="visible";var o=e.getBoundingClientRect(),c=v.canvas;Ra([c],o),f.addClass(c,"__open")}function Ia(){return v.widgetBehavior.from==="react"?"emitterReaction":"launchReaction"}function Me(t){if(!t.inited){E.listenCritical(t);for(var e=t.getElementsByClassName(de),a=0,r=e.length;a<r;a++){var s=e[a];s.setAttribute("data-func",Ia());var i=parseInt(s.getAttribute("data-reaction")),n=_[i];if(n){var l=s.getAttribute("data-reaction-modifier"),o=n.name;s._okRId=i,s._okRType=o,s._okRClass=o+"-react",l&&(s._okRClass+=" "+l)}}t.inited=!0}}function Ta(t){var e=L(t),a=parseInt(t);return e.isSpecial&&(e.isPrivate?(a=a-10010,e.isSuper&&(a=a-10100)):e.isSuper?a=a-10100:a=a-1e4),e.isSuper&&(a=a-100),String(a)}function L(t){return t=parseInt(t),{isSuper:t%1e3>99,isPrivate:t%100>9,isSpecial:t>=1e4}}function ka(t,e){var a=this;if(!(ue.isNullOrEmpty(S)||!_)){var r=g||document.getElementById(P),s=E.getOrMakeBehavior(r);s.widgetBehavior=a,v.widgetBehavior.from="rdk";var i=e.closest(".widget_like-w"),n=f.hasClass(e,F)?i.getAttribute("data-subtype-id"):null,l=n&&L(n).isSuper;if(R(e),Me(r),Be(r,n,l),!f.hasClass(r,H)){if(this.likeReaction=e,this.likeReactionLink=a.likeUrl,S.longTapControlsEnabled){var o=a.elem.getElementsByClassName("hint_body")[0];o&&f.remove(o)}if(le.isSupported){var c=r.getElementsByClassName("reactions-hint")[0];if(c){var d=window.localStorage.getItem(K)||0;parseInt(d)>=S.privateReactionHintShowCount&&f.remove(c)}}f.addClass(r,"__open");var h=r.getElementsByClassName("js-default-chosen")[0];S.advancedAnimationsEnabled&&!S.longTapControlsEnabled&&(h.click(),te(h,a)),ce.lockScreen(r,{prepend:!0}).then(function(){if(!S.advancedAnimationsEnabled)if(h.click)h.click();else{var m=E.getOrMakeBehavior(h);m.launchReaction.touchStart.call(m,t,h,!1)}xe(a)}),i&&setTimeout(function(){f.hasClass(e,F)||(i.style.zIndex="10000")},0)}k.changed.attach(R,s)}}function Be(t,e,a){for(var r=t.getElementsByClassName(de),s=0,i=r.length;s<i;s++){var n=r[s];n.classList.remove(b),n.classList.remove(W),Ta(e)===n.getAttribute("data-reaction")&&v&&(v.lastSelected=n,n.classList.add(b),n.setAttribute("data-reaction",e),n.setAttribute("aria-label",_[e].text),n._okRId=parseInt(e),a&&(v.lastSuper=n,n.classList.add(W)))}}var ie={getReactionMetaInfoFromId:L,clearLastSelectedReaction:function(){var e=v&&v.lastSelected;e&&(v.clearLastSuper(),f.removeClass(v.lastSelected,b))},updateReactionOnServer:function(e,a){var r=v&&v.lastSelected;if(r){var s=r._okRId,i=a;i=y.insertParams(i,{"st.rid":s}),i=y.replaceParams(i,{"st.u":"off"}),se(e,i,v.lastSelected,v,g,null,!1),logClientEvent("reaction",["reaction-send",r._okRId]),D.request("/dk?st.cmd=clickLog","POST",{"_cl.id":Date.now(),_clickLog:JSON.stringify([{target:"like-as-reaction"},{feedLocation:"main"}])}).send()}},close:function(){q.trigger({visible:!1}),re(g,250),Pe()},open:function(e,a,r){var s=this,i=r&&L(r).isSuper;if(q.trigger({visible:!0}),!(ue.isNullOrEmpty(S)||!_)){var n=g||document.getElementById(P);if(v.widgetBehavior={likeReaction:a,from:"react"},R(a),Me(n),Be(n,r,i),!f.hasClass(n,H)){f.addClass(n,"__open");var l=n.getElementsByClassName("js-default-chosen")[0];if(S.advancedAnimationsEnabled&&!S.longTapControlsEnabled){l.click();var o=l._okRId,c=_[o].text;typeof o=="number"&&M.trigger({id:o,text:c,isSuper:L(o).isSuper})}ce.lockScreen(n,{prepend:!0}).then(function(){if(!S.advancedAnimationsEnabled)if(l.click)l.click();else{var d=E.getOrMakeBehavior(l);d.launchReaction.touchStart.call(d,e,l,!1)}s.close()})}k.changed.attach(R,v)}},reactionSubscribe:function(e){M.attach(e)},reactionUnsubscribe:function(e){M.detach(e)},visibleSubscribe:function(e){q.attach(e)},visibleUnsubscribe:function(e){q.detach(e)}};function je(t){var e=t.getElementsByClassName("ic_tx")[0];return e.querySelector(".widget_action_label")||e}return We.reactionPanel=ie,{open:ka,close:ie.close,updateReactionOnServer:se,updateConfig:ke,getWidgetTextNode:je}})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.x, __jsRegistry.s, __jsRegistry.bd, __jsRegistry.ch, __jsRegistry.dl, __jsRegistry.m, __jsRegistry.bw, __jsRegistry.de, __jsRegistry.dm, __jsRegistry.u, __jsRegistry.aa, __jsRegistry.dn, __jsRegistry.dp, __jsRegistry.dq, __jsRegistry.dr, __jsRegistry.ds, __jsRegistry.dt, __jsRegistry.du, __jsRegistry.n)||window);
__jsRegistry.dw = __globalRegistry["coFbwCg"] || (__globalRegistry["coFbwCg"] = (function(){var l={};function s(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}s(l,{get deleteRule(){return o},get deleteRuleBySelector(){return f},get injectionPoint(){return u},get insertRule(){return i},get searchRuleBySelector(){return c}});var n;function u(){return n||(n=document.createElement("style"),document.head.appendChild(n)),n.sheet}function o(e){e===void 0&&(e=-1),e>-1&&u().deleteRule(e)}function i(e,t){t===void 0&&(t=0);var r=u();return r.insertRule(e,t>0?Math.min(t,r.cssRules.length):t)}function f(e){o(c(e))}function c(e){for(var t=u().cssRules,r=0,R=t.length;r<R;r++){var a=t[r];if(a.selectorText===e)return r}return-1}return l})()||window);
__jsRegistry.dx = __globalRegistry["cgdNIFg"] || (__globalRegistry["cgdNIFg"] = (function(i,n){var e={};return i.copyService=n.create({init:function(c){e=Object.assign(e,c)}}),e})(__jsRegistry.c, __jsRegistry.x)||window);
__jsRegistry.dy = __globalRegistry["cqKztVw"] || (__globalRegistry["cqKztVw"] = (function(){function r(e,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}function u(){this.handlers=[]}return u.prototype={run:function(){for(var n=this.handlers,s=n.length-1;s>=0;s--){var t=n[s].apply(0,arguments);if(t)return t}return!1},enqueue:function(n){r(n,Function)&&(n.okIsChainRoot?this.handlers.splice(0,0,n):this.handlers.push(n))},dequeue:function(n){var s=this.handlers,t=s.indexOf(n);t!==-1&&s.splice(t,1)}},{create:function(){return new u}}})()||window);
__jsRegistry.dz = __globalRegistry["aFANw"] || (__globalRegistry["aFANw"] = (function(e){var t={};function c(u,r){for(var n in r)Object.defineProperty(u,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,n).get})}c(t,{get clickEvent(){return i},get outlinkClickEvent(){return o}});var i=e.create(),o=e.create();return t})(__jsRegistry.u)||window);
__jsRegistry.ea = __globalRegistry["aD4uIVg"] || (__globalRegistry["aD4uIVg"] = (function(T,y,N,f,u,m,v,D,P){var g={};function R(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}R(g,{get go(){return J},get goSpecific(){return E},get register(){return X},get revoke(){return Y}});function B(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var O=40,A=300,h=m.clickEvent,F=m.outlinkClickEvent,L={},s,c=!1,q="js-noajax";function H(e){for(var t=e.target,r=L;t;)if(t.tagName==="A"||p(t)&&t.dataset.href){r=o(t,e);break}else if(I(t)){var n=t.form;if(!n){var a=P.findParent(t,W);a&&B(a,HTMLFieldSetElement)&&(n=a.form)}n&&(n.okSubmitBtn=t);break}else{if(t.tagName==="LABEL")break;t=t.parentElement}!r.calledClick&&!r.handled&&h.trigger(e)}function p(e){return b(e)&&e.type==="button"}function I(e){return b(e)&&e.type==="submit"}function b(e){return e.tagName==="INPUT"||e.tagName==="BUTTON"}function w(e){var t=e.target,r=t.okSubmitBtn||t;r&&!v.isDefaultPrevented(e)&&!(0,u.hasClass)(t,q)&&o(r,e,null,t.okFormRequestData)}function o(e,t,r,n){var a={calledClick:!1,handled:!1};r=r||s;var i=p(e)?f.abs(e.dataset.href||""):e.href,l=G(e)?e:e.form,d;l?(i=l.action,d=l.method):((0,u.hasClass)(e,"js-post")&&(d="post"),e.dataset.href&&(0,u.hasClass)(e,"js-href")&&(i=f.abs(e.dataset.href)));var S=f.see(i);if(!S.internal||S.appHook)return F.trigger({domEvent:t,target:e,url:i}),a;var j={query:N.params(i),uri:i,method:d,form:l,target:e,isDefaultPrevented:function(){return t?v.isDefaultPrevented(t):!1},allowDefault:function(){this.doGo=!0},triggerClickEvent:function(){t&&!a.calledClick&&(a.calledClick=!0,h.trigger(t))},settings:n};return r.run(j)&&(t&&!j.doGo&&(0,u.preventDefault)(t),a.handled=!0),a}function G(e){return e.tagName==="FORM"}function x(){D.setNavigation({handleClick:H,handleSubmit:o}),document.addEventListener("submit",w),s=y.create();var e=T.asapHandle,t=e.event;t&&setTimeout(function(){o(e.link,t)},4),e.dispose(),k(M)}function k(e){s.enqueue(e)}function M(e){var t=e.target,r=(e.retry||0)+1;return(0,u.hasClass)(t,"js-click")&&r<O?(c||(e.retry=r,c=!0,setTimeout(function(){c=!1,s.run(e)},A)),!0):!1}function W(e){return e.tagName==="FIELDSET"}x();function X(e){k(e)}function Y(e){s.dequeue(e)}function J(e,t,r){var n=document.createElement("a");return n.href=e,E(n,t,r)}function E(e,t,r){return o(e,null,t,r).handled}return g})(__jsRegistry.c, __jsRegistry.dy, __jsRegistry.m, __jsRegistry.bt, __jsRegistry.s, __jsRegistry.dz, __jsRegistry.aj, __jsRegistry.an, __jsRegistry.t)||window);
__jsRegistry.eb = __globalRegistry["cf3Inlg"] || (__globalRegistry["cf3Inlg"] = (function(){var n={};function a(r,e){for(var t in e)Object.defineProperty(r,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,t).get})}a(n,{get copy(){return c},get detectClipboardApi(){return o}});var i;function d(){return navigator.clipboard&&"Promise"in window}function o(){return i||(i=d())}function c(r){if(o())return navigator.clipboard.writeText(r);var e=document.createElement("textarea");e.value=r,e.className="screen-reader-only",document.body.appendChild(e),e.select();var t=document.execCommand("copy");return document.body.removeChild(e),t?Promise.resolve():Promise.reject()}return window.OK.clipboard={copy:c,detectClipboardApi:o},n})()||window);
__jsRegistry.ec = __globalRegistry["cVUgv4g"] || (__globalRegistry["cVUgv4g"] = (function(l,e,o,n,t){var i=function(a){var s=l.linkToState,u=l.fieldRtu,d=l.fieldText,r={};r[d]=a,r[u]=window.location.pathname+window.location.search;var m=n.insertParams(s,r);o.go(m,null)};return{copy:function(a){var s=e.start();return t.copy(a).then(s.resolve.bind(s),function(){s.reject.call(s),i(a)}),s}}})(__jsRegistry.dx, __jsRegistry.n, __jsRegistry.ea, __jsRegistry.m, __jsRegistry.eb)||window);
__jsRegistry.ed = __globalRegistry["tr86EjQ"] || (__globalRegistry["tr86EjQ"] = (function(c,u){var n=null,a="__toggle-on";function i(){return n!=null}function r(){var t=document.getElementById("toast"),e=document.getElementById("toast-content");return t&&e&&{toastRoot:t,toastContent:e}}function d(t,e){i()&&o(),n=setTimeout(o,e||3e3),u.rendering.attachOnce(o);var s=r();s&&(s.toastContent.innerHTML=t,s.toastRoot.classList.add(a))}function o(){i()&&(clearTimeout(n),n=null);var t=r();t&&(t.toastContent.innerHTML="",t.toastRoot.classList.remove(a))}return c.Toast={show:d,hide:o}})(__jsRegistry.c, __jsRegistry.w)||window);
__jsRegistry.ee = __globalRegistry["sWvwgKg"] || (__globalRegistry["sWvwgKg"] = (function(t){return function(n,i){n&&n.length>0&&t.show(n,i)}})(__jsRegistry.ed)||window);
__jsRegistry.ef = __globalRegistry["OeHQmjQ"] || (__globalRegistry["OeHQmjQ"] = (function(){var e={};function E(o,r){for(var t in r)Object.defineProperty(o,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,t).get})}E(e,{get COPY_AND_TOAST(){return T},get UPDATE_EVENT_COUNTERS(){return n},get WEB_VIEW_EVENT(){return _}});var n="updateEventCounters",T="copyAndToast",_="webViewEvent";return e})()||window);
__jsRegistry.eg = __globalRegistry["aMBnvQ"] || (__globalRegistry["aMBnvQ"] = (function(u,o){var r=window.OKApp,d="{}",e={};e.backBefore=1,e[o.WEB_VIEW_EVENT]=1;function s(n,p,i){return r=r||window.OKApp,r&&r[n]?w(n)?r[n](p,i||d):r[n](p):null}function t(n,p,i,O){if(document.readyState==="complete"&&r&&r[n])return s(n,p,i);O||window.addEventListener("load",t.bind(window,n,p,i,!0))}function f(n){return window.OKApp&&window.OKApp[n]}function w(n){return u.iOS?!0:u.android&&e[n]?u.supportVersion(u.OKAppInfo&&u.OKAppInfo.version,[19,12,16]):!1}return{run:s,runAndRetry:t,supports:f}})(__jsRegistry.ak, __jsRegistry.ef)||window);
__jsRegistry.eh = __globalRegistry["c0rL0Q"] || (__globalRegistry["c0rL0Q"] = (function(r,t,e,n,p){return window.OK.copyAndToast=function(o,s){s=s||p.getPts().textCopied;var c=function(){t(s)};e.supports(n.COPY_AND_TOAST)?e.run(n.COPY_AND_TOAST,JSON.stringify({text:o,toast:s})):r.copy(o).then(c)}})(__jsRegistry.ec, __jsRegistry.ee, __jsRegistry.eg, __jsRegistry.ef, __jsRegistry.bv)||window);
__jsRegistry.ei = __globalRegistry["oVyTYsQ"] || (__globalRegistry["oVyTYsQ"] = (function(){return{OkArt:window.OkArt||(window.OkArt={})}})()||window);
__jsRegistry.ej = __globalRegistry["SS1GOkA"] || (__globalRegistry["SS1GOkA"] = (function(l,p,d,h){var c={};Object.defineProperty(c,"Surprise",{enumerable:!0,get:function(){return m}});var m=(function(){function u(s,e,i,t,o,r){this.el=s,this.surpriseName=e,this.surpriseUrl=i,this.clickX=t,this.clickY=o,this.copyTextMessage=r}var a=u.prototype;return a.destroy=function(){this.cleanSurprise&&(this.cleanSurprise(),delete this.cleanSurprise)},a.run=function(){var e=this,i=this.el.getBoundingClientRect();(0,l.use)(this.surpriseUrl+"/main.js",function(){var t=document.createElement("div"),o=["position: fixed","left: "+i.left+"px","width: "+i.width+"px","top: 0","bottom: 0","z-index: 10000"];t.setAttribute("style",o.join(";")),document.body.appendChild(t),e.cleanSurprise=function(){document.body.removeChild(t)},h.OkArt.run({name:e.surpriseName,rootUrl:e.surpriseUrl+"/",host:t,appendToHost:!0,onFinished:function(){e.destroy()},onCallPixel:function(r){new Image().src=r.url},onCopyText:function(r){p(r.value,e.copyTextMessage)},onFinishedWithData:function(r){var n=document.createElement("a");n.href=r.redirect,d.iOS||(n.target="_blank"),t.appendChild(n),n.click(),e.destroy()},click:{x:(e.clickX-i.left)/(i.width-1),y:e.clickY/(window.innerHeight-1)}})})},u})();return c})(__jsRegistry.q, __jsRegistry.eh, __jsRegistry.ak, __jsRegistry.ei)||window);
__jsRegistry.ek = __globalRegistry["wfy8wLw"] || (__globalRegistry["wfy8wLw"] = (function(E,_,n,f,C,H,h,M,U,W,g,A,u,s){var I=u.open,v=u.updateReactionOnServer,x=u.updateConfig,Y=g.createGaussRandomizer(),P=g.createGaussRandomizer(),F=W.build,G,o,q=U.transform,X=s.REACTION_SOURCE_ID,z=s.REACTION_IMG_CLASS,L=s.REACTION_ACTIVE_CLASS,O=s.UNTOUCHABLE_CSS_MOD,T=s.WAITING_CSS_MOD,k=s.HINT_LONGTAP_LS_KEY,K=s.LONGTAP_HINT_SHOWN_LIMIT,V=s.FLY_OFFSET_Y,y=s.REACTION_SIZE,p=s.SCALE_WHILE_FLY,Z=s.SCALE_BOUNCE_DUR,$=s.BOUNCE_OUT_DUR,J=s.tripleBounceEaseOutTiming,R="reaction-hint-shown-stamp",b=175,Q=350;function ee(a){var t=f.parentBySelector(a,".portlet-gift-with-klass")||document.getElementById("boxPage"),e=t.offsetWidth+t.getBoundingClientRect().left,r=Math.round(e-a.getBoundingClientRect().left-a.offsetWidth/2-16);C.insertRule(".widget-list_actions .hint_body.__r::after { right: "+r+"px }")}function N(a,t,e){var r=document.querySelector(".hint_body.closed[data-hint=react]");if(r&&!f.parentBySelector(a.elem,".js-nohint")){var i=r.cloneNode(!0);a.elem.insertBefore(i,a.elem.firstChild),ee(t),n.removeClass(i,"closed"),window.localStorage.setItem(k,e+1),o.softLearningHintEnabled&&window.localStorage.setItem(R,Date.now()),H.lockScreen().then(function(){C.deleteRuleBySelector("widget-list_actions .hint_body.__r::after"),n.remove(i)}),logClientEvent("reaction",["hint-shown"])}}function te(a,t,e){e.animatable.style[q]="translate("+a.translateX+"px, "+a.translateY+"px) scale("+a.scale+") rotate("+a.rotate+"deg)"}function c(a,t){this.model=a,this.elem=t,this.reactionPanelNode=document.getElementById(X),this.likeReactionLink=null,_.listenPreventable(t),this.replaceLikeLink()}c.isInstant=!0,c.prototype={replaceLikeLink:function(){var t=this.elem.getElementsByClassName("widget_like")[0];if(t){var e=t.href||t.dataset.href;if(e){this.likeUrl=e,t.setAttribute("data-like-url",this.likeUrl);for(var r=document.createElement("span"),i=0;i<t.attributes.length;i++){var l=t.attributes[i];r.setAttribute(l.name,l.value)}r.innerHTML=t.innerHTML,n.replace(t,r)}else this.likeUrl=t.getAttribute("data-like-url")}},externalHandlers:{updateWidgetReactOnServer:function(t,e,r){var i=r||0,l=h.insertParams(e,{"st.rid":i});v(t,l,null,null,null,null,!1)}},performLike:{tap:function(t,e){var r=this,i=r.reactionPanelNode,l=r.elem,d;if(n.addClass(e,O),o.loaderEnabled&&setTimeout(function(){n.addClass(e,T)},b),o.longTapLearningEnabled&&M.isSupported){var S=parseInt(window.localStorage.getItem(k)||0);if(S<K)if(o.softLearningHintEnabled){var ae=parseInt(window.localStorage.getItem(R)||0);ae+o.softLearningHintDelay<Date.now()&&(d=N(r,e,S))}else d=N(r,e,S)}if(o.instantReactionEnabled){n.addClasses(e,L+" __ajax-updated");var j=e.getElementsByClassName("ic-react")[0];j&&n.addClass(j,"like-react")}var re=e.getAttribute("data-reaction-base-id")||0,B=e.getAttribute("data-surprise-url"),ne=e.getAttribute("data-surprise-surprise-name"),ie=e.getAttribute("data-surprise-copy-text-msg"),le=h.insertParams(this.likeUrl,{"st.rid":re});if(B){var w=document.querySelector(".feed-card-list,.theme-comments-head");if(w){var se=new A.Surprise(w,ne,B,t.clientX,t.clientY,ie);se.run()}}else{var m=l.getElementsByClassName(z)[0],oe=l.querySelector(".widget-list_i.__like .fi")||l.querySelector(".widget-list_i.__like .ic");m.style.left=oe.getBoundingClientRect().left-l.getBoundingClientRect().left-12+"px",m.style.display="block",l.appendChild(m);var D=new F({animatable:m},te,{transform:{duration:Q,group:{translateY:{to:-(V+Math.abs(Y(0,.5)*y))},translateX:{to:y*P(0,.75)},rotate:{to:30*(2*Math.random()-1)},scale:{from:.34,to:p,next:{name:"scale-out",to:p*.925,duration:20,timingFn:null,next:{name:"scale-bounce",to:p*1.15,duration:Z,timingFn:J,next:{name:"scale-end",to:0,duration:$,delay:200}}}}}}});D.onAllAnimationsEnd.attach(function(de){n.remove(de.animationData.animatable)}),D.run()}v(e,le,null,null,null,d),i&&n.hasClass(i,"__open")},longTap:I,keyDown:function(t,e){if(t.keyCode===13){var r=_.getOrMakeBehavior(e);r.performLike.tap.call(this,t,e)}}},performUnreact:function(t,e){if(o.longTapControlsEnabled){var r=this.elem.getElementsByClassName("hint_body")[0];if(r){logClientEvent("reaction",["unlike-by-hint-prevented"]),n.remove(r);return}}var i=f.parentBySelector(e,".widget-list_i");if(i){if(n.addClass(e,O),o.loaderEnabled&&setTimeout(function(){n.addClass(e,T)},b),o.instantReactionEnabled){n.removeClass(e,L),n.removeClass(e.getElementsByClassName("ic-react")[0],"like-react"),n.addClass(e,"__ajax-updated");var l=u.getWidgetTextNode(e),d=e.getAttribute("data-default-label");typeof l.textContent=="function"?l.textContent=d:l.innerHTML=d}v(e,this.likeUrl,null,null,null,null)}},unReact:{tap:function(t,e){this.performUnreact(t,e)},longTap:I,keyDown:function(t,e){t.keyCode===13&&this.performUnreact(t,e)}}},_.register("widgetBehavior",c),x.attach(function(a){o=a||{}}),E.Surprise=A.Surprise,E.widgetReactions={updateWidgetReactOnServer:c.prototype.externalHandlers.updateWidgetReactOnServer}})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.s, __jsRegistry.t, __jsRegistry.dw, __jsRegistry.dl, __jsRegistry.m, __jsRegistry.ch, __jsRegistry.au, __jsRegistry.dq, __jsRegistry.dr, __jsRegistry.ej, __jsRegistry.dv, __jsRegistry.du)||window);
__jsRegistry.el = __globalRegistry["djmTZrQ"] || (__globalRegistry["djmTZrQ"] = (function(e){return e.debounce})(__jsRegistry.by)||window);
__jsRegistry.em = __globalRegistry["RPcdOng"] || (__globalRegistry["RPcdOng"] = (function(T,c,x,E,M,b,I,L,v,j){var y="__animate",R="__nontouch-layer",X=v.create(),f=v.create(),m=v.create(),r={};r[r.SINGLE=1]="SINGLE",r[r.DUAL=2]="DUAL";var g=d();g[r[r.SINGLE]]={updateCurrentX:function(){return this.x_1=this.x_curr,this}},g[r[r.DUAL]]={updateCurrentX:function(){var t=this.x_curr;return this.increaseToHead?this.x_1=Math.max(t,this.x_2):this.x_2=Math.min(t,this.x_1),this},resolveController:function(){var t=this.x_curr,e=Math.abs(t-this.x_1),n=Math.abs(t-this.x_2);n<e?this.increaseToHead=!1:e<n?this.increaseToHead=!0:this.increaseToHead=t>=this.x_2},processDoubleTap:D};var S=d();S.pow={interpolationBuilder:function(t){var e=t[0];return function(n){return Math.pow(n,e)}},deinterpolationBuilder:function(t){var e=1/t[0];return function(n){return Math.pow(n,e)}}};function p(i,t){var e=this;T.listenCritical(t),i=i||{},this.model=i,this.type=r[t.getAttribute("data-range-type")]||r.SINGLE,this.typeName=r[this.type],this.isDualType=this.type===r.DUAL,this.isMoving=!1,this.notTouchEvent=!1,this.increaseToHead=!0,this.root=t,this.id=i.id||t.id,this.sliderContent=t.getElementsByClassName("js-range-inner")[0],this.progress=t.getElementsByClassName("js-range-bg")[0],this.background=t.getElementsByClassName("range-input_slider_bg-w")[0],this.controlMax=this.sliderContent.getElementsByClassName("js-range-control")[0],this.isDualType&&(this.controlMin=this.sliderContent.getElementsByClassName("js-range-control")[1]),this.transformStyleName=E.transform,Object.assign(this,g[this.typeName]),this.linkFields();var n=this.input_1,s=this.input_2,a;if(this.bindObservable("isMoving",function(){return a},function(l){a=l,c.switchClass(this.sliderContent,l,"__moving")}),this.min=parseInt(i.min||s&&s.min||n&&n.min||0,10),this.max=parseInt(i.max||n&&n.max||100,10),this.tweenFunc=i.tweenFunc,this.tweenFunc){var o=S[this.tweenFunc];if(o){var u=i.tweenArgs||[];this.interpolateX=o.interpolationBuilder(u),this.deinterpolateX=o.deinterpolationBuilder(u),this.interpolation=!0}}this.initResizableState(),this.debouncedResizibleStateInit=L(this.initResizableState,100),b.changed.attach(this.debouncedResizibleStateInit,this),m.attach(C,this),f.attach(this.updateLinkedFields,this),n&&n.addEventListener("input",function(l){l._okEventEmitter||(e.value_1=l.target.value,e.x_1=e.convertValueToX(e.value_1,parseInt(e.value_2,10),null),e.steps&&e.normalizeXByStep(),e.moveTweenTo())}),s&&s.addEventListener("input",function(l){l._okEventEmitter||(e.value_2=l.target.value,e.x_2=e.convertValueToX(e.value_2,null,parseInt(e.value_1,10)),e.steps&&e.normalizeXByStep(),e.moveTweenTo())});var h=B.bind(this);M.addPointerListener(t,"pointerup",h),t.addEventListener("mouseleave",h),t.addEventListener("mouseout",h),I.rendering.attachOnce(this.cleanState,this)}p.prototype={constructor:p,bindObservable:function(t,e,n){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:e,set:n})},updateLinkedFields:function(t){t.id===this.id&&this.linkFields()},linkFields:function(){var t=this.model,e=t.input_1,n=t.input_2;this.input_1=e&&(document.getElementById(e)||document.querySelector(e)),this.input_2=n&&(document.getElementById(n)||document.querySelector(n)),this.hasLinkedFields=this.input_1||this.input_2},cleanState:function(){b.changed.detach(this.debouncedResizibleStateInit,this),m.detach(C,this),f.detach(this.updateLinkedFields,this)},initResizableState:function(){var t=this.model,e=this.input_1,n=this.input_2,s=this.sliderContent.getBoundingClientRect(),a=window.pageXOffset;this.rangeLOffset=a+s.left,this.rangeROffset=a+s.right,this.rangeLengthPx=s.width,this.CONST_MIN_MAX=this.min-this.max,this.steps=t.steps,this.steps&&(this.stepsMagnet=t.stepsMagnet||!1,this.oneStepPx=this.rangeLengthPx/this.steps,this.oneStepHalfPx=this.oneStepPx/2,N(this.background,this.steps)),this.value_1=t.value_1||e&&e.value||this.max,this.x_1=this.convertValueToX(this.value_1),this.value_2=t.value_2||n&&n.value||this.min,this.x_2=this.convertValueToX(this.value_2),this.moveTweenTo()},convertValueToX:function(t,e,n){var s=parseInt(t,10);return e=e||this.min,n=n||this.max,s<e?s=e:s>n&&(s=n),this.deinterpolateX(this.getRelativeDistance(s))*this.rangeLengthPx},interpolateX:function(t){return t},deinterpolateX:function(t){return t},getRelativeDistance:function(t){return(t-this.min)/-this.CONST_MIN_MAX},convertXToValue:function(t){var e=this.interpolateX(t/this.rangeLengthPx);return Math.round(this.min+this.min*-e+this.max*e)},normalizeXFromPointer:function(t){var e=this.rangeLOffset;if(t<e)t=e;else{var n=this.rangeROffset;t>n&&(t=n)}return this.x_curr=t-e,this},normalizeXByStep:function(){var t=this.x_curr,e=this.oneStepPx,n=t%e;return n>this.oneStepHalfPx?t+=e-n:t-=n,this.x_curr=t,this},moveTweenTo:function(){var t=this.root;return c.addClass(t,y),setTimeout(function(){c.removeClass(t,y)},200),this.moveTo()},moveTo:function(){var t=this.transformStyleName,e=this.x_1,n=this.x_2,s=this;return requestAnimationFrame(function(){s.controlMax.style[t]="translateX("+e+"px)",s.isDualType&&(s.controlMin.style[t]="translateX("+n+"px)"),s.progress.style[t]="matrix("+(e-n)*.01+", 0, 0, 1, "+n+", 0)"}),this},notify:function(){var t=this,e=[{input:this.input_1,x:this.value_1=this.convertXToValue(this.x_1)}];return this.isDualType&&e.push({input:this.input_2,x:this.value_2=this.convertXToValue(this.x_2)}),this.hasLinkedFields&&requestAnimationFrame(function(){for(var n=0,s=e.length;n<s;n++){var a=e[n],o=a.input;if(o){var u=a.x;parseFloat(o.value)!==u&&(o.value=u,_("input",o,{_okEventEmitter:t}))}}}),this.emitter&&X.trigger({id:this.id,notifyList:e}),this},setToX:function(t,e){return this.x_1=t,this.x_2=e,this},resolveController:function(){},updateCurrentX:function(){},processDoubleTap:function(){return!1},select:{tap:w},move:{touchStart:function(){},touchMove:O}},p.isInstant=!0,T.register("rangeInput",p);function D(){var i=this;if(Date.now()-this.lastTap<200)return!0;this.lastTap=Date.now(),setTimeout(function(){i.lastTap=0},200)}function B(i){this.isMoving&&(this.isMoving=!1,this.steps&&!this.stepsMagnet&&this.normalizeXByStep().moveTweenTo().notify())}function w(i,t){this.normalizeXFromPointer(x.firstTouchRaw(i).pageX),this.steps&&this.normalizeXByStep(),this.resolveController(),this.processDoubleTap()?this.setToX(this.x_curr,this.x_curr):this.updateCurrentX(),this.moveTweenTo().notify()}function O(i,t){if(typeof i.buttons>"u"||i.buttons!==0){if(this.normalizeXFromPointer(x.firstTouchRaw(i).pageX),this.stepsMagnet&&this.normalizeXByStep(),!this.isMoving){var e=this.notTouchEvent=i.type==="mousemove"||!i.touches;e&&c.addClass(this.root,R),this.resolveController(),this.isMoving=!0}this.updateCurrentX().moveTo().notify()}}function N(i,t){requestAnimationFrame(function(){var e=i.style;e.backgroundImage="linear-gradient(to right, #cbcbcb 50%, #848484 50%)",e.backgroundSize=200/t+"%",c.addClass(i,"__stepsReady")})}function C(i){i.id===this.id&&this.initResizableState()}var P={updateRangeControl:{parseDomNode:function(t,e){var n=t.getAttribute("data-exception");n&&(e.context={exception:JSON.parse(n)})},run:function(t){var e=t.context.exception;if(e){var n=document.getElementById(e.fieldId);if(n){var s=e.type;if(s==="MINMAX"){var a=e.args[0],o=e.args[1],u=e.args[2],h;u>o?h=o:u<a&&(h=a),n.value=h,_("input",n)}}}}}};function _(i,t,e){var n=new Event(i,{bubbles:!0,cancelable:!0});e&&Object.assign(n,e),t.dispatchEvent(n)}function d(){return d=j.OBJECT_CREATE?function(){return Object.create(null)}:function(){return{}},d()}return{onRangeChanged:X,onPostInit:m,onLinkedFieldsUpdate:f,updateRangeControlEnvelope:P,applyValue:function(t,e){t.value=e,_("input",t)}}})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.aj, __jsRegistry.au, __jsRegistry.ai, __jsRegistry.bd, __jsRegistry.w, __jsRegistry.el, __jsRegistry.u, __jsRegistry.af)||window);
__jsRegistry.en = __globalRegistry["lEMgXaQ"] || (__globalRegistry["lEMgXaQ"] = (function(e){return e.create({workWithOutsideInputs:!1,heightBySidebar:!1,blockHeight:!0,"toolbarSearch.enabled":!1,"toolbarSearch.active":!1})})(__jsRegistry.ab)||window);
__jsRegistry.eo = __globalRegistry["tt9qziQ"] || (__globalRegistry["tt9qziQ"] = (function(e){var o=(0,e.create)({enabled:!1,showToolbarMenuConfigure:!1,showToolbarMenuEnable:!1,isFloatSidebarConfigure:!1,isContextualColumnFloat:!1,isCenterPortalContentConfigure:!1,isCenterPortalContentEnabled:!1});return o})(__jsRegistry.ab)||window);
__jsRegistry.ep = __globalRegistry["sHWROaQ"] || (__globalRegistry["sHWROaQ"] = (function(e){return e.create({heightBySidebar:!1})})(__jsRegistry.ab)||window);
__jsRegistry.eq = __globalRegistry["m1sDnaQ"] || (__globalRegistry["m1sDnaQ"] = (function(t,e,n,g,f){n.synced("enabled",function(b){e.set("heightBySidebar",b),g.set("heightBySidebar",b),c(),r(),a(),s(),f.set("shown",!b)}),e.synced("toolbarSearch.enabled",function(){c()});function c(){e.set("workWithOutsideInputs",e.get("toolbarSearch.enabled")||n.get("enabled")),e.set("toolbarSearch.active",e.get("toolbarSearch.enabled")&&n.get("enabled"))}t.synced("configured",function(){s()}),n.synced("showToolbarMenuEnable",function(){a(),s()}),n.synced("isCenterPortalContentEnabled",function(){a(),s()});function s(){t.set("enabled",t.get("configured")&&(!n.get("enabled")||n.get("showToolbarMenuEnable")||n.get("isCenterPortalContentEnabled")))}function a(){t.set("asColumn",n.get("enabled"))}t.synced("stickyConfigured",r);function r(){t.set("stickyEnabled",t.get("stickyConfigured")&&n.get("enabled"))}})(__jsRegistry.at, __jsRegistry.en, __jsRegistry.eo, __jsRegistry.ep, __jsRegistry.cp)||window);
__jsRegistry.er = __globalRegistry["rYQ1zeA"] || (__globalRegistry["rYQ1zeA"] = (function(c){var a={};function f(n,r){for(var e in r)Object.defineProperty(n,e,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,e).get})}f(a,{get default(){return k},get runOnceForEach(){return o}});var i="okMark"+Date.now(),o=function(n,r,e,l,d,p){var s=function(t,v,b,g){if(t){if(t[u])return;t[u]=!0}e.call(this,t,v,b,g)},u=i+n;return c(r,s,l,d,p)},k=o;return a})(__jsRegistry.k)||window);
__jsRegistry.es = __globalRegistry["g52S7QA"] || (__globalRegistry["g52S7QA"] = (function(I,n,m,A,_,T){var u=!1,d,c,e,o,i,l,E="__showed",h="__animated",j=2e3,s=0,f=!1,t={1:"INFO",2:"WARNING",3:"ERROR",4:"CRITICAL",5:"TRANSPARENT",getCssClass:function(S){var a=this[S];return a?"__"+a.toLowerCase():""}};t[t[1]]=1,t[t[2]]=2,t[t[3]]=3,t[t[4]]=4,t[t[5]]=5;function y(){u||_.default("error-notice",document.querySelectorAll(".error-notification_txt"),function(r){e=document.querySelector(".error-notification"),o=document.querySelector(".error-notification-w"),d=r,c=r.innerHTML,u=!0,e.addEventListener(A,L,!1),e.addEventListener("click",O,!1)})}function L(){f||(n.removeClass(o,E),n.removeClass(o,h),o.setAttribute("aria-hidden","true"),l?(n.replace(e,i),l=void 0):i&&(n.replace(e,i),u=!1),i=void 0)}function O(){s!==0&&(clearTimeout(s),s=0),N()}function C(r){return"translateY("+r+(r===0?"":"px")+")"}function M(r,S,a){if(e=document.querySelector(".error-notification"),i=i||e.cloneNode(!0),y(),a=a||{},l=a.insertMode==="outerHTML",d){if(e.className="error-notification",n.addClass(e,t.getCssClass(a.type||t.ERROR)),l)d.outerHTML=r||c,u=!1;else if(i){var v=i.cloneNode(!0);n.replace(e.firstChild,i.firstChild),i=v,document.querySelector(".error-notification_txt").innerHTML=r||c}else d.innerHTML=r||c;f||(f=!0,T.setStyle(e,C(-e.offsetHeight)),n.addClass(o,E),o.setAttribute("aria-hidden","false"),m.request(function(){m.request(function(){n.addClass(o,h),T.setStyle(e,C(0))})})),s&&clearTimeout(s),s=setTimeout(N,S||j)}}function N(){s=0,f&&(f=!1,T.setStyle(e,C(-e.offsetHeight)))}var R={TEXT:"TEXT",CONTENT:"outerHTML"};return I.GlobalErrorNotification={show:M,hide:N,NotificationType:t,NotificationInsertMode:R}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.aq, __jsRegistry.ao, __jsRegistry.er, __jsRegistry.aw)||window);
__jsRegistry.et = __globalRegistry["akSzoUA"] || (__globalRegistry["akSzoUA"] = (function(){var E={ERROR_TOAST_HTTP_HEADER:"X-Error-Handled",AJAX_VALIDATE_HTTP_HEADER:"X-Form-Ajax-Validate",AJAX_NO_VALIDATE_HTTP_HEADER:"X-Form-Ajax-No-Validate",AJAX_UPDATE_HTTP_HEADER:"X-Form-Ajax-Submit",REDIRECT_LOCATION_HEADER:"Redirect-Location",REDIRECT_LOCATION_TARGET_HEADER:"Redirect-Location-Target",CLEAN_PAGE_CACHE_POLICY_HEADER:"X-Clean-Page-Cache-Policy",FULL_REFRESH_HEADER:"X-Full-Refresh",ERROR_MESSAGE_HEADER:"X-Error-Message",BOTTOM_MENU_REQUEST:"X-Request-BottomMenu",REQUEST_TO_DISABLED_BLOCK_HEADER:"X-Feature-Disabled"};return E})()||window);
__jsRegistry.eu = __globalRegistry["aeNbOHQ"] || (__globalRegistry["aeNbOHQ"] = (function(e){return e.create()})(__jsRegistry.u)||window);
__jsRegistry.ev = __globalRegistry["pzQEZSQ"] || (__globalRegistry["pzQEZSQ"] = (function(){return{treatAsSamePage:!1}})()||window);
__jsRegistry.ew = __globalRegistry["lj3hoIA"] || (__globalRegistry["lj3hoIA"] = (function(r,i,c){function n(){return window.location}return r.Location={change:function(e,o,a){(o||!i.go(e,null,a))&&(n().href===e?n().reload(!0):n().href=e)},reload:function(e){this.change(n().href,e)},replace:function(e,o,a){c.treatAsSamePage=!0,(o||!i.go(e,null,a))&&n().replace(e)}}})(__jsRegistry.c, __jsRegistry.ea, __jsRegistry.ev)||window);
__jsRegistry.ex = __globalRegistry["o7hUphA"] || (__globalRegistry["o7hUphA"] = (function(){Object.assign||(Object.assign=function(f,e){for(var n=1,i=arguments.length;n!==i;n+=1){var s=arguments[n];for(var a in s)s.hasOwnProperty(a)&&(f[a]=s[a])}return f})})()||window);
__jsRegistry.ey = __globalRegistry["sljsMA"] || (__globalRegistry["sljsMA"] = (function(e){var r=(0,e.create)({isLocked:!1});return r})(__jsRegistry.ab)||window);
__jsRegistry.ez = __globalRegistry["sWsQO1Q"] || (__globalRegistry["sWsQO1Q"] = (function(i,m,d,a,v){function h(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}function u(e,l){for(var n=0;n<l.length;n++){var c=l[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function O(e,l,n){return l&&u(e.prototype,l),n&&u(e,n),e}function g(e,l,n){return l in e?Object.defineProperty(e,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[l]=n,e}var f="scroll-locked",t=!1,o=[],r=__js_temp_htmlTag,s;m.rendering.attachOnce(function(){o=[]});var L=(function(){function e(){h(this,e),g(this,"scrollTop",void 0)}return O(e,[{key:"lock",value:function(){o.indexOf(this)===-1&&o.push(this),!t&&o.length>0&&(this.scrollTop=d.calc().scrollTop,e.lockOn(r),s=s||document.getElementById("container"),s.scrollTop=this.scrollTop,t=!0)}},{key:"unlock",value:function(){var n=o.indexOf(this);n!==-1&&o.splice(n,1),t&&o.length===0&&(e.unlockOn(r),(document.scrollingElement||r).scrollTop=this.scrollTop,this.scrollTop=null,t=!1)}}],[{key:"lockOn",value:function(n){i.addClass(n,f),a.set("isLocked",!0)}},{key:"unlockOn",value:function(n){i.removeClass(n,f),a.set("isLocked",!1)}}]),e})();function k(){return new L}return v.createScrollLocker=k,{newInstance:k}})(__jsRegistry.s, __jsRegistry.w, __jsRegistry.bd, __jsRegistry.ey, __jsRegistry.c)||window);
__jsRegistry.fa = __globalRegistry["fxpkQA"] || (__globalRegistry["fxpkQA"] = (function(){function d(n){for(var r={},t=0,a=n.length;t<a;++t){var e=n[t];if(e.name)switch(e.type){case"checkbox":r[e.name]=e.checked?"on":"off";break;case"select-one":r[e.name]=e.options[e.selectedIndex].value;break;case"hidden":if(e.value===""&&r.hasOwnProperty(e.name))break;r[e.name]=e.value;break}}return r}function l(n){var r=n.selectedIndex;if(r>-1){var t=n.selectedOptions;if(t)return t;var a=n.options;if(n.multiple){for(var e=[],c=0,i=a.length;c<i;c++){var u=a[c];u.selected&&e.push(u)}return e}else return[a[n.selectedIndex]]}return[]}return{serialize:d,getSelectedOptions:l,getSelectedOption:function(r){return l(r)[0]}}})()||window);
__jsRegistry.fb = __globalRegistry["faPc1hQ"] || (__globalRegistry["faPc1hQ"] = (function(c,l){function u(t,a,n){var b=n.ignoreDisabled,d=n.submitElement,i=n.allowEmptyStrings;c(t,function(e){if(!(b&&e.disabled)){var r,s=e.value;switch(e.type){case"checkbox":r=e.checked?s||(i?"":"on"):void 0;break;case"radio":r=e.checked?s||(i?"":"on"):void 0;break;case"submit":e===d&&e.name&&(r=s);break;case"fieldset":var m=e.form;m&&!m.contains(e)&&u(e.elements,a,n);break;case"select-multiple":a[e.name]=l.getSelectedOptions(e),r=void 0;default:r=s;break}r!==void 0&&(a[e.name]||(a[e.name]=[])).push(r)}})}function o(t){var a=t.okFormData||{};return u(t.elements,a,{ignoreDisabled:t.getAttribute("data-ignore-disabled"),allowEmptyStrings:t.getAttribute("data-allow-empty-strings"),submitElement:t.okSubmitSender||t.okSubmitBtn}),a}return{data:o,dataOfElements:function(a){var n={};return u(a,n,{ignoreDisabled:!0}),n}}})(__jsRegistry.k, __jsRegistry.fa)||window);
__jsRegistry.fc = __globalRegistry["uh4tz6Q"] || (__globalRegistry["uh4tz6Q"] = (function(j,d,o){var f="data-url-";function s(c,r,t){return c.getAttribute(f+r+"-"+t)}var l={parentBySelector:d.parentBySelector},m={collectCount:function(r,t){var e=r.target,g=s(e,t,"target-kind")||"parentBySelector",i=l[g];if(i){var n=s(e,t,"target")||".js-collect-container",a=s(e,t,"target-item")||"pure-item",u=i(e,n);if(u){var v=u.getElementsByClassName(a).length;r.uri=o.insertParam(r.uri,t,v)}}},getParentId:function(r,t){var e=r.target,g=s(e,t,"target-kind")||"parentBySelector",i=l[g];if(i){var n=s(e,t,"target")||".js-collect-container",a=i(e,n);a&&(a.id||(a.id="jsrnd"+Math.random()),r.uri=o.insertParam(r.uri,t,a.id))}}};return{processUriFunc:function(r,t){for(var e=t.target,g=r.split(/\s+/g,20),i=g.length,n=0;n<i;n++){var a=g[n],u=s(e,a,"func"),v=m[u];v&&v(t,a)}}}})(__jsRegistry.c, __jsRegistry.t, __jsRegistry.m)||window);
__jsRegistry.fd = __globalRegistry["p7ukmgA"] || (__globalRegistry["p7ukmgA"] = (function(c,f,u,D,E,q,w,_,H){var d="ld",v="err",P="data-request-throttle",F="data-url-append",g=function(){},i;function S(e){var a=e.processing;return e.success=function(n){e.prepareProcessing&&e.prepareProcessing(n),q(n.response,a,n)},e}function p(e,a){e.cancel=e.cancel||g;var n=e.indicatorSelector;function o(t){var s=t.target,l=n&&f.parentBySelector(s,n)||s,T=e.selector,h=parseInt(s.getAttribute(P))||e.requestDelayTime,C=e.lastHandleStamp,r=t.preparedContext,I=(t.method||"get").toLowerCase();if(I!=="post"&&u.hasClass(s,"js-post")&&(t.method="post"),!r){if(T&&!f.matches(s,T)||u.hasClass(s,"js-ajax-nav-cancel"))return e.cancel(t),!1;r=e.prepare&&e.prepare(t)||{};var R=r.navigationTask;if(R)return R.then(function(){r.navigationTask=null,t.preparedContext=r,o(t)},function(y){y&&y.cancel&&e.cancel(r)}),!r.allowDefault}if(r.cancelled||C&&h&&Date.now()-C<h)return e.cancel(r),!r.allowDefault;u.removeClass(l,v);var x=e.loaderTimeout;i=setTimeout(function(){u.addClass(l,d)},x>=0?x:500),w.rendering.attachOnce(function(){u.removeClass(l,d)});var k=s.getAttribute(F);k&&_.processUriFunc(k,t);function N(){clearTimeout(i),i=null,r.response=this.response(),e.success&&e.success(r)}function O(){this.aborted||(u.addClass(l,v),r.failed=!0,e.fail&&e.fail(r))}function G(){i&&clearTimeout(i),u.removeClass(l,d),e.complete&&e.complete(r)}var M=t.form&&u.hasClass(t.form,"js-replace-params"),L=b(t),m=D.request(L.uri,t.method,L.payload,M).then(N,O).anyway(G);r.ajaxTask=m,e.tuneRequest&&e.tuneRequest(r);var j=t.settings;return j&&j.tuneRequest&&j.tuneRequest(r),B(e)&&m.withToken(),e.lastHandleStamp=Date.now(),m.send(),!0}return e.isDefault&&(o.okIsChainRoot=!0),a===!0?o:(c.register(o),new A(o))}function b(e){var a=e.uri,n=null,o=e.form;if(o)n=o.okFormData||E.data(o);else if(e.method==="post"){var t=e.target.getAttribute("data-param-filter"),s=H.preparePostRequest(a,t);return{uri:s.uri,payload:s.payload}}return{uri:a,payload:n}}function B(e){return!e.avoidToken}function A(e){this.run=e}return A.prototype={go:function(a){c.go(a,this)},goSpecific:function(a){c.goSpecific(a,this)}},{onLink:p,onLinkToAjaxEnvelope:function(a){p(S(a))},getAjaxLinkHandler:function(a){return p(a,!0)},getAjaxEnvelopeHandler:function(a){return p(S(a),!0)}}})(__jsRegistry.ea, __jsRegistry.t, __jsRegistry.s, __jsRegistry.bw, __jsRegistry.fb, __jsRegistry.de, __jsRegistry.w, __jsRegistry.fc, __jsRegistry.m)||window);
__jsRegistry.fe = __globalRegistry["s0ZA72A"] || (__globalRegistry["s0ZA72A"] = (function(t){function u(e,i,n){return n=n||{},e.replace(n.regexp||/{{(\w+)}}/g,function(r,o,a,p){return i[o]||(n.keepNotKnown?r:"")})}function s(e){var i="";return t(e.split("-"),function(n,r){r?i+=(n[0]||"").toUpperCase()+n.slice(1):i+=n}),i}function l(e){return e.split(/\s+/)}function c(e){return e===" "||e==="\n"||e===" "}function f(e){return e.indexOf("\n")>-1}return{simpleReplacer:u,camelCase:s,splitBySpaces:l,isWordBoundingChar:c,isMultilineText:f}})(__jsRegistry.k)||window);
__jsRegistry.ff = __globalRegistry["bwzb78A"] || (__globalRegistry["bwzb78A"] = (function(e){var r={};function o(c,t){for(var n in t)Object.defineProperty(c,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,n).get})}o(r,{get drawContent(){return i},get hide(){return a},get open(){return u}});var u=(0,e.create)(),a=(0,e.create)(),i=(0,e.create)();return r})(__jsRegistry.u)||window);
__jsRegistry.fg = __globalRegistry["dkrU8w"] || (__globalRegistry["dkrU8w"] = (function(){function t(){}return t.prototype.reset=function(i,n){this.destroy(),this.fn=i;var e=this;this.timeoutId=setTimeout(function(){e.fn(),e.destroy()},n)},t.prototype.runImmediately=function(){this.fn&&this.fn(),this.destroy()},t.prototype.destroy=function(){delete this.fn,clearTimeout(this.timeoutId),delete this.timeoutId},{DelayedFn:t}})()||window);
__jsRegistry.fh = __globalRegistry["fQwi3A"] || (__globalRegistry["fQwi3A"] = (function(s){return{specialEnvelopes:{css:s.processing.css}}})(__jsRegistry.dc)||window);
__jsRegistry.fi = __globalRegistry["bEc0AQ"] || (__globalRegistry["bEc0AQ"] = (function(ue,A,d,P,X,m,h,U,E,q,W,J,G,f,K,Q,V,j){var L=Q.DelayedFn,z="node_not_found",Y="error_json_empty",k="bottomPopupMenu",b="__open",Z="__untitled",$="__loading",ee="__has-initial-content",C=300,D=!0,p;function _(t,e){this.root=e,this.updateHeader(),this.content=document.getElementById("bottom-menu-body"),this.menu=e.getElementsByClassName("bottom-menu")[0],this.loader=e.getElementsByClassName("bottom-menu-loader")[0],this.screenLocker=X.newInstance(),this.keepOpenOnTap=!1,e.addEventListener("scroll",function(){e.scrollTop=0})}d.register(k,_),_.prototype={constructor:_,clean:function(){return this.open&&this.close(),m.clear(this.content),this},hide:function(e){var n=this;this.root.classList.remove(b),this.screenLocker.unlock(),this._halfAnimatedHideCallback=this._halfAnimatedHideCallback||new L,this._fullAnimatedHideCallback=this._fullAnimatedHideCallback||new L;var s=this.request;return s&&s.abort(),this._halfAnimatedHideCallback.reset(function(){n.menu.style.maxHeight=""},C/2),this._fullAnimatedHideCallback.reset(function(){n.content.scrollTop=0,DOMTokenList.prototype.remove.apply(n.menu.classList,n.modificators),n.withoutFader(!1)},C),this.hideData=e,f.hide.trigger(n.getArgumentForHideInteropEvents()),this.open=!1,this},setHeight:function(e){this.menu.style.maxHeight=e+"px"},runHideCallbacksImmediately:function(){this._halfAnimatedHideCallback&&this._halfAnimatedHideCallback.runImmediately(),this._fullAnimatedHideCallback&&this._fullAnimatedHideCallback.runImmediately()},invisible:function(e){return m.switchClass(this.root,e,"__invisible"),this},show:function(e,n){n=n||{},this.updateHeader();var s=!e;e=e||{},this.hideData={},this.bmenuCloseOnClickOutside=typeof e.bmenuCloseOnClickOutside<"u"?e.bmenuCloseOnClickOutside:D;var a=h.resolved;this.open&&(a=h.start(),setTimeout(function(){a.resolve()},C),this.hide());var i=this,g=e.supplier,M=e.bmenuHtml,N=e.bmenuXhr,y=e.childToAppend,S=e.bmenuFrom,se=e.bmenuWithoutFader;this.withoutFader(se);var u=h.start().then(function(){i.runHideCallbacksImmediately();var o=(e.bmenuModificator||"").trim().split(" ").filter(function(l){return!!l});e.bmenuHeight&&(i.menu.style.maxHeight=e.bmenuHeight+"px"),o&&o.length>0&&DOMTokenList.prototype.add.apply(i.menu.classList,o),s||i.drawTitle(e.bmenuTitle,e.bmenuHtmlTitle),i.root.classList.add(b),i.open=!0,i.screenLocker.lock(),i.modificators=o,f.open.trigger(i.getArgumentForInteropEvents())});if(g)return a.then(function(){u.join(g({menu:{content:i.content}}).then(function(o){o&&i.insertContent(o)}))}),u;if(y)return this.insertContent(y),e.childToAppend=null,u.resolve();if(S){var B=document.querySelector(S);return B?(this.drawContent(B.innerHTML),u.resolve()):u.reject(z)}else{if(M)return u.join(a.then(function(){i.drawContent(M)}));if(N){u.resolve(),i.loaderTId=setTimeout(function(){i.drawLoader(!0)},200);var v=e.bmenuXhrData;return i.request=U.request(N,"GET",v&&(typeof v=="string"?JSON.parse(v):v)).header(E.BOTTOM_MENU_REQUEST,1).then(function(){var o=this.xhr.getResponseHeader(E.REQUEST_TO_DISABLED_BLOCK_HEADER);o&&(n.isSimpleXhr=!0),ne(this.response(),n).then(function(l){var H=l.title;H&&H.length>0&&i.drawTitle(H),i.drawContent(l.content),i.root.style.zIndex=null,l.scriptsWrapperElem&&K.runAll(l.scriptsWrapperElem)},function(l){i.hide(l)})},function(o){i.hide(o)}).anyway(function(){clearTimeout(i.loaderTId),i.drawLoader(!1)}).withToken().send(),h.start().join(i.request)}else if(e.bmenuJson){var w=JSON.parse(e.bmenuJson),T=w.items;if(this.keepOpenOnTap=w.keepOpenOnTap||!1,T&&T.length){for(var R="",O=0,re=T.length;O<re;O++){var oe='<li class="bottom-menu-list_item link {{itemClass}}" data-view-level="bottomPopupMenu" data-button="{{isButton}}">',ae="</li>",x=T[O];R+=J.simpleReplacer(oe+this.getLinkOrButtonTemplate(x.isButton)+this.getContentTemplate()+ae,ie(x))}var F=te(w);return F.insertAdjacentHTML("beforeend",R),this.insertContent(F),u.resolve()}else return u.reject(Y)}else s&&u.resolve()}},drawContent:function(e){e&&(this.content.innerHTML=e),G.processScope(this.content),this.triggerAfterDrawEvent()},initOpened:function(){return!this.root.classList.contains(b)||!this.menu.classList.contains(ee)?!1:(this.updateHeader(),this.open=!0,this.screenLocker.lock(),this.hideData={},this.bmenuCloseOnClickOutside=D,this.triggerAfterDrawEvent(),f.open.trigger(this.getArgumentForInteropEvents()),!0)},updateHeader:function(){var e=this.header=document.getElementById("bottom-menu-header");this.titleTextRoot=e.getElementsByClassName("title_text_main")[0]},withoutFader:function(e){m.switchClass(this.root,e,"__without-fader")},triggerAfterDrawEvent:function(){f.drawContent.trigger(this.getArgumentForInteropEvents())},getArgumentForInteropEvents:function(){return{getContentElement:this.getContentElement.bind(this),getRootElement:this.getRootElement.bind(this)}},getArgumentForHideInteropEvents:function(){return Object.assign({},this.getArgumentForInteropEvents(),{data:this.hideData})},insertContent:function(e,n){var s=this.content;s.innerHTML="",s.appendChild(e.cloneNode(!0)),n||this.triggerAfterDrawEvent()},drawTitle:function(e,n){this.menu.classList.toggle(Z,!e&&!n),e&&(this.titleTextRoot.textContent=e),n&&(this.titleTextRoot.innerHTML=n)},drawLoader:function(e){e&&this.insertContent(this.loader.cloneNode(!0),!0),this.menu.classList.toggle($,e)},getLinkOrButtonTemplate:function(e){return e?this.buttonTemplate||(this.buttonTemplate=this.root.querySelector(".innerMenuButtonTpl").textContent):this.linkTemplate||(this.linkTemplate=this.root.querySelector(".innerMenuLinkTpl").textContent)},getContentTemplate:function(){return this.contentTemplate||(this.contentTemplate=this.root.querySelector(".innerMenuContentTpl").textContent)},getContentElement:function(){return this.content},getRootElement:function(){return this.root},cancelAction:{tap:function(e){this.bmenuCloseOnClickOutside&&(this.menu.compareDocumentPosition(e.target)&16)===0&&this.hide()}},hideAction:{tap:function(){this.hide()}},showAction:{tap:function(e,n){this.show(n.dataset)}},hideAndTapAction:{tap:function(e,n,s){if(this.keepOpenOnTap||this.hide(),s&&s.view){var a=s.view.split(".");d.getFuncByName(a[0],a[1]).tap(e,n)}else A.onTap(e)}}};function te(t){var e=document.createElement("UL");return e.classList.add("bottom-menu-list"),t.listClass&&e.classList.add(t.listClass),e}function ne(t,e){var n=h.start();if(e.isSimpleXhr)return n.resolve({content:t});if(e.onXhrResponse)return n.resolve({content:e.onXhrResponse(t)});var s={};return q(t,{special:{showBottomMenu:{parseDomNode:function(i,g){g.title=i.dataset.bmenuTitle},run:function(i){s.content=i.content,s.title=i.title?i.title:i.contentDom.dataset.title,n.resolve(s)}},runScripts:{run:function(i){s.scriptsWrapperElem=i.contentDom}}},onDomParsed:function(i){i.envelopes.length===0&&n.rejectIfNotDone()}}),n}function le(t){}function ie(t){return t.iconClass||(t.iconClass="hidden"),t}function I(t){t&&r.close()}var r={behavior:function(){return d.getOrMakeBehavior(p)},getInstanceIfExist:function(){return p&&d.getBehaviorIfExist(p,k)},show:function(e,n){r.behavior().show(e,n)},showHtml:function(e){r.show(new c().addHtml(e))},showByXHR:function(e,n){n=n||{},r.behavior().show(new c().addXhrLink(e).addDataset(n.menuModel),n)},initOpened:function(){return r.behavior().initOpened()},close:function(e){r.behavior().hide(e)},setHeight:function(e){r.behavior().setHeight(e)},specialEnvelope:{showBottomMenu:{parseDomNode:function(e,n){n.menuModel=new c().addHtml(n.content).addDataset(e.dataset)},run:function(e){r.show(e.menuModel)}}}};function c(){}return c.prototype={constructor:c,addHtml:function(e){return this.bmenuHtml=e,this},addDataset:function(e){return Object.assign(this,e),this}},V.specialEnvelopes.hideBottomMenu={run:function(){var e=r.getInstanceIfExist();e&&e.hide()}},P.create({name:"bottomPopupMenu",init:function(){p=document.getElementById("bottom-menu-fader"),A.addFuncHandler("showBottomMenu",{tap:function(n,s){r.show(new c().addDataset(s.dataset))}}),W.onLinkToAjaxEnvelope({selector:".js-ajax-envelope-bmenu",tuneRequest:function(n){n.ajaxTask.header(E.BOTTOM_MENU_REQUEST,1)},processing:{special:r.specialEnvelope}})},update:function(e){m.hasClass(document.body,"bmenu-hide-when-sidebar")&&j.onChanged("active",I)},discard:function(){var e=r.getInstanceIfExist();e&&e.hide().clean(),j.offChanged("active",I)}}),window.OK.bottomMenu={close:r.close},r})(__jsRegistry.ex, __jsRegistry.an, __jsRegistry.am, __jsRegistry.x, __jsRegistry.ez, __jsRegistry.s, __jsRegistry.n, __jsRegistry.bw, __jsRegistry.et, __jsRegistry.de, __jsRegistry.fd, __jsRegistry.fe, __jsRegistry.cx, __jsRegistry.ff, __jsRegistry.cr, __jsRegistry.fg, __jsRegistry.fh, __jsRegistry.at)||window);
__jsRegistry.fj = __globalRegistry["scyTY8w"] || (__globalRegistry["scyTY8w"] = (function(c,y,l,f,I,L){var i={};function S(r,e){for(var n in e)Object.defineProperty(r,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,n).get})}S(i,{get SKIP_SIGN_IN_LAYER(){return u},get getCommandHeader(){return v},get getSignInLayerCommand(){return d},get trySignInLayer(){return a}});var s="",t="",m="",u="SKIP";function v(){return t}function g(r){return!1}function d(r){return t&&r.getResponseHeader(t)}function p(r){if(r.getResponseHeader(L.FULL_REFRESH_HEADER)==="1")return!1;var e=d(r),n=!!(e&&e!==u);return n&&(l.show({bmenuXhr:(0,y.insertParam)(s,"st.lgi",e),bmenuModificator:m||"sign-in-layer",bmenuHeight:500}),f.hide.attachOnce(function(b){var j=b.getContentElement(),o=j.getElementsByClassName("js-sign-in-layer")[0];o&&o.dataset.closeLog&&I.log("loginOrSignInLayer",[o.dataset.closeLog,"close"])})),n}var a=g;return(0,c.create)({name:"anonymLoginOrSignInLayerService",update:function(e){s=e.layerUrl,t=e.commandHeader,m=e.bmenuModificator,a=p},discard:function(){a=g}}),i})(__jsRegistry.x, __jsRegistry.m, __jsRegistry.fi, __jsRegistry.ff, __jsRegistry.a, __jsRegistry.et)||window);
__jsRegistry.fk = __globalRegistry["ghSletg"] || (__globalRegistry["ghSletg"] = (function(j,A,s,g,R,l,p,o,H,S){var O=s.REDIRECT_LOCATION_HEADER,k=s.CLEAN_PAGE_CACHE_POLICY_HEADER,D=s.FULL_REFRESH_HEADER,N=s.ERROR_MESSAGE_HEADER,I=s.ERROR_TOAST_HTTP_HEADER,m=S.sessionStorage;function E(e){var r=0;try{r=parseInt(m.lastFullRefreshTime||0)||0}catch(t){}var a=Date.now();a-r<1e3?setTimeout(e,1e3):e();try{m.lastFullRefreshTime=r}catch(t){}}function d(e){return e.getResponseHeader(D)==="1"}function L(e){var r=e.getResponseHeader(O),a=e.getResponseHeader(s.REDIRECT_LOCATION_TARGET_HEADER),t=e.getResponseHeader(k)==="current",i=o.getSignInLayerCommand(e);if(r){if(a==="_blank")if(l.iOS)window.location.href=r;else{var u=document.createElement("a");u.href=r,u.target="_blank",u.click();return}E(function(){if(e.okNoReferrer){var c=window.location,n=window.history,P=n&&n.replaceState,y=n&&n.state,G=c.href;P?(n.replaceState(null,null,"/?__noref"),setTimeout(function(){setTimeout(function(){n.replaceState(y,null,G)},0),c.replace(r)},0)):c.replace(l.ie?r:"data:text/html,"+encodeURIComponent('<html><head><meta http-equiv="refresh" content="1;URL='+r+'"/></head></html>'))}else{var C=d(e),f={tuneRequest:function(U){i===o.SKIP_SIGN_IN_LAYER&&U.ajaxTask.header(o.getCommandHeader(),o.SKIP_SIGN_IN_LAYER)}};t&&(f.clearCacheForUrl=window.location.pathname+window.location.search),e.okTask&&e.okTask.isSamePage?R.replace(r,C,f):R.change(r,C,f)}});var T=e.okTask;return T&&(T.redirected=!0),!0}}function h(e){var r=e.getResponseHeader("Refresh-Requested");if(r)return E(function(){R.reload(d(e))}),!0}function w(e){var r=e.getResponseHeader("OKApp-Command");if(r){var a=JSON.parse(r);H.isArray(a)?a.forEach(function(t){_(JSON.parse(t))}):_(a)}}function _(e){p.runAndRetry(e.commandName,e.args,e.argsJson)}function F(e){var r=e.getResponseHeader("X-Ajax-Command");if(r){var a={name:r,payload:e.responseText,rejected:!0};return g.trigger(a),a.rejected}return!1}function v(e){if(e.okTask&&e.okTask.isExternal())return!1;var r=e.getResponseHeader(N);r&&setTimeout(function(){j.show(decodeURIComponent((r+"").replace(/\+/g,"%20")))},79);var a=o.trySignInLayer(e);if(a)return e.okTask.abort(),!0;var t=L(e);if(t!=null)return t;var i=h(e);if(i)return!0;w(e);var u=F(e);return u?(e.okTask.abort(),!0):r!=null&&!e.getResponseHeader(I)}return A.success.attach(function(e){e.rejected=v(e.xhr)}),v})(__jsRegistry.es, __jsRegistry.bw, __jsRegistry.et, __jsRegistry.eu, __jsRegistry.ew, __jsRegistry.ak, __jsRegistry.eg, __jsRegistry.fj, __jsRegistry.d, __jsRegistry.bs)||window);
__jsRegistry.fl = __globalRegistry["cNzQkQ"] || (__globalRegistry["cNzQkQ"] = (function(){return{}})()||window);
__jsRegistry.fm = __globalRegistry["azlWUbg"] || (__globalRegistry["azlWUbg"] = (function(r,o){function j(){return this.ajaxTask.send(),this}function i(){return this.ajaxTask.withToken(),this}function u(){return this.ajaxTask.abort(),this}function T(a){var e=a.responseText,t=this.jsonTask;e?t.resolve(JSON.parse(e),a):t.reject()}function k(){this.jsonTask.reject()}return{request:function(e,t,c){var s=r.start(),n=o.request(e,t,c).then(T,k);return n.jsonTask=s,s.ajaxTask=n,s.withToken=i,s.send=j,s.abort=u,s}}})(__jsRegistry.n, __jsRegistry.bw)||window);
__jsRegistry.fn = __globalRegistry["cFbigA"] || (__globalRegistry["cFbigA"] = (function(F,x,B,te,k,d,H,I,K,R,re,U,X){var y="data-log-click",p="/dk?st.cmd=clickLog",q=/\b(clnk|clickarea)\b/,A="lastLogId",O="_cl.id",v="_clickLog",n="_cl.list",Y="_cl.sID",Z=Math.pow(1024,2),g=!1,u=!1,_=x.isSupported,E=!1;function z(a){var t=[];return B.findParent(a,function(e){var o=e.getAttribute(y),r;if(o){try{r=JSON.parse(o)}catch(s){r={data:"Error parsing JSON.\n"+s.message,target:o}}r&&(X.isArray(r)?k.merge(t,r):t.push(r))}}),t}function f(a,t){var e=a.target,o=e,r=e.form,s=r?r.action:e.href,L=s&&H.see(s)||{},c=null;if(!o.getAttribute(y))for(var D=0;D<3&&o&&o.className.match&&o.className.match(q);D++){var J=o.style;J.display="none",o=document.elementFromPoint(a.clientX,a.clientY),(c||(c=[])).push(J)}if(c)for(var j=0,M=c.length;j<M;j++)c[j].removeProperty("display");var m=z(o||e);if(t&&Array.isArray(t.aheadLogDataItems)&&(m=t.aheadLogDataItems.concat(m)),m.length!==0){if(!s){var ee=k.has(m,function(ae){return ae.target!==void 0});if(!ee)return}var G=JSON.stringify(m),P=G.length;if(P>1500){window.okSjse&&alert("ClickLog JSON is too long "+P);return}if(u){var i=Date.now(),w=parseInt(window.localStorage[A]);w&&w>=i&&(i=w+1),window.localStorage.setItem(A,i)}var l=Q(i,G),h;r&&(h=r.action)&&(e.tagName==="button"&&e.type!=="reset"||e.type==="submit")?h&&h.indexOf(v)!=-1?r.action=d.replaceParams(r.action,l):r.action=d.insertParams(r.action,l):r||L.appHook||!s||s&&!L.internal&&E?g?S(l,function(){T({result:!0},i)}):b(l,i,T):L.internal&&(e.href=d.insertParams(s,l)),V(l)}}function S(a,t){var e=new Image;e.onload=t,e.src=p+"&"+d.formatParams(a)}function b(a,t,e){return K.request(p,"POST",a).then(e,null,t).send()}function Q(a,t){var e={};return e[O]=a,e[v]=t,e[Y]=U.getStateId(),e}function V(a){if(u){var t=window.localStorage.getItem(n),e={},o;if(t&&(o=t.length)>2&&o<Z)try{e=JSON.parse(t)}catch(r){a={error:r.message,params:a}}e[a[O]]=a[v];try{window.localStorage.setItem(n,JSON.stringify(e))}catch(r){throw C(g),S(e),new Error("Handled error: "+r.message)}}}function T(a,t){if(!(!u||window.localStorage.length===0||a&&(!a.result||typeof t>"u"))){var e=window.localStorage.getItem(n);if(e){var o=JSON.parse(e);delete o[t],Object.keys&&Object.keys(o).length===0?window.localStorage.removeItem(n):window.localStorage.setItem(n,JSON.stringify(o))}}}function C(a){if(_&&window.localStorage.length){var t={},e=window.localStorage.getItem(n);e&&(t[n]=e,a?S(t,N):b(t,null,N))}}function N(a){(a.result||a.type==="load")&&window.localStorage.removeItem(n)}function W(a){__js_temp_htmlTag.addEventListener("click",f,!0),I.impl={previewClick:f},g=a.useImageBeacon,u=_&&a.localStorageEnabled,E=a.logImmediateExternalLinks}function $(a){__js_temp_htmlTag.removeEventListener("click",f,!0),I.impl=null}return R.create({name:"initClickLog",update:W,discard:$}),F.clickLog={resendStat:C,previewLinkClick:f}})(__jsRegistry.c, __jsRegistry.ch, __jsRegistry.t, __jsRegistry.s, __jsRegistry.bl, __jsRegistry.m, __jsRegistry.bt, __jsRegistry.fl, __jsRegistry.fm, __jsRegistry.x, __jsRegistry.am, __jsRegistry.bv, __jsRegistry.d)||window);
__jsRegistry.fo = __globalRegistry["lL3b26w"] || (__globalRegistry["lL3b26w"] = (function(a,t){a.create({name:"logService",update:function(e){e.localStorageEnabled&&t.resendStat(e.useImageBeacon)}})})(__jsRegistry.x, __jsRegistry.fn)||window);
__jsRegistry.fp = __globalRegistry["soLgGug"] || (__globalRegistry["soLgGug"] = (function(f,i,c){var d=window.pageCtx,o=d.secKey,t,a=function(e){var n=e.indexOf(o+"="),r;return n>-1?(r=e.indexOf("&",n),r==-1&&(r=e.length),e.substring(0,n)+o+"="+t+e.substring(r)):e};if(!o)return;function u(s){s.xhr.okTask&&s.xhr.okTask.isExternal()||(t=(s.xhr||this.xhr).getResponseHeader("X-Sec-Token"))}f.success.attach(u),c.tapPreview.attach(function(s){t&&i.findParent(s.target,function(e){var n=e.href,r=e.form;return n&&(e.href=a(n||"")),r&&(r.action=a(r.action||"")),(n||r)!==void 0})})})(__jsRegistry.bw, __jsRegistry.t, __jsRegistry.am)||window);
__jsRegistry.fq = __globalRegistry["mHcne8w"] || (__globalRegistry["mHcne8w"] = (function(s,a){function e(){return window._tmr}var o=window._tmr||(window._tmr=[]),t=window.pageCtx.vkcId;return t&&o.push({type:"setUserParams",params:{VKConnectID:t}}),{getOrFetch:function(){var r=a.start(),n=e();return n?r.resolve(n):s.loader.use("my-tracker-js").then(function(){r.resolve(e())}),r},get:e}})(__jsRegistry.c, __jsRegistry.n)||window);
__jsRegistry.fr = __globalRegistry["gDo0vJQ"] || (__globalRegistry["gDo0vJQ"] = (function(n){return n.getViewportSize=function(){var e,t;return window.innerHeight?(t=window.innerWidth,e=window.innerHeight):document.compatMode=="CSS1Compat"?(t=__js_temp_htmlTag.offsetWidth,e=__js_temp_htmlTag.offsetHeight):(t=document.body.offsetWidth,e=document.body.offsetHeight),[t,e]},n.getViewportSize})(__jsRegistry.c)||window);
__jsRegistry.fs = __globalRegistry["cJ2StaA"] || (__globalRegistry["cJ2StaA"] = (function(n,i,t){var l=!1,f=100;function r(){var o=document.querySelector(".uform"),e=!1,s;o&&(!l&&window.location.hash==="#lst"&&(s=document.querySelector('a[name="lsta"]'),s&&(window.scrollTo(0,1),setTimeout(function(){var a=t.getTotalOffsetTop(s),c=t.getTotalOffsetTop(o)+o.offsetHeight,m=i()[1];e=Math.abs(a-c)<=m,e?(document.body.scrollTop=t.getTotalOffsetTop(o)-i()[0],o.scrollIntoView(!1)):s.scrollIntoView()},f))),(l||e)&&o.scrollIntoView())}n.scrollToCommentForm=function(e){l=e.alwaysFocus,setTimeout(r,f)}})(__jsRegistry.c, __jsRegistry.fr, __jsRegistry.s)||window);
__jsRegistry.ft = __globalRegistry["nzpbqQg"] || (__globalRegistry["nzpbqQg"] = (function(f,k,y,j,x){function b(){var a=this;a.states=[],a.history=window.history,a.signupForPopState=!0,S.onStart(a),a.programmaticBack=f.create(),a.stateAccounting=f.create(),a.stateAccounted=f.create(),a.statePopping=f.create(),a.renderState=f.create(),a.inited=!1,this.onPopStateHandler=this.onPopState.bind(this)}b.prototype={getState:function(){return this.cachedState||(this.cachedState=this.history.state||{})},getMetaData:function(){var t=this.getState(),e=t.metaData;return e!==void 0&&(delete t.metaData,this.accountState(t,"replaceState")),e},back:function(){this.cachedState=null,this.history.back(),S.onWentBack(this),this.programmaticBack.trigger()},backToRoot:function(t){if(this.canGoBackToRoot(t)){var e=this.currentState;setTimeout((function(){var n=this.currentState;e===n&&window.location.reload()}).bind(this),100),this.newRootState=t,this.history.go(-this.cachedState.okNavIndex)}else this.go(t,"replaceState")},canGoBackToRoot:function(t){var e=this.cachedState;return this.getState()&&t.type===e.type&&e.okNavIndex>0},go:function(t,e){delete this.newRootState,this.accountState(t,e),this.openState(t)},accountStateUpdate:function(){this.accountState(this.cachedState,"replaceState")},accountState:function(t,e){var n={state:t,samePage:e==="replaceState"};this.stateAccounting.trigger(n);var s=e||"pushState";if(t){var h=this.currentState,r=h&&h.type===t.type||t.indexThrough;t.okNavIndex=this.newRootState?0:(r&&h.okNavIndex||0)+(s==="pushState"&&(!h||r)?1:0)}try{this.history[s](t,null,t.url||null)}catch(u){}S.onStateAccounted(this,t),this.cachedState=t,this.currentState=t,this.stateAccounted.trigger(n)},recoverState:function(t){this.openState(t),this.currentState=t},openState:function(t){this.cachedState=t=t||{},this.renderState.trigger(t)},prepareForFutureStateChange:function(){j.stopLoading()},onPopState:function(t){if(this.pseudoPopState){this.pseudoPopState=!1;return}var e=this,n=t.state;e.newRootState&&(e.accountState(e.newRootState,"replaceState"),n=e.newRootState),S.onStateAccounted(e,n),n=n||{};var s={state:n};if(this.statePopping.trigger(s),s.cancelled&&n){var h=s.cancelTask;if(h){var r=this;s.cancelTask.then(function(){r.pseudoPopState=!0;var u=n.okNavIndex;u&&u>=(r.cachedState&&r.cachedState.okNavIndex||0)?e.history.back():e.history.forward()},function(){e.go(n,"replaceState")})}}else n=s.state,e.openState(n),e.currentState=n},init:function(){this.inited||(this.history.scrollRestoration="manual",this.inited=!0,this.cachedState=this.currentState=this.history.state,S.onStateAccounted(this,this.getState()),this.signupForPopState&&this.attachHistoryManager())},attachHistoryManager:function(){window.addEventListener("popstate",this.onPopStateHandler,!1),S.onSignedUpForPopstate(this)},detachHistoryManager:function(){window.removeEventListener("popstate",this.onPopStateHandler,!1),S.onSignedOutForPopstate(this)}};var S=(function(){var a=k.android&&k.androidVersion.number,t=a&&a<4;function e(){}var n={onStart:e,onSignedUpForPopstate:e,onSignedOutForPopstate:e,onWentBack:e,onStateAccounted:e};function s(c){var i=c.history,g="state";i.okPolyfill=!0,c.signupForPopState=!1;var w=new Date().getTime(),d=new Date().getTime();function p(o){return g+o}var m={};m[p(d)]=null;function A(o,v){var B=y.clone(v);m[p(o)]=B,i.state=B}var P="#"+g;i.pushState=function(o){d=new Date().getTime(),A(d,o),location.hash=P+d},i.replaceState=function(o){A(d,o)},window.addEventListener("hashchange",function(){var o=location.hash;if(o||(o="#"+p(w)),o.indexOf(P)==0&&(o=o.slice(P.length),o!=d)){d=o;var v=y.clone(m[p(d)]);i.state=v,c.onPopState({state:v})}})}if(history.pushState||(n.onStart=s),t){var h=function(i){i.okNavIndex=0},r={onPageShow:null,onBeforeUnload:null};n.onSignedOutForPopstate=function(c){window.removeEventListener("pageshow",r.onPageShow,!1),window.removeEventListener("beforeunload",r.onBeforeUnload,!1)},n.onSignedUpForPopstate=function(c){var i=!1;r.onPageShow=function(g){if(i){i=!1;var w=c.getState();h(w),c.accountStateUpdate()}},r.onBeforeUnload=function(g){i=!0},window.addEventListener("pageshow",r.onPageShow,!1),window.addEventListener("beforeunload",r.onBeforeUnload,!1)};var u,l=null;n.onStateAccounted=function(c,i){i!=l&&(u=l,l=i)},n.onWentBack=function(c){u&&h(u),l=u,u=null,c.onPopState({state:l})}}return n})();return x.navigation=new b})(__jsRegistry.u, __jsRegistry.ak, __jsRegistry.aa, __jsRegistry.p, __jsRegistry.c)||window);
__jsRegistry.fu = __globalRegistry["pZtF2Vg"] || (__globalRegistry["pZtF2Vg"] = (function(e,r,P,l){var n=e.loader,m="photo-layer-js",u="photo-layer-css",p={userTouchPhoto:1,groupTouchPhoto:1,touchPhotoAttachment:1,altGroupPhoto:1,friendPhoto:1,friendStreamPhoto:1,friendAlbumPhoto:1,userStreamPhoto:1,userPhoto:1,userAlbumPhoto:1,sharedAlbumPhoto:1,altGroupStreamPhoto:1,altGroupPhotoInList:1,userPhotoInList:1,contestPhoto:1,adHocPhotoLayer:1};function i(){}function h(o){var t=o.query["st.cmd"];return t in p?(d(o),!0):!1}function a(o){n.use(m,function(){n.use(u,function(){o()})}),n.use(u,i)}function s(o){return function(){l.prepareForFutureStateChange(),setTimeout(o,4)}}function d(o){a(s(function(){e.photoLayer.launch({clickSrc:o.target,effects:o.effects!==!1})}))}var c=!1,f={run:h};return e.initPhotoLayer=P.create({init:function(){a(i),r.register(h)},update:function(t){e.photoOptions=t,c&&(t.returnUrl=null),c=!0,t.openPhotoSoon&&(r.go(window.location.href,f)||a(s(function(){e.photoLayer.launchShortlink()})))}}),{goPhoto:function(t){r.goSpecific(t,f)}}})(__jsRegistry.c, __jsRegistry.ea, __jsRegistry.x, __jsRegistry.ft)||window);
__jsRegistry.fv = __globalRegistry["imaxwvg"] || (__globalRegistry["imaxwvg"] = (function(e){var m,d,c,o,l={};return{immutable:{ROOT:"discus",WIDE_ROOT:"discus_w",PANEL_SHOWN_CSS_MOD:"__panelShown"},inited:e.create(),loadingInitiated:e.create(),messageLoaded:e.create(),messageEdited:e.create(),smilePanelOpen:e.create(),smilePanelOpened:e.create(),smilePanelClose:e.create(),stickerTabSelected:e.create(),attachmentMenuClose:e.create(),attachmentMenuHide:e.create(),keyboardOpen:e.create(),keyboardClosed:e.create(),scrollDown:e.create(),registerTextChange:e.create(),closeRedLink:e.create(),openRedLink:e.create(),audioMessagePlaying:e.create(),musicMessagePlaying:e.create(),wasInitOnce:!1,getScrollContainer:function(){return document.getElementsByClassName("discus_list-w")[0]},flushCache:function(){l={}},find:{element:function(n){var s,a,r=n.context||document,i=n.id||n.cssClass||n.selector;if(n.ignoreCache||(s=l[i]),!s){if(n.id)a=r.getElementById;else if(n.cssClass)a=r.getElementsByClassName;else if(n.selector)a=r.querySelector;else{var u="Invalid function arguments";throw new Error(u)}s=l[i]=a.call(r,i)}if(0)var g;return s},textareaElement:function(n){return this.element({id:"ta-emul",ignoreCache:n})},postingForm:function(n){return!n&&c||(c=document.getElementById("chat-form")||document.getElementById("cmnt-form"))},smilesPanel:function(n){return!n&&d||(d=document.getElementById("sml-pnl"))},textarea:function(n){return!n&&m||(m=document.getElementById("ta-emul"))},messagesList:function(n){return!n&&o||(o=document.getElementsByClassName("discus_list")[0]||document.getElementById("comments-list"))}}}})(__jsRegistry.u)||window);
__jsRegistry.fw = __globalRegistry["ns1fqw"] || (__globalRegistry["ns1fqw"] = (function(e){return e.create()})(__jsRegistry.u)||window);
__jsRegistry.fx = __globalRegistry["aClBajg"] || (__globalRegistry["aClBajg"] = (function(F,I,U,A,E,b,B,J){var h={},_=4,t,u,m,c,p=F.create(),f=[],l;function v(e){var r=window.pageCtx;(!l||e)&&r&&(l=r.actionBusUrl,r.actionBusUrl="")}v(),b.navigated.attach(function(){v(!0)});function g(){t={},u={},m={}}g();function q(e){A.copy(e,h)}function k(){c||(c=setTimeout(N,_))}function C(){var e=window.localStorage,r=window.sessionStorage,n="okTime",s=r&&r[n]||e&&e[n],o;if(s){s=JSON.parse(s);for(o in s)s.hasOwnProperty(o)&&(document.cookie=o+"="+s[o]+";path=/")}}function L(){var e={_i_loc_rdr:1};C(),v();var r=l+E.formatParams(e,"&"),n=U.request(r,"POST");return n.ajaxTask.dataJson(t),n.withToken().send()}function N(){c=null;var e=L();e.oneTimeHandlers=u,e.oneTimeFailHandlers=m,e.then(w,G),g(),R()}function R(){for(var e=0;e<f.length;e++){var r=f[e],n=r.name;t[n]===void 0&&(r.task.join(O(n,r.arg)),f.splice(e,1),e--)}}function w(e){var r=this.oneTimeHandlers,n=this.oneTimeFailHandlers,s=null,o=e.error,y=!1;if(o){for(var D in n)n.hasOwnProperty(D)&&n[D](o);s=o.error?[o.error]:null}else for(var a in e)if(e.hasOwnProperty(a)){var P=r[a]||h[a],i=e[a];if(P){var T=i&&i.error;if(T){var S=n[a];S&&S(T),(s||(s=[])).push(T)}else{if(i&&i.html){y=!0;var d=i.deferredCss;if(d){for(var j in d)if(d.hasOwnProperty(j)){var H=document.createElement("div");H.innerHTML=d[j],J.addCss(H,j==="top"?"TOP":"DEFAULT")}}}P(i)}}else window.okSjse&&alert("Not handled: "+a)}s&&p.trigger({errors:s});var x=this.ajaxTask.xhr.getResponseHeader("X-Sec-Token");x&&(l=l.replace(/\&STKN\=[^\&]+/gi,"&STKN="+x)),y&&B.process()}function G(){var e=this;w.call(e,{error:"error.no.response"})}function O(e,r,n){var s=I.start();return n&&V(r,n),e in t?f.push({task:s,name:e,arg:r}):(t[e]=r,u[e]=s.resolveIfNotDone.bind(s),m[e]=s.rejectIfNotDone.bind(s),k()),s}function V(e,r){e&&r.loadDeferred&&(e.loadDeferred=!0)}return{send:k,handle:q,run:O,failed:p}})(__jsRegistry.u, __jsRegistry.n, __jsRegistry.fm, __jsRegistry.aa, __jsRegistry.m, __jsRegistry.w, __jsRegistry.cx, __jsRegistry.q)||window);
__jsRegistry.fy = __globalRegistry["mNBDDRg"] || (__globalRegistry["mNBDDRg"] = (function(i){var u=1963260;function a(r){this.trackerId=r}a.prototype={constructor:a,pushEvent:s,trackPage:l,trackCustomGoal:o};function s(r){r.id==null&&(r.id=this.trackerId);var t=i.get();t?t.push(r):i.getOrFetch().then(function(e){e.push(r)})}function l(r){r=r||{};var t={type:"pageView",start:Date.now()},e=r.id;e!=null&&(t.id=e);var n=r.url;n!=null&&(t.url=n);var c=r.referrer;c!=null&&(t.referrer=c);var f=r.timespent;f!=null&&(t.timespent=!0),this.pushEvent(t)}function o(r,t,e){this.pushEvent({type:"reachGoal",goal:r,params:t,userid:e})}return OK.Mytracker={ODKL_COUNTER_ID:u,MytrackerImpl:new a(u),construct:a}})(__jsRegistry.fq)||window);
__jsRegistry.fz = __globalRegistry["betCAKg"] || (__globalRegistry["betCAKg"] = (function(e){return{pixelsMapRequest:e.create(),eventTracking:e.create(),video:{trackingPixelsParsed:e.create(),starting:e.create()}}})(__jsRegistry.u)||window);
__jsRegistry.ga = __globalRegistry["cNjmNnQ"] || (__globalRegistry["cNjmNnQ"] = (function(){return{set:function(o,r,i,n,t){var e=o+"="+r;if(i){var a=new Date(Date.now()+i*1e3),u=a.toUTCString();e+="; expires="+u}n&&(e+="; path="+n),t&&(e+="; domain="+t),e+=";",document.cookie=e},get:function(o){var r=document.cookie;if(r)for(var i=o+"=",n=r.split(";"),t=0;t<n.length;t++){var e=n[t].trim();if(e.indexOf(i)==0)return e.substring(i.length)}}}})()||window);
__jsRegistry.gb = __globalRegistry["vk4kMgw"] || (__globalRegistry["vk4kMgw"] = (function(c){var l={};function g(i,r){for(var e in r)Object.defineProperty(i,e,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,e).get})}g(l,{get VideoStats(){return m},get WatchCoverage(){return f}});function u(){return u=Object.assign||function(i){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i},u.apply(this,arguments)}var v=navigator.sendBeacon?15e3:1e3,f=(function(){function i(e){this._ranges=[],this._start=null,this._end=null,this._rate=1,this._lastCurrentTime=0,this._lastCurrentTimeTS=0,this._attrs={},this._options=e}var r=i.prototype;return r.destroy=function(){this.end(this._lastCurrentTime),this.send(),this._ranges=null,this._options=null},r.start=function(t){this._start=t,this._setCurrentTime(t),this._log("start",t)},r.end=function(t){this._start!==null&&(this._validCurrentTime(t)||(this._log("fix end value",t+" -> "+this._lastCurrentTime),t=this._lastCurrentTime),this._log("end",t),this._setCurrentTime(t),this._end=t,this._push())},r.send=function(){var t,s=this._ranges.sort(function(n,a){return n.start-a.start}).map(function(n){return{start:Math.floor(n.start),end:Math.ceil(n.end)}}).map(function(n){return n.start+"-"+n.end}).join(",");if(!s.length){this._log("not saved, ranges empty");return}this._log("save",s,this._attrs),(t=this._options)==null||t.save(s,this._attrs),this._ranges=[]},r.currentTime=function(t){return this._log("currentTime",t),this._validCurrentTime(t)?(this._setCurrentTime(t),!0):(this._log("reset"),this.end(this._lastCurrentTime),this.start(t),!1)},r.setRate=function(t){this._rate=t,this.setAttribute("rate",t)},r.setAttribute=function(t,s,n){n!==void 0&&(this.end(n),this.send(),this.start(n)),this._attrs[t]=s},r._validCurrentTime=function(t){if(t<this._lastCurrentTime)return this._log("Invalid currentTime 1",t,this._lastCurrentTime),!1;var s=(Date.now()-this._lastCurrentTimeTS+1e3)*this._rate/1e3,n=t-this._lastCurrentTime;return s<n?(this._log("Invalid currentTime 2",s,n),!1):!0},r._setCurrentTime=function(t){this._lastCurrentTime=t,this._lastCurrentTimeTS=Date.now()},r._log=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];var a,o;(o=this._options)==null||(a=o).log.apply(a,[].concat(["[WC]"],s))},r._push=function(){if(!(this._start===null||this._end===null)){if(this._end-this._start>.5){var t=Math.floor(this._start),s=Math.ceil(this._end);this._ranges.push({start:t,end:s}),this._log("range",t+"-"+s)}else this._log("empty range",this._start+"-"+this._end);this._start=this._end=null}},i})();function d(){return Math.floor(Math.random()*Math.pow(2,48)).toString()}var _="_vp_cid";function p(){var i;try{i=c.localStorage.getItem(_),i||(i=d(),c.localStorage.setItem(_,i))}catch(r){i=d()}return i}var m=(function(){function i(e){var t=this,s=this;this.stathubBatch=[],this.stathubDeferred=null,this.log=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h]},this.onBeforeUnload=function(){t.destroy()};var n={log:function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];s.log.apply(s,[].concat(o))},save:function(a,o){t.dwh("watch_coverage",a,!0)}};window.__videoWcHackFactory?this.watchCoverage=window.__videoWcHackFactory(n):this.watchCoverage=new f(n),this.stathubVars=e||{},this.stathubVars.sid=d(),this.stathubVars.cid=p(),window.addEventListener("beforeunload",this.onBeforeUnload)}var r=i.prototype;return r.setLog=function(t){this.log=t},r.destroy=function(){this.watchCoverage.destroy(),this.watchCoverage=null,this.dwhSendBatch(),window.removeEventListener("beforeunload",this.onBeforeUnload)},r.getWatchCoverage=function(){return this.watchCoverage},r._dwhAbortDeferredSending=function(){this.stathubDeferred&&(clearTimeout(this.stathubDeferred),this.stathubDeferred=null)},r.dwh=function(t,s,n){var a={name:t};s!==void 0&&(a.value=s),this.stathubBatch.push(a),n?this.dwhSendBatch():(this._dwhAbortDeferredSending(),this.stathubDeferred=setTimeout(this.dwhSendBatch.bind(this),v))},r.dwhSendBatch=function(){this._dwhAbortDeferredSending(),this.stathubBatch.length!==0&&(this.stathubVars.batch=this.stathubBatch,this.stathubBatch=[],this.log("sendBeacon",u({},this.stathubVars)),w("/dk?st.cmd=clientVideoStat",JSON.stringify(this.stathubVars)))},r.addBaseVar=function(t,s){this.stathubVars[t]=s},r.getBaseVar=function(t){return this.stathubVars.hasOwnProperty(t)?this.stathubVars[t]:null},r.removeBaseVar=function(t){this.stathubVars.hasOwnProperty(t)&&delete this.stathubVars[t]},i})();function w(i,r){var e=!0;if(navigator.sendBeacon){var t=new Blob([r],{type:"text/plain"});navigator.sendBeacon(i,t)&&(e=!1)}if(e){var s=new XMLHttpRequest;s.open("POST",i,!0),s.setRequestHeader("Content-Type","text/plain"),s.send(r)}}return l})(__jsRegistry.bs)||window);
__jsRegistry.gc = __globalRegistry["vlh2vwg"] || (__globalRegistry["vlh2vwg"] = (function(w,y){var h={};Object.defineProperty(h,"VideoStatsController",{enumerable:!0,get:function(){return k}});function a(){return a=Object.assign||function(s){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])}return s},a.apply(this,arguments)}var d="error",u="play",c="playing",v="pause",l="timeupdate",f="seeking",g="seeked",E="ended",T="ratechange",o="fullscreenchange",m=window.console,p=!1;try{p=w.localStorage.getItem("_vpl-debug")==="1"}catch(s){}var C=function(){for(var s=arguments.length,i=new Array(s),t=0;t<s;t++)i[t]=arguments[t];var e;p&&(m==null||(e=m).log.apply(e,[].concat(["@vpl"],i)))},S=[d,u,c,v,l,f,g,E,T],k=(function(){function s(t,e){var n=this;this.counts={},this.lastPercent=0,this.firstPlay=!0,this.seeking=!1,this.ended=!1,this.lastCurrentTime=0,this.video=t,this.options=e,S.forEach(function(r){n.video.addEventListener(r,n)}),document.addEventListener(o,this),this.videoStat=new y.VideoStats(a({statVersion:2,version:"1.0.0",flashVersion:"html5",statType:"",dst:"",peerInfo:"cdn"},e.vars)),this.videoStat.setLog(C),this.dwh("init")}var i=s.prototype;return i.handleEvent=function(e){switch(C("event",e.type,this.video.currentTime,this.video.paused,e),e.type){case u:this.onPlay();break;case c:this.onPlaying();break;case l:this.onTimeUpdate();break;case v:this.onPause();break;case f:this.onSeeking();break;case g:this.onSeeked();break;case E:this.onEnded();break;case d:this.onError(e);break;case o:this.onFullscreenChange();break;case T:this.onRateChange();break}},i.dwh=function(e,n,r){this.counts.hasOwnProperty(e)||(this.counts[e]=0),!(r!==void 0&&this.counts[e]>=r)&&(this.videoStat.dwh(e,n),this.counts[e]++)},i.error=function(e){this.dwh("error",e)},i.destroy=function(){var e=this;S.forEach(function(n){e.video.removeEventListener(n,e)}),document.removeEventListener(o,this),this.videoStat.getWatchCoverage().end(this.getLastCurrentTime()),this.videoStat.destroy(),this.video=null,this.videoStat=null},i.onError=function(e){var n="unknown";try{n=""+this.video.error.code}catch(r){}this.dwh("error",n,1)},i.onFullscreenChange=function(){document.fullscreenElement===this.video&&this.dwh("fullscreen")},i.onRateChange=function(){this.videoStat.getWatchCoverage().setRate(this.video.playbackRate)},i.getCurrentTime=function(){return this.video.currentTime},i.getLastCurrentTime=function(){return Math.abs(this.lastCurrentTime-this.video.currentTime)<1?this.video.currentTime:this.lastCurrentTime},i.onPlay=function(){this.counts.seek=0;var e=this.getCurrentTime();this.ended&&Math.round(e)===0?this.dwh("replay"):this.firstPlay?this.firstPlay=!1:this.dwh("play_toggle"),this.onRateChange(),this.videoStat.getWatchCoverage().start(e)},i.onPlaying=function(){this.dwh("started",void 0,1)},i.onPause=function(){var e=this.getCurrentTime();e!==this.video.duration&&(this.dwh("pause"),this.videoStat.getWatchCoverage().end(this.getLastCurrentTime()),this.videoStat.getWatchCoverage().send(),this.resetLastCurrentTime())},i.onTimeUpdate=function(){var e=this.video.currentTime;if(this.videoStat.getWatchCoverage().currentTime(e),!this.video.paused&&(this.lastCurrentTime=e,this.ended&&e>.1&&e<this.video.duration&&(this.ended=!1),!this.seeking)){var n=Math.floor(100*e/this.video.duration),r=25*Math.floor(e*4/this.video.duration);r>0&&this.lastPercent!==r&&n-r<10&&(r!==100&&this.dwh("checkpoint",r),this.lastPercent=r)}},i.resetLastCurrentTime=function(){this.lastCurrentTime=0},i.onSeeking=function(){this.seeking=!0},i.onSeeked=function(){this.seeking=!1,this.ended||this.dwh("seek",void 0,1)},i.onEnded=function(){this.videoStat.dwh("checkpoint",100),this.videoStat.dwh("stop"),this.videoStat.getWatchCoverage().end(this.getCurrentTime()),this.videoStat.getWatchCoverage().send(),this.videoStat.dwhSendBatch(),this.ended=!0,this.resetLastCurrentTime()},s})();return h})(__jsRegistry.bs, __jsRegistry.gb)||window);
__jsRegistry.gd = __globalRegistry["vadqk1Q"] || (__globalRegistry["vadqk1Q"] = (function(ve,pe,Ie,Oe,Ne,c,ge,te,le,Ae,De,Re,Q,ye,he,Ye,ae,xe,me,Ce,Be,de){function Me(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var Ge=Be.VideoStatsController,Fe=1,$=pe.create(),W=pe.create(),ue=Ae.MytrackerImpl,Ee,x={ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},Ke=[x.ENDED,x.PLAYING,x.PAUSED,x.BUFFERING,x.CUED];function ze(){var e=document.createElement("video");return e.canPlayType("application/vnd.apple.mpegURL")||e.canPlayType("application/x-mpegURL")}function He(e){var t=De.impl;t&&t.previewClick({target:e})}function Je(e){if(c.hasClass(e.target,"js-copy-link"))return!0}var F={},z=function(){},H={play:function(){},stop:function(){}};function qe(e){z=function(o){return e?e[o]:null},z("comscore")&&OK.loader.use("streamsense-js",function(){var t=null,o=!1,v=null,d=window.ns_;if(!d)return;function s(r,h){(!t||r&&v!==null&&r!==v)&&(t=new d.StreamingTag({customerC2:"9999305"})),r&&(v=r),h(d,t)}function k(r,h,g){try{o&&r==="stop"?(s(h,g),o=!1):!o&&r==="play"&&(s(h,g),o=!0)}catch(I){logClientEvent("vplayer",["comscore-stat-error"])}}function _(r,h,g,I,C){k("play",r,function(f,p){var V={ns_st_ci:r,ns_st_cl:h*1e3,ns_st_st:C||"*null",ns_st_pu:"*null",ns_st_pr:I,ns_st_ep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ge:"*null",ns_st_ti:"*null",ns_st_ia:"0",ns_st_ce:"1",ns_st_ddt:"*null",ns_st_tdt:"*null",c3:"odnkls",c4:g,c6:"*null"},b=f.StreamingTag.ContentType.UserGeneratedLongFormOnDemand;switch(g){case"LIVE_TV_APP":b=f.StreamingTag.ContentType.UserGeneratedLive;break;case"LIVE_TV_ODKL":b=f.StreamingTag.ContentType.Live;break;case"PARTNER":b=f.StreamingTag.ContentType.LongFormOnDemand;break}p.playVideoContentPart(V,b)})}function u(){k("stop",null,function(r,h){h.stop()})}H={play:_,stop:u}})}function B(e){e&&e.parentNode&&c.removeClass(e.parentNode,"ldng")}function Le(e){e&&e.parentNode&&c.addClass(e.parentNode,"ldng")}var Pe=(function(){var e="vdsig";function t(){var s;return/^([0-2]?[0-9][0-9]?)(\.([0-2]?[0-9][0-9]?)){3}$/.test(location.hostname)?s=location.hostname:s=location.hostname.split(".").slice(-2).join("."),s}function o(s,k,_){me.set(s,k,_,"/",t())}function v(){o(e,"",0,"/",t())}function d(s,k){function _(p){s&&s(p)}var u=z("loginUrl"),r=z("altLoginUrls"),h=3;if(!u){_();return}var g=me.get(e);if(g&&g.trim().length>5&&!k){_(g);return}function I(){logClientEvent("vplayer",["login.success",u,h]);var p=this.response(),V=JSON.parse(p),b,R;V&&(b=V.vtkn,R=V.ttl),o(e,b,R),_(b)}function C(){logClientEvent("vplayer",["login.fail",u,h]),r&&r.length>0&&h-- >0?(u=r.shift(),f()):_()}function f(){g&&(u+="?suggSig="+g),ye.request(u,"POST").withCredentials().setExternal().then(I,C).send()}f()}return{refresh:d,invalidate:v}})();function Te(e,t){for(var o=this.currentTime,v=Math.round(o/this.duration*100),d=e.playheadReachedValueList,s=d?d[0]:null;s&&v>=s;)logClientEvent("vplayer",["checkpoint",s,e.providerName],e.videoSrc,e.movieId),S(t,"playheadReachedValue"+s,!0),d.splice(0,1),s=d[0];!e.reached3s&&o>=3&&(S(t,"playheadReachedValue3",!0),e.reached3s=!0)}function Ve(e){var t=[];for(var o in e)if(e.hasOwnProperty(o)&&typeof o=="string"){var v=o.match(/^playheadReachedValue([0-9]+)$/i);v&&t.push(parseInt(v[1]))}var d;return(d=t.indexOf(3))>-1&&t.splice(d,1),t.sort(function(s,k){return s-k})}function S(e,t,o){return ae.eventTracking.trigger({target:e,action:t,onlyOnce:o})}function Ue(e){var t=e.target;if(t.classList.contains("js-one-video-play"))return!0;var o=t.getAttribute("data-video");if(o&&!c.hasClass(t,"js-vlayer")){var v=JSON.parse(o);if(v)return X(t,v),!0}}he.register(Je),he.register(Ue),window.embedVPlayer=X;function X(e,t,o,v){Le(e);var d=null;return Pe.refresh(function(s){t.vdsig=s,d=$e(e,t,o,v)}),o&&c.preventDefault(o),d}function Qe(e){return e&&typeof e=="string"?e.split("_")[0]:"0"}function $e(e,t,o,v){var d=t.statV2,s=t.videoName,k=t.videoChannelName,_=t.videoDuration,u=t.videoSrc,r=t.videoPosterSrc,h=t.fixHls,g=t.providerName,I=t.providerId,C=t.contentId,f=t.movieId,p=t.externalStats,V=t.errorCheckUrl,b=t.vdsig,R=t.loopVideo,ne=t.initiallyMuted,i=t.needTrackMyTracker,E=!!t.isAutoplay,T=le.getLogLoc(e),a={},N=!1,m,A=0,j=0,Y=!1,L=be(e),O=Q.androidVersion&&Q.androidVersion.number,K=Q.android&&O<5&&Q.androidDevice.isStockVersion;if(F={},(typeof u>"u"?"undefined":Me(u))==="object"&&!V){if(a=u.statistics,L&&(ae.video.trackingPixelsParsed.trigger({target:e,pixelMap:a}),a.playheadReachedValueList=Ve(a)),u=u.src,a.s=0,u.indexOf("/apphook/video/",0)===0)return a&&a.playbackStarted&&(new Image().src=a.playbackStarted.url,L&&S(e,"playbackStarted",!0)),o&&c.preventDefault(o),window.location.href=u,!1}else{if(h){var re=de.params(u);re["st.hls"]==="on"&&!ze()&&(u=de.replaceParams(u,{"st.hls":"off"}))}if(b&&(u=de.insertParam(u,"vdsig",b)),L){var Z={result:null,target:e};ae.pixelsMapRequest.trigger(Z);var ie=Z.result;ie&&(a.playheadReachedValueList=Ve(ie))}}a.videoSrc=u,a.movieId=f,a.providerName=g,a.firstPlayEvent=!0,a.firstLoop=!0;var n=document.createElement("video");d&&!L&&(m=new Ge(n,{isAdv:L,vars:{location:T,providerId:I||0,duration:_||0,contentId:C||0,movieId:Qe(f),autoplay:E}}));function P(l,y){m||(y===void 0&&(y=T),logClientEvent("vplayer",[l,y,g],u,f))}P("init"),p&&p.init&&(new Image().src=p.init,p.init=null);var w=e.parentNode;if(z("crossorigin")&&n.setAttribute("crossorigin","anonymous"),!n||!n.canPlayType)return P("nohtml5"),m&&m.error("nohtml5"),!0;if(n.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').length===0)return P("nocodec"),m&&m.error("nocodec"),!0;R&&n.setAttribute("loop",""),ne&&(n.setAttribute("muted",""),n.muted=!0),Q.iOS&&n.setAttribute("playsinline",""),o&&c.preventDefault(o);var M=w.getElementsByClassName("js-video-container")[0];M?c.clear(M):(M=document.createElement("div"),c.addClass(M,"js-video-container"));var _e=M.style;_e.width="100%",w.appendChild(M);var oe=function(){_e.height=Math.floor(w.clientHeight)+"px"};w.okResize=oe,oe(),window.addEventListener("resize",oe,!1);function je(){function l(){m&&(m.destroy(),m=null),document.contains(w)&&(w.removeChild(M),c.removeClass(e,"hidden"),B(e))}n?(n.onerror=null,n.pause(),setTimeout(function(){l(),n.src="",n.load(),n.parentNode&&n.parentNode.removeChild(n),n=null},0)):l(),window.removeEventListener("resize",oe)}if(V){var Ze=function(){var y=this.xhr.getResponseHeader(Ye.ERROR_MESSAGE_HEADER);if(y==null){je();var D=this.response();D&&D.length>0?w.innerHTML=D:(t.errorCheckUrl="",X(e,t,o))}};return ye.request(V).then(Ze).send(),!1}B(e),n.setAttribute("preload","none"),n.controls=!0,n.setAttribute("controlsList","nodownload"),n.addEventListener("contextmenu",function(l){return c.preventDefault(l),!1});var et=u.indexOf("st.hls=on")!==-1?"m3u8":"mp4";if(n.src=u.replace("/dk?","/dk/video."+et+"?"),n.poster=r,z("crossorigin")||(n.poster=r),n.className="vdo vpl fll",K){for(var J=e;J&&J!=document;){if(c.hasClass(J,"vpopup")){c.addClass(J,"old-andr-vid");break}J=J.parentNode}c.addClass(n,"old-andr-vid")}n.onerror=function(l){B(e);var y="unknown";try{y=l.target.error.code}catch(D){}P("error",y),this.onerror=null,Pe.refresh(function(){},!0)},n.addEventListener("play",function(y){if(L){var D;a.firstLoop&&(a.firstPlayEvent?(this.defaultMuted?(D="playVideoVolumeOff",a.volumeOn=!1):(D="playVideoVolumeOn",a.volumeOn=!0),S(e,["playVideo","playbackStarted",D],!0),P("play"),Y||H.play(f,_,g,s,k),a.firstPlayEvent=!1):S(e,"playbackResumed"))}else F.play||(P("play"),F.play=!0,i&&ue&&(Ee||(ue.pushEvent({type:"pageView",start:Date.now()}),Ee=!0),ue.trackCustomGoal("view_sport_broadcast",{autoplay:E?1:0}))),Y||H.play(f,_,g,s,k)},!1);var we=Ce(function(l){S(l.target,l.action)},1e3);n.addEventListener("volumechange",function(){if(L&&a.firstLoop){var l=this.volume,y=this.muted;a.volumeOn&&(y||l<.05)&&(we({target:e,action:"volumeOff"}),a.volumeOn=!1),!a.volumeOn&&!y&&l>=.05&&(we({target:e,action:"volumeOn"}),a.volumeOn=!0)}}),n.addEventListener("loadstart",function l(y){Le(e),this.removeEventListener(y.type,l)},!1),n.addEventListener("playing",function(){W.trigger(fe(this,x.PLAYING)),L||(a&&a.p&&a.playbackResumed?new Image().src=a.playbackResumed.url:a&&a.playbackStarted&&(a.p=1,new Image().src=a.playbackStarted.url)),p&&p.play&&(new Image().src=p.play,p.play=null),B(e)},!1),n.addEventListener("pause",function(y){W.trigger(fe(this,x.PAUSED)),Y=j>Fe,Y||H.stop(),!(F.pause&&!L)&&(F.pause=!0,this.ended||(L&&a.firstLoop?S(e,"playbackPaused"):a&&a.playbackPaused&&(new Image().src=a.playbackPaused.url)),B(e),P("play_toggle"))},!1);var tt=Ce(Te.bind(this),300);return n.addEventListener("seeked",function(){L&&tt(a,e)},!1),n.addEventListener("seeking",function(y){F.seeking||(P("seek"),F.seeking=!0)},!1),n.addEventListener("timeupdate",function(y){j=Math.abs(y.target.currentTime-A),A=y.target.currentTime;var D=this,q=y.target;if(q.currentTime>.01&&(N=!0),p&&p.checkpoints&&p.checkpoints.length)for(var at=q.currentTime*100/q.duration,Se=p.checkpoints,ce=0;ce<Se.length;++ce){var ee=Se[ce];at>=ee.pos&&!ee.__sent&&(ee.__sent=!0,ee.url&&(new Image().src=ee.url))}if(L)Te.call(this,a,e);else{var G=a&&a.playheadReachedValue?a.playheadReachedValue:null;G&&!a.s&&q.currentTime>3&&G[3]&&G[3].url&&(new Image().src=G[3].url,a.s=3);var U=25*Math.floor(q.currentTime*4/q.duration);if(U>0&&D.lastPercent!==U){U!=100&&P("checkpoint",U);var se=U/25-1;G&&G[se]&&G[se].url&&se<3&&(new Image().src=G[se].url),D.lastPercent=U}}},!1),n.addEventListener("ended",function l(y){W.trigger(fe(this,x.ENDED)),a&&a.playbackCompleted&&(new Image().src=a.playbackCompleted.url),B(e),L&&S(e,"playbackCompleted"),p&&p.end&&(new Image().src=p.end,p.end=null),L||(P("checkpoint","100"),this.removeEventListener(y.type,l)),a.firstLoop=!1,v&&v(y)},!1),n.addEventListener("canplay",function(){B(e)},!1),n.addEventListener("suspend",function(){B(e)},!1),c.addClasses(e,"hidden inited"),M.appendChild(n),$.trigger(n),$.attachOnce(function(l){l!==n&&je()}),n.load(),n.play(),K&&setTimeout(function(){n.load(),n.play()},100),t.liveRedirectWorkaround&&Ne.run("movie.getLiveUrl",{movieId:f}).then(function(l){l&&l.liveUrl&&!N&&n&&(n.src=l.liveUrl,n.play())},function(){P("error","live.redirect.fix"),m&&m.error("live.redirect.fix")}),n}function be(e){return c.hasClass(e,"adv-video-link")}(function(){window.addEventListener("message",function(i){if(!(i.origin!=="http://static.pladform.ru"&&i.origin!=="http://out.pladform.ru")){var E;if(document.getElementsByClassName)for(var T=document.getElementsByClassName("og_iframe"),a=0,N=T.length;a<N;a++){var m=T[a],A=m.contentWindow||m;if(A==i.source){E=m;break}}var j=le.getLogLoc(E),Y=E?E.getAttribute("data-objid"):null,L="";i.data.p1&&(L=i.data.p1),logClientEvent("vpladform",[i.data.event,j,"OG_PLADFORM",L],"",Y)}},!1);var e={},t=[],o=!1,v=!1;function d(i,E,T){var a=E[0]+"_"+i+"_"+E[1];e[a]||(e[a]=1,logClientEvent("ytplayer",E,i,T))}window.onYouTubePlayerAPIReady=function(){for(var i=0;i<t.length;i++)t[i]();t=[],o=!0};function s(i){o?i():t.push(i)}var k=function(){};function _(){if(v)return;v=!0;function i(){var N=document.createElement("script");N.src="//www.youtube.com/player_api",N.async=!0,document.body.insertBefore(N,document.body.childNodes[0])}i();var E=4,T=5e3;function a(){o||(E--<=0?(v=!1,k()):(i(),T*=2,T>15e3&&(T=15e3),setTimeout(a,T)))}setTimeout(a,T)}function u(){r!=null&&(r.stopVideo&&r.stopVideo(),r=null),h=null,I=!1,p=!1;var i=document.getElementById(V);i!=null&&c.remove(i),C&&c.removeClass(C,"mvplaying")}var r,h,g,I=!1,C,f,p,V="ytplid";function b(){var i=document.getElementById(V);if(i&&C&&f){var E=c.getTotalOffsetTop(C),T=c.getTotalOffsetLeft(C),a=Math.floor(E-c.getTotalOffsetTop(f)),N=Math.floor(T-c.getTotalOffsetLeft(f)),m=Math.round(C.offsetWidth),A=Math.round(C.offsetHeight),j=i.style;j.top=a+"px",j.left=N+"px",j.width=m+"px",j.height=A+"px",i.width=m,i.height=A,r&&r.setSize(m,A)}}function R(){setTimeout(b,100)}window.onYTClicked=function(i,E,T,a,N,m){var A=le.getLogLoc(i),j=be(i),Y={},L=m||{};He(i),ae.video.starting.trigger({domEvent:a,target:i}),C&&c.removeClass(C,"mvplaying"),C=i,a&&a.stopPropagation();var O=document.getElementById(V);if(O===null){if(r=null,O=document.createElement("div"),O.id=V,!f){f=ge.parentBySelector(i,".discus_list,.portal,.mvplayer_cont"),f||(f=document.body);var K=document.createElement("div");K.style.position="relative",K.className="js-nav-tmp",f.insertBefore(K,f.firstChild),f=K}f.appendChild(O),b()}c.addClass(O,"vdoytplr");var re=i.getAttribute("data-embedclass");if(re&&c.addClass(O,re),O.style.visibility="visible",$.trigger(O),$.attach(function(n){n!==O&&r!==null&&r.pauseVideo&&(r.pauseVideo(),j&&S(i,"playbackPaused"))}),g=i.getAttribute("data-objid"),r)h=E,O.style.top=-9999,p?r.loadVideoById(E):r.cueVideoById?r.cueVideoById(E):I=!0,R();else{if(!h){var Z=function(){b(),R()};window.addEventListener("resize",R,!1),window.addEventListener("orientationchange",R,!1),Ie.messageLoaded.attach(Z),te.layoutChanged.attach(Z),te.updated.attach(function(){if(!ge.isChildOf(C,document.body)){var n=document.getElementById(V);n&&(n.style.visibility="hidden"),r&&r.stopVideo&&r.stopVideo()}})}var ie=N?1:0;h=E,s(function(){r==null&&(r=new YT.Player(O.id,{videoId:h,playerVars:{showinfo:0,html5:1,autoplay:1,mute:ie},events:{onStateChange:function(P){if(r){if(I){I=!1,r.cueVideoById(h);return}var w=P.data;W.trigger(Xe(r,Ke[w])),w===YT.PlayerState.PLAYING&&(H.play(g,r.getDuration(),"YoutubeUser",r.getVideoData().title,null),d(r.getVideoUrl(),["play",A],g),p=!0,j&&(Y.paused?S(i,"playbackResumed"):S(i,["playbackStarted","playVideo"],!0))),w===YT.PlayerState.PAUSED&&(H.stop(),d(r.getVideoUrl(),["play_toggle",A],g),j&&(Y.paused=!0,S(i,"playbackPaused"))),w===YT.PlayerState.ENDED&&(d(r.getVideoUrl(),["checkpoint","100"],g),j&&S(i,"playbackCompleted")),L[w]&&L[w]()}},onPlaybackQualityChange:function(P){r&&d(r.getVideoUrl(),["quality",P.data],g)},onError:function(P){if(r){if(I){I=!1,r.cueVideoById(h);return}d(r.getVideoUrl(),["error",P.data],g)}}}}))}),_()}return c.addClass(i,"mvplaying"),s(function(){window.playYTPlayer=function(){r&&r.playVideo&&r.playVideo()},window.pauseYTPlayer=function(){r&&r.pauseVideo&&r.pauseVideo()}}),!1},k=function(){C&&c.addClass(C,"ytlderr"),d(null,["error","loadTO"],g),u()},te.init.attach(function(){u(),f=document.getElementById("live-search")}),te.cancelled.attach(function(){u(),f=null});function ne(){var i=document.querySelector("a[data-ytid]");i!=C&&ke(i)}Re.rendering.attach(function(){u(),f=null}),Oe.attach(ne),ve.initYouTubeVideos=function(){ne()}})(),xe.create({name:"initVideo",update:function(t){qe(t)},discard:function(){We()}});function We(){var e=document.getElementsByClassName("js-video-container"),t=e.length;if(t)for(var o=0;o<t;o++){var v=e[o],d=v.parentNode;if(d){var s=d.getElementsByClassName("tbcont inited")[0];s&&c.removeClass(s,"hidden")}}}var ke=function(t,o,v,d){if(!(!t||t.offsetParent===null)){var s=o||t.getAttribute("data-ytid");onYTClicked(t,s,0,0,v,d)}};function fe(e,t){return{player:e,type:"embed",event:t,id:e}}function Xe(e,t){return{player:e,type:"yt",event:t,id:e.getVideoData().video_id}}return ve.autoplayVideoPlayer=function(e){var t=e.target,o=t.getAttribute("data-video");if(o)try{var v=JSON.parse(o);X(t,v)}catch(d){}},{embed:X,runYTplayer:ke,videoStartEvent:$,playerStateChange:W}})(__jsRegistry.c, __jsRegistry.u, __jsRegistry.fv, __jsRegistry.fw, __jsRegistry.fx, __jsRegistry.s, __jsRegistry.t, __jsRegistry.ar, __jsRegistry.ay, __jsRegistry.fy, __jsRegistry.fl, __jsRegistry.w, __jsRegistry.ak, __jsRegistry.bw, __jsRegistry.ea, __jsRegistry.et, __jsRegistry.fz, __jsRegistry.x, __jsRegistry.ga, __jsRegistry.el, __jsRegistry.gc, __jsRegistry.m)||window);
__jsRegistry.ge = __globalRegistry["dmITcaQ"] || (__globalRegistry["dmITcaQ"] = (function(m,c,i,E,k,p){var O="__fullscreen",h=".",L="dialog",C="hidden",g="visible",T="__has-scroll",v="__inner-scroll",b="js-modern-dialog",D=h+"content",H=h+"cls",j=h+"modern-dialog_content",u=function(e,t){this.init(e,t)},_=function(e){var t=c.calc();e.style.top=t.scrollTop-1+"px",e.style.height=t.height+1+"px"};return u.prototype={constructor:u,init:function(e,t){var n=this;this.opts=t||{},n._el=e,n._container=e.querySelector(D),n._locker=new p.newInstance,n._visible=!1,i.addClass(e,L);var o=e.querySelector(H);o&&o.addEventListener("click",function(l){l.preventDefault(),setTimeout(function(){n.close()},0)},!1),this.opts.closeOnShadowClick&&n._el.addEventListener("click",function(l){l.target===n._el&&(l.preventDefault(),l.stopPropagation(),setTimeout(function(){n.close()},0))},!1)},lockScrolling:function(){this._locker.lock()},unlockScrolling:function(e){this._locker.unlock(),typeof e>"u"&&(e=!0),this._reposition=e},addCssClass:function(e){return i.addClass(this._el,e),this},removeCssClass:function(e){return i.removeClass(this._el,e),this},show:function(e){var t=this._el,n=this;e=e||{},_(t),i.removeClass(t,C),i.addClass(t,g),e.isFullScreenDialog?(i.addClass(t,O),this.isFullScreen=!0):this.isFullScreen=!1,t.setAttribute("aria-hidden","false"),n._viewportHeight=c.calc().height,n._locker.lock();function o(l){var I=n._reposition;if(n._visible&&I&&l){var f=document.activeElement;if(f&&E.isChildOf(f,t)&&(f.type||"").indexOf("text")==0){var N=l.height;typeof n._viewportHeight<"u"&&n._viewportHeight!=N&&setTimeout(function(){l=c.calc();var S=l.scrollTop,r,a,d;r=n._container.offsetHeight,a=l.height,r>a?d=S-r+a:d=S+(a-r)/2,t.style.top=d+"px"},100);return}_(t),n._checkHasContentScroll()}}c.changed.attach(o),setTimeout(o,k.keyboard.closeTimeout),n._reposition=!0,n._onViewChange=o,n._visible=!0},close:function(){var e=this,t=e._el,n=this.opts;if(e._onViewChange&&(c.changed.detach(e._onViewChange),e._onViewChange=null),e._locker.unlock(),t.setAttribute("aria-hidden","true"),i.removeClass(e._container,v),i.removeClass(t,g),i.addClass(t,C),this.isFullScreen=!1,t.style.top="-9999px",e._visible=!1,n.onExit&&n.onExit(),n.clearOnExit){var o=e._container;setTimeout(function(){i.clear(o)},0)}},getElement:function(){return this._el},getContentElement:function(){return this._container},handleScreenResize:function(){this._visible&&(_(this._el),this._checkHasContentScroll())},isVisible:function(){return this._visible},initContentScroll:function(){this._innerContent=this._el.querySelector(j);var e=document.getElementById("dialog-content"),t=this._innerContent!=null;i.switchClass(this._el,t,"modern-dialog"),i.switchClass(e,t,"modern-dialog_container"),this._el.getElementsByClassName(b).length>0&&i.addClass(this._container,v),setTimeout(this._checkHasContentScroll.bind(this),0)},_checkHasContentScroll:function(e){var t=this._innerContent;if(t){var n=e||t.scrollHeight>t.clientHeight;i.switchClass(t,n,T)}}},m.Dialog=u})(__jsRegistry.c, __jsRegistry.bd, __jsRegistry.s, __jsRegistry.t, __jsRegistry.bc, __jsRegistry.ez)||window);
__jsRegistry.gf = __globalRegistry["dELQYlA"] || (__globalRegistry["dELQYlA"] = (function(s,t){var i={};function a(e,r){for(var n in r)Object.defineProperty(e,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,n).get})}a(i,{get blurNodeFnWrapper(){return l},get isDialogElement(){return u},get isDialogLink(){return d}});function o(e){e.blur()}var l=t.okApp&&t.iOS?function(r){setTimeout(function(){o(r)},20)}:o;function u(e,r){var n=e.indexOf("#");return n!==-1&&e.indexOf("js-dlg",n)!==-1||(0,s.hasClass)(r,"__dialog")}function d(e){return u(e.href,e)}return i})(__jsRegistry.s, __jsRegistry.ak)||window);
__jsRegistry.gg = __globalRegistry["pJWDPJw"] || (__globalRegistry["pJWDPJw"] = (function(a,s,o,g,d){var u,r,p={},h={};function m(i){var e=p[i.type]||u;if(r!==e){var t={state:i,current:e,previous:r};r&&r.deactivated.trigger(t),r=e,e.activated.trigger(t)}r&&r.render(i)}var v=o.create({init:function(){a.init(),a.renderState.attach(m)},update:function(e){p[e.type]=e,e.typeIncludesDefault&&(u=e),e.isActive()&&(r=e)}});function f(i,e){var t=this;e=e||h,t.isInited=!1,t.type=i,t.typeIncludesDefault=e.isDefault,t.useSwap=!1,t.prepare=s.create(),t.accountingState=s.create(),t.launch=s.create(),t.config=s.create(),t.activated=s.create(),t.deactivated=s.create(),t.pipeline=[],v(t)}return f.prototype={isActive:function(e){var t=(e||a.getState()).type;return t===this.type||!t&&this.typeIncludesDefault},getState:function(){var e=a.getState();return this.isActive(e)?e:null},appendPipeline:function(e){this.pipeline=this.pipeline.concat(e)},removeFromPipeline:function(e){d.filterSelf(this.pipeline,function(t){return t!==e})},init:function(e){this.isInited?this.config.trigger(e):(this.launch.trigger(e),this.config.trigger(e),this.isInited=!0)},render:function(e){e=e||a.getState();var t=this;if(t.isActive(e)&&t.isInited){var n={state:e,cancelled:!1};if(t.prepare.trigger(n),!n.cancelled){for(var l=t.pipeline,c=0,S=l.length;c<S;c++)l[c](e);g.requestAot.trigger()}}},stamp:function(e){e.type=this.type,this.accountingState.trigger({state:e})},go:function(e,t){this.stamp(e);var n=this.useSwap;this.useSwap=!1,t=n?"replaceState":t||"pushState",a.go(e,t)},swapOnGo:function(){this.useSwap=!0},swap:function(e){this.go(e,"replaceState")},goOrSwapIfSamePage:function(e){var t=a.getState();this[!t||t.pageName!=e.pageName?"go":"swap"](e)},backToRoot:function(e){this.stamp(e),this.useSwap=!1,a.backToRoot(e)}},{create:function(e,t){return new f(e,t)}}})(__jsRegistry.ft, __jsRegistry.u, __jsRegistry.x, __jsRegistry.w, __jsRegistry.bl)||window);
__jsRegistry.gh = __globalRegistry["aZrBKQ"] || (__globalRegistry["aZrBKQ"] = (function(me,he,ge,v,P,j,ve,je,V,Ce,Ge,G,X,Ee,pe,z,Ae,Xe,De,ze,Se,be,ye){var D=".",W="dialog",S="ld",J="__at-very-top",R="cmpl",T=D+W,ke=D+W+"-"+S,we=D+"bck",Y=T+" a,"+T+" input,"+T+" button",Oe=D+"js-axh",b,_,c=pe.create("ajaxDialog"),H={},xe=Date.now(),L=!1,f,K,a,i,I,y=ye.create();c.isAjaxDialog=!0,P.startDialog=function(o){b({url:o.dialogUrl})},P.ajaxDialogState={subscribe:function(s,m){y.attach(s,m)},unsubscribe:function(s,m){y.detach(s,m)}};function B(){f||(f=document.getElementById("dialog")),a||(K=f,a=new me(K),i=a.getElement(),I=i.querySelector(ke))}Ee.create({name:"initAjaxDialog",init:Pe});function Pe(o){f||(f=document.getElementById("dialog")),L=o.handlesBack;var s=o.deferredPush,m,k,C,Q=document.getElementById("content"),E,r,Re=f&&f.firstChild?f.firstChild.className:"";function Z(){C&&(C.focus(),C=null)}function F(t){Q&&Q.setAttribute("aria-hidden",t)}function $(){var t=!1,e;e=i.querySelector("form"),e&&ve(e.elements,function(n){var l=n.type,d=navigator.userAgent.indexOf("OS 8_")!==-1;if(l!=="hidden"&&(!d||l!=="submit"))return k=n,n.focus(),t=!0,n}),t||(i.focus(),k=i)}function Te(){var t=a.getContentElement().offsetHeight,e=V.calc().height;t>e&&(a.isFullScreen||a.unlockScrolling(!1))}function U(){$(),Te(),a.initContentScroll(),he.trigger({dialog:a,target:r})}function ee(){m&&(m.abort(),m=null)}function _e(t){Ae.change(t)}function te(t,e){c[e?"swap":"go"]({url:t})}function ae(t){return t&&t.getAttribute("data-skip-history")!==null}function He(t){return t&&t.getAttribute("data-dialog-at-the-very-top")!==null}function M(t,e){if(H=e=e||{},r=e.target||null,t){t=X.abs(t);var n=X.see(t);if(t.trim().indexOf("//")==0||!n.internal)return}var l=typeof e.dontPush<"u"?!!e.dontPush:ae(r),d=(e.method||"get").toLowerCase(),A=e.contentHtml,Fe=e.contentAsEnvelope,se=e.replaceHistory,Me=e.modifier,Ne=e.noAjaxRequest;E=e;var x;if(r&&v.hasClass(r,"js-with-form-data")){var oe=j.findParent(r,function(u){return u.tagName==="FORM"});oe&&(x=Se.data(oe))}var Ve=r&&v.hasClass(r,"js-fullscreen-dialog");ee(),B(),a.lockScrolling();var h=a.getContentElement();v.clear(h),F("true"),!e.deferredPush&&!l&&te(t,se),e.isAtTheVeryTop&&a.addCssClass(J),a.addCssClass(S).removeCssClass(R),i.appendChild(I),i.setAttribute("aria-busy","true"),a.show({isFullScreenDialog:Ve}),document.addEventListener("keydown",ne,!1),a.getElement().addEventListener("click",ie,!1);function re(){var u=this.xhr,g=A||(typeof this.response=="function"?this.response():null);g&&g.length>0&&setTimeout(function(){h.className=Re;var de=Me||u&&u.getResponseHeader("X-Modifier");de&&v.addClass(h,de),u&&u.getResponseHeader("X-New-Modal")==="1"&&v.addClass(h,"__redesign");var fe=A==null||Fe;fe?be(g,{onComplete:function(){U(),e.onShowed&&e.onShowed(h,e)}}):(h.innerHTML=g,U()),a.removeCssClass(S).addCssClass(R),e.deferredPush&&!l&&te(t,se),window.__pstd=0,!fe&&e.onShowed&&e.onShowed(h,e)},0)}function le(){a.removeCssClass(S).addCssClass(R),i.setAttribute("aria-busy","false"),v.remove(I);var u=this.xhr;if(u&&u.status===200){var g=u.getResponseHeader(De.ERROR_MESSAGE_HEADER);g!=null&&g.length>0&&a.unlockScrolling()}}if(A||Ne)re(),le();else{var ue=t;if(d==="post"){var ce=je.preparePostRequest(t,r&&r.getAttribute("data-param-filter"));ue=ce.uri,x=Object.assign(x||{},ce.payload)}var N=Ce.request(ue,d,x);N.header("X-Requested-Popup","1"),N.then(re,Le).anyway(le).send(),m=N}}function Le(t){t||(t={errorInfo:"dialog request internet error"}),a.unlockScrolling(),w(t)}function w(t){F("false"),a&&a.isVisible()&&a.close(),k&&G.blurNodeFnWrapper(k),a.getElement().removeEventListener("click",ie,!1),a.removeCssClass(J),document.removeEventListener("keydown",ne,!1),C&&setTimeout(Z,0),E&&E.onClosed&&(E.onClosed(t),E=null),H={}}function p(){ee(),a.unlockScrolling(),F("false"),w(),Z(),y.trigger({state:"close",dialogDom:i})}function O(){c.isActive()?(z.back(),setTimeout(function(){c.isActive()?(c.swap({url:"#",avoidDialog:!0}),p()):a.isVisible()&&p()},50)):a.isVisible()&&p()}function Ie(t){var e=t.target,n,l,d;if(j.matches(e,Y)&&!j.parentBySelector(e,Oe)){if(n=e.href,l=n&&n.indexOf("js-bck")!==-1||j.parentBySelector(e,we),d=n&&n.indexOf("__apphook=1")!==-1,l)return L||O(),!0;if(n){if(w(),d)L||O();else return setTimeout(function(){_e(n)},10),!0;return!1}else{var A=e.form;A&&e.type==="submit"&&(y.trigger({state:"submit",dialogDom:i}),w())}}return!1}function ne(t){(t.key==="Escape"||t.keyCode===27)&&O()}function ie(t){j.isChildOf(t.target,a.getContentElement())||O()}function Be(){if((!a||!a._visible)&&Date.now()-xe>1e3){var t=c.getState(),e=t.url;e&&!t.avoidDialog&&M(e,{dontPush:!0,deferredPush:s})}}function qe(){a&&p()}return c.activated.attach(Be),c.deactivated.attach(qe),V.resize.attach(function(){B(),setTimeout(function(){a.handleScreenResize()},100)}),ge.register(function(t){var e=t.target,n=t.uri,l=t.method,d=e.target==="_blank";return n&&!d&&!(i&&i.contains(e))&&G.isDialogElement(n,e)?(C=e,setTimeout(function(){M(n,{dontPush:ae(e),isAtTheVeryTop:He(e),method:l,deferredPush:s,target:e})},0),!0):j.matches(e,Y)?Ie(t):!1}),document.addEventListener("focus",function(t){i&&!i.contains(t.target)&&setTimeout($,0)},!0),b=function(e){M(e.url,{dontPush:e.dontPush||!1,method:e.method||"GET",deferredPush:s,onShowed:e.onShowed||null,onClosed:e.onClosed||null,target:e.target||null,contentHtml:e.contentHtml,contentAsEnvelope:e.contentAsEnvelope||!1,replaceHistory:!!e.replaceHistory,modifier:e.modifier,noAjaxRequest:e.noAjaxRequest})},_=p,q.isInited=!0,this}var q={isInited:!1,close:function(){H.dontPush?q.hide():c.isActive()&&z.back()},show:function(s){b&&b(s)},hide:function(s){_&&_(s)},getContentElement:function(){if(B(),a)return a.getContentElement()}};return P.AjaxDialog=q})(__jsRegistry.ge, __jsRegistry.fw, __jsRegistry.ea, __jsRegistry.s, __jsRegistry.c, __jsRegistry.t, __jsRegistry.k, __jsRegistry.m, __jsRegistry.bd, __jsRegistry.bw, __jsRegistry.cr, __jsRegistry.gf, __jsRegistry.bt, __jsRegistry.x, __jsRegistry.gg, __jsRegistry.ft, __jsRegistry.ew, __jsRegistry.cx, __jsRegistry.et, __jsRegistry.ak, __jsRegistry.fb, __jsRegistry.de, __jsRegistry.u)||window);
__jsRegistry.gi = __globalRegistry["iesFvfQ"] || (__globalRegistry["iesFvfQ"] = (function(e){return{MyPlaylistId:"my",musicUtils:{secondsToMinutes:function(s){var u=Math.floor(s/60),r=Math.floor(s%60);return[u,":",r<10?"0":"",r].join("")}},trackSelected:e.create(),trackIsPlayingChanged:e.create(),buffering:e.create(),go:{ownMusic:e.create(),userMusic:e.create(),groupMusic:e.create(),recommended:e.create(),subscriptions:e.create(),current:e.create()},page:null,pageNames:{Home:"home",Recommended:"recommended",Search:"search",Subscriptions:"subscriptions",Current:"current",FriendMusic:"friend",GroupMusic:"group"},callPlayEarly:!1,umaLog:!1,ownMusicCache:null}})(__jsRegistry.u)||window);
__jsRegistry.gj = __globalRegistry["sTPRQGw"] || (__globalRegistry["sTPRQGw"] = (function(r,s,a){var f={NEXT_BTN:1,PLAYLIST_CHANGE:3,COMPLETED:4},d="externalMusic",o=(function(){var e=window.navigator.platform;if(["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)!==-1)return"Mac OS";if(a.iOS)return"iOS";if(["Win32","Win64","Windows","WinCE"].indexOf(e)!==-1)return"Windows";if(a.android)return"Android";if(/Linux/.test(e))return"Linux"})(),u,t;return{logListened:function(e,n,i){r.umaLog&&(!n||!i||(s.log(d,["listened",JSON.stringify({umaPayload:i.umaPayload,startTimestamp:i.startTimestamp,trackId:n.id,ctx:n.ctx,releaseId:n.releaseId,endReason:f[e],useDuration:Math.round((Date.now()-i.startTimestamp)/1e3),stateStart:i.stateStart?2:1,stateEnd:document.hasFocus&&document.hasFocus()?2:1,addedDuringListening:t,previousUmaPayload:u,osType:o})]),u=i.umaPayload,t=!1))},logAddTrack:function(e,n){r.umaLog&&(n&&(t=!0),s.log(d,["like",JSON.stringify({trackId:e.id,ctx:e.ctx,releaseId:e.releaseId,startTimestamp:Date.now(),osType:o})]))}}})(__jsRegistry.gi, __jsRegistry.a, __jsRegistry.ak)||window);
__jsRegistry.gk = __globalRegistry["pajxxvg"] || (__globalRegistry["pajxxvg"] = (function(o,s){return{create:function(t,n){return function(c){var r=c.error||"unknown.error";logClientEvent("music",["playError",r.substring(0,r.length>30?30:r.length)]),setTimeout(function(){var i=t.playingTrack();s.logListened("PLAYLIST_CHANGE",i&&i.track,t.stats()),t.playNext(!0)},400);var e=r.replace("error.","");e in n&&o.show(n[e],3e3)}}}})(__jsRegistry.es, __jsRegistry.gj)||window);
__jsRegistry.gl = __globalRegistry["m2TAWIg"] || (__globalRegistry["m2TAWIg"] = (function(){function i(t){return new MediaMetadata({title:t.name,artist:t.ensemble,album:t.albumName,artwork:t.imageUrl?[{src:t.imageUrl,type:"image/png",sizes:"128x128"}]:void 0})}return{updateMediaMetadata:function(n,a){var e=navigator.mediaSession;e&&(n&&(e.metadata=i(n)),a&&(e.setActionHandler("play",a.resume),e.setActionHandler("pause",a.pause),e.setActionHandler("seekbackward",a.seekBackward),e.setActionHandler("seekforward",a.seekForward),e.setActionHandler("previoustrack",a.previous),e.setActionHandler("nexttrack",a.next)))}}})()||window);
__jsRegistry.gm = __globalRegistry["pFh77sw"] || (__globalRegistry["pFh77sw"] = (function(G,P){var L={};function U(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,n).get})}U(L,{get MessageResource(){return I},get getPkg(){return E},get load(){return T}});var m={},v=[],l={},b=void 0,z="$Hash$",O=3e5,A={ru:N,uk:N,en:h,hy:h,mo:h,ro:h,de:h,uz:c,az:c,kk:c,ka:c,ky:c,tg:c,tr:c,getIndex:function(t){var n=(document.body.parentElement||__js_temp_htmlTag).getAttribute("lang"),r=A[n];return r||(r=N),r(t)}},I=(function(){function e(n,r){this.pkg=n,this.messages=r,this.parsedResources={}}var t=e.prototype;return t.has=function(r){return this.messages.hasOwnProperty(r)},t.getLMsg=function(r,u){if(!r)throw new Error("Не указан ключ");var o=this.messages[r];if(typeof o!="string")return G.log("pts.miss",[this.pkg,r]),this.pkg+"."+r;if(u){var i=this.parsedResources[r];return i||(i=J(o),this.parsedResources[r]=i),i.getResource(u)}return o},t.subscribe=function(r){var u=this.pkg;l[u]||(l[u]=[]),l[u].push(r)},e})(),C=(function(){function e(n){this.children=n}var t=e.prototype;return t.getResource=function(r){for(var u="",o=0,i=this.children.length;o<i;o++)u+=this.children[o].getResource(r);return u},e})(),s=(function(){function e(n){this.text=n}var t=e.prototype;return t.getResource=function(r){return F(this.text)},e})(),D=(function(){function e(n){this.argName=n}var t=e.prototype;return t.getResource=function(r){var u=r[this.argName];return u||u===0?u.toString():""},e})(),K=(function(){function e(n,r){this.argName=n,this.values=r}var t=e.prototype;return t.getResource=function(r){var u=this.argName,o,i=r[u];i==null?(i=r[u+"+plural"],i!=null&&(o=!0)):o=u.substr(-6)==="Plural";var f=Number(i);if(f===f){o&&(f=A.getIndex(f));var g=this.values[f];if(g)return g.getResource(r)}return""},e})(),$=(function(){function e(n,r){this.argName=n,this.values=r}var t=e.prototype;return t.getResource=function(r){var u=r[this.argName],o=this.values[u];return o?o.getResource(r):""},e})();function N(e){return e=Math.abs(e),e%10===1&&e%100!==11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function h(e){return e===1?0:1}function c(){return 0}function q(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}function F(e){var t=document.createElement("div");return q(e.split(" ").map(function(n){return t.innerText=n,t.innerHTML}).join(" "))}function X(e){for(var t=l[e]||[],n=t.length;n--;)t[n]()}function B(e){return m.hasOwnProperty(e)}function p(e){return m[e]}function R(e,t){return m[e]=new I(e,t),X(e),p(e)}function J(e){for(var t=[],n=0;;){var r=y(t,e,n);if(r===e.length)break;n===r&&r++,n=r}return k(t)}function y(e,t,n){var r=a(t,n,"|[]");if(r===-1)return r=a(t,n,"]"),r===-1?(e.push(new s(t.substr(n))),t.length):(e.push(new s(t.substr(n,r-n))),r);if(r>n)return e.push(new s(t.substr(n,r-n))),r;if(t[r]==="["){if(n=r+1,r=a(t,n,":?]"),r===-1)return n--,e.push(new s(t.substr(n))),t.length;var u=t.substr(n,r-n).trim();if(t[r]==="]")return e.push(new D(u)),r+1;var o=t[r],i=o==="?",f={},g=[];if(o!=="?"&&o!==":")return r=a(t,n,"]"),e.push(new s(t.substr(n-1,r))),t.length;for(;;){n=r+1;var M=[],j="";if(i)if(r=a(t,n,"="),r>n)j=t.substr(n,r-n),n=r+1;else return r=a(t,n,"]"),e.push(new s(t.substr(n,r))),t.length;for(;r=y(M,t,n),!(r===t.length||t[r]==="|"||t[r]==="]");)n===r&&r++,n=r;if(i?f[j]=k(M):g.push(k(M)),r===t.length||t[r]==="]")break}return i?e.push(new $(u,f)):e.push(new K(u,g)),r===t.length?t.length:r+1}return r}function k(e){return e.length===0?new s(""):e.length===1?e[0]:new C(e)}function a(e,t,n){for(var r=t,u=e.length;r<u;r++)for(var o=0;o<n.length;o++)if(n[o]===e[r])return r;return-1}function Q(){for(var e=[],t=v.length,n=0;n<t;n+=1){var r=v[n],u=p(r);e.push({pkg:r,hash:u&&u.messages[z]||"0"})}return e}function V(){(0,P.invoke)("pts/update",{info:Q()}).then(function(e){for(var t=Object.keys(e),n=t.length,r=0;r<n;r+=1){var u=t[r];R(u,e[u])}}),b=void 0,S()}function _(e){e&&(v.indexOf(e)===-1&&v.push(e),S())}function S(){!b&&O>0&&(b=window.setTimeout(V,O))}function T(e){return Promise.resolve().then(function(){if(!B(e))return(0,P.invoke)("pts/get",{pkg:e}).then(function(t){R(e,t)})}).then(function(){return p(e)})}function E(e){return _(e),p(e)}if(typeof window<"u"){var H;window.l10n={getPkg:E,load:T};var d=(H=window.inline_resources)==null?void 0:H.pts;if(d!==void 0){for(var w in d)d.hasOwnProperty(w)&&(R(w,d[w]),_(w));window.inline_resources.pts={}}}return L})(__jsRegistry.a, __jsRegistry.bx)||window);
__jsRegistry.gn = __globalRegistry["lNX1gtQ"] || (__globalRegistry["lNX1gtQ"] = (function(u,g){var l={};Object.defineProperty(l,"default",{enumerable:!0,get:function(){return p}});var n=[],i=!1,s=!1;function d(r,e){try{var a=new Function('return import("'+r+'")')();e&&a.then(e,function(c){return e(null,c)}),h("shim-import");return}catch(c){if(!f(r,e)&&(h("shim-shimport"),n.push({url:r,callback:e}),!i)){i=!0;var t=document.createElement("script");t.addEventListener("load",function(){for(i=!1;n.length;){var o=n.shift();f(o.url,o.callback)}}),t.addEventListener("error",function(o){for(i=!1;n.length;){var m=n.shift();m.callback&&m.callback(null,o)}}),t.src=u.loader.aliasToUrl("shimport-js"),document.head.appendChild(t)}}}function f(r,e){if(typeof __shimport__<"u"){var a=__shimport__.load(new URL(r,document.baseURI));return e&&a.then(e,function(t){return e(null,t)}),!0}return!1}function h(r){s||(g.logging.logger.success("messagesLayer",r),s=!0)}u.loadModule||u.storeFields({loadModule:d});var p=d;return l})(__jsRegistry.c, __jsRegistry.dd)||window);
__jsRegistry.go = __globalRegistry["l00miNg"] || (__globalRegistry["l00miNg"] = (function(n,a,c,m,v){var r={},s={},t={},i={};a.create({name:"embed-app",update:function(o){r=o.scripts,s=o.styles,t=o.pkgs},discard:function(){r={},s={},t={}}});function f(e){return n.embedApp.pts[e]?Promise.resolve(n.embedApp.pts[e]):m.load(e).then(function(o){return n.embedApp.pts[e]=o,o})}function d(e){return i[e]||(i[e]=new Promise(function(o,l){r[e]?n.loadModule(r[e],function(h,u){u?l(u):o(h)}):l("No app with name: "+e)}).catch(function(o){window.OK.errorReporter.sendErrorWithInfo(o,"Error while loading module: "+e)})),i[e]}function j(e){return Promise.all([d(e),c.loadCss(s[e]),f(t[e])]).then(function(o){return o[0]})}return{loadApp:j,loadModule:d}})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.q, __jsRegistry.gm, __jsRegistry.gn)||window);
__jsRegistry.gp = __globalRegistry["sSnF8VA"] || (__globalRegistry["sSnF8VA"] = (function(f,o,g,m,p,h,i){var c,s=[];f.embedApp={logger:m.logging.logger,history:{navigate:function(e){g.change(e)},getState:function(){var e=window.location;return e.pathname+e.search},pushState:function(e){o.accountState({url:e},"pushState")},replaceState:function(e){o.accountState({url:e},"replaceState")},onHistoryChange:function(e){s.push(e)},back:function(){o.back()}},pts:{}};function u(t){for(var e=0,n=s.length;e<n;e++)s[e](t)}function j(t,e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=function(a){e[a.type]&&e[a.type](a.detail)},t.addEventListener(r,n[r]));return function(){for(var a in n)n.hasOwnProperty(a)&&t.removeEventListener(a,n[a])}}function d(t){var e=document.getElementById("content"),n=e.querySelector(".js-loader");n&&(t?i.addClass(n,"hidden"):i.removeClass(n,"hidden"))}function v(t,e,n){o.statePopping.attach(u),d(!1),e.mount(document.getElementById("content"),t,n).then(function(r){var a=j(r,e.events);c=function(){s=[],o.statePopping.detach(u),e.unmount(t,r),a(),d(!0)}})}return{create:function(e,n){p.create({name:n.serviceName||e+"-state",update:function(a){h.loadApp(e).then(function(l){v(l,n,a)})},discard:function(){c&&c()}})}}})(__jsRegistry.c, __jsRegistry.ft, __jsRegistry.ew, __jsRegistry.dd, __jsRegistry.x, __jsRegistry.go, __jsRegistry.s)||window);
__jsRegistry.gq = __globalRegistry["m0tTkbQ"] || (__globalRegistry["m0tTkbQ"] = (function(e){return{getReshareLink:function(s,n,i,o){var u=window.location.origin+"?",r={};r["st.cmd"]="userReshareMusic",r["st.musicId"]=n,r["st.musicType"]=i,r["st.returnUrl"]=o,r["st.reshareType"]=s,r["st.rtid"]="-.1";function t(c){var m=window.location.origin+"?",a={};return a["st.cmd"]=c,a["st.turl"]="/?"+e.formatParams(r),e.formatParams(a,m)}switch(s){case"GROUP":return t("selectGroupToReshare");case"MESSAGE":return t("reshareReceiver");default:return e.formatParams(r,u)}}}})(__jsRegistry.m)||window);
__jsRegistry.gr = __globalRegistry["anYEAGQ"] || (__globalRegistry["anYEAGQ"] = (function(p,G,T,k,a,_,g,b,t,i){var o="music",M="ply",S="pse",w="music-attach",h,d,l=i.embedApp.history.navigate,f=i.embedApp.history.getState;function I(){return h}function P(e){a.loadModule(o).then(function(n){n.play(e.trackId,{ctx:e.ctx}).catch(s("module.play"))})}function v(){a.loadModule(o).then(function(e){e.togglePlay().catch(s("module.togglePlay"))})}function q(){a.loadModule(o).then(function(e){e.pause()})}function R(e){return a.loadModule(o).then(function(n){return n.addTrack(e).catch(s("module.addTrack"))})}function F(e){return a.loadModule(o).then(function(n){return n.removeTrack(e).catch(s("module.removeTrack"))})}function y(e){return document.querySelectorAll('.js-music-track[data-track-id="'+e+'"]')}function j(e,n){if(!t.hasClass(e,"mus")){var r=e.querySelector(".mply");if(!r)return;e=b.parentBySelector(r,".mus")}t.switchClass(e,n,S),t.switchClass(e,!n,M),t.hasClass(e,w)&&t.switchClass(e,n,"__playing")}function H(){var e=document.querySelector(".toolbar_widgets");return e?e.querySelector(".music-widget"):null}function L(){var e=document.querySelector("music-web");e&&e.parentNode.removeChild(e)}function C(){}C.prototype={togglePlay:{tap:v}};function N(e){i.musicConfiguration||(i.musicConfiguration={confJson:e.confJson,conf:e.conf})}function s(e){return function(n){window.OK.errorReporter.sendErrorWithInfo(n,"Music App Error - "+e)}}return k.create({name:"music",init:function(n){h=!0,N(n),T.register("musicHeadRedesigned",C),a.loadModule(o).then(function(r){var u=H();r.onTrackChanged(function(c){if(d&&p(y(d),function(m){j(m,!1)}),d=null,!c.playing)u&&t.removeClass(u,"__playing");else{var A=document.querySelector(".toolbar");A&&t.addClass(A,"__music-widget-showed"),u&&(t.removeClass(u,"__unselected"),t.addClass(u,"__playing")),p(y(c.trackId),function(m){j(m,!0)}),d=c.trackId}})})}}),_.create(o,{serviceName:"music-state",events:{"share-track":function(e){l(g.getReshareLink(e.target,e.id,"TRACK",f()))},"share-playlist":function(e){l(g.getReshareLink(e.target,e.id,"ALBUM",f()))},"open-group-page":function(e){l("/dk?st.cmd=altGroupMain&st.groupId="+e.groupId)},"open-user-page":function(e){l("/dk?st.cmd=friendMain&st.friendId="+e.friendId)}},mount:function(n,r,u){return L(),r.mountApp(n,u).then(function(c){return c.open(f()),c}).catch(s("module.mountApp"))},unmount:function(n,r){n.unmountApp(r).catch(s("module.unmountApp"))}}),{isEnabled:I,play:P,togglePlay:v,pause:q,addTrack:R,removeTrack:F}})(__jsRegistry.k, __jsRegistry.u, __jsRegistry.am, __jsRegistry.x, __jsRegistry.go, __jsRegistry.gp, __jsRegistry.gq, __jsRegistry.t, __jsRegistry.s, __jsRegistry.c)||window);
__jsRegistry.gs = __globalRegistry["mKbksKw"] || (__globalRegistry["mKbksKw"] = (function(k,u,d,U,S,te,H,Y,m,G,_,V,f){function J(a,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](a):a instanceof e}var z="ply",F="pse",w="data-uid",K="["+w+"]",b="data-playlist",W="["+b+"]",X="topicTrack",C="music-attach",Z="js-music-track",B,E,h,o,l,v,x;function L(){return o||(o=document.createElement("audio"),o.style.display="none",document.body.appendChild(o),o.okIsApproved=!0,o.src=window.pageCtx.staticResourceUrl+"mres/img/music/empty.mp3",o.play(),setTimeout(function(){o.pause()},4)),o}function M(a){l?a():(L(),k.loader.use("topic-music-js",function(){if(!h){E&&k.wmf(E);var e=k.initTopicMusic(o);l=e.audioPlayer,h=e.api,v=e.interop,a()}}))}function R(a){V.updateMediaMetadata(a.track,{resume:a.playTrack.bind(a),pause:a.pauseTrack.bind(a),seekForward:null,seekBackward:null,previous:l.playNext.bind(a,!1),next:l.playNext.bind(a,!0)})}var N;function q(a,e){var t=this;t.trackId=a.id,t.dom=e}q.prototype={play:{tap:function(){var e=this;N&&y(e.dom,!1),N=e;var t=e.dom,n=d.parentBySelector(t,K),s="";n&&(s=n.getAttribute(w)||""),n=d.parentBySelector(t,W);var i;n&&(i=n.getAttribute(b));var r=e.trackId;r&&(y(e.dom,!0),O(e.dom),Y.change(ee(B,r,i,s),!0))}},pause:{tap:function(e){y(this.dom,!1),m.allowDefault(e)}}};function P(a,e){var t=this,n=a.trackFullInfo;e.okData={track:n},t.view={domElement:e},t.track=n,t.trackElement=e,t.trackId=a.id,t.locale=a.locale,t.ctx=a.ctx||"mediastatus",t.isTopicTrack=!0,t.inited=!1}function D(){return u.hasClass(__js_temp_htmlTag,"messaging")}function $(a,e){var t=[],n=document.querySelectorAll("."+Z);return S(n,function(s){if(s===a){t.push(e);return}var i=s.getAttribute("data-model");if(i){var r=JSON.parse(i),c=r.trackFullInfo;c&&(c.cachedTopicTrackDom=s,t.push(c))}}),S(t,function(s,i){s.queueCache=t,s.queueIndex=i}),t}P.prototype={setIsSelected:function(e){e?v.trackSelected.trigger({track:this}):(y(this.trackElement,!1),j(self,!1))},onPlayheadMove:function(){},onBufferProgress:function(){},isFromStatus:!0,play:m.handle("tap",function(){f.isEnabled()?f.play(this):this.playTrack()}),pause:m.handle("tap",function(){f.isEnabled()?f.pause():this.pauseTrack()}),playTrack:function(){var e=this;M(function(){var t=l.playingTrack();if(t&&t.trackElement&&A(t.trackElement,!1),l.select(e),j(e,!0),!e.sourceUrl||!e.track){if(e.trackId){var n=function(i){e.sourceUrl=n.q(i.play),l.load(),l.play();var r=l.playingTrack(),c=r.track,p=c?c.queueCache:null,g=i.track;if(e.track=g,R(e),!p||p.length<1){var I=$(e.trackElement,g);I.includes(g)||(I.push(g),g.queueCache=I,g.queueIndex=I.length),r.track=g,r.trackElement.okData.track=g}};n.onError=G.create(l,x),h.getAudioSource(e.trackId,e.ctx,e.locale,n)}}else l.play(),R(e);D()&&_.musicMessagePlaying.trigger({}),A(e.trackElement,!0)}),y(e.trackElement,!0),O(e.trackElement)},pauseTrack:function(){l&&(l.pause(),y(this.trackElement,!1),j(this,!1),A(this.trackElement,!1))},togglePlay:function(){f.isEnabled()?f.togglePlay():this[l.isPlaying()?"pause":"play"]()},isPlayable:function(){return!0},getPrevious:function(){var e=this.track;if(e){var t=e.queueCache,n=e.queueIndex;if(t&&n!=null){n===0?e=t[t.length-1]:e=t[n-1];var s=findTopicTrackDom(e);return s?T(s):null}}},getNext:function(){var e=this.track;if(e){var t=e.queueCache,n=e.queueIndex;if(t&&n!=null){n===t.length-1?e=t[0]:e=t[n+1];var s=e.cachedTopicTrackDom;return s?T(s):null}}var i=this.trackElement,r,c;if(u.hasClass(i,C)){if(r=d.parentBySelector(i,".discus_list_w"),r)for(r=r.nextSibling;r;){var p=r.getElementsByClassName(C);if(p&&p.length>0)return T(p[0]);r=r.nextSibling}}else r=d.parentBySelector(i,"li"),c=r?r.nextSibling:null;return c?T(c):null},add:{tap:function(e){var t=this;if(!t.isAdding)if(!f.isEnabled())Q(t,!t.isAdded,e.target);else{var n=!t.isAdded;t.isAdding=!0,(n?f.addTrack(t.trackId):f.removeTrack(t.trackId)).then(function(){t.isAdding=!1,t.isAdded=n;var s=d.findParent(e.target,function(i){return u.hasClass(i,"js-add-track")});u.switchClass(s,n,"__done")})}}}},_.audioMessagePlaying.attach(function(){var a=document.querySelector(".music-attach.__playing");a&&m.getOrMakeBehavior(a).pause()});function Q(a,e,t){a.isAdding=!0,M(function(){var n=v.MyPlaylistId;h[e?"addTrack":"removeTrack"](n,a.trackId,function(){a.isAdded=e,a.isAdding=!1;var s=t.closest(".js-add-track");u.switchClass(s,e,"__done")})})}function j(a,e){v.trackIsPlayingChanged.trigger({track:a,isPlaying:e})}function T(a){var e=m.getOrMakeBehavior(a);return J(e,P)?e:null}function O(a){var e;D()?e="messaging":d.parentBySelector(a,".gift-price_music")!==null?e="playGift":d.parentBySelector(a,".topic-music-playlist")!==null?e="playPlaylist":e="playStatus",logClientEvent("music",[e])}function y(a,e){if(!u.hasClass(a,"mus")){var t=a.getElementsByClassName("mply")[0];if(!t)return;a=d.parentBySelector(t,".mus")}u.switchClass(a,e,F),u.switchClass(a,!e,z)}function ee(a,e,t,n){var s=[e,t||e,n],i=s.length,r=0;return a.replace(/%s/g,function(c){var p=r<i?s[r]:"";return r++,p})}function A(a,e){u.hasClass(a,C)&&u.switchClass(a,e,"__playing")}function ae(){l&&l.pause()}return k.initMusicStatus=H.create({init:function(){m.register(X,P),m.register("appMusicTrack",q)},update:function(e){B=e.playUrl,e.trackListEnabled,E=e.wmf,x=e.wmfErrorPhrases,S(document.querySelectorAll(".gift-price"),function(t){U(t,"click",L,!0)})}}),{stopAudioPlayer:ae}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.o, __jsRegistry.k, __jsRegistry.dz, __jsRegistry.x, __jsRegistry.ew, __jsRegistry.am, __jsRegistry.gk, __jsRegistry.fv, __jsRegistry.gl, __jsRegistry.gr)||window);
__jsRegistry.gt = __globalRegistry["afbV1jw"] || (__globalRegistry["afbV1jw"] = (function(e){return{items:{added:e.create()}}})(__jsRegistry.u)||window);
__jsRegistry.gu = __globalRegistry["mDNWJg"] || (__globalRegistry["mDNWJg"] = (function(m,u,f,r){var s="placemap_osm",i=!1,o=!1;function g(t){var c=t.getAttribute("data-zoom"),l=t.getAttribute("data-lat"),d=t.getAttribute("data-lng"),p=t.getAttribute("data-mapSrc"),a=L.map(t,{dragging:!1,zoomControl:!1,scrollWheelZoom:!1}).setView([l,d],c);a.attributionControl.setPrefix('<a target="_blank" href="http://leafletjs.com">Leaflet</a>'),L.tileLayer(p,{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(a);var h=L.icon({iconUrl:"/mres/img/places/pin.png",iconSize:[32,32],iconAnchor:[16,32]}),j=L.marker([l,d]);j.setIcon(h).setOpacity(.8).addTo(a)}function n(){u.default("l-map",document.getElementsByClassName(s),g)}function e(){!o&&document.getElementsByClassName(s).length!==0&&(o=!0,OK.loader.use("leaflet-js",function(){OK.loader.use("leaflet-css",function(){i=!0,n()})})),i&&n()}m.initMap=f.create({update:function(c){e(),r.items.added.attach(e)},discard:function(){r.items.added.detach(e)}})})(__jsRegistry.c, __jsRegistry.er, __jsRegistry.x, __jsRegistry.gt)||window);
__jsRegistry.gv = __globalRegistry["ayoYgwQ"] || (__globalRegistry["ayoYgwQ"] = (function(){function u(n){for(var e=n.length,o,t;e;)t=Math.floor(Math.random()*e),e-=1,o=n[e],n[e]=n[t],n[t]=o;return n}return u})()||window);
__jsRegistry.gw = __globalRegistry["lnkszZQ"] || (__globalRegistry["lnkszZQ"] = (function(){function i(n,t){n.okLastClicked=t||Date.now()}return{updateLastClick:i,submitAllowed:function(t,e){return e<=0||Date.now()-(t.okLastClicked||0)>=e}}})()||window);
__jsRegistry.gx = __globalRegistry["lhuYqaA"] || (__globalRegistry["lhuYqaA"] = (function(k,E,t,o,L,w,h,p,b,v){var c=".widget",f=".widget-list_i",m="__animated",j="__ajax-updated",y=["red","blue","yellow"],_;function A(l){setTimeout(function(){var s=l[0].parentNode;s&&(p(l,function(u){s.removeChild(u)}),s.getElementsByClassName("widget_balloon").length||t.removeClass(s,m))},2500)}return k.listenToLikeClicks=h.create({init:function(s){var u=s.delay;_=w.onLink({selector:".widget_like_old",indicatorSelector:c,loaderTimeout:250,prepare:function(a){var r=a.target,e=o.parentBySelector(r,f),i=o.parentBySelector(r,c);return!e||!v.submitAllowed(e,u)?{cancelled:!0}:{block:i,wrapper:e}},success:function(a){var r=a.response,e=a.block,i=a.wrapper,d,n,C=[];if(r&&r.length>0){e.insertAdjacentHTML("beforeBegin",r),e.parentNode.removeChild(e),a.block=e=i.querySelector(c),a.wrapper=i=o.parentBySelector(e,f);var S;(S=t.hasClass(e,j))&&setTimeout(function(){t.removeClass(e,j)},350),e&&t.hasClass(e,m)&&S&&t.hasClass(e,"__active")&&(d=document.createDocumentFragment(),p(b(y),function(T,D){n=document.createElement("div"),n.className="widget_balloon __"+D+" __"+T,d.appendChild(n),C.push(n)}),A(C),i.insertBefore(d,e),t.addClass(i,m))}},complete:function(a){var r;(r=a.wrapper)&&v.updateLastClick(r)}})}}),{click:function(s){_.goSpecific(s)}}})(__jsRegistry.c, __jsRegistry.ea, __jsRegistry.s, __jsRegistry.t, __jsRegistry.bw, __jsRegistry.fd, __jsRegistry.x, __jsRegistry.k, __jsRegistry.gv, __jsRegistry.gw)||window);
__jsRegistry.gy = __globalRegistry["s0IDiew"] || (__globalRegistry["s0IDiew"] = (function(n,d,m,f,l){var r="&st.phlst=",g="/apphook/userPhoto?",i="&spids=",o="#",a="href";return n.scrollCollagePhotos=l.create({init:function(){m.register(function(j){var t=j.target;if(f.hasClass(t,"collage-item")||f.hasClass(t,"feed-collage-item")){var c=d.parentBySelector(t,".collage, #photo-collage-feed");if(c){var s=c.getAttribute("data-scroll-ids");if(s){var e=t.getAttribute(a);e.indexOf("?")!==-1&&(e.indexOf(g)!==-1?e.indexOf(i)===-1&&(e=e+i+s,t.setAttribute(a,e)):e.indexOf(i)===-1&&(e.indexOf(o)!==-1?e=e.replace(o,r+encodeURIComponent(s)+o):e=e+r+encodeURIComponent(s),t.setAttribute(a,e)))}}}})}}),n.scrollCollagePhotos})(__jsRegistry.c, __jsRegistry.t, __jsRegistry.ea, __jsRegistry.s, __jsRegistry.x)||window);
__jsRegistry.gz = __globalRegistry["eOT0UXg"] || (__globalRegistry["eOT0UXg"] = (function(f,a){function o(e,t,n){f(n,function(i,s){t[e](s,i,!1)})}function l(e,t,n,i,s){e.addEventListener(t,function(d){var u=d.target,r=a.parentBySelector(u,n);r&&a.isChildOf(r,e)&&i.call(r,d)},s||!1)}return{listen:o.bind(0,"addEventListener"),stopListening:o.bind(0,"removeEventListener"),delegate:l}})(__jsRegistry.l, __jsRegistry.t)||window);
__jsRegistry.ha = __globalRegistry["soIbhEA"] || (__globalRegistry["soIbhEA"] = (function(e){return{processed:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.hb = __globalRegistry["sJZDS4Q"] || (__globalRegistry["sJZDS4Q"] = (function(i,u,d,a,m,h,f,S,b,w){var o=[],r,p="__init",_=8,y="",g=y;function B(){return r||(r=i.hiddenElementSelectors||[],r.push("#footer")),r}function H(){m(B(),function(t){var e=document.querySelector(t);e&&o.indexOf(e)===-1&&(e.style.display="none",o.push(e))})}function x(){m(o,function(t){t.style.display="block"}),o.length=0}var j=!1;function n(){j||(j=!0,f.onChanged(n),S.resize.attach(n));var t=document.querySelector(".empty-page,.full-screen");if(t&&u.hasClass(t,p)){H();var e=u.hasClass(__js_temp_htmlTag,"search-on"),c=e?"#search-results-container ":g,s=document.querySelector(c+".empty-page_cnt,"+c+".full-screen_cnt"),l;if(s&&!d.parentBySelector(s,".no-stub")){l=s.parentNode;var E=d.parentBySelector(s,".bbox");E&&(E.style.marginBottom=0);var N=document.querySelector(e?".a-search_i":"#content")||document.body,T=window.getComputedStyle(N),q=Math.ceil(parseFloat(T.marginTop)+parseFloat(T.marginBottom)),A=l.getBoundingClientRect();setTimeout(function(){l.style.height=window.innerHeight-A.top-q+"px",f.get("heightBySidebar")?s.style.emptyPagePadding=document.body.offsetHeight-S.calc().height+"px":s.style.emptyPagePadding="",u.removeClass(l,p),h.processed.trigger()},e||b.winphone?100:0)}}else x(),h.processed.trigger()}a.updated.attach(n),a.cancelled.attach(n),i.initStubs=n;function v(t,e){this.data=t,this.context=e}return v.prototype={proxy:{tap:function(e,c){var s=document.querySelector(c.getAttribute("data-querySelector"));s&&(s.click(),s.focus(),b.iOS&&setTimeout(function(){document.body.scrollTop=s.parentNode.getBoundingClientRect().top+document.body.scrollTop-_},0))}}},w.register("tapProxy",v),window.OK.recalculateStubs=function(){n()},{blockHasStub:function(e){return e.getElementsByClassName("empty-page").length!==0},setStubParentSelector:function(e){return g=e||y,this},recalculateStubs:function(){return n(),this}}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.ar, __jsRegistry.k, __jsRegistry.ha, __jsRegistry.ep, __jsRegistry.bd, __jsRegistry.ak, __jsRegistry.am)||window);
__jsRegistry.hc = __globalRegistry["lzaWiig"] || (__globalRegistry["lzaWiig"] = (function(e,i){return{init:function(){function n(r){e.set("toolbarSearch.enabled",r.width>=480)}i.manageSyncChanged(!0,n)}}})(__jsRegistry.en, __jsRegistry.bd)||window);
__jsRegistry.hd = __globalRegistry["tvGodNw"] || (__globalRegistry["tvGodNw"] = (function(e){return{open:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.he = __globalRegistry["aMJmAGg"] || (__globalRegistry["aMJmAGg"] = (function(e){var r={};function o(p,t){for(var n in t)Object.defineProperty(p,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,n).get})}o(r,{get close(){return u},get open(){return c}});var c=(0,e.create)(),u=(0,e.create)();return r})(__jsRegistry.u)||window);
__jsRegistry.hf = __globalRegistry["mTVlbdg"] || (__globalRegistry["mTVlbdg"] = (function(e){return e.create()})(__jsRegistry.u)||window);
__jsRegistry.hg = __globalRegistry["lghbp4Q"] || (__globalRegistry["lghbp4Q"] = (function(me,Je,d,A,F,v,N,ve,pe,b,ye,z,j,Se,k,be,q,C,Ce,Le,Ee,Ae,je,ke,W,Re,H,qe,Te,G,we,Ie,Fe,X){var He="__loading",Oe="active",Be="results",K="search-on",T="search_mod",P="js-search",V="js-search_cancel",J="__OK_",Y="__",y=__js_temp_htmlTag,Z="ontouchstart"in y?"touchstart":"mousedown",$=[],Ne=[];function L(){return d.hasClass(y,"messaging")}function U(s,e){var t=this,a,r,o;t._options=e||{},t._saveFocus=!1,t._searchInputActive=!1,t._searchTimeout=-1,t._sessionData=null,t._resultsRequestTask=null,t._lastFocusedSearchInput=null,t._outsideSearchInput=null,t._outsideCancelButton=null,t._focusedSearchInput=null,t._lastFocusedInput=null,t._searchLayer=s,a=s.getElementsByClassName("search_input"),a.length&&(t._searchLayerSearchInput=a[0],t._searchLayerSearchInputWrapper=A.parentBySelector(t._searchLayerSearchInput,".input-text"),r=s.getElementsByClassName(V),r.length&&(t._searchLayerCancelButton=r[0],t._searchLayerResults=s.querySelector(".a-search_results"),t._searchLayerContentWrapper=s.querySelector(".a-search_i"),t._cancelled=!1,t._resultsHeight=0,t._model=o=Se.create({isResult:!1,isActive:!1,inLooking:!1,query:"",sessionData:null,isOutsideInputActive:!1}),o.onChanged("isResult",function(u){d.switchClass(s,u,Be)},t),o.onChanged("isActive",function(u){var l=this,c=l._searchLayer;c.setAttribute("aria-hidden",!u),d.switchClass(c,u,Oe),d.switchClass(y,u,K),l._searchLayerSearchInputWrapper&&d.switchClass(l._searchLayerSearchInputWrapper,u,"__active")},t),o.onChanged("inLooking",function(u){var l=this;d.switchClass(s,u,He),l._searchLayerResults.setAttribute("aria-busy",u),l._searchLayerSearchInputWrapper&&d.switchClass(l._searchLayerSearchInputWrapper,u,"__in-progress")},t),o.onChanged("isOutsideInputActive",function(u){var l=this;d.switchClass(l._searchLayerContentWrapper,u,"__outside-search-field-active")},t),o.onChanged("sessionData",function(u,l){var c=this,h,g,n,i;l&&(c._outsideSearchInput=null,c._outsideCancelButton=null,c._focusedSearchInput=null,h=l.haveOutsideInput,g=l.input,n=l.searchMeta.searchScope,n&&d.removeClass(y,n+"-search-scope"),i=l.searchMeta.from,i&&d.removeClass(y,"search-from-"+i),h&&g&&ue(c,g),oe(c,l.cancel),l.onend()),u&&(n=u.searchMeta.searchScope,n&&d.addClass(y,n+"-search-scope"),i=u.searchMeta.from,i&&d.addClass(y,"search-from-"+i),h=u.haveOutsideInput,g=u.input?u.input:null,c._outsideSearchInput=u.input,c._outsideCancelButton=u.cancel,c._endpointUrl=u.form.getAttribute("data-endpoint"),c._defaultEndpointUrl=c._endpointUrl,c._endpointUrl&&b(s.getElementsByClassName(T),function(f){f.name&&d.switchClass(s,c._endpointUrl.indexOf(J+f.name+Y)!==-1,"__has_mod_"+f.name)}),h&&g&&(re(c,g),c._focusedSearchInput=g,c._model.set("isOutsideInputActive",!0)),ie(c,u.cancel))},t),we.open.attach(function(u){var l=this;l._model.get("isActive")&&q.request(function(c,h){c._calculateSearchViewHeight(h)},l,u)},t),Ie.close.attach(function(){var u=this;u._model.get("isActive")&&u._calculateSearchViewHeight()},t)))}function Pe(s,e){var t=e.currentTarget;if(!t||se(s,t,"_searchLayerCancelButton")||se(s,t,"_outsideCancelButton"))e.preventDefault(),s.end(!0);else{var a,r;if(r=A.findParent(e.target,function(u){if(a=u.getAttribute("data-target"),a!==null)return!0}),a){var o=r.getAttribute("data-endpoint");o&&(e.preventDefault(),s._endpointUrl=o,s._submitRequest())}}}function Ve(s,e){e.keyCode===27?s.end(!0):e.keyCode===13&&!L()&&s._notifyFormSubmission()}function Me(s,e){var t=d.hasClass(e.target,T);(e.type!=="change"||t)&&(t||s._model.set("query",e.target.value),F.android&&F.androidDevice.isStockVersion&&M(),s._submitRequest())}function xe(s,e){s._searchInputActive=!0,s._focusedSearchInput=e.target}function Qe(s,e){d.preventDefault(e),L()||s._notifyFormSubmission()}function De(s,e){e.target!==s._focusedSearchInput&&(s._searchInputActive=!1),F.android&&e.type=="blur"&&s._searchInputActive&&s._focusedSearchInput.focus()}U.prototype={handleEvent:function(e){var t=this;switch(e.type){case"click":Pe(t,e);break;case"keyup":Ve(t,e);break;case"input":case"change":Me(t,e);break;case"focus":xe(t,e);break;case"blur":case"touchstart":case"mousedown":De(t,e);break;case"submit":Qe(t,e);break}},start:function(e){var t=this,a=t._model;if(!a.get("isActive")){var r=t._searchLayerSearchInput;a.set("sessionData",e),t._saveFocus=!1,window.addEventListener("keyup",t,!1),ze(t,t._searchLayerResults),re(t,r),ie(t,t._searchLayerCancelButton),t._focusedSearchInput===null&&(t._focusedSearchInput=r);var o=t._model.get("sessionData").searchMeta.toggleClass;return o&&d.removeClass(y,o),a.onChanged("query",O,r),a.onChanged("query",ne,t),a.set("query",""),de(),t._scrollPositionRecord=j.recordScroll(),t._returnScrollPosition=Ge.bind(t),j.setOverflow(),M(),a.set("isActive",!0),L()||setTimeout(function(){t._focusedSearchInput&&t._focusedSearchInput.focus()},qe.keyboard.closeTimeout),t._focusedSearchInput.focus(),t._setSearchInputCursorToEnd(t._focusedSearchInput),a.synced("inLooking",ce,t),k.onChanged("heightBySidebar",le,t),v.init.trigger(a.get("sessionData").searchMeta),q.request(function(){j.resetOverflow()}),setTimeout(function(){M(-500)},400),j.resize.attach(ee,t),t}},end:function(e,t){var a=this,r=a._model;if(r.get("isActive")){var o=a._searchLayerSearchInput,u=a._searchLayerCancelButton,l=a._searchLayerResults,c=r.get("sessionData").searchMeta;r.offChanged("query",ne,a),r.set("query",""),window.removeEventListener("keyup",a,!1),We(a,l),ue(a,o),oe(a,u),r.offChanged("query",O,o),x(a._focusedSearchInput)&&a._focusedSearchInput.blur(),a._cancelled=e||!1,r.set("sessionData",null),r.set("isOutsideInputActive",!1),d.clear(a._searchLayerResults),de(),G.height.revert(),r.set("isActive",!1),r.set("isResult",!1);var h=c.toggleClass;return h&&d.addClass(y,h),r.offChanged("inLooking",ce,a),k.offChanged("heightBySidebar",le,a),a._scrollPositionRecord&&q.request(function(){q.request(a._returnScrollPosition)}),t!==!1&&fe(),v.cancelled.trigger(c),j.resize.detach(ee,a),a}},changeSearchInitial:function(e){var t=this,a=t._model;return a.set("sessionData",Q(t,e)),e.value=a.get("query"),e.focus(),t._calculateSearchViewHeight(),t},query:function(s){var e=this,t=e._model;return t.get("isActive")&&(t.set("query",s),e._submitRequest()),e},_setSearchInputCursorToEnd:function(e){var t=e.value;return t&&t.length&&(e.selectionStart=e.selectionEnd=t.length),this},_notifyFormSubmission:function(){var e=this,t=e._model;if(t.get("sessionData").onsubmit){var a=t.get("query"),r=e._createQueryUrl(e._searchLayer,a);t.get("sessionData").onsubmit(a,r)}return e},_createQueryUrl:function(e,t){var a=this,r=a._endpointUrl;if(!r)return null;var o=a._serializeForm(e);return ve(o,function(u,l){r=r.replace(J+l+Y,encodeURIComponent(o[l]))}),r.replace("__OK_QUERY__",encodeURIComponent(t))},_serializeForm:function(e){return pe.serialize(e.getElementsByClassName(T))},_submitRequest:function(){var e=this,t=e._model,a=t.get("query").trim();return e._resultsRequestTask&&(e._resultsRequestTask.abort(),e._resultsRequestTask=null),e._searchTimeout!==-1&&window.clearTimeout(e._searchTimeout),!a||!a.length?(d.clear(e._searchLayerResults),e._endpointUrl=e._defaultEndpointUrl,t.get("inLooking")?t.set("inLooking",!1):e._calculateSearchViewHeight(null,"visible"),t.set("isResult",!1),v.updated.trigger(""),e):(t.set("inLooking",!0),e._searchTimeout=window.setTimeout(function(){if(t.get("isActive")){var r=be.request(e._createQueryUrl(e._searchLayer,a));r.__searchDebugQery=a,e._resultsRequestTask=r,r.header("Content-Type","application/x-www-form-urlencoded"),r.header("X-Live-Search","1");var o=t.get("sessionData").searchMeta;o.from&&r.header("X-Search-From",o.from),r.then(function(u){var l=u.getResponseHeader("X-Live-Query"),c;l&&(c=decodeURIComponent(l)),(!c||c===t.get("query").trim())&&(e._resultsRequestTask=null,e._searchLayerResults.innerHTML=this.response(),t.set("isResult",!0),e._calculateSearchViewHeight(),v.updated.trigger(c))}).anyway(function(){t.set("inLooking",!1)}).withToken().send()}e._searchTimeout=-1},e._options.searchThreshold||0),e)},_calculateSearchViewHeight:function(e,t){var a=this,r,o=0;if(r=te(a),e){var u=A.parentBySelector(e,".a-menu");if(u){var l=u.getElementsByClassName("a-menu_content_w")[0];if(l){var c=d.getTotalOffsetTop(l);b(l.children,function(h){c+=h.offsetHeight}),c>r&&(r=c)}}}return q.request(function(){t!=="visible"&&k.get("heightBySidebar")&&Le.get("inited")&&(o=Ce.sidebar.getOffsetHeight()),r<o&&(r=o),L()||(Ee.blockHasStub(a._searchLayerResults)&&Ae.processed.attachOnce(function(){var h=te(a);h<o&&(h=o),ae(a,h,t)}),ae(a,r,t))}),a}};function ee(){this._calculateSearchViewHeight(null,"visible")}function te(s){var e=s._searchLayerContentWrapper;return e.getBoundingClientRect().height}function ae(s,e,t){var a=document.getElementById("head");a&&(e+=a.offsetHeight),s._resultsHeight=e,G.height.override("search",e+"px",t||"hidden")}function se(s,e,t){return e===s[t]||e.parentNode===s[t]}function O(s){var e=this,t=e.value;t!==s&&(e.value=s)}function ne(s){var e=this,t=e._model.get("sessionData").searchMeta;if(v.queryChange.trigger({query:s,from:t.from,searchScope:t.searchScope,input:t.input}),R.isActive()){var a=R.getState();a.query=s,W.accountStateUpdate()}}function re(s,e){C.listen(e,{focus:s,input:s}),e.addEventListener("blur",s,!0),C.listen(e.form,{submit:s,change:s})}function ie(s,e){e&&e.addEventListener("click",s,!1)}function ue(s,e){C.stopListening(e,{input:s,focus:s}),e.removeEventListener("blur",s,!0),C.stopListening(e.form,{submit:s,change:s})}function oe(s,e){e&&e.removeEventListener("click",s,!1)}function ze(s,e){C.listen(e,{touchstart:s,mousedown:s,click:s})}function We(s,e){C.stopListening(e,{touchstart:s,mousedown:s,click:s})}function Ge(){j.resetScroll(this._scrollPositionRecord)}function ce(s){var e=this;s&&e._calculateSearchViewHeight()}function le(){var s=this;s._calculateSearchViewHeight()}function fe(){R.isActive()&&W.back()}function M(s){window.scrollTo(0,s||0)}function Xe(s){return s.getAttribute("data-search-relation")==="not-moved"}function Ke(s){s.preventDefault(),s.stopPropagation()}function de(s){var e=document.getElementById("boxPage"),t;e&&(t=e.style,t.visibility="",e.setAttribute("aria-hidden","false"),L()||(t.pointerEvents="",b($,function(a){a.removeEventListener("click",Ke,!1)})))}function he(){return document.getElementsByClassName("toolbar-search-input")[0]}function x(s){return document.activeElement===s}var w={handleEvent:function(e){this._handleEventAtTarget(e.target)},_handleEventAtTarget:function(e){var t=e.form;if(t!==null){var a=t.querySelector(".search_input");if(a){var r=a.value.trim();r&&r.length>0&&H.submitForm(t,a)}}}};function _e(s){d.switchClass(this,s,"__in-progress")}function Q(s,e){var t=Xe(e),a=e.getAttribute("data-from"),r=e.getAttribute("data-search-scope"),o=e.parentNode,u=e.form,l=u.getElementsByClassName(V)[0],c=e.value||"",h=A.parentBySelector(e,".input-text"),g=h!==null,n=t&&g,i;s._model.onChanged("query",O,e),n&&s._model.onChanged("inLooking",_e,h),g&&d.addClass(h,"__active"),t||(e.blur(),i=e.nextSibling,o.removeChild(e));function f(){t||(i!=null?o.insertBefore(e,i):o.appendChild(e))}return{form:u,haveOutsideInput:t,input:t?e:null,cancel:l,inputValueOnInitStart:c,searchMeta:{input:e,from:a,searchScope:r,toggleClass:L()&&(a==="sidebar"||a==="toolbar")?"messaging":null},onend:function(){f(),x(e)&&e.blur(),g&&d.removeClass(h,"__active"),s._model.offChanged("query",O,e),n&&s._model.offChanged("inLooking",_e,h),s._cancelled&&(e.value=c)},onsubmit:function(m,p){f(),e.value=m,u.action=p,H.submitForm(u,e)}}}H.addFuncHandler("goToGlobalSearch",{tap:function(e){var t=A.parentBySelector(e.target,".js-to-global-search");X.change(t.getAttribute("data-endpoint")),setTimeout(function(){var a=document.getElementById("GlobalSearchFormField");a&&(a.focus(),a.select())},250)}}),H.addFuncHandler("redirectToGlobalSearch",{tap:function(e){var t=e.target.getAttribute("data-endpoint");t&&(z.navigated.attachOnce(function(){var a=document.getElementById("GlobalSearchFormField");a&&(a.focus(),a.select())}),X.change(t))}});var D,I,ge,B,R=ke.create("search");me.initLiveSearch=je.create({init:function(e){var t=document.getElementById("live-search"),a;if(!t)return;a=new U(t,e),k.onChanged("workWithOutsideInputs",function(n){var i=this,f=i._model;f.get("isActive")&&(!n&&i._focusedSearchInput!==i._searchLayerSearchInput?(i._calculateSearchViewHeight(),f.set("isOutsideInputActive",!1),i._searchLayerSearchInput.focus()):n&&i._outsideSearchInput!==null&&(i._calculateSearchViewHeight(),f.set("isOutsideInputActive",!0),i._outsideSearchInput.focus()))},a),b(Ne,function(n){b(document.getElementsByClassName(n),function(i){$.push(i)})}),window.onpageshow=function(n){n.persisted&&(a.end(),fe())};function r(){a._model.get("isActive")&&a._focusedSearchInput!==null&&a._focusedSearchInput.focus()}v.returnToSearch.attach(r),Te.init(),k.onChanged("toolbarSearch.active",function(n){var i=this,f=i._model;n&&f.get("isActive")&&f.get("sessionData").searchMeta.searchScope==="global"&&i.changeSearchInitial(he())},a);function o(n){var i=!0,f,_,m,p;if(!d.hasClass(n,P))return!1;if(f=n.getAttribute("data-from"),_=n.getAttribute("data-search-scope"),m=he(),a._model.get("isActive"))if(f==="sidebar"||f==="toolbar"&&a._outsideSearchInput!==n)a.end(!0,!1),i=!1;else return!1;else if(k.get("toolbarSearch.active")&&m&&m!==n&&_==="global")return n=m,n.focus(),!1;if(D&&D!==n)return n.blur(),!1;if(p=n.value,a.start(Q(a,n)),i){var E=n.getAttribute("data-uid")||"searcInput"+Date.now();n.setAttribute("data-uid",E),R.go({query:p,inputUid:E})}return p&&p.length&&a.query(p),!0}function u(n,i){a&&(n===void 0||n)&&a.end(!0,i)}z.rendering.attach(function(n){u(!0,!1)}),R.deactivated.attach(function(n){u(!n.current.isAjaxDialog,!0)}),R.activated.attach(function(n){if(!a._model.get("isActive")){var i=n.state,f=i.query,_=document.querySelector(["[data-uid=",i.inputUid,"]"].join(""));_&&(a.start(Q(a,_)),a.query(f))}}),I={handleEvent:function(i){var f=i.target;switch(i.type){case Z:D=f;break;case"click":if(o(f))return i.preventDefault(),!1;break;case"keyup":var _=i.keyCode;_!==9&&_!==16&&_!==27&&o(f);break;case"input":o(f);break}}},ge=F.ie?"keyup":"input",B={click:I},B[Z]=I,B[ge]=I,document.activeElement&&o(document.activeElement),N.opening.attach(function(){var n=a._focusedSearchInput;a._model.get("isActive")&&x(n)&&(a._saveFocus=!0,n.blur())}),N.closed.attach(function(){var n=a._focusedSearchInput;a._model.get("isActive")&&a._saveFocus&&n!==null&&n.focus()}),N.open.attach(function(){L()&&a.end(!0)});var l="focusin";function c(n){var i=n.target,f=i.form;f&&(d.switchClass(f,n.type.toLowerCase()==l,"__input-focused"),d.hasClass(i,P)||(d.addClass(f,"__input-active"),v.layoutChanged.trigger()));function _(){var m=n.relatedTarget&&d.hasClass(n.relatedTarget,V);return m||!d.hasClass(y,K)}n.type=="blur"&&(_()||setTimeout(function(){v.updated.trigger()},500))}function h(n){var i=n.form,f,_=n.getAttribute("data-from"),m=n.getAttribute("data-search-scope"),p=m!==null,E;i&&(E=i.querySelector(".search_input_stub"),E&&(f=n.parentNode,v.init.attach(function(S){(S.from===_||p&&S.searchScope===m)&&d.addClass(f,"__show-stub")}),v.cancelled.attach(function(S){(S.from===_||p&&S.searchScope===m)&&d.removeClass(f,"__show-stub")}),v.queryChange.attach(function(S){(S.from===_||p&&S.searchScope===m)&&(E.value=S.query)}),E.addEventListener("click",function(){v.returnToSearch.trigger()},!1)))}function g(){var n;b(document.getElementsByClassName("search_input"),function(i){i.addEventListener(l,c,!1),n||(n="ondeactivate"in i?"deactivate":"blur"),i.addEventListener(n,c,!1),h(i)}),b(document.getElementsByClassName(T),function(i){A.parentBySelector(i,"#live-search")||i.addEventListener(i.type==="checkbox"?"click":"change",w)})}Re.domLoaded.then(g),Fe.attach(function(n){a._model.get("isActive")&&a._calculateSearchViewHeight()})},update:function(e){ye.default("search",document.getElementsByClassName(P),function(t){C.listen(t,B);var a=t.form;a&&!b(a.getElementsByClassName(T),function(r){var o;if(r.type==="checkbox"){if(o=r.getAttribute("data-init-val"),o==="on"!==r.checked)return w._handleEventAtTarget(r),!1;r.addEventListener("click",w,!1)}else if(r.type==="select-one"){if(o=r.getAttribute("data-init-val"),o!==r.options[r.selectedIndex].value)return w._handleEventAtTarget(r),!1;r.addEventListener("change",w,!1)}})||(!e||e.activateOnFocus||t.hasAttribute("data-work-on-focus"))&&t.addEventListener("focus",I,!1)})}})})(__jsRegistry.c, __jsRegistry.r, __jsRegistry.s, __jsRegistry.t, __jsRegistry.ak, __jsRegistry.ar, __jsRegistry.as, __jsRegistry.l, __jsRegistry.fa, __jsRegistry.k, __jsRegistry.er, __jsRegistry.w, __jsRegistry.bd, __jsRegistry.ab, __jsRegistry.en, __jsRegistry.bw, __jsRegistry.aq, __jsRegistry.gz, __jsRegistry.az, __jsRegistry.at, __jsRegistry.hb, __jsRegistry.ha, __jsRegistry.x, __jsRegistry.gg, __jsRegistry.ft, __jsRegistry.p, __jsRegistry.an, __jsRegistry.bc, __jsRegistry.hc, __jsRegistry.ax, __jsRegistry.hd, __jsRegistry.he, __jsRegistry.hf, __jsRegistry.ew)||window);
__jsRegistry.hh = __globalRegistry["hgLY79g"] || (__globalRegistry["hgLY79g"] = (function(l,c,y,m,S,j,d,B,f){var g={};function w(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}w(g,{get HintsBehavior(){return L},get HorizontalPositions(){return I},get VerticalPositions(){return C},get initHint(){return A}});var k=".__close-hint_w",D=".__close-hint",v=".hint_body",_="closed",h="data-hint",p="__outside",C=(function(e){return e.TOP="__t",e.BOTTOM="__b",e})(C||{}),I=(function(e){return e.LEFT="__l",e.RIGHT="__r",e})(I||{});function O(){var e=y(document.cookie.split("; "),function(t){var r=t.indexOf("=");if(r!==-1){var n=t.substring(0,r);if(n=="hints")return t.substring(r+1)}});return typeof e=="string"?e.split(","):[]}function R(e,t){var r=O();if(r.indexOf(e)===-1){r.push(e);var n=new Date;n.setDate(n.getDate()+t),document.cookie="hints="+r.join(",")+"; expires="+n.toUTCString()+"; path=/"}}function T(e){var t,r=l.localStorage.getItem("hints");r?t=JSON.parse(r):t={};var n=t[e];return n?n.closedCount=n.closedCount||0:t[e]={shownCount:0,closedCount:0,actionCount:0,hidden:!1},t}function u(e,t){var r=e.getAttribute(h);if(t&&t.storageType==="localstorage"&&B.isSupported){var n=t.currentUserId,a=r+"_"+n,o=T(a),i=o[a];++i.closedCount>=t.closeLimit&&(i.hidden=!0),l.localStorage.setItem("hints",JSON.stringify(o))}else R(r,N);c.remove(e),(0,f.log)("hint.close",[r])}function J(e){e.preventDefault();var t=S.parentBySelector(e.currentTarget,v);u(t)}function x(e){var t=S.parentBySelector(e.currentTarget,k),r=t.querySelector(v);r&&u(r)}var L=(function(){function e(r,n){var a=this;this.model=r,this.root=n,this.link={tap:function(o){d.allowDefault(o)}},this.close={tap:function(){u(a.root,a.model)}},this.closeByName={tap:function(o){var i=a.root.dataset.hintName,s=i&&document.getElementById(i);if(s){var E=s.dataset.model,H;if(E)try{H=JSON.parse(E)}catch(P){}u(s,H)}d.allowDefault(o)}}}var t=e.prototype;return t.updatePosition=function(n,a,o){var i=this.root.classList;i.remove("__t"),i.remove("__b"),i.remove("__l"),i.remove("__r"),i.remove(p),n&&i.add(n),a&&i.add(a),o&&i.add(p)},e})();d.register("hints",L);function A(e){var t=e.getAttribute(h);if(e.hasAttribute("data-model")&&e.getAttribute("data-hint")!=="react"){var r=JSON.parse(e.getAttribute("data-model")),n=r.currentUserId,a=t+"_"+n,o=T(a),i=o[a];i.hidden||(c.removeClass(e,_),(0,f.log)("hint.shown",[t]),++i.shownCount>=r.showLimit&&(i.hidden=!0),l.localStorage.setItem("hints",JSON.stringify(o)))}else if(t&&b.indexOf(t)===-1&&e.getAttribute("data-hint")!=="react"){if(c.removeClass(e,_),!e.getAttribute("data-view")){var s=e.querySelector(".base-button");s&&s.addEventListener("click",J,!1)}(0,f.log)("hint.shown",[t])}}var b,N;return j.create({name:"initHints",init:function(){b=O()},update:function(t){N=t.cookieAge,(0,m.default)("cls-hint",document.querySelectorAll(D),function(r){r.addEventListener("click",x,!1)}),(0,m.default)("hint",document.querySelectorAll(v+":not(.__manual)"),A)}}),g})(__jsRegistry.bs, __jsRegistry.s, __jsRegistry.k, __jsRegistry.er, __jsRegistry.t, __jsRegistry.x, __jsRegistry.am, __jsRegistry.ch, __jsRegistry.a)||window);
__jsRegistry.hi = __globalRegistry["oQaaGMg"] || (__globalRegistry["oQaaGMg"] = (function(){return{portrait:function(){return window.innerWidth<window.innerHeight},landscape:function(){return window.innerWidth>window.innerHeight}}})()||window);
__jsRegistry.hj = __globalRegistry["scwkdwg"] || (__globalRegistry["scwkdwg"] = (function(){var n="data-js-swipe-ignore",t="data-js-swipe-ignore-scroll";return{markAsSwipeIgnore:function(r){r.setAttribute(n,"")},isMarkedAsSwipeIgnore:function(r){return r.hasAttribute(n)},markAsIgnoreScroll:function(r){r.setAttribute(t,"")},isMarkedAsIgnoreScroll:function(r){return r.hasAttribute(t)}}})()||window);
__jsRegistry.hk = __globalRegistry["sL9YUsw"] || (__globalRegistry["sL9YUsw"] = (function(u,S,v,E,l,I,_){var h=12,d=14,g=5,A=30,p=u.iOS,P=p?u.iOSVersion<8?1.7:1.85:1.1,f=screen,M=f.width,T=f.height,m=v.isScrollable;function j(e){e.isSwiped=!1,e.onSwipeEnd&&e.onSwipeEnd(e.pointerStartX-e.pointerLastX,e.pointerStartX)}function N(e){return S.portrait()&&e>h&&M-e>h}function D(e){return S.landscape()&&e>d&&T-e>d}function O(e){return!p||N(e)||D(e)}function X(e,t,r){for(var i=!1;t!==e&&t!==document;){if(i=m(t,"x"),!l.isMarkedAsIgnoreScroll(t)&&i&&!(r<0&&t.scrollLeft===0))return!0;t=t.parentNode}return!1}function L(e,t){return!E.findParent(e,b,t)}function b(e){return e.okSwipeIgnore===void 0?e.okSwipeIgnore=l.isMarkedAsSwipeIgnore(e):e.okSwipeIgnore}function w(e,t,r,i,s){var o=this;o.node=e,o.range=s||g,o.isMoveAdded=!1,o.isDetect=!1,o.isSwiped=!1,o.isTouched=!1,o.isIgnoreMovePreventDefault=!1,o.pointerStartX=0,o.pointerLastX=0,o.pointerStartY=0,o.onSwipeMove=r||null,o.onSwipeStart=t||null,o.onSwipeEnd=i||null}return w.prototype={touchStart:function(t){var r=this,i,s=t.touches;r.isTouched=!1,r.isDetect=!1,s&&s.length===1&&(r.isTouched=!0,i=s[0],r.pointerStartX=i.clientX,r.pointerStartY=i.clientY)},touchMove:function(t){var r=_.firstTouchRaw(t),i,s,o,a,c,n=this;n.isTouched&&(a=n.pointerStartX,i=r.clientX,n.isDetect?s=i-n.pointerLastX:(s=a-i,o=Math.abs(s),c=Math.abs(n.pointerStartY-r.clientY),n.isSwiped=c<A&&L(t.target,n.node)&&o>=n.range&&o>=c*P&&!X(n.node,t.target,s)&&O(a),n.isSwiped&&(n.isClickBlock=!0,n.onSwipeStart&&n.onSwipeStart(s,a)),n.isDetect=!0),n.isSwiped&&(n.pointerLastX=i,n.onSwipeMove&&n.onSwipeMove(s,a)))},touchEnd:function(t){var r=this;r.isSwiped&&r.stop()},enable:function(t){var r=this,i=I.lowPriority;return t?(i.touchStart.attach(this.touchStart,this),i.touchMove.attach(this.touchMove,this),i.touchEnd.attach(this.touchEnd,this)):(i.touchStart.detach(this.touchStart,this),i.touchMove.detach(this.touchMove,this),i.touchEnd.detach(this.touchEnd,this)),r},stop:function(){var t=this;return t.isSwiped&&j(t),t},destroy:function(){}},{create:function(t,r,i,s,o){return new w(t,r,i,s,o)}}})(__jsRegistry.ak, __jsRegistry.hi, __jsRegistry.df, __jsRegistry.t, __jsRegistry.hj, __jsRegistry.an, __jsRegistry.aj)||window);
__jsRegistry.hl = __globalRegistry["sxqsnDQ"] || (__globalRegistry["sxqsnDQ"] = (function(O,E,b,r,i,o,d,m){function c(e){var t=window,a=t.document,j=a.body,p=15,u=10,s;d.markAsIgnoreScroll(e.sidebarContent);function w(n,f){var l=t.logClientEvent;l&&l(n,f)}s=r.create(j,null,null,function(n){m.VISUAL_VIEWPORT_API&&window.visualViewport.scale.toFixed(1)>1||(e.isOpen()&&n>=u?e.close():!e.isOpen()&&-n>=p&&(w("sidebar",["swipeOpen"]),e.open()))}),e.swipeInstance=s,o.synced("enabled",s.enable,s)}o.synced("inited",function(e){e&&i.options.isSwipeEnabled&&c(i.sidebar)})})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.hk, __jsRegistry.az, __jsRegistry.at, __jsRegistry.hj, __jsRegistry.af)||window);
__jsRegistry.hm = __globalRegistry["t8nt8Tw"] || (__globalRegistry["t8nt8Tw"] = (function(n,i,v,m,g,f,d,P,y){var _="__open-up",l=[],o=null,r=null;v.attach(function(s){var e=s.target;if(e){var t=i.parentBySelector(e,".a-menu.toggle");t&&i.isChildOf(o,t)&&f.close.trigger()}});function c(){o&&(o.checked=!0,o=null),r&&(n.removeClass(r,_),r=null)}function B(s,e){var t=i.parentBySelector(s,".a-menu");m.request(function(){var a=s.parentNode.getElementsByClassName("a-menu_content")[0],u=a.offsetHeight;u+a.getBoundingClientRect().top>e.getBoundingClientRect().top&&(n.addClass(t,_),r=t)})}function E(s){var e=s.target;if(!n.hasClass(e,"tgl-cbox"))if(n.hasClass(e,"a-menu_open")){var t=document.getElementById(e.getAttribute("for"));if(t!==o&&f.close.trigger(),g.open.trigger(e),t.checked){o=t;var a=document.getElementsByClassName("layout-bottom-panel")[0];a&&B(t,a)}}else(n.hasClass(e,"a-menu_close")||o&&!i.parentBySelector(e,".a-menu.js-noAutoClose"))&&setTimeout(h,10)}function h(){c()}g.open.attach(function(s){var e=i.findParent(s,function(u){return n.hasClass(u,"js-popup")});if(e&&!e.__okPositionConfirmed){var t=function(){var C=0,p=document.querySelector(".chat_w");p&&(C=p.getBoundingClientRect().left+16);var j=d.fitWidth(a,C);(e.__okPositionConfirmed.fitLeft=j.fitLeft)?n.removeClass(e,"__unfit-left"):n.addClass(e,"__unfit-left"),(e.__okPositionConfirmed.fitLeft=j.fitRight)?n.removeClass(e,"__unfit-right"):n.addClass(e,"__unfit-right"),n.removeClass(e,"__processing")};e.__okPositionConfirmed={},l.push(e),n.addClass(e,"__processing");var a=e.getElementsByClassName("a-menu_content")[0];!P.iOSVersion==="7.0"?m.run(t):setTimeout(t,0)}}),d.changed.attach(function(){c(),l.forEach(function(s){s.__okPositionConfirmed=void 0}),l=[]}),f.close.attach(c),y.tapPreview.attach(E)})(__jsRegistry.s, __jsRegistry.t, __jsRegistry.fw, __jsRegistry.aq, __jsRegistry.hd, __jsRegistry.he, __jsRegistry.bd, __jsRegistry.ak, __jsRegistry.am)||window);
__jsRegistry.hn = __globalRegistry["sv5u0ag"] || (__globalRegistry["sv5u0ag"] = (function(f,c){var s={};Object.defineProperty(s,"soundAlerts",{enumerable:!0,get:function(){return v}});function u(t,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n}function d(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}var g={newMessage:{fileName:h("newMessageSound15")}},p="snd.alerts",S=(function(){function t(){this.STORAGE_NAME="__sound-alerts__",this.playing={},this.canPlayType=m(new Audio),this.canPlayType===null&&f.log(p,["can't play audio"])}var n=t.prototype;return n.play=function(e){var a=this,r=g[e];if(!(this.canPlayType===null||!r)){var i=this.createAndGetAudioTag(e);if(!(!i.paused||this.getIsPlayingFromStorage(e))){this.setIsPlayingToStorage(e,!0),i.pause(),i.volume=1,i.src=r.fileName+"."+this.canPlayType;var l=i.play();if(u(l,Promise)){var y=function(){a.setIsPlayingToStorage(e,!1)};l.then(y,y)}}}},n.createAndGetAudioTag=function(e){var a=this.playing[e];return u(a,HTMLAudioElement)?a:this.playing[e]=new Audio},n.getIsPlayingFromStorage=function(e){var a=this.getStoredData();return a===null?!1:!!a[e]},n.setIsPlayingToStorage=function(e,a){if(window.sessionStorage){var r=this.getStoredData();r=r===null?{}:r,r[e]=a,window.sessionStorage.setItem(this.STORAGE_NAME,JSON.stringify(r))}},n.getStoredData=function(){if(!window.sessionStorage)return null;var e=window.sessionStorage.getItem(this.STORAGE_NAME);if(!e)return null;try{var a=JSON.parse(e);return(typeof a>"u"?"undefined":d(a))==="object"?a:null}catch(r){return null}},t})(),v=new S;function m(t){var n=t.canPlayType("audio/mp3"),o=t.canPlayType("audio/wav");return n==="probably"?"mp3":o==="probably"?"wav":n==="maybe"?"mp3":o==="maybe"?"wav":null}function h(t){return(0,c.getStaticResourceUrl)()+"mres/default/sound/"+t}return s})(__jsRegistry.a, __jsRegistry.bv)||window);
__jsRegistry.ho = __globalRegistry["tZ8pjXg"] || (__globalRegistry["tZ8pjXg"] = (function(l,c,i,r,m,p){var f=JSON.stringify({message:{type:"notification",subject:"payment-completed"},headers:{}});i.put("toolbar-counters",{pushParse:function(e){e.envelope.updateLink=e.domNode.getAttribute("update-link")},pushReceived:function(e){var n=e.envelope.updateLink;if(n){var u=e.envelope.targetId,s;if(u)s=c.parentBySelector(document.getElementById(u),".ntf");else{var a=document.querySelector(e.envelope.targetSelector);a&&(a.className.indexOf("reply")===-1?s=a.previousSibling:e.envelope.targetSelector=void 0)}s&&(s.href=n)}},pushProcessed:function(e){var n=e.envelope.targetId;if(n){var u=document.getElementById(n);u&&l.removeClass(u,"hidden")}else if(!e.envelope.content){var s=document.querySelector(e.envelope.targetSelector);s&&l.clear(s)}}}),i.put("new-msg-alert",{pushParse:function(e){e.envelope.soundAlert=e.domNode.getAttribute("sound-alert")},pushReceived:function(e){e.envelope.soundAlert&&p.soundAlerts.play(e.envelope.soundAlert)}});var o={config:void 0,node:void 0,autoCloseTimeoutId:void 0,manualCloseTimeoutId:void 0};i.put("toolbar-red-link",{pushParse:function(e){var n=e.domNode;clearTimeout(o.manualCloseTimeoutId),clearTimeout(o.autoCloseTimeoutId),o.node&&(document.body.removeChild(o.node),o.node=null),o.config={animationTime:parseInt(n.getAttribute("data-animationTime"))||300,shownTime:parseInt(n.getAttribute("data-shownTime"))||15e3}},pushReceived:function(e){e.envelope.content.indexOf("p-block")==-1&&(e.envelope.targetId=e.envelope.targetSelector=null)},pushProcessed:function(){var e=o.config.shownTime;o.node=document.getElementsByClassName("notification-top")[0],logClientEvent("red.link.push-promo.shown"),e>0&&(o.autoCloseTimeoutId=setTimeout(function(){d(null)},e))}}),i.put("toolbar-events",{pushProcessed:function(){var e=document.getElementById("ok-app-frame");if(e){var n=e.contentWindow;if(n&&n.postMessage){n.postMessage(f,"*");var u=document.getElementById("ok-app-frame-ctoolbar");if(u&&u.offsetHeight>0){var s=u.querySelector("iframe");s&&s.offsetHeight>0?s.setAttribute("data-result","notif"):n.postMessage("showPayment$ok$notif","*")}}}}}),r.addFuncHandler("close-topPush",{tap:function(e){clearTimeout(o.autoCloseTimeoutId),d(e)}}),r.addFuncHandler("close-log-topPush",{tap:function(){logClientEvent("red.link.push-promo.close"),clearTimeout(o.autoCloseTimeoutId),d(null)}});function d(t){t&&m.allowDefault(t),l.addClass(o.node,"__closed"),o.config&&(o.manualCloseTimeoutId=setTimeout(function(){o.node&&(document.body.removeChild(o.node),o.node=null)},o.config.animationTime))}})(__jsRegistry.s, __jsRegistry.t, __jsRegistry.cs, __jsRegistry.an, __jsRegistry.am, __jsRegistry.hn)||window);
__jsRegistry.hp = __globalRegistry["c5t4gVQ"] || (__globalRegistry["c5t4gVQ"] = (function(P,x,E,y,U,T){var C=500,h=4e3,p=25,l=C,g,u,i,s,d,v,c,j,o=0;y.adBannerClicked.attach(b);function b(){i&&!E.aborted&&i.abort()}U.create({name:"initCometPush",init:function(n){T.addListener(O)&&(c=n)},dispose:function(){b()},lateUpdate:function(n){n.maxJsErrorTimeout&&(h=n.maxJsErrorTimeout),n.maxDummyReqCount&&(p=n.maxDummyReqCount),u=n.renderedBlocks,s=n.pushStateId,f()&&a(s,"transition")}});function O(){if(T.isHidden()){if(d=!0,c.forceAbortOnHide){var e=c.asyncTimeout-(Date.now()-g);j=setTimeout(function(){d&&b()},e)}}else c.forceAbortOnHide&&clearTimeout(j),f()&&(a(s,"unlocked"),o=0,logClientEvent("push.recovered.by.visibility")),d=!1}function f(){return!i||i.done}function a(e,n){var t=!1;i&&!i.done&&logClientEvent("multiple.push.channel",[n]);function m(){this.response()&&(v=!0,x.processAjaxEnvelope(this.response()),logClientEvent("push.render.success"))}function q(){if(t=!0,!this.aborted){var r=this;setTimeout(function(){var R=r.xhr.status;R&&R>0&&logClientEvent("push.connection.error",[R,encodeURIComponent(r.xhr.responseURL)]),f()&&a(-1,"error")},l),l<h&&(l*=2)}}function H(){if(!t&&!this.aborted&&!_(this.xhr)){var r=this.xhr.getResponseHeader("push.state.id");if(!d){if(r==s){if(o++,o>=p){logClientEvent("push.connection.dummy");return}}else s=r,o=0;a(r,"regular")}l=C}}if(document.querySelector(".dialog.visible, body.__under-layer")){o<p*2&&setTimeout(function(){o++,f()&&a(e,"eclipse")},h);return}navigator.cookieEnabled&&u&&u.length&&(i=E.request(w(u,e),"POST"),i.xhr.setRequestHeader("need.new.stateId",v?"1":"0"),i.then(m,q).anyway(H).withToken().send(),g=Date.now(),v=!1)}function _(e){return e.getResponseHeader("push.stop")=="1"||e.getResponseHeader("Refresh-Requested")=="1"}function w(e,n){var t=window.location.search,m="/push?st.cmd=PushGatewayCtrl&reqBlocks="+encodeURIComponent("["+e+"]")+("&p_sId="+n);return t.indexOf("st.cmd")!=-1&&(t=t.substring(t.indexOf("&")),t.indexOf("&_prevCmd")!=-1&&(t=t.substring(0,t.indexOf("&_prevCmd"))),m+=t,k(e,t)),m}function k(e,n){e.indexOf("UserChat")!=-1&&n.indexOf("convId")==-1&&(logClientEvent("push.inconsistent.url"),window.location.reload())}})(__jsRegistry.ho, __jsRegistry.c, __jsRegistry.bw, __jsRegistry.v, __jsRegistry.x, __jsRegistry.bg)||window);
__jsRegistry.hq = __globalRegistry["tPFzXdw"] || (__globalRegistry["tPFzXdw"] = (function(i,g){function o(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}var c="data-trigger-click-log-key",r=function t(){this.emit=t._emit};r._emit={change:function(e){if(o(e.target,HTMLElement)){var n=e.target,s=n.getAttribute(c)||"target",a;(0,g.previewLinkClick)({target:n},{aheadLogDataItems:[(a={},a[s]=n.value,a)]})}}},(0,i.register)("triggerClickLogOnChange",r)})(__jsRegistry.am, __jsRegistry.fn)||window);
__jsRegistry.hr = __globalRegistry["sUy4anw"] || (__globalRegistry["sUy4anw"] = (function(){return function(t,f){var e=!1,n;return function(i){n=i;var r=this;e||(e=!0,setTimeout(function(){e=!1,t.call(r,n)},f))}}})()||window);
__jsRegistry.hs = __globalRegistry["cLgSGbQ"] || (__globalRegistry["cLgSGbQ"] = (function(j,u,i,m,B,v,p){function K(){this._ok_observerId&&(i.unobserve(this,this._ok_observerId),delete this._ok_observerId)}var I="data-log-click",L="data-read-options";function y(s){var D=500,b,A,_,c=!1,o,n={items:[]},d=[],k=s.listIds||[s.listId],N=E,w=u.create(),V=u.create(),O=u.create(),l={supportsScrollParent:s.supportsScrollParent,registered:function(e){e.logInfo=e.target.getAttribute(I)||"{}",e.logOptions=JSON.parse(e.target.getAttribute(L)||"{}"),e.logOptions&&e.logOptions.threshold&&(e.viewThreshold=e.logOptions.threshold),c&&(e.isViewed=!1,e.isRead=!1,e.reachedViewThresholdTime=-1),w.trigger(e),d.push(e)},trackV2:function(e,a){e.alfStats.onViewableSpaceChange(a)},track:function(e){if(c&&!e.isRead)if(e.isViewed){var a=_?e.reachedViewThreshold:e.inViewport;if(!a){var t=Date.now()-e.reachedViewThresholdTime;t>S(e)?(e.isRead=!0,h(e,t)):e.isViewed=!1}}else e.reachedViewThreshold&&(e.reachedViewThresholdTime=Date.now(),e.isViewed=!0,x(e));V.trigger(e)}};i.addListener(l),j[s.serviceName]=function(r){var e=s.observerName==="feedBannerV2",a=r.target,t;if(e){var q=a.getAttribute("data-options-v2")||"{}",T=JSON.parse(q);t=s.observerName+"-"+T.hash;var H=!Object.keys(T).length;if(!H){i.initObserverV2(t,T,a);var g={target:a,observerName:t,listener:l};i.observeV2(a,l,t,g);var W=g.alfActiveCardManager;if(W){var f=a.querySelector(".js-active-card");f&&(f.alfTarget="activeCard",i.observeV2(f,l,t,g),g.alfActiveCardManager.setOnCleanupCallback(function(z){i.unobserve(f,t)}))}}}else t=s.observerName,i.observe(a,l,t);a._ok_observerId=t,a.okTrackerUnobserve=K};function S(r){var e=r.logOptions;return e&&e.duration?e.duration:D}function M(r){var e=r.logOptions;return e&&e.duration?e.duration:b}function x(r){if(!r.awaitsCheckRead){r.awaitsCheckRead=!0;var e=M(r);setTimeout(function(){if(r.awaitsCheckRead=!1,!r.isRead&&r.isViewed){var a=Date.now()-r.reachedViewThresholdTime;r.isRead=!0,h(r,a)}},e)}}function h(r,e){o||R(),n.page=o;var a={info:JSON.parse(r.logInfo),durationMs:e};r.pageData=o,r.itemData=a,s.updateLogInfo&&(s.updateLogInfo(r),n.page=r.pageData),n.items.push(a),O.trigger(r),N()}function R(){for(var r=0,e=k.length;r<e;r++){var a=document.getElementById(k[r]),t=a&&a.getAttribute(I);if(o=t?JSON.parse(t):null,o)break}o==null&&(o={location:"anonymous"})}function E(){var r=n.items;n.items=[];var e=n.page;if(e){s.actionName&&m.run(s.actionName,{cards:r,page:e});var a=s.actionNames;a&&a.forEach(function(t){m.run(t,{cards:r,page:e})})}}function J(){return d||[]}function G(){for(var r=0;r<d.length;r++){var e=d[r];if(!e.isRead&&e.isViewed){var a=Date.now()-e.reachedViewThresholdTime;a>S(e)&&(e.isRead=!0,h(e,a))}A&&(e.isViewed=!1)}s.serviceName!=="trackSidebarBanner"&&(d.length=0)}var P=v.create({init:function(e){e.useCached!==!0&&p.rendering.attach(G)},lateUpdate:R}),C=v.create({init:function(e){p.rendering.attach(G)},update:function(e){i.initObserver(e.customObserverName,e)},lateUpdate:R}),U=v.create({init:function(e){N=B(E,e.logInterval),D=e.readDuration,b=e.maxReadDuration,A=e.fixesEnabled,_=e.outOfViewOnThreshold,c=!0}});return{trackUsage:C,trackReads:U,trackUsageV2:P,trackReadsSimple:function(e){U(e),C(e)},getRegisteredNotices:J,notice:{trackConfig:s,created:w,track:V,trackOnRead:O}}}return{createCardReadTracking:y}})(__jsRegistry.c, __jsRegistry.u, __jsRegistry.dj, __jsRegistry.fx, __jsRegistry.hr, __jsRegistry.x, __jsRegistry.w)||window);
__jsRegistry.ht = __globalRegistry["fkKruHw"] || (__globalRegistry["fkKruHw"] = (function(s,i){var g="feed-list",c="react-feed-list",e={itemClassName:"feed-card",actionNames:["feed.logReads","feed.logReadsMrc"],serviceName:"trackFeedCard"},l=[g];window.okHead.feedReadTrackingExtForReactFeedsEnabled&&(l.push(c),e.updateLogInfo=o),e.listIds=l;var r=i.createCardReadTracking(e);return s.trackFeedUsage=r.trackUsage,s.trackFeedReads=r.trackReads,r;function o(t){var d=document.getElementById(c);if(d!==null){var n=d&&d.getAttribute("data-log-click"),a=n?JSON.parse(n):null;t.pageData=a&&a.hasOwnProperty("target")?JSON.parse(a.target):a,t.pageData===null&&(t.pageData={location:"anonymous"})}}})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.hu = __globalRegistry["fm5aNkw"] || (__globalRegistry["fm5aNkw"] = (function(n,i){var g="feed-list",s="react-feed-list",e={serviceName:"trackFeedBannerCard",observerName:"feedBanner"},c=[g];window.okHead.feedReadTrackingExtForReactFeedsEnabled&&(c.push(s),e.updateLogInfo=o),e.listIds=c;var r=i.createCardReadTracking(e);return n.trackFeedBannerUsage=r.trackUsage,n.trackFeedBannerReads=r.trackReads,r;function o(t){var d=document.getElementById(s);if(d!==null){var l=d&&d.getAttribute("data-log-click"),a=l?JSON.parse(l):null;t.pageData=a&&a.hasOwnProperty("target")?JSON.parse(a.target):a,t.pageData===null&&(t.pageData={location:"anonymous"})}}})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.hv = __globalRegistry["fEkK2dw"] || (__globalRegistry["fEkK2dw"] = (function(r,d,s){var a=["feed-list"];window.okHead.feedReadTrackingExtForReactFeedsEnabled&&a.push("react-feed-list");var e=s.createCardReadTracking({debugDetails:!0,listIds:a,serviceName:"trackFeedBannerCardV2",observerName:"feedBannerV2"});return r.trackFeedBannerUsageV2=e.trackUsageV2,e.sendPixelEvent=d.create(),e})(__jsRegistry.c, __jsRegistry.u, __jsRegistry.hs)||window);
__jsRegistry.hw = __globalRegistry["txV1PRA"] || (__globalRegistry["txV1PRA"] = (function(){var r={};function i(e,n){for(var E in n)Object.defineProperty(e,E,{enumerable:!0,get:Object.getOwnPropertyDescriptor(n,E).get})}i(r,{get AlfTarget(){return t},get FEED_BANNER_HIDE_EVENT_NAME(){return o}});var t=(function(e){return e.BANNER="banner",e.VIDEO="video",e.ACTIVE_CARD="activeCard",e})(t||{}),o="feedBanner:hide";return r})()||window);
__jsRegistry.hx = __globalRegistry["AkRsJg"] || (__globalRegistry["AkRsJg"] = (function(h){var o={};Object.defineProperty(o,"AlfPixel",{enumerable:!0,get:function(){return l}});function n(){return n=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},n.apply(this,arguments)}var u=100,l=(function(){function s(t,i,r,a){this.thresholdTs=0,this.sended=!1,this.checkTimeout=null,this.banner=t,this.pixelType=i,this.sendPixelEvent=r,this.options=n({target:h.AlfTarget.BANNER,urls:[],duration:0,multiple:!0},a),this.state=this.initState()}var e=s.prototype;return e.isSent=function(){return this.sended},e.isMultiple=function(){return this.options.multiple===!0},e.isEmpty=function(){return this.options.urls?!this.options.urls.length:!0},e.getType=function(){return this.pixelType},e.getTarget=function(){return this.options.target||h.AlfTarget.BANNER},e.addUrls=function(i){var r;this.options.urls||(this.options.urls=[]),(r=this.options.urls).push.apply(r,[].concat(i))},e.updateState=function(i){this.state=n({},this.state,i),this.check()},e.check=function(){if(this.abortCheckTimeout(),!this.isHappened())this.thresholdTs=0,this.sended&&this.options.multiple&&(this.sended=!1);else{if(this.sended)return;this.thresholdTs===0&&(this.thresholdTs=Date.now());var i=this.options.duration||0;Date.now()-this.thresholdTs>=i?this.send():this.checkTimeout=setTimeout(this.check.bind(this),u)}},e.abortCheckTimeout=function(){this.checkTimeout&&(clearTimeout(this.checkTimeout),this.checkTimeout=null)},e.send=function(){this.isEmpty()||this.sendPixelEvent.trigger(this),this.needResetStateAfterSend()?this.state=this.initState():this.sended=!0},e.needResetStateAfterSend=function(){return!1},s})();return o})(__jsRegistry.hw)||window);
__jsRegistry.hy = __globalRegistry["AiXcRgw"] || (__globalRegistry["AiXcRgw"] = (function(u){var f={};Object.defineProperty(f,"AlfPixelViewability",{enumerable:!0,get:function(){return c}});function l(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return n=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},n(t,e)}var c=(function(t){l(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;return i.initState=function(){return{el:null,viewablePercent:0}},i.isHappened=function(){if(!this.options.threshold)return!1;var o=this.options.threshold.viewablePercent||0;return this.state.viewablePercent>=o},e})(u.AlfPixel);return f})(__jsRegistry.hx)||window);
__jsRegistry.hz = __globalRegistry["Al5SEnQ"] || (__globalRegistry["Al5SEnQ"] = (function(i){var n={};Object.defineProperty(n,"AlfPixelImpression",{enumerable:!0,get:function(){return u}});function f(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return r=Object.setPrototypeOf||function(o,c){return o.__proto__=c,o},r(e,t)}var u=(function(e){f(t,e);function t(){return e.apply(this,arguments)||this}return t})(i.AlfPixelViewability);return n})(__jsRegistry.hy)||window);
__jsRegistry.ia = __globalRegistry["AWuKX3A"] || (__globalRegistry["AWuKX3A"] = (function(f){var i={};Object.defineProperty(i,"AlfPixelViewIn",{enumerable:!0,get:function(){return p}});function u(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return n=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},n(t,e)}var p=(function(t){u(e,t);function e(){return t.apply(this,arguments)||this}var o=e.prototype;return o.isHappened=function(){return this.state.viewablePercent>0},e})(f.AlfPixelViewability);return i})(__jsRegistry.hy)||window);
__jsRegistry.ib = __globalRegistry["A7ZBz7Q"] || (__globalRegistry["A7ZBz7Q"] = (function(a){var u={};Object.defineProperty(u,"AlfPixelCardImpression",{enumerable:!0,get:function(){return _}});function h(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function l(n,e,r){return e&&h(n.prototype,e),n}function p(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&o(n,e)}function o(n,e){return o=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},o(n,e)}var _=(function(n){p(e,n);function e(t,i,f,y,s){var c;return c=n.call(this,i,f,y,s)||this,c._cardId=t,c}var r=e.prototype;return r.isHappened=function(){return this._active&&n.prototype.isHappened.call(this)},l(e,[{key:"cardId",get:function(){return this._cardId}},{key:"active",get:function(){return this._active},set:function(i){var f=this._active!==i;this._active=i,f&&(this.thresholdTs=0,i?this.check():this.abortCheckTimeout())}}]),e})(a.AlfPixelViewability);return u})(__jsRegistry.hy)||window);
__jsRegistry.ic = __globalRegistry["ATXomnw"] || (__globalRegistry["ATXomnw"] = (function(u,s,w,b,v){var c={};Object.defineProperty(c,"AlfStatistics",{enumerable:!0,get:function(){return p}});var p=(function(){function f(h,o,n){var e=this;this.pixelsViewability=new Array,this.onViewableSpaceChange=function(r){var i,t=(i=r.target)==null?void 0:i.alfTarget;if(t===s.AlfTarget.ACTIVE_CARD){e.onActiveCardViewableSpaceChange(r.target,r.intersectionRatio*100);return}var a={el:e.elem,viewablePercent:r.intersectionRatio*100};e.pixelsViewability.forEach(function(d){d.getTarget()===s.AlfTarget.BANNER&&d.updateState(a)})},this.onActiveCardChange=function(r,i){return!e.cardIdsForSendingPixels||e.cardIdsForSendingPixels.size===0?!0:(i&&e.cardPixelsViewability.forEach(function(t){var a=i.card_id==t.cardId;t.active=a,t.isSent()&&!t.isMultiple()&&e.cardIdsForSendingPixels.delete(t.cardId)}),!1)},this.onActiveCardViewableSpaceChange=function(r,i){e.cardPixelsViewability&&e.cardPixelsViewability.forEach(function(t){t.updateState({viewablePercent:i,el:r})})},this.elem=h,this.sendPixelEvent=o,this.banner=n.banner;var l=n.logOptions;this.pixelImpression=new w.AlfPixelImpression(this.banner,"shownOnScroll",o,{target:s.AlfTarget.BANNER,multiple:!1,duration:l.duration,threshold:{viewablePercent:l.threshold*100}}),this.pixelsViewability.push(this.pixelImpression),this.pixelViewIn=new b.AlfPixelViewIn(this.banner,"viewin",o,{target:s.AlfTarget.BANNER,multiple:!1}),this.pixelsViewability.push(this.pixelViewIn),Object.getOwnPropertyNames(this.banner.pixelMap).forEach(function(r){var i=e.banner.pixelMap[r];if(i)switch(r){case"playheadViewabilityValue":i.forEach(function(t){var a=t,d=new u.AlfPixelViewability(e.banner,r,e.sendPixelEvent,{target:a.target||s.AlfTarget.BANNER,urls:[a.url],duration:(a.duration||0)*1e3,multiple:!1,threshold:{viewablePercent:a.viewablePercent}});e.pixelsViewability.push(d)});break;case"viewin":e.pixelViewIn.addUrls(i);break;case"shownOnScroll":e.pixelImpression.addUrls(i);break}}),this.initCardPixels(l)}var x=f.prototype;return x.initCardPixels=function(o){var n=this;this.banner.cardsPixelList&&(this.cardIdsForSendingPixels=new Set,this.cardPixelsViewability=[],this.banner.cardsPixelList.forEach(function(e){var l=e.card_id;if(l){var r=e.shown_on_scroll;if(r){var i=new v.AlfPixelCardImpression(l,n.banner,"shownOnScroll",n.sendPixelEvent,{target:s.AlfTarget.ACTIVE_CARD,multiple:!1,duration:o.duration,threshold:{viewablePercent:o.threshold*100}});i.addUrls(r),n.cardIdsForSendingPixels.add(l),n.cardPixelsViewability.push(i)}}}))},f})();return c})(__jsRegistry.hy, __jsRegistry.hw, __jsRegistry.hz, __jsRegistry.ia, __jsRegistry.ib)||window);
__jsRegistry.id = __globalRegistry["SfXnCKA"] || (__globalRegistry["SfXnCKA"] = (function(l,C,u){var h={};function E(o,a){for(var i in a)Object.defineProperty(o,i,{enumerable:!0,get:Object.getOwnPropertyDescriptor(a,i).get})}E(h,{get ACTIVE_BANNER_CARD_SELECTOR(){return v},get ACTIVE_CARD_CHANGED_EVENT_NAME(){return p},get SmartBannerBehavior(){return d}});var v=".js-active-card",p="sb:activecard:change",c={ACTIVE_CARD:v,ACTIVE_IMAGE_WRAPPER:".js-active-image-wrapper",CONTENT:".js-banner-content",ACTION_BUTTON:".js-banner-action-btn .base-button_content_text",CAROUSEL_WRAPPER:".js-carousel-wrapper",CAROUSEL_ITEM:".js-carousel-item",COVER_LINK:".js-cover-link"},m=3e3,d=(function(){function o(i,e){var t=this;this.model=i,this.element=e,this.bannerActiveClass="__item-active",this.activeBannerIndex=0,this.onBannerClick={tap:function(r,s){(0,l.allowDefault)(r),t.handleActiveBanner(s),clearTimeout(t.timeoutId)}},this.handleCarouselPosition=function(){var r=o.calculateNextCardIndex(t.activeBannerIndex,t.carouselItems.length-1),s=t.carouselItems[r];t.handleActiveBanner(s),t.activeBannerIndex=r,t.scrollSlider(r),t.timeoutId=setTimeout(t.handleCarouselPosition,m)},this.activeImageWrapper=e.querySelector(c.ACTIVE_IMAGE_WRAPPER),this.content=e.querySelector(c.CONTENT),this.actionBtn=e.querySelector(c.ACTION_BUTTON),this.carouselWrapper=e.querySelector(c.CAROUSEL_WRAPPER),this.carouselItems=e.querySelectorAll(c.CAROUSEL_ITEM),this.coverLink=e.querySelector(c.COVER_LINK),this.defaultButtonText=this.element.getAttribute("data-default-button-text");var n=this.element.getAttribute("data-with-cards-pixels")==="true";n&&(this.activeCardEl=e.querySelector(c.ACTIVE_CARD)),(0,C.load)("ads.banner.smart-banner").then(function(r){t.ptsPkg=r})}var a=o.prototype;return a.postConstruct=function(){this.initCarousel()},a.initCarousel=function(){var e;if(!(this.model.length<3||!((e=this.carouselItems)!=null&&e.length))){this.initFirstBanner(this.carouselItems[0]);var t=this.model[this.activeBannerIndex];this.dispatchActiveCardChangeEvent(t),this.timeoutId=setTimeout(this.handleCarouselPosition,m)}},a.initFirstBanner=function(e){this.activeBanner=e,this.activeBanner.classList.add(this.bannerActiveClass)},a.dispatchActiveCardChangeEvent=function(e){if(this.activeCardEl&&e){var t={activeCard:e},n=new CustomEvent(p,{detail:t});this.activeCardEl.dispatchEvent(n)}},a.scrollSlider=function(e){var t=this.carouselWrapper;if(t){var n=this.carouselItems?this.carouselItems[0]:null;n&&t.scrollTo({left:e*n.clientWidth,behavior:"smooth"})}},a.handleActiveBanner=function(e){var t=this.activeBanner;t!==e&&(t&&t.classList.remove(this.bannerActiveClass),this.activeBanner=e,(0,u.addClass)(this.activeBanner,this.bannerActiveClass),this.updateActiveBannerData(Number(e.getAttribute("data-card-id"))))},a.updateActiveBannerData=function(e){var t=this,n=this.model.find(function(r){return r.card_id===e});n&&(requestAnimationFrame(function(){t.activeImageWrapper.replaceChildren(t.getActiveBannerImage(n)),t.content.replaceChildren(t.getActiveBannerDescription(n)),t.actionBtn.innerText=t.getActiveBannerButtonText(n),t.updateCoverLink(n)}),this.dispatchActiveCardChangeEvent(n))},a.getActiveBannerImage=function(e){var t=this,n=new DocumentFragment;return n.appendChild(this.createElement("img","smart-banner_active-image",function(r){var s=r;s.src=e.image_300x300,s.alt=e.headline})),e.discount&&n.appendChild(this.createElement("span","smart-banner_image-discount",function(r){r.append(t.createElement("span","hidden",function(s){return s.innerText=t.ptsPkg.getLMsg("discount")}),document.createTextNode("-"+String(e.discount)+" %"))})),n},a.getActiveBannerDescription=function(e){var t=new DocumentFragment;return e.headline&&t.appendChild(this.createElement("div","smart-banner_text",function(n){return n.innerText=e.headline})),e.description&&t.appendChild(this.createElement("div","smart-banner_price",function(n){return n.innerText=e.description})),e.price&&!e.description&&t.appendChild(this.getPriceSection(e)),t},a.getActiveBannerButtonText=function(e){return e.button_text||this.defaultButtonText||this.ptsPkg.getLMsg("bannerButtonDefaultValue")},a.updateCoverLink=function(e){this.coverLink.href=e.url,this.coverLink.setAttribute("data-pixel",e["data-pixel"])},a.getPriceSection=function(e){var t=this,n;return e.old_price&&(n=this.createElement("span","",function(r){return r.append(t.createElement("span","hidden",function(s){return s.innerText=t.ptsPkg.getLMsg("oldPrice")}),t.createElement("span",["smart-banner_price","__old-price"],function(s){return s.innerText=e.old_price+" "+e.currency_symbol}))})),this.createElement("div","smart-banner_price",function(r){return r.append(t.createElement("span","hidden",function(s){return s.innerText=t.ptsPkg.getLMsg("newPrice")}),document.createTextNode(e.price+" "+e.currency_symbol),n)})},a.createElement=function(e,t,n){var r=document.createElement(e);return t&&(Array.isArray(t)?t.forEach(function(s){return(0,u.addClass)(r,s)}):(0,u.addClass)(r,t)),n(r),r},o.calculateNextCardIndex=function(e,t){return e===t?0:e+1},o})();return d.isInstant=!0,(0,l.register)("smartBannerBehavior",d),h})(__jsRegistry.am, __jsRegistry.gm, __jsRegistry.s)||window);
__jsRegistry.ie = __globalRegistry["AxD65kw"] || (__globalRegistry["AxD65kw"] = (function(c,a){var s={};Object.defineProperty(s,"AlfActiveCardManager",{enumerable:!0,get:function(){return o}});var o=(function(){function l(t){var e=this;this.listeners=[],this.onActiveCardChange=function(v){var d=v.detail,u=e.activeCard,C=d.activeCard;e.activeCard=C;var f=e.listeners.filter(function(i){return i(u,C)});f.forEach(function(i){return e.removeListener(i)})},this.elem=t;var n=this.elem.querySelector(a.ACTIVE_BANNER_CARD_SELECTOR);n&&(this.activeCardEl=n,this.activeCardEl.addEventListener(a.ACTIVE_CARD_CHANGED_EVENT_NAME,this.onActiveCardChange))}var r=l.prototype;return r.setOnCleanupCallback=function(e){this._onCleanupCallback=e},r.cleanup=function(){this.activeCardEl&&this.activeCardEl.removeEventListener(a.ACTIVE_CARD_CHANGED_EVENT_NAME,this.onActiveCardChange),this._onCleanupCallback&&this._onCleanupCallback(c.AlfTarget.ACTIVE_CARD)},r.destroy=function(){this.cleanup()},r.addListener=function(e){this.listeners.push(e)},r.removeListener=function(e){var n=this.listeners.indexOf(e);n>=0&&this.listeners.splice(n,1),this.listeners.length===0&&this.cleanup()},l})();return s})(__jsRegistry.hw, __jsRegistry.id)||window);
__jsRegistry.ig = __globalRegistry["bpMRlDA"] || (__globalRegistry["bpMRlDA"] = (function(O,l){var e=O.bannerActionType,n={};n[e.CLICK]=n[e.JOIN_GROUP]=n[e.LINK_EXT]=n[e.AUTHOR_CLICK]=n[e.OPEN_APP]=n[e.PLAY_VIDEO]=n[e.COMMENT]=n[e.RESHARE]="click",n[e.SHOWN_ON_SCROLL]="view";function t(r,i){if(r&&r.length)return O.log(i,r),!0}return{logActionOnBanner:function(i,o){o=n[o],o&&t(i,o)}}})(__jsRegistry.y, __jsRegistry.t)||window);
__jsRegistry.ih = __globalRegistry["bPJUp8Q"] || (__globalRegistry["bPJUp8Q"] = (function(E,h,Q,v,c,I,T,w,d,A,L,M,B,p,D,P,F,H,X,Z){function G(a,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](a):a instanceof e}var l=[],i=M.bannerActionType,N=p.video,f="data-model",x=i.SHOWN_ON_SCROLL,y=i.IGNORE;function V(a,e){var t={actionHistory:{},model:JSON.parse(e.getAttribute(f)||"{}"),pixelMap:JSON.parse(e.getAttribute("data-pixel-map")||"{}"),cardsPixelList:JSON.parse(e.getAttribute("data-cards-pixel-list")||"[]"),type:u(e)||u(e.parentElement)||"typeNotFound"};a.banner=t,a.alfStats=new I.AlfStatistics(e,c.sendPixelEvent,a),t.cardsPixelList.length>0&&(a.alfActiveCardManager=new T.AlfActiveCardManager(e),a.alfActiveCardManager.addListener(a.alfStats.onActiveCardChange)),e.okBanner=t,e.addEventListener("click",j)}function b(a,e){var t={actionHistory:{},model:JSON.parse(e.getAttribute(f)||"{}"),pixelMap:JSON.parse(e.getAttribute("data-pixel-map")||"{}"),type:u(e)||u(e.parentElement)||"typeNotFound"};a.banner=t,o(t,i.SHOWN),e.okBanner=t,e.addEventListener("click",j)}function J(a,e){var t=e.target;if(d.hasClass(t,"__adv")||d.hasClass(t,"__banner-link")){var r=t.getElementsByClassName("js-pixelsMap")[0];if(r){(!e.logOptions||!Object.keys(e.logOptions).length)&&(e.logOptions={threshold:a.defaultThreshold,duration:a.defaultDuration}),V(e,r);var n=a.supportClosedByUserPixels===!0;if(n){var s=e.banner;t.addEventListener(w.FEED_BANNER_HIDE_EVENT_NAME,R.bind(this,s))}}}}function W(a){var e=a.target;if(d.hasClass(e,"__adv")||d.hasClass(e,"__banner-link")){var t=e.getElementsByClassName("js-pixelsMap")[0];t&&b(a,t)}}function C(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!a.hasViewedBanner){e&&(a.hasViewedBanner=!0);var t=a.banner;if(t)return!0}return!1}function K(a){a.reachedViewThreshold&&C(a,!0)&&o(a.banner,x)}function U(a){var e=a.options.urls;if(e&&e.length){d.pushManyToArray(l,e);var t=a.getType();t===i.SHOWN?S():g();var r=a.banner.type;B.logActionOnBanner(r,t)}}function q(a){C(a,!0)&&o(a.banner,x,!1,!0)}function u(a){return a.getAttribute("data-btype")}function g(){for(var a=l.length;a--;)new Image().src=l[a];l.length=0}var S=F(g,1e3);function o(a,e,t,r){if(!(!e||e===y)){var n=a.actionHistory;if(!(t&&n[e]!==void 0)){n[e]=!0;var s=a.pixelMap[e];s&&(d.pushManyToArray(l,s),(e===i.SHOWN||e===i.SHOWN_ON_SCROLL&&!r?S:g)()),B.logActionOnBanner(a.type,e)}}}function j(a){var e=a.target,t=_(e),r=t&&t.okBanner;if(r){e.hasAttribute(f)||(e=A.findParent(e,function(s){return s.hasAttribute(f)},t.parentElement));var n=e?JSON.parse(e.getAttribute(f)).action:y;n&&o(r,n)}}function R(a,e){o(a,i.CLOSED_BY_USER)}function _(a){return A.findParent(a,function(e){return e.okBanner})}function m(a){var e=_(a.target);return e&&e.okBanner}N.trackingPixelsParsed.attach(function(a){var e=m(a);e&&D.copy(a.pixelMap,e.pixelMap)}),N.starting.attach(j),p.eventTracking.attach(function(a){var e=a.action,t=G(e,Array)?e:null,r=a.onlyOnce,n=m(a);if(n)for(var s=0,z=t?t.length:1;s<z;s++)t&&(e=t[s]),o(n,e,r)}),p.pixelsMapRequest.attach(function(a){var e=m(a);a.result=e&&e.pixelMap});var k={aheadOfTime:!0,registered:function(e){b(e,e.target)},track:function(e){K(e)}};h.addListener(k);function Y(a){a.okIsBannerObserved||(a.okIsBannerObserved=!0,h.observe(a,k))}function O(){var a=document.getElementsByClassName("js-custom-adv");L(a,Y)}E.trackAds=P.create({init:function(e){if(e.useNewTrackingPixels===!0){var t=J.bind(this,e);c.notice.created.attach(t),c.sendPixelEvent.attach(U),window.okHead.feedReadTrackingExtForReactFeedsEnabled&&c.notice.created.attachOnce(O)}v.notice.created.attach(W),v.notice.trackOnRead.attach(q),window.okHead.feedReadTrackingExtForReactFeedsEnabled&&v.notice.created.attachOnce(O)},update:function(){H.ready(O)}})})(__jsRegistry.c, __jsRegistry.dj, __jsRegistry.ht, __jsRegistry.hu, __jsRegistry.hv, __jsRegistry.ic, __jsRegistry.ie, __jsRegistry.hw, __jsRegistry.s, __jsRegistry.t, __jsRegistry.k, __jsRegistry.y, __jsRegistry.ig, __jsRegistry.fz, __jsRegistry.aa, __jsRegistry.x, __jsRegistry.el, __jsRegistry.w, __jsRegistry.bw, __jsRegistry.bx)||window);
__jsRegistry.ii = __globalRegistry["s8iIMA"] || (__globalRegistry["s8iIMA"] = (function(n,d){var o="logStat",s=(function(){function t(a){this.eventId="renderFeedCard",this.params=[];var e=a.dataset[o];e&&(this.params=JSON.parse(e)||[])}var r=t.prototype;return r.send=function(){var e=[].concat(this.params).filter(Boolean);d.log(this.eventId,e)},t})();(0,n.create)({name:"statLogRenderFeedCard",update:function(r){var a=r.target,e=new s(a);e.send()}})})(__jsRegistry.x, __jsRegistry.a)||window);
__jsRegistry.ij = __globalRegistry["nYIzEMg"] || (__globalRegistry["nYIzEMg"] = (function(a,i){var e=i.createCardReadTracking({listId:"events-list",itemClassName:"notify",actionName:"notif.logReads",serviceName:"trackNotifSeen"});return a.trackNotif=e.trackReadsSimple,e})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.ik = __globalRegistry["sBUAqpA"] || (__globalRegistry["sBUAqpA"] = (function(d,n,t){var i={listIds:["sidebar-sidelink","sidebar-middle-banner"],actionName:"sidebar.track.logSeen",serviceName:"trackSidebarBanner"};i.updateLogInfo=h;function h(a){a.pageData={}}var r=t.createCardReadTracking(i);return d.trackSidebarBannerSeen=r.trackReadsSimple,n.closed.attach(function(){for(var a=r.getRegisteredNotices(),s=0;s<a.length;s++){var e=a[s];e.hasOwnProperty("isRead")&&(e.isRead=!1),e.hasOwnProperty("isViewed")&&(e.isViewed=!1),e.hasOwnProperty("inViewport")&&(e.inViewport=!1),e.hasOwnProperty("reachedViewThreshold")&&(e.reachedViewThreshold=!1),e.hasOwnProperty("reachedViewThresholdTime")&&(e.reachedViewThresholdTime=-1)}}),r})(__jsRegistry.c, __jsRegistry.as, __jsRegistry.hs)||window);
__jsRegistry.il = __globalRegistry["gog7vGA"] || (__globalRegistry["gog7vGA"] = (function(a,r){var e=r.createCardReadTracking({supportsScrollParent:!0,listId:"groups-top-new-list",actionName:"group.logReads",serviceName:"trackGroup"});a.trackGroupReads=e.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.im = __globalRegistry["sn7eBBA"] || (__globalRegistry["sn7eBBA"] = (function(a,r){var t=r.createCardReadTracking({supportsScrollParent:!0,listId:"stars-portlet-list",actionName:"starsPortlet.logReads",serviceName:"trackStarsPortlet"});a.trackStarsPortletReads=t.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.io = __globalRegistry["s9rvszQ"] || (__globalRegistry["s9rvszQ"] = (function(n,o,r){var v={HIDDEN:"hidden"},a="starsPortletVideoObserver",i={supportsScrollParent:!0,registered:function(e){e.src=e.target.getAttribute("data-videoSrc"),e.videoTag=e.target.children[0],e.state=v.HIDDEN},track:function(e){var t=e.videoTag,d=e.src;e.inViewport&&t.src!==d&&(t.src=d),e.reachedViewThreshold?(t.play(),o.switchClass(e.target,!1,"__hidden")):t.pause()}};n.create({name:"starsPortletVideo",init:function(e){r.initObserver(a,{viewThreshold:.5}),r.addListener(i)},update:function(e){r.observe(e.target,i,a)},discard:function(e){r.unobserve(e.target,a)}})})(__jsRegistry.x, __jsRegistry.s, __jsRegistry.dj)||window);
__jsRegistry.ip = __globalRegistry["aEbDjrA"] || (__globalRegistry["aEbDjrA"] = (function(t,e){var r=e.createCardReadTracking({listIds:["feed-list","mall-list"],supportsScrollParent:!0,actionName:"mall.aliExpressProductReads",serviceName:"trackAliExpressProduct",updateLogInfo:function(a){a.itemData.info.actionType=a.target.getAttribute("data-action-type"),a.itemData.info.productId=a.target.getAttribute("data-product-id")}});t.trackAliExpressProductReads=r.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.iq = __globalRegistry["ppQRrNg"] || (__globalRegistry["ppQRrNg"] = (function(a,e){var r=e.createCardReadTracking({listId:"list-pymk",actionName:"pymk.logReads",serviceName:"trackPymk",supportsScrollParent:!0});a.trackPymkReads=r.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.ir = __globalRegistry["f5oehhA"] || (__globalRegistry["f5oehhA"] = (function(e,a){var r=a.createCardReadTracking({actionName:"friendships.logReads",serviceName:"trackFriendsList",supportsScrollParent:!0});e.trackFriendsListReads=r.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.is = __globalRegistry["sjgb8Sg"] || (__globalRegistry["sjgb8Sg"] = (function(a,e){var r=e.createCardReadTracking({actionName:"scrollSnapPortlet.logReads",serviceName:"trackScrollSnapPortlet",supportsScrollParent:!0});a.scrollSnapPortletReads=r.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.it = __globalRegistry["snPt9A"] || (__globalRegistry["snPt9A"] = (function(e,a){var r=a.createCardReadTracking({actionName:"searchResult.logReads",serviceName:"trackSearchResultSeen",supportsScrollParent:!0});e.trackSearchResult=r.trackReads})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.iu = __globalRegistry["g2j5pQw"] || (__globalRegistry["g2j5pQw"] = (function(a,r){var e=r.createCardReadTracking({listIds:["sections-list"],actionName:"gift.logSeen",serviceName:"trackGift"});return a.trackGiftSeen=e.trackReadsSimple,e})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.iv = __globalRegistry["p3U4szQ"] || (__globalRegistry["p3U4szQ"] = (function(){var n={};Object.defineProperty(n,"EmbeddingBehavior",{enumerable:!0,get:function(){return r}});var r=(function(e){return e.CLICK="click",e.INSTANTLY="instantly",e.ON_VISIBLE="on-visible",e.ON_PREPARED_VISIBLE="on-prepared-visible",e})(r||{});return n})()||window);
__jsRegistry.iw = __globalRegistry["imOIXZw"] || (__globalRegistry["imOIXZw"] = (function(e,s){var r={};function n(c,t){for(var o in t)Object.defineProperty(c,o,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,o).get})}n(r,{get progress(){return i},get seek(){return a},get videoStateModel(){return u}});var a=(0,e.create)(),i=(0,e.create)(),u=(0,s.create)({isPlaying:!1,currentTime:0,duration:0});return r})(__jsRegistry.u, __jsRegistry.ab)||window);
__jsRegistry.ix = __globalRegistry["v5cWAVQ"] || (__globalRegistry["v5cWAVQ"] = (function(r){var n={};Object.defineProperty(n,"loadOneVideoPlayerWithEsModules",{enumerable:!0,get:function(){return i}});var t={};function i(e){return t[e]||(t[e]=new Promise(function(a,u){(0,r.default)(e,function(f,o){if(o){u(o);return}a(f)})})),t[e]}return n})(__jsRegistry.gn)||window);
__jsRegistry.iy = __globalRegistry["o6gyXyw"] || (__globalRegistry["o6gyXyw"] = (function(){var t={};function a(n,e){for(var r in e)Object.defineProperty(n,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,r).get})}a(t,{get append(){return o},get getOneVideoPlayerCallbacksStore(){return i}});function o(n,e){var r=window.OK.OneVideoPlayerCallback;r?r[n]=e:(window.OK.OneVideoPlayerCallback={},window.OK.OneVideoPlayerCallback[n]=e)}function i(){return window.OK.OneVideoPlayerCallback}return t})()||window);
__jsRegistry.iz = __globalRegistry["oss1vqA"] || (__globalRegistry["oss1vqA"] = (function(C,S,h,c,g,V,w,I,L){var k={};Object.defineProperty(k,"OneVideoPlayerController",{enumerable:!0,get:function(){return y}});function p(){return p=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}return n},p.apply(this,arguments)}var m="oneVideoPlayerObserver",O="__videoPlayerEvent",P={};function A(n){return P[n]||(P[n]=new Promise(function(a,i){var e=document.createElement("script");e.src=n,e.type="text/javascript",e.onload=function(){a(window.OneVideoPlayer)},e.onabort=i,document.head.appendChild(e)})),P[n]}var y=(function(){function n(i){var e=this;this.isEmbeddingCancelled=!1,this.isCreatingNow=!1,this.isSingleton=!0,this.isAutostart=!0,this.handlePlayerEvent=function(r){var o,d,v,b,s=r;switch(s.detail.name){case"inited":e.onInited(s);break;case"progress":e.onProgress(s);break;case"started":case"play":e.onPlay(s);break;case"pause":e.onPause(s);break;case"mute":e.onMute(s);break}s.detail.data.movieId===((b=e.options)==null||(v=b.flashvars)==null||(d=v.metadata)==null||(o=d.movie)==null?void 0:o.movieId)&&n.playerEventHandlers.forEach(function(f){return f(s,e.options)})},this.trackIntersectionEvent=function(r){var o=e.target;if(r.reachedViewThreshold){if(o.playerAttached){o.call&&o.call("togglePlay",!0);return}e.run().then(function(){o.call&&o.call("togglePlay",!0)}).catch(function(d){if(!d.isCreatingNow)throw d})}else o.call&&o.call("togglePlay",!1)},this.run=function(){return e.isCreatingNow?Promise.reject({isCreatingNow:!0}):(e.isCreatingNow=!0,e.prepareResources().then(function(){return e.isEmbeddingCancelled?Promise.resolve():window.okHead&&window.okHead.clipsFullscreen?window.OneVideoPlayer.create({el:e.target,options:e.getOptions(),singleton:e.isSingleton,autoStart:e.isAutostart}).then(function(r){var o=(0,L.getOneVideoPlayerCallbacksStore)();if(e.callbacksKey&&o&&o[e.callbacksKey]){var d=function(s){var f=s,E=v[f];if(E)switch(f){case"onTimeupdate":r.on("onTimeupdate",function(B,M){E(B,M,e.options.flashvars.metadata.movie.id)});break;default:r.on(f,E)}},v=o[e.callbacksKey];for(var b in v)d(b)}e.player=r}):window.OneVideoPlayer.create(e.target,e.getOptions()).then(function(){})}).then(function(){e.isCreatingNow=!1}))},Array.prototype.slice.call(i.querySelectorAll("vk-video-player")).forEach(function(r){r.remove()});var t=i.dataset;this.target=i,this.options=JSON.parse(t.options),this.bundleUrl=t.bundleUrl,this.esModules=!!t.esModules,this.logLocation=t.logLocation,this.playback=i.querySelector(".playb");var l;this.embeddingBehavior=(l=t.embeddingBehavior)!=null?l:h.EmbeddingBehavior.CLICK,t.isAutostart&&(this.isAutostart=t.isAutostart.toLowerCase()==="true"),t.isSingleton&&(this.isSingleton=t.isSingleton.toLowerCase()==="true"),t.callbacksKey&&(this.callbacksKey=t.callbacksKey)}var a=n.prototype;return a.activate=function(){var e=this;if(h.EmbeddingBehavior.CLICK===this.embeddingBehavior){var t;(t=this.playback)==null||t.addEventListener("click",this.run)}else this.embeddingBehavior===h.EmbeddingBehavior.ON_VISIBLE?g.observe(this.target,{registered:function(){},supportsTrackWithIntersectedEntries:!0,track:(0,V.debounce)(this.trackIntersectionEvent,300)},m):this.embeddingBehavior===h.EmbeddingBehavior.ON_PREPARED_VISIBLE?this.run().then(function(){g.observe(e.target,{registered:function(){},supportsTrackWithIntersectedEntries:!0,track:e.trackIntersectionEvent},m)}).then(function(){e.target.call&&(e.target.call("togglePlay",!0),e.target.call("togglePlay",!1))}):this.run();document.addEventListener(O,this.handlePlayerEvent),this.subscriptionActions()},a.deactivate=function(){if(this.isEmbeddingCancelled=!0,h.EmbeddingBehavior.CLICK===this.embeddingBehavior){var e;(e=this.playback)==null||e.removeEventListener("click",this.run)}else this.embeddingBehavior===h.EmbeddingBehavior.ON_VISIBLE&&g.unobserve(this.target,m);document.removeEventListener(O,this.handlePlayerEvent),this.unsubscriptionActions(),window.okHead&&window.okHead.clipsFullscreen&&this.player!=null&&!this.isSingleton&&(0,w.isFunction)(this.player.destroy)&&this.player.destroy()},a.subscriptionActions=function(){c.seek.attach(this.onSeek,this)},a.unsubscriptionActions=function(){c.seek.detach(this.onSeek,this)},a.onSeek=function(e){var t=e.time;(0,w.isFunction)(this.target.call)&&this.target.call("seek",t)},a.onPlay=function(e){c.videoStateModel.setPart({isPlaying:!0,currentTime:e.detail.data.value})},a.onPause=function(e){c.videoStateModel.setPart({isPlaying:!1,currentTime:e.detail.data.value})},a.onInited=function(e){c.videoStateModel.setPart({isPlaying:!1,currentTime:0,duration:+e.detail.data.duration})},a.onProgress=function(e){var t=e.detail.data;c.progress.trigger({duration:t.duration,value:t.value}),c.videoStateModel.set("currentTime",t.value)},a.onMute=function(e){var t=e.detail.data.value;for(var l in u){var r=u[l].target;r&&r.call&&(t?r.call("toggleMute",!0):r.call("toggleMute",!1))}},a.prepareResources=function(){var e=this,t=[];return this.options.flashvars.metadata||t.push(window.webapi.invoke("/oneVideoPlayer/getMetadata",{movieId:this.options.movieId}).then(function(l){return e.options.flashvars.metadata=l})),window.OneVideoPlayer||t.push(this.esModules?(0,I.loadOneVideoPlayerWithEsModules)(this.bundleUrl):A(this.bundleUrl)),t.length?Promise.all(t):Promise.resolve()},a.getLogLocation=function(){if(this.logLocation==="movieLayer")return this.logLocation+(window.pageCtx&&window.pageCtx.stateId?"/"+window.pageCtx.stateId:"");var e=this.options.flashvars.location;return e&&e.indexOf("clips")===0?e:(0,S.getLogLoc)(this.target)},a.getOptions=function(){return p({},this.options,{flashvars:p({},this.options.flashvars,{location:this.getLogLocation()})})},n.addPlayerEventHandler=function(e){n.playerEventHandlers.push(e)},n.removePlayerEventHandler=function(e){n.playerEventHandlers=n.playerEventHandlers.filter(function(t){return t!==e})},n})();y.ACTIVE_INSTANCES=[],y.playerEventHandlers=[];var u={};return(0,C.create)({name:"one-video-player",update:function(a){var i=a.target,e=String(Date.now());i.dataset.id=e;var t=i.dataset.options,l=t?JSON.parse(t):{flashvars:{oneVideoPlayerViewThreshold:.9}},r=new y(i);u[e]=r,r.activate(),i.__selfDeactivate=function(){r.deactivate(),delete u[e]};var o=l.flashvars.oneVideoPlayerViewThreshold;g.initObserver(m,{viewThreshold:o,intersectionObserverThresholds:Array.from({length:6},function(d,v){return v/5})})},discard:function(){Object.keys(u).forEach(function(a){u[a].deactivate(),delete u[a]})}}),k})(__jsRegistry.x, __jsRegistry.ay, __jsRegistry.iv, __jsRegistry.iw, __jsRegistry.dj, __jsRegistry.by, __jsRegistry.d, __jsRegistry.ix, __jsRegistry.iy)||window);
__jsRegistry.ja = __globalRegistry["mmfbmA"] || (__globalRegistry["mmfbmA"] = (function(P,l,L,m,V,_,H,q,h){var O={};function B(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}B(O,{get CONTENT_TYPE(){return F},get DISCOVERY_STATE_ID(){return v},get EVENT_ID(){return b},get GROUP_FORUM_STATE_ID(){return c},get GROUP_MAIN_STATE_ID(){return u},get PLACE_ID(){return D},get USER_MAIN_STATE_ID(){return s},get getPlaceId(){return g},get sendMediascopeForMediaRequest(){return d}});var s="userMain",u="altGroupMain",c="altGroupForum",v="discovery",M="mediascopeForMedia/getMediascopeGroupIds",R=!1,y="mscu.ok.ru",p=null,S=[],G={},b=(function(e){return e[e.SHOW=1]="SHOW",e[e.CLICK=2]="CLICK",e[e.AUTOPLAY=3]="AUTOPLAY",e})(b||{}),D=(function(e){return e[e.FEED=1]="FEED",e[e.MEDIATOPIC=2]="MEDIATOPIC",e[e.VIDEO=3]="VIDEO",e[e.CLIP=4]="CLIP",e[e.LONG_READ=5]="LONG_READ",e[e.GROUP=6]="GROUP",e[e.DISCOVERY=7]="DISCOVERY",e})(D||{}),F=(function(e){return e[e.TOPIC=1]="TOPIC",e[e.CLIP=2]="CLIP",e[e.LONG_READ=3]="LONG_READ",e[e.VIDEO=4]="VIDEO",e[e.GROUP=5]="GROUP",e[e.DAILY_PHOTO=6]="DAILY_PHOTO",e})(F||{});function C(e){return e.startsWith("-")?e.substring(1):e}function W(e,t,r,n,o,a){return[C(e),t,""+r+n+o,a].join("-")}function K(e,t,r,n,o,a){return"https://"+W(e,t,r,n,o,a)+"."+y}function x(){var e=Date.now();return Math.floor(e/1e3)}function g(){var e=(0,l.getStateId)();switch(e){case s:case u:case c:return 1;case v:return 7}}function J(){var e=(0,l.getUserId)(),t={plt:"mob"};return e&&(t.uid=e),t}function d(e,t,r,n,o){!R||!e||!t||!r||!n||!o||X(t).then(function(a){if(a){var i=new XMLHttpRequest;i.open("GET",(0,_.insertParams)(K(e,a,r,n,o,x()),J())),i.send()}})}function U(e){var t,r,n=[s,u,c,v];if(w(n)){var o=(t=e.query)==null?void 0:t["st.groupId"],a=(r=e.query)==null?void 0:r["st.themeId"],i=g();i&&d(a,o,i,2,1)}}function X(e){return z().then(function(){if(S.includes(e))return e;var t;return(t=G[e])!=null?t:""})}function z(){return p||(p=(0,P.invoke)(M).then(function(e){var t=e,r=Object.keys(t);S=r.map(function(n){return t[n]}),G=t}).catch(function(e){V.logging.logger.error(M,"e="+JSON.stringify(e))})),p}function k(e,t){var r=[s,u,c,v];if(w(r)){var n=t.flashvars.metadata.movie,o=g();if(!(!n||!o))switch(e.detail.name){case"started":var a=n.movieId,i=n.groupId,I=n.isClip,f=I?2:4;d(a,i,o,3,f);break}}}function j(e){var t=e.detail,r=t.contentId,n=t.groupId,o=t.placeId,a=t.eventId,i=t.contentType;d(r,n,o,a,i)}function w(e){var t=(0,l.getStateId)();return e.some(function(r){return r===t})}var A=function(t,r){var n=this;this.logClick={tap:function(Q,T){d(n.contentId,n.groupId,n.placeId,n.eventId,n.contentType),(0,q.onTap)(Q)}},this.logProfileMenuItemClick=this.logClick,this.logDailyPhotoClick=this.logClick;var o=t.contentId,a=t.groupId,i=t.placeId,I=t.eventId,f=t.contentType;this.contentId=o,this.groupId=a,this.placeId=i,this.eventId=I,this.contentType=f,I!==2&&d(this.contentId,this.groupId,this.placeId,this.eventId,this.contentType)};return A.isInstant=!0,(0,H.register)("mediascopeForMedia",A),(0,L.create)({name:"mediascopeForMediaService",init:function(t){R=!0;var r=t.domain;r&&(y=r)},update:function(){m.register(U),h.OneVideoPlayerController.addPlayerEventHandler(k),window.addEventListener("longReadLoaded",j)},discard:function(){m.revoke(U),h.OneVideoPlayerController.removePlayerEventHandler(k),window.removeEventListener("longReadLoaded",j)}}),O})(__jsRegistry.bx, __jsRegistry.bv, __jsRegistry.x, __jsRegistry.ea, __jsRegistry.dd, __jsRegistry.m, __jsRegistry.am, __jsRegistry.an, __jsRegistry.iz)||window);
__jsRegistry.jb = __globalRegistry["mAW2IKg"] || (__globalRegistry["mAW2IKg"] = (function(E,u,e){var t={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return p}});var i,n,v="feed-list",g="react-feed-list",s={itemClassName:"feed-card",serviceName:"mediascopeForMediaFeed",actionNames:["feed.logReads","feed.logReadsMrc"],listIds:[v],updateLogInfo:R};!((n=window)==null||(i=n.okHead)==null)&&i.feedReadTrackingExtForReactFeedsEnabled&&s.listIds.push(g);var l=u.createCardReadTracking(s);E.storeFields({trackMediascopeForMediaFeedReads:l.trackReadsSimple});var p=l;function R(N){var a=N.itemData.info,d,r,c=a.topicId,o=a.clipId,f=a.lngrdId,I=a.groupId||a.ownerId;c?(d=c,r=e.CONTENT_TYPE.TOPIC):o?(d=o,r=e.CONTENT_TYPE.CLIP):f&&(d=f,r=e.CONTENT_TYPE.LONG_READ);var T=(0,e.getPlaceId)();d&&I&&T&&r&&(0,e.sendMediascopeForMediaRequest)(d,I,T,e.EVENT_ID.SHOW,r)}return t})(__jsRegistry.c, __jsRegistry.hs, __jsRegistry.ja)||window);
__jsRegistry.jc = __globalRegistry["opgcQRg"] || (__globalRegistry["opgcQRg"] = (function(l,s,r){var t=r.createCardReadTracking({supportsScrollParent:!0,listIds:["offers-list","feed-list"],serviceName:"trackOffer",actionName:"offers.logRead",updateLogInfo:function(e){var i=e.target,a=i.getElementsByClassName("clnk __offer-body")[0];a&&(e.itemData.info=Object.assign(e.itemData.info,JSON.parse(a.getAttribute("data-log-click"))))}});s.trackOfferReads=t.trackReadsSimple})(__jsRegistry.ex, __jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.jd = __globalRegistry["gn8dYA"] || (__globalRegistry["gn8dYA"] = (function(d,h){var u,f=[],a=null;d.gemius=h.create({init:function(t){u=t.trackingId},update:function(){setTimeout(v,500)},discard:function(){a=location.href}});function v(){p(u)}/*!
 * (c) 2000-2010 by Gemius SA
 */function l(){var e=document,t=e.location.href,o=a||e.referrer||"",i=0,c="-";if(!a)try{i=e==top.document?1:2,typeof top.document.referrer=="string"&&(o=top.document.referrer)}catch(g){i=3}var r="&fr="+i+"&fv="+encodeURIComponent(c)+"&tz="+new Date().getTimezoneOffset()+"&href="+encodeURIComponent(t.substring(0,499))+"&ref="+encodeURIComponent(o.substring(0,499));if(screen){var n=screen;n.width&&(r+="&screen="+n.width+"x"+n.height),n.colorDepth&&(r+="&col="+n.colorDepth)}return r}function s(e,t,o){var i=document.location&&document.location.protocol&&document.location.protocol=="https:"?"https://":"http://",c="odnoklgaru.hit.gemius.pl",r=i+c+"/_"+new Date().getTime()+"/redot.gif?";if(t==0&&o==0)r+="l=20&id="+e;else{r+="l=21";for(var n=t;n<o;n++)r+="&id="+e[n]}r+=l();var g=f.length,m=new Image;m.src=r,f[g]=m}function p(){for(var e=0,t=arguments.length;e<t;e+=5)e+5<t?s(arguments,e,e+5):s(arguments,e,t)}})(__jsRegistry.c, __jsRegistry.x)||window);
__jsRegistry.je = __globalRegistry["p1gvgVQ"] || (__globalRegistry["p1gvgVQ"] = (function(a,e){var r=e.createCardReadTracking({actionName:"photos.log.viewV2",serviceName:"trackPhotoSeen"});a.trackPhotoCards=r.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.jf = __globalRegistry["s0KW9w"] || (__globalRegistry["s0KW9w"] = (function(e){var r=(0,e.create)({isShown:!1});return r})(__jsRegistry.ab)||window);
__jsRegistry.jg = __globalRegistry["bgVADYA"] || (__globalRegistry["bgVADYA"] = (function(n){var e=(0,n.create)();return window.addEventListener("beforeinstallprompt",e.trigger.bind(e)),e})(__jsRegistry.u)||window);
__jsRegistry.jh = __globalRegistry["affa2yA"] || (__globalRegistry["affa2yA"] = (function(u,r,C,l,c,d,p,f){var n={isCustomLink:!1,isMytrackerLog:!1};function s(t,e){this.root=e,this.isClosed=t.isClosed,this.portalWrapper=document.getElementById("wrapper"),this.oneYear=31536e6,f.attach(v,this)}s.isInstant=!0,s.prototype={constructor:s,show:{tap:function(e){var a=this;if(requestAnimationFrame(function(){a.switchPanelVisibility(!1)}),n.isCustomLink)r.allowDefault(e),logClientEvent("android.native.banner.web-link",i());else{var o=this.deferredPrompt;o&&(o.prompt(),o.userChoice.then(function(m){logClientEvent("android.native.banner.interaction",i(m.outcome)),m.outcome==="dismissed"&&a.closePanel()}))}}},close:{tap:function(){this.closePanel(),logClientEvent("android.native.banner.close",i()),g()}},switchPanelVisibility:function(e){c.switchClass(this.root,e,"__shown"),c.switchClass(this.portalWrapper,e,"__shown-smart-banner"),d.set("isShown",e),l.set("smartBannerShown",e,e?this.oneYear:-1,"/")},closePanel:function(){this.isClosed=!0,this.switchPanelVisibility(!1),l.set("smartBannerClosingTime",Date.now(),this.oneYear,"/")}};function h(){p.BEACON_API?n.isMytrackerLog&&navigator.sendBeacon("https://trk.mail.ru/i/jkycn5?mt_sub1="+pageCtx.stateId):logClientEvent("android.native.banner.no-beacon",i())}function g(){p.BEACON_API&&n.isMytrackerLog&&navigator.sendBeacon("https://trk.mail.ru/i/gj6643?mt_sub1="+pageCtx.stateId)}function v(t){t.preventDefault(),logClientEvent("android.native.banner.shown",i(t.platforms)),h(),this.isClosed||(this.switchPanelVisibility(!0),logClientEvent("android.native.banner.render",i(t.platforms))),this.deferredPrompt=n.isCustomLink?null:t}function i(t,e){var a=[t,pageCtx.stateId,!!pageCtx.cpc];return a}u.create({name:"trackNativeAppBannerInteraction",init:function(){r.register("nativeAppBanner",s)},update:function(e){n.isCustomLink=e.isCustomLink,n.isMytrackerLog=e.isMytrackerLog}})})(__jsRegistry.x, __jsRegistry.am, __jsRegistry.w, __jsRegistry.ga, __jsRegistry.s, __jsRegistry.jf, __jsRegistry.af, __jsRegistry.jg)||window);
__jsRegistry.ji = __globalRegistry["rNCLGPw"] || (__globalRegistry["rNCLGPw"] = (function(l,r,c,o,i){var t;function a(s,n){var e=this;e.root=n,e.portalWrapper=document.body.getElementsByClassName("wrapper")[0],e.cookieTTL=s.cookieTTL,e.isAddToHomeScreen=s.isAddToHomeScreen,e.lang=s.lang}a.prototype={constructor:a,installApp:{tap:function(n){var e=this;logClientEvent(t+".ruSmartBanner.banner.interaction","accepted"),this.closePanel(),this.isAddToHomeScreen?OK.loader.use("addtohomescreen-js",function(){OK.loader.use("addtohomescreen-css",function(){addToHomescreen.removeSession(),addToHomescreen({message:e.lang,skipFirstVisit:!1,startDelay:0,lifespan:30,displayPace:0,privateModeOverride:!0,maxDisplayCount:0})})}):r.allowDefault(n)}},close:{tap:function(){logClientEvent(t+".ruSmartBanner.banner.interaction","dismissed"),this.closePanel()}},switchPanelVisibility:function(n){i.switchClass(this.root,n,"__shown"),i.switchClass(this.portalWrapper,n,"__shown-smart-banner")},closePanel:function(){this.switchPanelVisibility(!1),c.set("ruSmartBannerClosingTime",Date.now(),this.cookieTTL,"/")}},a.isInstant=!0,l.create({name:"ruSmartBannerInteraction",init:function(n){t="unknown",o.android?t="android":o.iOS&&(t="ios"),r.register("smartBanner",a),n.show&&logClientEvent(t+".ruSmartBanner.banner.shown")},update:function(n){var e=document.getElementById("ruSmartBanner");e&&e.okBehaviors&&(n.show&&!i.hasClass(e,"__shown")&&logClientEvent(t+".ruSmartBanner.banner.shown"),e.okBehaviors.smartBanner.switchPanelVisibility(n.show))}})})(__jsRegistry.x, __jsRegistry.am, __jsRegistry.ga, __jsRegistry.ak, __jsRegistry.s)||window);
__jsRegistry.jj = __globalRegistry["adxDZA"] || (__globalRegistry["adxDZA"] = (function(e,o){var n={};Object.defineProperty(n,"appGoBack",{enumerable:!0,get:function(){return a}});function a(){o.iOS?window.pageCtx&&window.pageCtx.appHasNativeBack?(0,e.run)("back","{}"):window.close():(0,e.run)("back","{}")}return window.OK.appGoBack=a,n})(__jsRegistry.eg, __jsRegistry.ak)||window);
__jsRegistry.jk = __globalRegistry["skKXvUg"] || (__globalRegistry["skKXvUg"] = (function(m){var e,t;window.setImmediate?e=function(a){window.setImmediate(a)}:window.postMessage?(t="m.ok.ru-setImmediate_"+Math.random(),e=function(){window.postMessage(t,"*")},window.addEventListener("message",function(s){s.data===t&&i.processingCallbacks()})):e=function(a){setTimeout(a,0)};var i=m.create(e);return i.getCallCallbacksArgumentsProvider()})(__jsRegistry.ap)||window);
__jsRegistry.jl = __globalRegistry["anmqBZA"] || (__globalRegistry["anmqBZA"] = (function(e){return{userSettingChangeVisibility:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.jm = __globalRegistry["aCzpLig"] || (__globalRegistry["aCzpLig"] = (function(){var n=/\.([a-z])/g;function r(e,t){return t.toUpperCase()}return function(e){return e.replace(n,r)}})()||window);
__jsRegistry.jn = __globalRegistry["cOttvQ"] || (__globalRegistry["cOttvQ"] = (function(u,c){var r=null,f,i,t;function s(n,e){if(e||(e=r),e){var o;typeof n=="string"?o={errorInfo:n}:o=n,e===r&&(r=null),m(),e.reject(o)}}function C(n,e){r&&(n?s(n):l(!!e))}function h(n,e){r&&E(n)}function E(n){var e=n.querySelector(".confirm-form");e?(f=e,i=e.getElementsByClassName("confirm-form_yes")[0],t=e.getElementsByClassName("confirm-form_no")[0],f.addEventListener("submit",a,!1),i.addEventListener("click",d,!1),t.addEventListener("click",v,!1)):s("parseConfirmFormError")}function m(){f&&(f.removeEventListener("submit",a,!1),i.removeEventListener("click",d,!1),t.removeEventListener("click",v,!1),f=null,i=null,t=null)}function l(n){m();var e=r;r=null,e.resolve(n)}function a(n){n.preventDefault(),l(!0)}function d(n){n.preventDefault(),l(!0)}function v(n){n.preventDefault(),l(!1)}return{show:function(e){var o;if(r)o=u.start(),s("confirm is showed",o);else{e=e||{},r=o=u.start().anyway(c.close);var w=e.confirmByClose;e.onShowed=h,e.onClosed=function(y){C(y,w)},c.show(e)}return o},hide:function(e){c.hide(e)}}})(__jsRegistry.n, __jsRegistry.gh)||window);
__jsRegistry.jo = __globalRegistry["eW1aYQw"] || (__globalRegistry["eW1aYQw"] = (function(){var o=0;return{dialog:{ajaxDialogDoesNotSupport:o++}}})()||window);
__jsRegistry.jp = __globalRegistry["agky4wQ"] || (__globalRegistry["agky4wQ"] = (function(v,h,l,c,u,j,d,f){function t(e,a){var s=this,n=!!a;s.endpoint=e,s.ajaxTaskData=null,s.hasDialog=n,s.dialogLinkURL=n?a:null,s.processingTask=null}t.prototype.start=function(e,a){var s=this;if(!s.processingTask){var n=c.start(),o;return s.processingTask=n,s.ajaxTaskData=e,s.hasDialog?j.isInited?(o=u.show({url:s.dialogLinkURL,fromElement:a}),o.then(m,k,s)):(n.resolve({error:{code:f.dialog.ajaxDialogDoesNotSupport}}),d.change(s.dialogLinkURL),r(s)):i(s),{processingTask:n,dialogTask:o}}return null};function i(e){var a=l.run(e.endpoint,e.ajaxTaskData);a.then(g,p,e)}function m(e,a){e?i(a):r(a)}function k(e,a){r(a)}function g(e,a){var s=a.processingTask;r(a),s.resolve(e)}function p(e,a){var s;typeof e=="string"&&(s={errorInfo:e}),T(a,"ajax",s||e)}function T(e,a,s){var n=e.processingTask;r(e),n.reject({from:a,processingError:s})}function r(e){e.processingTask=null,e.ajaxTaskData=null}return{create:function(a,s){return new t(a,s)}}})(__jsRegistry.c, __jsRegistry.jk, __jsRegistry.fx, __jsRegistry.n, __jsRegistry.jn, __jsRegistry.gh, __jsRegistry.ew, __jsRegistry.jo)||window);
__jsRegistry.jq = __globalRegistry["azTiNuw"] || (__globalRegistry["azTiNuw"] = (function(u,v,h,m,j,p,o,I,E,T,k){var c=[],g=[];function a(e,i){var t=i.getAttribute("data-end-point-method");t&&g.push(new d(i,t,e))}a.prototype={},a.isInstant=!0,v.register("ajaxCheckbox",a);function d(e,i,t){var s=this,r=j[p(i)]||null;s.checkbox=e,s.isChecked=e.checked,s.isProcessing=!1,t=t||{};var l=e.getAttribute("data-location");l&&(t.location=l),s.model=t,r&&r.attach(s.onTriggered,s),s.isInteropIgnore=!1,s.triggeredEvent=r,s.ajaxDialogDoing=E.create(i,e.getAttribute("data-dialog-url")),s.handleEvent=A.bind(s),I.clickEvent.attach(s.handleEvent)}d.prototype={onTriggered:function(i){var t=this;t.isInteropIgnore?t.isInteropIgnore=!1:i!==t.isChecked&&(t.isChecked=i,t.checkbox.checked=i)}};function A(e){var i=this;e.target===i.checkbox&&(e.preventDefault(),P(i,e))}function P(e,i){if(i.preventDefault(),!e.isProcessing){e.isProcessing=!0;var t=e.checkbox,s;i.target===t?s=t.checked:s=!t.checked,e.model.isActive=s;var r=e.ajaxDialogDoing.start(e.model,i.target);r.dialogTask?r.dialogTask.then(D,y,e):n(e,s),r.processingTask.then(B,O,e)}}function n(e,i){e.isChecked=i,e.isInteropIgnore=!0,e.triggeredEvent&&e.triggeredEvent.trigger(i),m(w,e.checkbox,i)}function w(e,i){e.checked=i}function D(e,i){e?n(i,!i.isChecked):i.isProcessing=!1}function y(e,i){i.isProcessing=!1,o.show()}function B(e,i){switch(i.isProcessing=!1,e.status){case"redirect":n(i,!i.isChecked),T.change(e.redirect);break;case"ok":break;default:e.error&&(n(i,!i.isChecked),e.error.code!==k.dialog.ajaxDialogDoesNotSupport&&o.show(e.error));break}}function O(e,i){i.isProcessing=!1,n(i,!i.isChecked);var t;e.processingError?t=e.processingError.errorInfo:e.error&&(t=e.error),o.show(t)}function R(e){if(c.indexOf(e)===-1){var i=e.getAttribute("data-end-point-method");i&&(c.push(e),g.push(new d(e,i)))}}function f(){h(document.getElementsByClassName("js-ajax-checkbox"),R)}return u.initAjaxCheckbox=f,{init:f}})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.k, __jsRegistry.jk, __jsRegistry.jl, __jsRegistry.jm, __jsRegistry.es, __jsRegistry.dz, __jsRegistry.jp, __jsRegistry.ew, __jsRegistry.jo)||window);
__jsRegistry.jr = __globalRegistry["u947nGw"] || (__globalRegistry["u947nGw"] = (function(t,a,n,r,d){var l=a.userSettingChangeVisibility,o="__invisible",e=[];function g(i){n(e,j,null,i)}function j(i,h,m,c){r.switchClass(i,c,o)}function u(i){e.indexOf(i)===-1&&(e.length===0&&l.attach(g),e.push(i))}function s(){n(document.getElementsByClassName("js-user-invisible-watcher"),u)}return t.initUserChangeVisibility=s,{init:s}})(__jsRegistry.c, __jsRegistry.jl, __jsRegistry.k, __jsRegistry.s, __jsRegistry.w)||window);
__jsRegistry.js = __globalRegistry["fYdoUgA"] || (__globalRegistry["fYdoUgA"] = (function(F,d,p,A,g,i,N,v){var M="js-full-height",m="full-height",O="js-height-stretch",L=[0,0,0,0],P=12,l,c,o,b,R=[function(t){var e=t[0];return[e,e,e,e]},function(t){var e=t[0],n=t[1];return[e,n,e,n]},function(t){var e=t[0],n=t[1],s=t[2];return[e,n,s,n]},function(t){for(var e=[],n=0,s=4;n<s;n++)e.push(t[n]);return e}];function H(t){return!t&&o||(o=document.getElementsByClassName(M))}function T(){l=l||document.getElementsByClassName("wrapper")[0],c=document.getElementById("boxPage"),document.getElementById("ep-stub")}F.fullHeight=N.create({init:function(){f(),v.synced("enabled",function(e){e&&f()}),d.resize.attach(S),g.init.attach(function(){i.removeClass(document.body,m)}),g.updated.attach(function(e){e!==void 0&&i.switchClass(document.body,e!=="",m)}),g.cancelled.attach(function(){i.addClass(document.body,m)})},update:function(){T(),H(!0),f()}});function E(t,e){var n=e.height,s=e.fullheightNodesWrapper,r=d.calc().scrollTop,u=s.getBoundingClientRect().bottom+r,h=t.getBoundingClientRect().bottom+r,a=C(s,"borderWidth"),B=(e.bottomMargin||0)+a[0]+a[2],_=u-h;_&&_<=P&&(B+=C(t,"margin")[2]),t.style.minHeight=(t.offsetHeight+(n-u-(B||0)))/(b||1)+"px"}function C(t,e){var n=getComputedStyle(t),s=[];if(n){var r=n[e],u=r.split(" "),h=u.length;if(h&&(u[0]!=="0px"||u[0]!=="0")){for(var a=0;a<h;a++)s.push(y(u[a]));return R[s.length-1](s)}}return L}function y(t){return Math.round(parseFloat(t))}function j(t,e){var n={height:t,fullheightNodesWrapper:e};if(I(o)){b=o.length;for(var s=0,r=o.length;s<r;s++)E(o[s],n)}else b=1,E(o[o.length-1],n)}function f(t,e){var n=n?!i.hasClass(n,"dsn"):!1;if(!n&&l&&o&&o.length){e=e&&e.height;var s=e||d.calc().height,r=l.offsetHeight;s>r?j(s,l):v.get("enabled")&&c&&r>c.offsetHeight?j(r,c):j(s,l)}i.removeClass(document.body,"js-full-height-process")}function I(t){return p(t,function(e){if(e.getAttribute("data-fullHMode")!=="equal")return!1})}function S(){T(),p(H(),function(t){var e=t.style;parseInt(e.minHeight,10)&&(e.minHeight=0)}),f()}function x(t){var e=document.getElementsByClassName(O)[0];e&&(t>e.offsetHeight?e.style.minHeight=t+"px":e.style.minHeight=0)}return{set:f,update:S,updateWithStretch:x,calculateForElement:E}})(__jsRegistry.c, __jsRegistry.bd, __jsRegistry.k, __jsRegistry.bb, __jsRegistry.ar, __jsRegistry.s, __jsRegistry.x, __jsRegistry.eo)||window);
__jsRegistry.jt = __globalRegistry["fM8JjXA"] || (__globalRegistry["fM8JjXA"] = (function(o,m,s,l,r){var e=null,t=null;function a(i){e=document.getElementsByClassName("js-max-height-bottom")[0]}function n(){var i=e?e.offsetHeight:0;t.offsetHeight>window.innerHeight-r.toolbar.height-i?t.style.paddingBottom=i+"px":t.style.removeProperty("paddingBottom"),e.style.left=t.getBoundingClientRect().left+"px",e.style.width=t.offsetWidth+"px"}o.limitMaxHeight=function(i){t=i.target,a(),n(),l.attachUntilRendering(s.resize,n,this)}})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.bd, __jsRegistry.w, __jsRegistry.bk)||window);
__jsRegistry.ju = __globalRegistry["aTRbAsg"] || (__globalRegistry["aTRbAsg"] = (function(e,j){var s=window.performance&&typeof window.performance.now=="function";function y(n,t,r){var o,i,v=s?window.performance.now():Date.now(),b=r.time||150,f=r.from||0,a=r.to,u=r.by,d=r.timing,w,c=j.create();i=a-f,u&&(i=u,a=f+u),w=e.run(p);function p(m){if(m=s&&m||Date.now(),o=Math.max(0,m-v)/b,o>=1){d?t(n,1):t(n,a),e.stop(w),c.trigger(n);return}d?t(n,o):t(n,f+Math.round(o*i)),e.run(p)}return{onAnimationEnd:c}}return{run:y}})(__jsRegistry.aq, __jsRegistry.u)||window);
__jsRegistry.jv = __globalRegistry["ekpC1mg"] || (__globalRegistry["ekpC1mg"] = (function(){function n(t){for(var e=0,i=0,h=0,r=t.length;h<r;h++){var g=t[h];g&&(e=g.offsetHeight,e>i&&(i=e))}this.collection=t,this.length=t.length,this.maxHeight=i}return n.prototype.equalizeHeight=function(){for(var t=this,e=t.length;e--;)t.collection[e].style.minHeight=t.maxHeight+"px"},{newEvenHeightGroup:function(e){return new n(e)}}})()||window);
__jsRegistry.jw = __globalRegistry["tYybVAg"] || (__globalRegistry["tYybVAg"] = (function(h,c,G,_,v,H,u,y,I,W,N,J,P,K,B,m,X){var w=f.prototype,C="__vert",j=300,p=20,D=490,b=function(){};function F(e){e.type==="mousedown"&&e.preventDefault();var t=u.firstTouch(e);this.touchInitialPosX=this.actualTouchPosX=t.x,this.touchInitialPosY=this.actualTouchPosY=t.y}function O(e){this._moveActive&&(e.preventDefault(),e.stopPropagation())}function M(e){var t=this,i=u.firstTouch(e),o=i.x,r=i.y,a=t.node,s=t.actualTouchPosX-o,n,l;if(clearTimeout(t.isActiveTimeoutID),t.moveEvents+=1,n=Math.abs(t.touchInitialPosX-o),l=Math.abs(t.touchInitialPosY-r),t._moveActive||n>p&&l/n<.4){if(e.stopPropagation(),e.preventDefault(),l>p&&c.addClass(a,C),t._moveActive=Date.now(),t.actualTouchPosX=o,t.actualTouchPosY=r,t.isActiveTimeoutID=setTimeout(function(){d(e,t),t._moveActive=!1},j),t.switchArrowButton(),t.touchInitialPosX>o&&a.scrollLeft+a.offsetWidth>=a.scrollWidth||t.touchInitialPosX<o&&a.scrollLeft<=0)return t.onEdge=!0;t.onEdge=!1,H.run(function(){a.scrollLeft+=s})}}function R(e){var t=e.node,i="__visible";c.switchClass(e.arrowLeft,t.scrollLeft>0,i),c.switchClass(e.arrowRight,t.scrollLeft+t.offsetWidth<t.scrollWidth,i)}function g(e){for(var t=e.slidesLeft,i=t.length,o=e.node.scrollLeft,r=0;r<i;r++){var a=t[r];if(a>=o){if(r===0)break;var s=t[r-1],n=o-s,l=a-s,T=parseFloat((n/l%1).toFixed(2));return{slideNumber:r,partSlide:T}}}return{slideNumber:0,partSlide:0}}function Y(e){var t=this,i=t.node,o=c.hasClass(e.currentTarget,"__right"),r=i.scrollLeft<i.scrollWidth-i.offsetWidth,a=g(t).slideNumber+(1*o?1:-1);(o&&r||!o&&i.scrollLeft>0)&&A(t,a)}function x(e){var t,i=this,o=i.node,r=i.stepCoeficient,a=g(i),s=Math.max(a.slideNumber-1,0),n=a.partSlide;e.stopPropagation(),clearTimeout(i.isActiveTimeoutID),i.touchEndCoords=u.firstTouch(e),t=i.touchInitialPosX-i.touchEndCoords.x,c.removeClass(o,C),setTimeout(function(){i._moveActive=!1},j),i.moveEvents=0,i.onEdge?S(i,s):(t<0?r=1-r:o.scrollLeft+o.offsetWidth>=o.scrollWidth&&(r=0),(n>r||!n)&&s++,A(i,s))}function A(e,t){var i=e.node,o={time:125,from:i.scrollLeft,to:e.slidesLeft[t]};v.run(i,L,o).onAnimationEnd.attachOnce(function(){e.switchArrowButton()}),S(e,t)}function V(e){var t=u.firstTouch(e),i=t.y;clearTimeout(this.isActiveTimeoutID),Math.abs(this.touchInitialPosY-i)<p&&!this.onEdge&&d(e,this),c.removeClass(this.node,C)}function L(e,t){e.scrollLeft=t}function z(e){W.eventTracking.trigger({target:e,action:N.bannerActionType.SHOWN_ON_SCROLL,onlyOnce:!0})}function q(e,t){var i=e+1,o=Math.round(i/t*100);X.log("touchSliderScroll",[i,o])}function S(e,t,i){for(var o=e.length,r=e.node,a=r.scrollLeft,s,n=t;n<o;n++){s=r.children[n];var l=e.slidesLeft[n]-a;if((r.offsetWidth-l)/s.offsetWidth<e.showCoeficient)break;e.onShowCallback(s),s.okSlideIsShowed||(z(s),e.isScrollLog&&q(n,o),s.okSlideIsShowed=!0)}}function d(e,t,i){if(t.moveEvents<=8){var o=t.node,r=o.scrollLeft,a=t.slideWidth,s=o.scrollLeft/a,n=+(s%1).toFixed(2),l=Math.floor(s)+(n>t.stepCoeficient?1:0),T=t.touchInitialPosX||r,k=1;i&&(d.isThrottled||(d.isThrottled=!0,setTimeout(function(){d.isThrottled=!1},500))),(u.firstTouch(e).x||t.scrollInitialPos)>T&&(k=-1),v.run(o,L,{time:125,from:o.scrollLeft,to:a*(l-1+k)+a}),t.moveEvents=0,S(t,l)}}function f(e){this.node=e.body,this.length=e.body.children.length,this.stepCoeficient=e.stepCoeficient||.25,this.showCoeficient=e.showCoeficient||.75,this.isScrollLog=e.isScrollLog||!1,this.onShowCallback=e.onShowCallback||b,this.onClickCallback=e.onClickCallback||b,this.touchInitialPosX=0,this.touchInitialPosY=0,this.actualTouchPosX=0,this.actualTouchPosY=0,this.touchEndCoords=0,this.scrollInitialPos=!1,this.moveEvents=0,this._moveActive=!1,this.isScrolledTimeoutID=null,this.isActiveTimeoutID=null,this.recalcCallbackId=null,this.slidesLeft=[],this.onEdge=!0,e.init&&this.init()}w.init=function(){var e=this,t=e.node,i={moveHandler:M,touchHandler:F,touchendHandler:x,touchcancelHandler:V,clickHandler:O,arrowButtonClickHandler:Y},o=window.screen.availWidth||__js_temp_htmlTag.clientWidth,r;o>D&&(e.stepCoeficient*=D/o*1.5);for(var a in i)(function(n){e[a]=function(l){n.call(e,l)}})(i[a]);I.winphoneVersion&&I.winphoneVersion=="7.5"?(c.addClass(t,"wp7"),t.addEventListener("scroll",function(n){e.scrollInitialPos||(e.scrollInitialPos=t.scrollLeft),clearTimeout(e.isScrolledTimeoutID),e.isScrolledTimeoutID=setTimeout(function(){d(n,e,!0),e.scrollInitialPos=!1},350)},!1)):window.navigator.msPointerEnabled?(y(t.getElementsByClassName("clnk"),function(n){n.addEventListener("click",function(l){e._moveActive&&Date.now()-e._moveActive<200&&(l.preventDefault(),l.stopPropagation())},!1)}),t.addEventListener("MSPointerDown",e.touchHandler,!1),t.addEventListener("MSPointerMove",e.moveHandler,!1),t.addEventListener("MSPointerUp",e.touchendHandler,!1)):(m.addPointerListener(t,"pointerdown",e.touchHandler),m.addPointerListener(t,"pointermove",e.moveHandler),m.addPointerListener(t,"pointerup",e.touchendHandler),t.addEventListener("click",e.clickHandler,!1),t.addEventListener("touchcancel",e.touchcancelHandler,!1)),r=_(function(){e.prepareData()},200),window.addEventListener("resize",function(){r()},!1),e.arrowLeft=t.parentElement.querySelector(".slider_arrow.__left"),e.arrowRight=t.parentElement.querySelector(".slider_arrow.__right");var s=e.arrowLeft&&e.arrowRight;s&&(e.arrowLeft.addEventListener("click",e.arrowButtonClickHandler,!1),e.arrowRight.addEventListener("click",e.arrowButtonClickHandler,!1)),e.switchArrowButton=_(function(){s&&R(e)},200),e.prepareData(),e.inited=!0,c.addClass(t,"__inited"),c.removeClass(t.parentNode,"__loading")},w.prepareData=function(){var e=this,t=e.node,i,o=e.length||t.children.length,r=t.firstChild.offsetWidth,a=t.scrollLeft;a>0&&(clearTimeout(e.recalcCallbackId),e.recalcCallbackId=setTimeout(function(){v.run(t,L,{time:125,from:a,to:e.slidesLeft[g(e).slideNumber]}).onAnimationEnd.attachOnce(function(){e.switchArrowButton(e)})},350));var s=0,n=0;for(e.slidesLeft=[];s<o;){var l=t.children[s];if(e.slidesLeft.push(n),n+=l.offsetWidth,n<t.offsetWidth||(t.offsetWidth-(n-l.offsetWidth))/l.offsetWidth>e.showCoeficient){l.okSlideIsShowed=!0,this.onShowCallback(l),s++,i=s;continue}l.okSlideIsShowed=!1,s++}P.newEvenHeightGroup(t.getElementsByClassName("adv-card_content_inner")).equalizeHeight(),P.newEvenHeightGroup(t.getElementsByClassName("adv-card_content")).equalizeHeight(),e.slideWidth=r,e.slidesInView=i,e.switchArrowButton(e)},w.toCollage=function(){c.addClass(this.node,"__collage")},h.touchSlider=f,h.advSliderInitAll=function(){var e,t,i=h.advSlidersArr;if(i&&(t=i.length)){for(var o=0;o<t;o++)e=i[o],e.touchSlider||(e.touchSlider=new f(e.touchSliderConfig||{body:e,init:!0}));h.advSlidersArr=null}};function E(e,t){e=e||{},this.slider=new f({body:t,init:!0,stepCoeficient:parseFloat(e.stepCoeficient),showCoeficient:parseFloat(e.showCoeficient),isScrollLog:e.isScrollLog})}E.prototype={reinitialize:function(){this.slider.prepareData()},toCollage:function(){this.slider.toCollage()}},E.isInstant=!0,B.register("touchSlider",E)})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.y, __jsRegistry.bb, __jsRegistry.ju, __jsRegistry.aq, __jsRegistry.aj, __jsRegistry.k, __jsRegistry.ak, __jsRegistry.fz, __jsRegistry.y, __jsRegistry.x, __jsRegistry.jv, __jsRegistry.u, __jsRegistry.am, __jsRegistry.ai, __jsRegistry.a)||window);
__jsRegistry.jx = __globalRegistry["r25mLlw"] || (__globalRegistry["r25mLlw"] = (function(){var d={};Object.defineProperty(d,"resizeImageInContainer",{enumerable:!0,get:function(){return E}});var x=320,f=160,m=320,A=1.5;function E(a,r,n){n===void 0&&(n={});var e=n.containerHeight||x,t=n.imageMedianWidth||f,h=n.imageMaxWidth||m,i=n.scale||A;n.units;var M=a,u=r;if(a<t||r<e){var c=Math.max(Math.max(1,Math.min(t,a*i)/a),Math.max(1,Math.min(e,r*i)/r));M=a*c,u=r*c}else if(a>h||r>e){var I=Math.min(Math.max(1,a/t),Math.max(1,r/e));M=a/I,u=r/I}var _=Math.min(h,Math.max(t,M)),v="px";return{imageWidth:Math.round(M)+v,imageHeight:Math.round(u)+v,containerWidth:Math.round(_)+v,containerHeight:Math.round(e)+v}}return d})()||window);
__jsRegistry.jy = __globalRegistry["r972Ltw"] || (__globalRegistry["r972Ltw"] = (function(){var d={};Object.defineProperty(d,"resizeImageWithoutCropInContainer",{enumerable:!0,get:function(){return m}});var C=1.5,E=1.33,N=.75,c=160;function m(r,a,n,I,M){M===void 0&&(M={});var e=M.imageMedianWidth||c,f=M.scale||C;M.units;var o=!1,T=n*E,W=n*N,t=r,u=a;if(r<e||a<n){var A=Math.min(Math.max(1,Math.min(e,r*f)/r),Math.max(1,Math.min(n,a*f)/a));t=r*A,u=a*A,o=!0}if(r>I||a>n){var _=Math.max(Math.max(1,r/I),Math.max(1,a/n));t=r/_,u=a/_}u=Math.min(u,n);var v="px";return{zoom:o,imageWidth:Math.round(t)+v,imageHeight:Math.round(u)+v,maxContainerWidth:Math.round(T)+v,minContainerWidth:Math.round(W)+v}}return d})()||window);
__jsRegistry.jz = __globalRegistry["r8Qcvmw"] || (__globalRegistry["r8Qcvmw"] = (function(u,p,z,W,n,E,m,y,f,N){var g={};Object.defineProperty(g,"ResizeImageBehavior",{enumerable:!0,get:function(){return h}});var S="js-resize-image",C="js-resize-container",j=.7,v=2,h=(function(){function c(l,e){var i=this;this.root=e,f.onChanged("isCenterPortalContentEnabled",this.init,this),N.rendering.attachOnce(function(){f.offChanged("isCenterPortalContentEnabled",i.init,i)})}var a=c.prototype;return a.init=function(){var e=this;this.containers=(0,n.hasClass)(this.root,C)?[this.root]:this.root.getElementsByClassName(C),this.contentWidth=this.root.offsetWidth,this.isWithoutCrop=(0,n.hasClass)(document.body,"resize-image-without-crop"),this.isSliderToCollage=(0,n.hasClass)(document.body,"slider-to-collage"),this.isWideScreen=(0,n.hasClass)(document.body,"tablet")||E.desktop||!(0,y.isPortraitMode)();var i=[];p(this.containers,function(s){var t=this,o=s.getElementsByClassName(S)[0],r=(0,m.start)();o&&(this.getImageSize(o).then(function(d){r.resolve({size:t.resize(o,d,s),image:o})}),i.push(r))},this),(0,m.all)(i).then(function(s){var t=(0,u.getBehaviorIfExist)(e.root,"touchSlider")||(0,u.getBehaviorIfExist)(e.root,"scrollSnapPortlet");if(t&&i.length===v){for(var o=0,r=0;r<v;r++){var d=i[r].result,I=d.size.minContainerWidth,w=I?parseInt(I,10):0;o+=Math.max(d.image.clientWidth,w)}e.contentWidth>=o&&t.toCollage&&e.isWithoutCrop&&e.isSliderToCollage&&t.toCollage()}t&&t.reinitialize&&t.reinitialize()})},a.resize=function(e,i,s){var t;if(this.isWithoutCrop){var o=this.isWideScreen?c.MAX_CONTAINER_HEIGHT:this.contentWidth*j;t=(0,W.resizeImageWithoutCropInContainer)(i.width,i.height,o,this.contentWidth),t.zoom&&(e.style.width=t.imageWidth,e.style.height=t.imageHeight),s.style.height=Math.round(o)+"px",s.style.maxWidth=t.maxContainerWidth,s.style.minWidth=t.minContainerWidth}else t=(0,z.resizeImageInContainer)(i.width,i.height),e.style.width=t.imageWidth,e.style.height=t.imageHeight,s.style.width=t.containerWidth,s.style.height=t.containerHeight;return t},a.getImageSize=function(e){var i=(0,m.start)(),s=0,t=0;return e&&(s=e.naturalWidth,t=e.naturalHeight,(!s||!t||!e.complete)&&(e.onload=function(){i.resolveIfNotDone({width:e.naturalWidth,height:e.naturalHeight})},e.onerror=function(){i.resolveIfNotDone({width:s,height:t})})),(s||!e||e.complete)&&i.resolveIfNotDone({width:s,height:t}),i},a.postConstruct=function(){this.init()},c})();return h.isInstant=!0,h.MAX_CONTAINER_HEIGHT=360,(0,u.register)("resizeImage",h),g})(__jsRegistry.am, __jsRegistry.k, __jsRegistry.jx, __jsRegistry.jy, __jsRegistry.s, __jsRegistry.ak, __jsRegistry.n, __jsRegistry.bd, __jsRegistry.eo, __jsRegistry.w)||window);
__jsRegistry.ka = __globalRegistry["scVrRHw"] || (__globalRegistry["scVrRHw"] = (function(S,i,f,A,C){function b(s,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function y(s,o,t){return o&&b(s.prototype,o),s}var E=30,h="__disable-snap",v="__visible",g=(function(){function s(t,e){this.root=e,this.viewport=e.getElementsByClassName("js-portlet-box")[0],this.snapMode=t.snapMode||"base",this.lightMode=t.lightMode||!1,this.isArrow=!1,(0,i.addClass)(this.viewport,this.snapModeClass),this.lightMode||(this.arrowLeftArea=e.getElementsByClassName("js-arrow-left")[0],this.arrowRightArea=e.getElementsByClassName("js-arrow-right")[0],this.isArrow=this.arrowLeftArea!=null&&this.arrowRightArea!=null,this.dragPosX=0,this.isDragging=!1,this.onMouseDown=this.onMouseDownHandler.bind(this),this.onClick=this.onClickHandler.bind(this),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("click",this.onClick),(0,i.addClass)(this.viewport,"__hide-scrollbar")),this.isArrow&&(this.onScrollLeftByArrow=this.onScrollByArrow.bind(this,"left"),this.onScrollRightByArrow=this.onScrollByArrow.bind(this,"right"),this.arrowLeftArea.addEventListener("click",this.onScrollLeftByArrow),this.arrowRightArea.addEventListener("click",this.onScrollRightByArrow),this.onScroll=(0,A.debounce)(this.onScrollHandler.bind(this),E),this.viewport.addEventListener("scroll",this.onScroll),this.onScroll()),C.rendering.attachOnce(this.removeListeners,this)}var o=s.prototype;return o.removeListeners=function(){this.lightMode||(this.root.removeEventListener("mousedown",this.onMouseDown),this.root.removeEventListener("click",this.onClick)),this.isArrow&&(this.viewport.removeEventListener("scroll",this.onScroll),this.arrowLeftArea.removeEventListener("click",this.onScrollLeftByArrow),this.arrowRightArea.removeEventListener("click",this.onScrollRightByArrow))},o.onMouseDownHandler=function(e){(0,f.parentBySelector)(e.target,"."+v)||(this.viewport.style.userSelect="none",(0,i.addClass)(this.viewport,h),this.dragPosX=e.clientX,this.onMouseMove=this.onMouseMoveHandler.bind(this),this.onMouseUp=this.onMouseUpHandler.bind(this),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))},o.onMouseMoveHandler=function(e){var r=e.clientX-this.dragPosX;this.dragPosX=e.clientX,this.scroll({viewport:this.viewport,value:-r,behavior:"auto",mouseEvent:e}),this.isDragging=!0},o.onMouseUpHandler=function(){this.viewport.style.removeProperty("user-select"),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),(0,i.removeClass)(this.viewport,h)},o.onClickHandler=function(e){this.isDragging&&(e.preventDefault(),e.stopPropagation()),this.isDragging=!1},o.onScrollByArrow=function(e,r){r.preventDefault(),r.stopPropagation(),this.scroll({viewport:this.viewport,direction:e,mouseEvent:r}),(0,i.removeClass)(this.viewport,h)},o.onScrollHandler=function(){var e=40,r=this.viewport,n=r.scrollLeft,l=!(n<=e),c=!(n+e>=r.scrollWidth-r.clientWidth);(0,i.switchClass)(this.arrowLeftArea,l,v),(0,i.switchClass)(this.arrowRightArea,c,v)},o.scroll=function(e){var r=e.viewport,n=e.value||0,l=e.direction,c=e.behavior||"smooth";if(!(!r||n===0&&!l)){var p=n;if(n===0){this.viewport.classList.remove(this.snapModeClass);for(var m=r.getBoundingClientRect(),u=l==="left",d=u?4:-4,a=d,B=40;a!==B*d;){var k=document.elementFromPoint(m[l]+a,e.mouseEvent.clientY),M=(0,f.parentBySelector)(k,".js-item");if(M){var H=M.getBoundingClientRect(),L=u?"right":"left",w=H[L]-m[L],D=u?w>=0:w<=0;if(D)break;p=w}a=a+d}}else this.viewport.classList.add(this.snapModeClass);r.scrollBy({top:0,left:p,behavior:c})}},o.toCollage=function(){(0,i.addClass)(this.root,"__collage")},o.reinitialize=function(){this.viewport.scrollLeft=0},y(s,[{key:"snapModeClass",get:function(){return"__snap-"+this.snapMode}}]),s})();g.isInstant=!0,(0,S.register)("scrollSnapPortlet",g)})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.t, __jsRegistry.by, __jsRegistry.w)||window);
__jsRegistry.kb = __globalRegistry["rK1rsww"] || (__globalRegistry["rK1rsww"] = (function(g,h,m){function u(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return o=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},o(t,e)}var f=(function(t){u(e,t);function e(){return t.apply(this,arguments)||this}var a=e.prototype;return a.resize=function(r,c,p){var s=this.isWideScreen?h.ResizeImageBehavior.MAX_CONTAINER_HEIGHT:this.contentWidth,i=(0,m.resizeImageWithoutCropInContainer)(c.width,c.height,s,this.contentWidth);return i.zoom&&(r.style.width=i.imageWidth,r.style.height=i.imageHeight),p.style.height=i.imageHeight,i},e})(h.ResizeImageBehavior);(0,g.register)("resizeSingleImage",f)})(__jsRegistry.am, __jsRegistry.jz, __jsRegistry.jy)||window);
__jsRegistry.kc = __globalRegistry["sx2ng6A"] || (__globalRegistry["sx2ng6A"] = (function(e){return{sended:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.kd = __globalRegistry["sG692CQ"] || (__globalRegistry["sG692CQ"] = (function(n,r,a,o,d){function t(e){if(e){var i=n.request(e).then(function(j){var s=j.responseText;s&&s.length!==0&&a(s)}).send();o.sended.trigger(i)}}return d.getUserId()&&r.open.attach(function(e){t(e.sidebar.getAttribute("data-state"))}),{send:t}})(__jsRegistry.bw, __jsRegistry.as, __jsRegistry.de, __jsRegistry.kc, __jsRegistry.bv)||window);
__jsRegistry.ke = __globalRegistry["fdrDUew"] || (__globalRegistry["fdrDUew"] = (function(g,E,l,k,y){var v,h,m,p;function T(e){switch(e.nodeName){case"TEXTAREA":case"SELECT":case"LABEL":return!0;case"INPUT":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return e.isContentEditable||E.hasClass(e,"fasttouchfocus")}}function w(e){var t;if((t=l.parentBySelector(e,"a"))&&t.href&&k.see(t.href).appHook)return!0;switch(e.nodeName.toLowerCase()){case"button":case"textarea":if(e.value||e.disabled)return!0;break;case"input":if((e.type==="text"||e.type==="number")&&e.value||e.type==="file"||e.disabled)return!0;break;case"label":return!e.htmlFor;case"select":case"iframe":case"video":return!0}return e.isContentEditable||l.parentBySelector(e,".nofasttouch")}function S(e){var t=Date.now(),o=0;function s(i){if(o===0){o=1;return}e.removeEventListener("click",s),Date.now()-t<300&&(i.stopPropagation(),i.preventDefault())}e.addEventListener("click",s)}function b(e){var t=e?"addEventListener":"removeEventListener";document[t]("touchstart",v),document[t]("touchmove",m),document[t]("touchend",h),document[t]("touchcancel",p)}y.create({name:"initFastTap",init:function(){var t=!1,o,s,i;v=function(a){var n=a.changedTouches[0];s=n.pageX,i=n.pageY,t=!0,o=a.timeStamp},m=function(a){if(t){var n=a.changedTouches[0],c=n.pageX,d=n.pageY;Math.sqrt(Math.pow(c-s,2)+Math.pow(d-i,2))>12&&(t=!1)}},h=function(a){if(t){t=!1;var n=a.timeStamp-o;if(n>=0&&n<=300){var c=a.target;if(!w(c)){a.preventDefault(),a.stopPropagation(),T(c)&&c.focus(),S(c);var d=1,u;try{u=new MouseEvent("click",{detail:d,view:window,bubbles:!0,cancelable:!0})}catch(r){document.createEvent&&(u=document.createEvent("UIEvents"),u.initUIEvent("click",!0,!0,window,d,r.screenX,r.screenY,r.clientX||1,r.clientY||1,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null))}if(u)var C=c.dispatchEvent(u);else c.click()}}}},p=function(a){t=!1}},update:function(){b(!0)},discard:function(){b(!1)}})})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.bt, __jsRegistry.x)||window);
__jsRegistry.kf = __globalRegistry["gxru7Jg"] || (__globalRegistry["gxru7Jg"] = (function(a,e){a.addFuncHandler("goBack",{tap:function(d){e.back()}})})(__jsRegistry.an, __jsRegistry.ft)||window);
__jsRegistry.kg = __globalRegistry["hgXk2IQ"] || (__globalRegistry["hgXk2IQ"] = (function(){var d=10;function s(){this.count=0,this.stack=[],this.dataStorage=[]}return s.prototype={addDataStorageItem:function(e,t){this.dataStorage.push({url:e,data:t})},deleteDataFromStart:function(e){for(var t=this.dataStorage,a=t.length,r=0;r<a;r++)if(t[r].url===e)return t.splice(r,1)},deleteDataFromEnd:function(e){for(var t=this.dataStorage,a=t.length;a--;)if(t[a].url===e)return t.splice(a,1)},deleteByRegex:function(e){for(var t=this.stack,a=t.length-1;a>=0;a--){var r=t[a];e.test(r)&&(t.splice(a,1),this.deleteDataFromStart(r))}},deleteForUrl:function(e){for(var t=this.stack,a=t.length-1;a>=0;a--)t[a]===e&&(t.splice(a,1),this.deleteDataFromStart(e))},push:function(e,t){var a=this.stack;a.push(e),this.addDataStorageItem(e,t),a.length===d+1&&this.deleteDataFromStart(a.shift())},replace:function(e,t){var a=this,r=a.stack,h=r[r.length-1],i=this.get(e);if(h)for(var o=r.length-1;o>=0;o--)r[o]===e&&(r[o]=t);typeof i<"u"&&(this.addDataStorageItem(t,i),this.deleteDataFromEnd(e))},get:function(e){for(var t=this.dataStorage,a=t.length;a--;){var r=t[a];if(r.url===e)return r.data}}},{create:function(){return new s}}})()||window);
__jsRegistry.kh = __globalRegistry["pPyFFDw"] || (__globalRegistry["pPyFFDw"] = (function(Ee,z,W,Q,Y,Z,$,l,ee,P,c,ae,re,te,se,w,ie,ne,D,y,M){var C=M.AJAXNAV_RENDER_MARK_START,b=M.AJAX_NAV_RENDER_MEASURE,U=z.PERFORMANCE_LEVEL2_MEASURE_API,V=1,oe=2,F;function d(){return window.location.pathname+window.location.search}function x(r,e){var a={state:r,fromCache:V===e,cancelled:!1};return l.navigating.trigger(a),a}function O(r){l.rendering.trigger({state:r})}function le(r,e){l.navigated.trigger({state:r,domLoadedTime:e})}function ce(r){l.navigationFailed.trigger({state:r})}c.programmaticBack.attach(l.programmaticBack.trigger.bind(l.programmaticBack));function J(r){var e=r.indexOf("#");return e>0?r.substr(0,e):r}function K(r){D.cancelScrollTarget(),r.name&&r.name.indexOf("horiz-only")!=-1?r.scrollIntoView(!1):r.scrollIntoView()}var i,k,L,T,n=ae.create("nav",{isDefault:!0}),f=se.create(),ue={cancelled:!0,allowDefault:!0},fe={cancelled:!0,allowDefault:!1},p=null,j={},o="",_=!1,S=!1,B,u,I=w.processing,N={computeUndo:!0,onDomParsed:function(e){var a=e.envelopes,t=w.createScroll(N);(e.samePage||e.keepScroll)&&(t.scroll=D.calc().scrollTop),a.unshift(t),S=!1},onComplete:function(e){var a=p;if(p=null,e.failed){window.location.replace(re.insertParams(e.url,{_ajaxnav:"failed"}));return}if(!S){var t=a&&a.from||G(d());e.clearCacheForUrl&&(f.deleteForUrl(e.clearCacheForUrl),t===e.clearCacheForUrl&&(t=null)),t&&f.push(t,{redo:e.undo});var s=e.state,E=document.title;_=!0,document.title=e.oldTitle,n[e.samePage?"swap":"go"](s),document.title=E,A(d());var g=window.location.hash;g&&setTimeout(function(){var h=g.substring(1),v=document.getElementsByName(h);if(v&&v[0])K(v[0]);else{var q=document.getElementById(h);q&&K(q)}},1)}var m=Date.now()-e.timestamp,R=e.postponedJs;R&&(e.postponeJs=!1,I.js.run(R)),Ae(e),le(s,m),X()},special:I},me={prepare:function(e){var a=p||y.treatAsSamePage||P.hasClass(e.target,"js-nav-same-page"),t=!a&&P.hasClass(e.target,"js-nav-refresh-page"),s=e.uri;if(U&&performance.mark(C),y.treatAsSamePage=!1,e.triggerClickEvent(),t||k.disabled||!a&&!(k.isForwardFine&&T(s))||e.isDefaultPrevented()||!a&&s.indexOf("#")!==-1&&J(window.location.href)===J(s))return ue;if(a||c.prepareForFutureStateChange(),i){if(!i.done&&i.url===s)return fe;i.abort(),i=null,u=null}var E={url:s,metaData:e.metaData},g=x(E,oe),m=e.settings,R=m&&m.keepScroll||P.hasClass(e.target,"js-nav-keep-scroll"),h=m&&m.clearCacheForUrl,v={samePage:a,keepScroll:R,clearCacheForUrl:h,url:s,state:E,oldTitle:document.title,timestamp:Date.now(),postponeJs:!0,cancelled:g.cancelled,navigationTask:g.navigationTask};return v},tuneRequest:function(e){i=e.ajaxTask,i.header("X-Nav-Kind",e.samePage?"SAME":"FORWARD"),i.header("X-Build",F),i.isSamePage=e.samePage,i.anyway(function(){i=null}),te.start(i)},avoidToken:!0,prepareProcessing:function(e){O(e.state)},fail:function(e){var a=e.ajaxTask;a.redirected||(a.xhr.getResponseHeader($.ERROR_MESSAGE_HEADER)||ie.show(),ce(e.state))},processing:N,isDefault:!0};function de(r,e){S=!0;var a={fromCache:!0};Z.processAjaxEnvelopes(N,r.redo,a),e&&f.push(e,{redo:a.undo}),c.getState().fromCache=!0}function X(){u&&(c.recoverState(u),u=null)}function A(r){o=r}function G(r){return j[r]||r}function ge(){A(d());function r(e){if(_){_=!1;return}u=e.stateToRecover;var a=G(u?e.locationKey:d());if(a===o){X();return}var t=o;A(a);var s=f.get(a);s?x(e,V).cancelled||(O(e),de(s,t)):(p={from:t},Q.go(window.location.href,B))}n.appendPipeline(r),c.stateAccounting.attach(function(e){var a=e.state;n.isActive(a)||(a.locationKey=o)}),c.stateAccounted.attach(function(e){if(!n.isActive(e.state)){var a=d();o!==a&&(f.replace(o,a),ee(j,function(t,s){t===o&&(j[s]=a)}),j[o]=a),A(a)}}),c.statePopping.attach(function(e){je();var a=e.state;if(!n.isActive(a)){var t=a.locationKey;if(t){var s={stateToRecover:a,locationKey:t};n.stamp(s),e.state=s}}})}function ve(){return!0}function pe(r){var e=L.exec(r);return e&&e.length>0}W.create({name:"ajaxNavigation",init:function(e){n.init(),!e.disabled&&e.isForwardFine&&ge(),B=Y.onLinkToAjaxEnvelope(me),F=e.build},update:function(e){k=e;var a=e.forwardFilter;a?(T=pe,L=new RegExp(a,"gi")):T=ve,F!==e.build&&ne.reload(!0)}});function je(){i&&!i.done&&(i.abort(),i=null,u=null)}function Ae(r){if(!r.fromCache&&U)try{performance.measure(b,C),performance.clearMarks(C),performance.clearMeasures(b)}catch(e){logClientEvent("perf_mark_error",[pageCtx&&pageCtx.stateId])}}var H={cache:f,isActiveState:function(){return n.isActive()}};return l.pageLinks=H,H})(__jsRegistry.kf, __jsRegistry.af, __jsRegistry.x, __jsRegistry.ea, __jsRegistry.fd, __jsRegistry.de, __jsRegistry.et, __jsRegistry.w, __jsRegistry.l, __jsRegistry.s, __jsRegistry.ft, __jsRegistry.gg, __jsRegistry.m, __jsRegistry.da, __jsRegistry.kg, __jsRegistry.dc, __jsRegistry.es, __jsRegistry.ew, __jsRegistry.bd, __jsRegistry.ev, __jsRegistry.cd)||window);
__jsRegistry.ki = __globalRegistry["gfjxswg"] || (__globalRegistry["gfjxswg"] = (function(m,t,s,c){function a(n,r){}a.prototype={go:{tap:function(r){var f=t.getState();t.statePopping.attachOnce(function(i){i.state=f;var o=r.target,e=o.form;e&&(e.okFormData=(0,c.data)(e),e.okFormData[o.name]="y"),s.goSpecific(o)},this),t.back()}}},m.register("goBackAndRefresh",a)})(__jsRegistry.am, __jsRegistry.ft, __jsRegistry.ea, __jsRegistry.fb)||window);
__jsRegistry.kj = __globalRegistry["pbFuBXQ"] || (__globalRegistry["pbFuBXQ"] = (function(v,n,m){var e=m.toolbar.height,c=8;return{shallOpenUpwards:function(r){var a=r.offsetHeight,l=r.parentNode,o=v.getTotalOffsetTop(l),t=l.offsetHeight,s=n.calc(),h=s.scrollTop,p=s.height,d=o-(t+c),f=p-t-e,i=o-h-e,u=f-i;return d>0&&a>u&&a<=i}}})(__jsRegistry.s, __jsRegistry.bd, __jsRegistry.bk)||window);
__jsRegistry.kk = __globalRegistry["tbZJ5FA"] || (__globalRegistry["tbZJ5FA"] = (function(f,d,g,s,v,m,u,j){var o="__bottom",t="__top";f.initProfileMenu=m.create({init:function(){var r;function n(e){return e.parentNode.querySelector(".list.__inner")}function i(e,a){a?u.shallOpenUpwards(e)&&(s.addClass(e,t),s.removeClass(e,o)):(s.removeClass(e,t),s.addClass(e,o))}function c(){if(r&&!r.checked){r.checked=!0;var e=n(r);e&&i(e,!1)}}d.clickEvent.attach(function(e){e.target!==r&&!s.hasClass(e.target,"tgl-lnk_off")&&c()}),document.addEventListener("change",function(e){var a=e.target;if(s.hasClass(a,"tgl-profile-menu")){r=a;var l=n(a);l&&i(l,!a.checked)}},!1),j.close.attach(c)}})})(__jsRegistry.c, __jsRegistry.dz, __jsRegistry.t, __jsRegistry.s, __jsRegistry.bd, __jsRegistry.x, __jsRegistry.kj, __jsRegistry.he)||window);
__jsRegistry.kl = __globalRegistry["ai0a7tg"] || (__globalRegistry["ai0a7tg"] = (function(u,A,i,g,o,j,C,v){var n="js-join-group",f="ic-pls",l="ic-chk_g";function c(s,e){var r=this;r.node=e,r.isProcessed=!1,r.wasJoin=!1,r.ajaxDialogDoing=g.create(e.getAttribute("data-end-point-method"),e.getAttribute("data-dialog-url"));var t=e.getElementsByTagName("a");t.length!==0&&t[0].href.indexOf("#js-dlg")!==-1&&(t[0].href=0,t[0].removeAttribute("href"))}c.prototype={joinToGroup:{tap:function(e){var r=this;if(!r.wasJoin&&!r.isProcessed){e.preventDefault();var t=r.node;r.isProcessed=!0;var a=r.ajaxDialogDoing.start({groupId:parseInt(t.getAttribute("data-group-id"),10),location:t.getAttribute("data-location")},t);a.processingTask.done||(a.dialogTask?a.dialogTask.then(p,I,r):d(r)),a.processingTask.then(S,h,r)}}}};function p(s,e){s?d(e):e.isProcessed=!1}function I(s,e){e.isProcessed=!1,!(s&&s.errorInfo&&s.errorInfo==="parseConfirmFormError")&&i.show()}function S(s,e){if(e.isProcessed=!1,s.error)m(e),s.error.code!==j.dialog.ajaxDialogDoesNotSupport&&i.show(s.error);else{s.status==="problem"&&i.show(s.problem.description);var r=e.node.querySelector("a");r.removeAttribute("href"),e.wasJoin=!0}}function h(s,e){e.isProcessed=!1,m(e);var r;s.processingError?r=s.processingError.errorInfo:s.error&&(r=s.error),i.show(r)}function d(s){var e=s.node.getElementsByClassName(n)[0];e&&(o.removeClass(e,f),o.addClass(e,l))}function m(s){var e=s.node.getElementsByClassName(n)[0];e&&(o.removeClass(e,l),o.addClass(e,f))}u.ajaxJoinToGroupInit=C.create({init:function(){v.register("joinToGroup",c)}})})(__jsRegistry.c, __jsRegistry.jk, __jsRegistry.es, __jsRegistry.jp, __jsRegistry.s, __jsRegistry.jo, __jsRegistry.x, __jsRegistry.am)||window);
__jsRegistry.km = __globalRegistry["as7MQQ"] || (__globalRegistry["as7MQQ"] = (function(_,s,m,i,E,L,I){var l=".js-ajax-join-to-chat-indicator,.base-button_content_icon",u="ic-pls",f="ic-chk_g";function g(e,t){var a=this;a.node=t,a.isProcessed=!1,a.ajaxDialogDoing=m.create(t.getAttribute("data-end-point-method"),null)}g.prototype={joinToChat:{tap:function(t){var a=this,r=a.node;if(!a.isProcessed){a.isProcessed=!0;var o=document.getElementById("field_hst"),d=o?o.checked:!1,n=document.getElementById("js-invite-data"),c=a.ajaxDialogDoing.start({chatId:parseInt(n.getAttribute("data-chat-id"),10),inviteeId:parseInt(r.getAttribute("data-invitee-id"),10),originatorId:parseInt(n.getAttribute("data-originator-id"),10),showHistory:d},r);y(a),c.processingTask.then(S,k,a)}}}};function b(e){document.getElementById("js-invite-data").setAttribute("data-chat-id",e)}function C(e){document.getElementById("js-invite-data").setAttribute("data-originator-id",e)}function S(e,t){if(t.isProcessed=!1,(e.error||e.problem)&&(v(t),s.show(e.error||e.problem.description)),e.chatId&&b(e.chatId),e.searchLink)for(var a=document.querySelectorAll("#boxPage form.search, #live-search form.search"),r=0;r<a.length;r++){var o=a[r];o.setAttribute("data-endpoint",e.searchLink)}if(e.backButtonLink){var d=document.getElementById("js-title-back");d.href=e.backButtonLink}if(e.backButtonLabel){var n=document.querySelector("#js-title-back .ic_tx");n.innerHTML=e.backButtonLabel}if(e.inviteeId)for(var c=document.querySelectorAll('.js-ajax-join-to-chat[data-invitee-id="'+e.inviteeId+'"]'),r=0;r<c.length;r++){var h=c[r],j=h.parentNode;j.removeChild(h);var A=j.querySelector(".js-invite-tick");i.removeClass(A,"dsn")}e.originatorId&&C(e.originatorId)}function k(e,t){t.isProcessed=!1,v(t);var a;e.processingError?a=e.processingError.errorInfo:e.error&&(a=e.error),s.show(a)}function y(e){var t=e.node.querySelector(l);t&&(i.removeClass(t,u),i.addClass(t,f))}function v(e){var t=e.node.querySelector(l);t&&(i.removeClass(t,f),i.addClass(t,u))}I.register("joinToChat",g)})(__jsRegistry.c, __jsRegistry.es, __jsRegistry.jp, __jsRegistry.s, __jsRegistry.ar, __jsRegistry.fv, __jsRegistry.am)||window);
__jsRegistry.kn = __globalRegistry["pTwSc5g"] || (__globalRegistry["pTwSc5g"] = (function(n,r,a,t,c){var d=a.toolbar.height;function u(e){n.set("isShowedInViewport",o(e))}function s(e){c.request(u,e)}function o(e){return(e||t.calc()).scrollTop-d<r.sidebar.getOffsetHeight()}return n.synced("inited",function(e){e&&n.addControlledField("isShowedInViewport",{get:function(){return o()},startSync:function(){t.changed.attach(s)},stopSync:function(){t.changed.detach(s)}})})})(__jsRegistry.at, __jsRegistry.az, __jsRegistry.bk, __jsRegistry.bd, __jsRegistry.aq)||window);
__jsRegistry.ko = __globalRegistry["fAfsdiw"] || (__globalRegistry["fAfsdiw"] = (function(e,o,i,r){var a="__sidebar-hided",n;function s(){e.set("isCenterPortalContentEnabled",e.get("isCenterPortalContentConfigure")&&!r.get("isShowedInViewport"))}e.onChanged("isCenterPortalContentEnabled",function(t){o.switchClass(n,t,a)}).onChanged("isCenterPortalContentConfigure",function(t){n||(n=i.getWrapper()),r.switchChanges(t,"isShowedInViewport",s),s()})})(__jsRegistry.eo, __jsRegistry.s, __jsRegistry.ax, __jsRegistry.kn)||window);
__jsRegistry.kp = __globalRegistry["tof4pwQ"] || (__globalRegistry["tof4pwQ"] = (function(o,u,v,l,m){var a=!1,c={activate:function(){o.set("enabled",!0)},deactivate:function(){o.set("enabled",!1)}},i={activate:function(){},deactivate:function(){}},n=i;function r(){var t=810,e=a&&window.innerWidth>=t?c:i;e!==n&&(n.deactivate(),n=e,e.activate())}function s(){r()}function d(t){a=t.isTwoColumnsLayout===!0,o.setPart({showToolbarMenuConfigure:a&&t.showToolbarMenu===!0,isFloatSidebarConfigure:t.isFloatSidebar===!0,isContextualColumnFloat:t.isContextualColumnFloat===!0,isCenterPortalContentConfigure:a&&t.isCenterPortalContent===!0});var e=u.resize;a?e.attach(s):e.detach(s),r()}l.create({name:"setColumnsLayout",update:d})})(__jsRegistry.eo, __jsRegistry.bd, __jsRegistry.s, __jsRegistry.x, __jsRegistry.ko)||window);
__jsRegistry.kq = __globalRegistry["snzFL1Q"] || (__globalRegistry["snzFL1Q"] = (function(o,t,n){var a="__show-short-logo",s;function r(){o.set("showToolbarMenuEnable",o.get("showToolbarMenuConfigure")&&!n.get("isShowedInViewport"))}o.onChanged("showToolbarMenuEnable",function(e){t.switchClass(s,e,a)}),o.synced("showToolbarMenuConfigure",function(e){s||(s=document.getElementsByClassName("toolbar")[0]),n.switchChanges(e,"isShowedInViewport",r),r()})})(__jsRegistry.eo, __jsRegistry.s, __jsRegistry.kn)||window);
__jsRegistry.kr = __globalRegistry["taDfKw"] || (__globalRegistry["taDfKw"] = (function(){var e=document,l={},o="video";function v(){var r={ns:o},a=e.createElement("div");a.className="vpopup";var n=e.createElement("div");n.className="mvplayer_cont mv_ajax",n.id="mvplayer_cont";var t=e.createElement("div");r.playerContainer=t,n.appendChild(t);var p=e.createElement("div");p.className="vdospinner",n.appendChild(p),a.appendChild(n);var d=e.createElement("div");r.loaderContainer=d,d.className="mvdynamic";var i=e.createElement("div");return i.className="vdospinner",d.appendChild(i),a.appendChild(d),a.okView="videoPopup",r.domRoot=a,r}return l.createVideoPopup=v,l})()||window);
__jsRegistry.ks = __globalRegistry["lHPEkw"] || (__globalRegistry["lHPEkw"] = (function(h,j,y,s,x,u,p,d,v,C){var w=document.body,r,n,i;y.register(function(e){if(s.hasClass(e.target,"js-vlayer")){var t=e.target.getAttribute("data-video"),o=t&&JSON.parse(t);o&&(L(),c(),b(o),u.content.hide())}});function c(){n&&(s.remove(i),n=null,i=null,r=null)}function l(e){var t=S(),o=i.style;o.top=Math.round(t.y)+"px",o.left=Math.round(t.x)+"px",o.width=t.width+"px";var a=document.querySelector(".mv_viewport");if(a&&n){var f=i.firstChild;m(a,f),f.okResize&&f.okResize();var g=n.playerContainer.nextSibling;g&&m(a,g)}else!a&&e&&c()}function b(e){n=j.createVideoPopup(),i=n.domRoot,i.setAttribute("data-logloc","movieLayer"+(window.pageCtx&&window.pageCtx.stateId?"/"+window.pageCtx.stateId:"")),l(),w.appendChild(i),x.embed(n.playerContainer,e),r=e,d.navigating.attachOnce(function(t){t.state.video=e})}function S(){var e=document.getElementById("mvplayer_cont")||document.getElementById("content"),t=0,o=0,a=0;return e?(t=s.getTotalOffsetTop(e),o=s.getTotalOffsetLeft(e),a=e.offsetWidth):a=document.body.clientWidth,{x:o,y:t,width:a}}var L=p.create({init:function(){d.navigated.attach(function(t){var o=t.state&&t.state.video&&t.state.video;r&&(!o||o.videoSrc!==r.videoSrc?c():i&&l(!0))}),d.rendering.attach(function(t){r&&u.content.show()}),v.changed.attach(function(){i&&l()})},update:function(){C.fixScrollRecord(),v.resetScroll()}});function m(e,t){t.style.height=e.offsetHeight+"px"}h.videoLayer=p.create({update:function(){n&&s.remove(n.loaderContainer)}})})(__jsRegistry.c, __jsRegistry.kr, __jsRegistry.ea, __jsRegistry.s, __jsRegistry.gd, __jsRegistry.ax, __jsRegistry.x, __jsRegistry.w, __jsRegistry.bd, __jsRegistry.dc)||window);
__jsRegistry.kt = __globalRegistry["v4BzYHw"] || (__globalRegistry["v4BzYHw"] = (function(y,h,m,n,P,g,s,p,M){var u={};Object.defineProperty(u,"VideoBottomMenu",{enumerable:!0,get:function(){return f}});function d(){return d=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(r[e]=o[e])}return r},d.apply(this,arguments)}var z=270,l=300,f=(function(){function r(o,e){var t=this;this.root=e,this.transitionEnd=function(){t.setTransition(0)},this.show={tap:function(){if(t.videoPlayer){t.defaultSize||(t.defaultSize=t.videoPlayer.offsetHeight),M.get("isPositionFixed")||window.scrollTo(0,0);var v=d({},t.root.dataset);if((0,n.isPortraitMode)()){var c=t.sizeCalc();t.videoPlayer.style.height=c.videoPlayer+"px",t.setTransition(l),v.bmenuHeight=c.bottomMenu}h.show(v)}}};var a=this.root.dataset.videoPlayer;a&&(this.videoPlayer=document.getElementsByClassName(a)[0],this.videoPlayer&&(this.videoPlayer.style.height=this.videoPlayer.offsetHeight+"px",s&&this.videoPlayer.addEventListener(s,this.transitionEnd),m.hide.attach(this.onHide,this),n.resize.attach(this.onResize,this))),P.rendering.attachOnce(this.removeListeners,this)}var i=r.prototype;return i.onHide=function(){this.setTransition(l),this.videoPlayer.style.height=this.defaultSize+"px"},i.removeListeners=function(){this.videoPlayer&&(s&&this.videoPlayer.removeEventListener(s,this.transitionEnd),m.hide.detach(this.onHide,this),n.resize.detach(this.onResize,this))},i.setTransition=function(e){s&&(this.videoPlayer.style[g.transition]=e>0?"height "+e+"ms ease":"")},i.onResize=function(){(0,n.isPortraitMode)()||h.close();var e=this.sizeCalc();this.videoPlayer.style.height=e.videoPlayer+"px",this.setTransition(l),h.setHeight(e.bottomMenu)},i.sizeCalc=function(){var e=Math.min(Math.round(this.videoPlayer.offsetWidth*.5625),z),t=p.VISUAL_VIEWPORT_API?Math.round(window.visualViewport.height*window.visualViewport.scale):window.innerHeight,a=t-(this.videoPlayer.getBoundingClientRect().top+e);return{videoPlayer:e,bottomMenu:a}},r})();return(0,y.register)("videoBottomMenu",f),u})(__jsRegistry.am, __jsRegistry.fi, __jsRegistry.ff, __jsRegistry.bd, __jsRegistry.w, __jsRegistry.au, __jsRegistry.ao, __jsRegistry.af, __jsRegistry.ac)||window);
__jsRegistry.ku = __globalRegistry["bsHZaNQ"] || (__globalRegistry["bsHZaNQ"] = (function(n){return{setDisabled:function(e,t){e.disabled=t,t?e.setAttribute("disabled","true"):e.removeAttribute("disabled"),n.switchClass(e,t,"__dis")},changeLabel:function(e,t){var s=e.getElementsByClassName("base-button_content_text")[0];s&&(s.innerHTML=t)}}})(__jsRegistry.s)||window);
__jsRegistry.kv = __globalRegistry["cSm7dsg"] || (__globalRegistry["cSm7dsg"] = (function(i){return{get:function(t){var e=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n=e.boxSizing;return n||i(["webkit","O"],function(o){var r=o+"BoxSizing";if(r in e)return e[r]})}}})(__jsRegistry.k)||window);
__jsRegistry.kw = __globalRegistry["eihO5zA"] || (__globalRegistry["eihO5zA"] = (function(c,g,f,H,S){var h=1.25,l="data-max-height",s="data-max-rows",t="ok-areaHeightChanged";function u(e){if(v(e),!e.okAreaExpand){e.okAreaExpand=!0;var n=e._ok_onresize=function(){a(e)},o=e._ok_oninput=function(r){a(r.target)};S.attachUntilRendering(f.resize,n),e.addEventListener("input",o,!1)}requestAnimationFrame(e._ok_onresize)}function a(e){var n=e.style,o=n.height;n.height="";var i=e.scrollHeight;if(i!==e.okAreaYScroll){e.okAreaYScroll=i;var r,k,E,T=i-e.clientHeight,A=e.offsetHeight-e.okAreaOuterSpace+T,p=e.okAreaInnerSpace,d=A;(k=e.getAttribute(s))?(r=parseInt(k,10)*e.okAreaLineHeight+p,A>r&&(d=r)):(E=e.getAttribute(l))&&(r=parseInt(E,10)+p,A>r&&(d=r));var _={height:d,rows:(i-p)/e.okAreaLineHeight},O=e.dispatchEvent(new CustomEvent(t,{detail:_}));e.okAreaData=_,O&&(n.height=d+"px")}else n.height=o}function m(e){delete e.okAreaOriginalSize,delete e.okAreaOuterSpace,delete e.okAreaInnerSpace,delete e.okAreaYScroll,delete e.okAreaExpand,delete e.okAreaData,e.removeEventListener("input",e._ok_oninput),f.resize.detach(e._ok_onresize),delete e._ok_oninput,delete e._ok_onresize}function v(e){var n=window.getComputedStyle(e),o=e.value;if(e.value="",e.okAreaOriginalSize=e.offsetHeight,e.okAreaOuterSpace=0,e.okAreaInnerSpace=0,e.okAreaYScroll=e.scrollHeight,H.get(e)==="border-box"?e.okAreaInnerSpace=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10):e.okAreaOuterSpace=e.okAreaOriginalSize-parseInt(n.height,10),e.getAttribute(s)){var i=n.lineHeight;i==="normal"?i=parseInt(n.fontSize,10)*h:i=parseFloat(i),e.okAreaLineHeight=Math.round(i)}e.value=o}return c.expandTextAreas=function(){g(document.querySelectorAll("textarea.xpnd"),u)},c.expandTextArea=u,{setMaxRows:function(n,o){typeof o>"u"?n.removeAttribute(s):n.setAttribute(s,o)},setMaxHeight:function(n,o){typeof o>"u"?n.removeAttribute(l):n.setAttribute(l,o)},expand:u,cancelExpand:m,update:v,data:function(n){var o=n.okAreaData;if(n.okAreaExpand&&o)return o},HEIGHT_CHANGED_EVENT_NAME:t}})(__jsRegistry.c, __jsRegistry.k, __jsRegistry.bd, __jsRegistry.kv, __jsRegistry.w)||window);
__jsRegistry.kx = __globalRegistry["cnQuDyw"] || (__globalRegistry["cnQuDyw"] = (function(f,o,c,m,v,h){function n(t,e){this.domRoot=e;var r=e.querySelector('input[type="checkbox"]:checked');if(r!=null)u(e,r);else{var l=e.querySelector('[hierarchy-parent=""]'),i=l.querySelector("input[type=checkbox]");d(e,i),i.checked=!0}c.removeClass(e,"dsn"),this.toPublic=document.getElementById("field_toPublic")}n.prototype={any:{change:function(e){var r=e.target,l=this.domRoot,i=r.id;if(r.checked)i=="field_toprivate"&&o(l.querySelectorAll("input[type=checkbox]"),function(s){s.id!="field_toprivate"&&(s.checked=!1)}),u(l,r);else{if(i=="field_toPublic"&&p(this))return;var a=l.querySelectorAll("[hierarchy-parent="+i+"]");if(o(a,function(s){c.removeClass(s,"dsn")}),a.length==1){var y=a.item(0).querySelector("input[type=checkbox]");y.checked=!0}}}}},n.isInstant=!0,h.register("collapsingCheckboxes",n);function p(t){return t.toPublic.checked}function u(t,e){var r=e.id;o(t.querySelectorAll("[hierarchy-parent="+r+"]"),function(l){var i=l.querySelector("input[type=checkbox]");c.addClass(l,"dsn"),i.checked=!1,d(t,i)})}function d(t,e){var r=t.querySelectorAll("[hierarchy-parent="+e.id+"]");r.length>0&&o(r,function(){u(t,e)})}})(__jsRegistry.c, __jsRegistry.k, __jsRegistry.s, __jsRegistry.t, __jsRegistry.w, __jsRegistry.am)||window);
__jsRegistry.ky = __globalRegistry["rpuSqlQ"] || (__globalRegistry["rpuSqlQ"] = (function(i,t,u){var e=".js-rgs";function r(s){this.type=s.type,this.group=s.group}r.prototype={any:{change:function(){var c=this.type,o=this.group,h=o?e+"[data-rgs-group="+o+"]":e;i(document.querySelectorAll(h),function(a){var n=t.hasClass(a,"__"+c);t.switchClass(a,!n,"dsn")})}}},r.isInstant=!0,u.register("radioGroupSwitcher",r)})(__jsRegistry.k, __jsRegistry.s, __jsRegistry.am)||window);
__jsRegistry.kz = __globalRegistry["peGQvug"] || (__globalRegistry["peGQvug"] = (function(e){var i;return{processFormControls:e.create(),extractSubmitCandidate:e.create(),beforeNavigation:e.create(),checkDynamicFormInputs:e.create(),fastPostingInitiated:e.create(),fastPostingDone:e.create(),fastPostingSucceed:e.create(),stickerSent:e.create(),contentRemoved:e.create(),postingFormRelayout:e.create(),filesSelected:e.create(),photosStartUpload:e.create(),photosUploadLimitReached:e.create(),photosUploadLimitCleared:e.create(),photosCleared:e.create(),clearForm:e.create(),cancelUpload:e.create(),config:i,updateConfig:function(a){this.config=i=a}}})(__jsRegistry.u)||window);
__jsRegistry.la = __globalRegistry["adCtrfA"] || (__globalRegistry["adCtrfA"] = (function(o,Q,c,s,m,Y,H,Z,fe,v,$,M,g,L,K,G,U,ee){var R,C=".post-message",N="#cmntMsg, #umsg, .js-app-message-buttons",te="POST",re="textarea",ae="highlight",P="ld";function u(){return window.pageCtx||{}}function F(r){if(r){var t=r.okAreaOriginalSize;return t!=null&&(r.style.height=t+"px"),$.expand(r)}}function A(r){var t;typeof r=="string"?t=document.querySelector(r):t=r,t&&t.scrollIntoView()}function O(){document.getElementById("cmntMsg")&&A(document.getElementById("ta-emul")||document.getElementById("field_msg")),F(document.querySelector(".uform textarea.xpnd"))}function ne(r){var t=u().focusOnSubmit,e=r.form,a,S,X,D;if(R||e.okAvoidAjax)return!1;g.fastPostingInitiated.trigger(),R=!0,e=m.parentBySelector(e,"form"),a=e.action,S=e.method||te,X=Y.data(e),s.addClass(e,P);var T=Z.request(a,S,X),q=m.parentBySelector(e,".dlist");q&&!s.hasClass(q,"js-complete-bot")&&!s.hasClass(q,"js-no-redirect")&&T.header("X-Redirect-Required","1");var V;if(o.messaging){document.querySelector("#chat-pager-bottom .js-load-more-bot")&&T.header("X-Has-More-Read","1");var x=c.getScrollContainer();x&&(V=x.scrollHeight-x.scrollTop-x.clientHeight)}function ue(j){o.GlobalErrorNotification&&o.GlobalErrorNotification.hide(),j.getResponseHeader(G.ERROR_MESSAGE_HEADER)!=null,D=j.getResponseHeader("X-Gif-Attach-Stop")=="1",U(this.response(),{onEnvelope:function(d,l,h,y){l==="append"&&setTimeout(function(){var E=document.querySelector("#messages-pager-bottom, #comments-pager-bottom .pager"),f=o.messaging;y&&s.addClass(y,ae),t&&A(C),E&&!s.hasClass(__js_temp_htmlTag,"dscs")?A(E):f&&f.config&&!f.config().pushSendHintEnabled&&f.scrollDown()},1)},onComplete:function(){var d=document.querySelector([C," ",re].join("")),l=d?d.form.elements:[],h=l.field_edit,y=h?h.value:void 0,E=l.field_rpl?l.field_rpl.value:void 0,f=o.messaging;F(d),g.fastPostingDone.trigger();var z=document.getElementById("fscaid");if(!(z&&z.childNodes.length||D)){if(o.runBubbleCollapse&&o.runBubbleCollapse(!0),g.fastPostingSucceed.trigger({scrollBeforeSend:V}),y==="on"){var k=l.field_msgInx;k||(k=l.field_cmntIdKey);var W=document.getElementById("ta-emul");W?o.editMessageWithSmiles(W):d.parentNode.className="uform_i",k&&(h.value="off");var J=l.field_ofc;J&&(J.disabled=!1)}else if(f&&E){var w=e.querySelector(".reply");w&&!w.querySelector(".ic-err")&&s.clear(w),l.field_rpl.value="off",l.field_cmntIdKey.value=""}if(d&&(d.value=""),f&&L.iOS){var _=c.find.messagesList(!0);_&&_.childNodes.length&&_.lastChild.querySelector(".attach_ph, .attach_ph-single")&&s.addClass(_.lastChild,"__js-last-attached")}}}})}function de(){var j=this.xhr.getResponseHeader(G.ERROR_MESSAGE_HEADER);j&&j.length&&(e.setAttribute("data-submitted",""),g.fastPostingDone.trigger()),H(document.querySelectorAll(C),function(B){s.removeClass(B,P)}),R=!1,Q.finished.trigger(e)}return T.then(ue).anyway(de).withToken().send(),!0}function I(r){if(r.form&&m.parentBySelector(r.form,N))return ne(r)}function se(){M.register(I),H(document.querySelectorAll(N),function(r){var t=r.querySelector('input[type="submit"]');t&&(t.disabled=!1)})}function ie(){M.revoke(I),u().ajaxPost&&se()}var p=document.getElementById("ta-emul")||!1,i,b,n;ee.create({name:"initAjaxPost",init:function(){v.onLinkToAjaxEnvelope({selector:".rpl",prepare:function(){i=p?c.find.textarea(!0):document.querySelector(".uform textarea"),b=i&&i.value},processing:{onComplete:function(){if(u().ajaxReply){var e=p?c.find.textarea(!0):document.querySelector(".uform textarea");e&&(e.focus(),e.value=b,O())}}}}),v.onLinkToAjaxEnvelope({selector:".edt",prepare:function(e){if(u().ajaxEdit){var a=e.target;p&&(i=c.find.textarea(!0)),i&&le(a,".a-menu")&&i.focus()}},processing:{onComplete:function(){u().ajaxEdit&&(O(),K.close.trigger(),i&&(g.processFormControls.trigger({textInput:i}),p&&(L.winphone||oe(i),i.focus())))}}}),v.onLinkToAjaxEnvelope({selector:".js-rexp-link",prepare:function(e){var a=e.target;a&&(n=m.parentBySelector(a,".discus_list_w, .discus_dialogs_i"))},tuneRequest:function(e){n&&u().ajaxReplyExpand&&(e.ajaxTask.header("X-Original-Comment",n.id),s.addClass(n,"ld"))},processing:{onComplete:function(e){if(n&&u().ajaxReplyExpand){var a=e.ajaxTask.xhr.getResponseHeader("has-attachment-class");if(a&&o.messaging){var S=n.querySelector(".discus_list_i");S.className+=" "+a,(a.indexOf("_vid")!=-1||a.indexOf("_au")!=-1)&&c.messageLoaded.trigger()}s.removeClass(n,"ld")}}}}),v.onLinkToAjaxEnvelope({selector:".js-rvrt-link",prepare:function(e){var a=e.target;a&&o.messaging&&(n=m.parentBySelector(a,".discus_list_w"))},tuneRequest:function(e){n&&u().ajaxReplyExpand&&e.ajaxTask.header("X-Original-Comment",n.id)},processing:{onComplete:function(){if(n&&u().ajaxReplyExpand){var e=n.querySelector(".discus_list_i");s.removeClass(e,"attach_ph")}}}})},update:function(){p=document.getElementById("ta-emul")||!1,ie()},discard:function(){i=b=n=null}});function oe(r){var t=window.getSelection(),e=r.lastChild;if(t.rangeCount>0&&e){var a=t.getRangeAt(0);a.setStartAfter(e),t.removeAllRanges(),t.addRange(a.cloneRange())}}function le(r,t){return r.querySelector(t)!=null}})(__jsRegistry.c, __jsRegistry.w, __jsRegistry.fv, __jsRegistry.s, __jsRegistry.t, __jsRegistry.fb, __jsRegistry.k, __jsRegistry.bw, __jsRegistry.gz, __jsRegistry.fd, __jsRegistry.kw, __jsRegistry.ea, __jsRegistry.kz, __jsRegistry.ak, __jsRegistry.he, __jsRegistry.et, __jsRegistry.de, __jsRegistry.x)||window);
__jsRegistry.lb = __globalRegistry["ezJLMJQ"] || (__globalRegistry["ezJLMJQ"] = (function(n,i){n.specialEnvelopes.cleanNavigationCache={parseDomNode:function(e,o){o.regex=e.innerHTML||".+"},run:function(e){i.cache.deleteByRegex(new RegExp(e.regex,"gi"))}}})(__jsRegistry.fh, __jsRegistry.kh)||window);
__jsRegistry.lc = __globalRegistry["fPF1wQ"] || (__globalRegistry["fPF1wQ"] = (function(y,A,s,D,F,z,K,I,Q,T,q,W,oe,N,O,Y,Z,w,H){var B=!1,U="form.js-submit,.js-submit form",C,P=H.create();function M(i){var t=i.tagName;return(t==="INPUT"||t==="BUTTON")&&i.type==="submit"}function ee(i){var t=i.elements||[],r=t.length,o,f,h=0;for(f=0;f<r;f++)if(o=t[f],M(o)&&++h>1)return!0;return!1}y.enableAjaxFormSubmit=Q.create({init:function(t){var r="ld",o="js-collapsed",f="js-collapsed-heights",h=y.transitionEndEvent,u=h&&t.animationEnabled,v,x=t.clickDelayTime;u&&(document.addEventListener(h,function(a){var e=a.target;s.hasClass(e,o)&&s.remove(e)}),v=function(e,G,l){if(l){var n=document.createElement("div"),b=n.style,_=l.parentNode,d;P.trigger(l),n.className="js-holder",_&&_.insertBefore(n,l),n.appendChild(l),d=n.offsetHeight;var m=l.getAttribute("data-hide-style"),g=l.getAttribute("data-ajax-content-id"),c;if(g&&(c=document.getElementById(g)),m==="heights-merge"&&c){var p=c.offsetHeight,j,S;d>p?(j=d,S=p):(j=p,S=d),b.opacity=1,b.height=j+"px",n._addedAjaxContent=c,setTimeout(function(){s.addClass(n,f),b.height=S+"px",setTimeout(function(){s.remove(n),s.removeClass(n._addedAjaxContent,"__hided"),n._addedAjaxContent=null},650)},0)}else b.height=d+"px",setTimeout(function(){s.addClass(n,o)},0);return!1}return!0}),K.clickEvent.attach(function(a){var e=a.target;M(e)&&(e.form.okSubmitSender=e)}),document.body.addEventListener("submit",function(a){var e=a.target;if(A.matches(e,U)){var G=function(E){var V=E.getAttribute("data-tm"),$=parseInt(V,10)||0;$>k&&(k=$)},l=function(){var E=this.xhr;E&&E.getResponseHeader("X-Modal")==="1"?T.show({url:location.href,contentHtml:this.response()}):q(this.response(),{onBeforeRemove:v,onComplete:function(){T.close()},special:W.specialEnvelopes})},n=function(){this.redirected?this.response()&&l.call(this):O.show()},b=function(){setTimeout(function(){s.removeClass(g,r)},300),e.isSubmitting=!1,e.okFormRequestData=null,F.finished.trigger(e)},_=e.getAttribute("data-click-delay")||x;if(N.submitAllowed(e,_))N.updateLastClick(e);else return a.stopPropagation(),a.preventDefault(),!1;var d=e.getAttribute("data-entity");if(d&&document.querySelectorAll('*[data-entity="'+d+'"]').length>1)return!0;var m=e.okSubmitSender||e.okSubmitBtn,g=e,c=e.okFormData||{},p=e.okFormRequestData||{};if(m){if(!s.hasClass(m,"js-axb")&&ee(e))return!0;c[m.name]=m.value;var j=A.next(m);if(!j||!s.hasClass(j,"ldn")){var S=document.createElement("span");S.className="ldn",m.parentNode.insertBefore(S,j)}g=m.form,s.addClass(g,r)}e.isSubmitting=!0,s.preventDefault(a);var se=e.action,ne=e.method||"POST",k=0;D(document.querySelectorAll(".notify"),G),e.okFormData||(c=Z.data(e)),k>0&&(c["ds.lstTime"]=k);var X=I.request(se,ne,c).then(l,n).anyway(b).withToken(),R=p.headers;if(R)for(var J in R)X.header(J,R[J]);X.send()}},!1)}}),y.processPopUpTextArea=function(i){var t=i.value.replace(/^\s+|\s+$/g,"").length,r=document.querySelector(".dialog_action_button.__main"),o=document.querySelector(".modern-dialog_button .base-button.__accept input");r&&s.switchClass(r,!t,"dis"),o&&w.setDisabled(o,!t)},y.ajaxifyPopupSubmit=function(i){var t=i.target,r,o={};if(B||!t)return;B=!0,A.matches(t,"form")||(t=A.parentBySelector(t,"form")),r=t.action,D(t.querySelectorAll("input,textarea"),function(u){var v;u.type=="radio"&&!u.checked||(u.type=="checkbox"?v=u.checked?"on":"off":v=u.value,o[u.name]=v)}),s.addClass(t,"ld");function f(){q(this.response(),{onComplete:function(){T.close(),Y.recalculateStubs()},onBeforeRemove:function(v,x,a){z.contentRemoved.trigger({index:v,content:x,container:a})}})}function h(){s.removeClass(t,"ld"),B=!1,F.finished.trigger(t),C=null}C=I.request(r,"post",o),C.then(f,te).anyway(h).withToken().send(),s.preventDefault(i)};function te(){C&&C.redirected||O.show()}return{feedRemove:P}})(__jsRegistry.c, __jsRegistry.t, __jsRegistry.s, __jsRegistry.k, __jsRegistry.w, __jsRegistry.kz, __jsRegistry.dz, __jsRegistry.bw, __jsRegistry.x, __jsRegistry.gh, __jsRegistry.de, __jsRegistry.fh, __jsRegistry.lb, __jsRegistry.gw, __jsRegistry.es, __jsRegistry.hb, __jsRegistry.fb, __jsRegistry.ku, __jsRegistry.u)||window);
__jsRegistry.ld = __globalRegistry["ioJPhPQ"] || (__globalRegistry["ioJPhPQ"] = (function(o,i,n,r,u){var t;o.ie?(t=function(){var s=document.querySelectorAll('textarea, input[type="text"]'),l;l=function(e){e.value===e.placeholder&&(e.value="")},n(s,function(a){l(a),r(a,"click",function(e){l(e.target)})})},i.navigated.attach(t)):t=function(){},u.fixIEInputPlaceholder=t})(__jsRegistry.ak, __jsRegistry.w, __jsRegistry.k, __jsRegistry.o, __jsRegistry.c)||window);
__jsRegistry.le = __globalRegistry["a6igMvw"] || (__globalRegistry["a6igMvw"] = (function(o,r){o.disableAttach=function(s){var e=document.getElementById("att-act"),a;e&&(a=(s.value||"").replace(/^\s+/,"").replace(/\s+$/,""),a.length?(r.setDisabled(e,!0),e.onclick=function(t){return t.preventDefault(),!1}):(r.setDisabled(e,!1),e.onclick=null))};var n="data-post-url",l="st.ofc";o.updateUploadButtonLink=function(){var s=document.getElementById("att-act"),e=document.getElementById("field_ofc");if(e&&s&&!s.disabled){var a=e.checked?"on":"off",t=s.getAttribute(n);t.search(l)==-1?t+="&"+l+"="+a:t=t.replace(new RegExp(l+"=[a-zA-Z]*"),l+"="+a),s.setAttribute(n,t)}}})(__jsRegistry.c, __jsRegistry.ku, __jsRegistry.kw, __jsRegistry.kx, __jsRegistry.ky, __jsRegistry.la, __jsRegistry.lc, __jsRegistry.ld)||window);
__jsRegistry.lf = __globalRegistry["ukAetYA"] || (__globalRegistry["ukAetYA"] = (function(s,j,V,C,D,H,Y,p,b,J,Z,M,N,R){var g=D.default;b.ready(function(){g("upload",document.getElementsByClassName("js-upload-form"),function(t){p.delegate(t,"change",".js-upload-file-input",function(e){s.addClass(e.target.form,"js-val-selected")})})});function v(t){return t.form||j.parentBySelector(t,"form")}function c(t){if(t.type=="file")return t;var e=t.getAttribute("data-entry-for");if(e)return document.getElementById(e);var a=v(t);return a&&a.querySelector(".js-sm-upload-file-input")}function S(t){var e=c(t),a=e&&e.value;return a&&a.length>0}function z(t,e){s.preventDefault(t),t.stopPropagation&&t.stopPropagation();var a=c(e);a.focus(),a.click()}function A(t){var e=document.querySelector(".js-dyn-edit");if(q(e,v(t))){var a=document.querySelector(".js-dyn-edit-form");if(a){var i=document.createElement("input");i.type="hidden",i.value=e.value,i.name=e.name,a.appendChild(i)}}}function G(t,e){S(e)||z(t,e)}function K(t,e){var a=v(e);a&&s.toggleClass(a,"js-toggled-"+e.getAttribute("data-toggle-key")),s.preventDefault(t)}var k="js-dyn-edit-submit",E="js-sm-submit-btn",x="js-toggle-btn",Q=[".",k,", .",E,", .",x].join("");V.clickEvent.attach(function(t){var e=j.parentBySelector(t.target,Q);if(e){if(s.hasClass(e,k)){var a=e.getElementsByClassName("attach-notification")[0];if(a)if(s.hasClass(a,"dsn"))A(e);else{N.smilePanelClose.trigger(),s.preventDefault(t);return}else A(e)}s.hasClass(e,E)&&G(t,e),s.hasClass(e,x)&&K(t,e)}});function q(t,e){return t&&(t.getAttribute("data-post-alw")||t.value!=t.getAttribute("data-orig"))||s.hasClass(e,"post-message")||s.hasClass(e,"js-setup-topic")}p.delegate(document,"change",".js-sm-upload-file-input",function(t){var e=t.target;function a(){if(s.addClass(u,"ld"),s.hasClass(u,"js-secondary-form")||s.addClass(document.body,"js-sm-upldng"),q(r,u)){var l=function(m){if(n.multipleUploadEnabled||n.singleAjaxUpload){var T=M.getOrMakeBehavior(r);n.singleAjaxUpload?T.uploadPhoto(c(e).files[0],m):n.multipleUploadEnabled&&T.multiUploadPhoto(c(e),m)}else{var y=m&&m.upload_url,L=typeof y=="string"?y:y[0];L&&(u.action=L,u.enctype="multipart/form-data"),i()}},d=function(){setTimeout(i,0),logClientEvent("ajax.topic.update.fail")};r.disabled=!0;var n={};if(C(document.querySelectorAll(".js-ajax-input"),function(o){o.type=="radio"?o.checked&&(n[o.name]=o.value):n[o.name]=o.checked?"checked":o.value}),s.hasClass(u,"post-message")){var _=j.parentBySelector(r,".dlist");_&&s.addClass(_,"js-complete-bot");var P=document.getElementById("field_msg");P&&(P.disabled=!0);var X=document.querySelector(".js-sm-prgrs");X.scrollIntoView();var O=document.getElementById("ta-emul");O&&!document.getElementById("msg_attach_lst")&&(O.contenteditable=!1)}var h=c(e);n.photoCount=h.files.length,n.multipleUploadEnabled=h.multiple,n.singleAjaxUpload=h.getAttribute("singleAjaxUpload"),H.request(r.getAttribute("data-post-url"),"POST",n).then(l,d).withToken().send()}else setTimeout(i,0)}function i(){var l=e.form;(s.hasClass(l,"post-message")||s.hasClass(l,"js-setup-topic"))&&(l.okAvoidAjax=!0),(!l.okHandleSubmit||l.okHandleSubmit())&&l.submit()}if(S(e)){var u=e.form,r=null;C(u.querySelectorAll(".js-dyn-edit"),function(l){var d=l.getAttribute("data-entry-for");d?d==e.id&&(r=l):r=l}),r=r||document.querySelector(".js-dyn-edit");var B=u.getAttribute("data-size-restrictions");if(B){var w=c(e),W=URL.createObjectURL(w.files[0]),f=new Image;f.onload=function(){var l=JSON.parse(B);l.min.w>f.width||l.min.h>f.height||l.max.w<f.width||l.max.h<f.height?(R.show(l.dimensionViolationLabel,1e4),w.value=""):a()},f.src=W}else a()}}),J.domLoaded.then(function(){b.ready(function(){g("upload-file",document.querySelectorAll(".js-upload-file-input"),function(t){var e=t.value;if(e&&e.length>0){var a=document.querySelector(".js-upload-form");a&&s.addClass(a,"js-val-selected")}}),g("upload-orig-data",document.querySelectorAll(".js-dyn-edit"),function(t){t.setAttribute("data-orig",t.value)})})})})(__jsRegistry.s, __jsRegistry.t, __jsRegistry.dz, __jsRegistry.k, __jsRegistry.er, __jsRegistry.fm, __jsRegistry.m, __jsRegistry.gz, __jsRegistry.w, __jsRegistry.p, __jsRegistry.bw, __jsRegistry.am, __jsRegistry.fv, __jsRegistry.es)||window);
__jsRegistry.lg = __globalRegistry["fGTY1CQ"] || (__globalRegistry["fGTY1CQ"] = (function(z,p,u,m,S){var T={};Object.defineProperty(T,"create",{enumerable:!0,get:function(){return L}});function w(c,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(c,e.key,e)}}function C(c,n,o){return n&&w(c.prototype,n),c}function f(c,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](c):c instanceof n}var g="at-edge",b="data",D=250,I=1200,O=500,v="horizontal",y=z.isScrollable,k=(function(){function c(o,e){var t=this;this.checkEdge=this.checkEdge.bind(this),this.onCheckEdgeTimeout=this.onCheckEdgeTimeout.bind(this),this.onResize=this.onResize.bind(this),this.updateDimensions=this.updateDimensions.bind(this),this.onInnerScroll=this.onInnerScroll.bind(this),this.processUpdateDimensions=this.processUpdateDimensions.bind(this);var r=this.findScrollableAncestor(o);this.onScroll=(function(){var i=null,s=Date.now();return function(){if(i){if(Date.now()-s>I)return;clearTimeout(i)}else s=Date.now();i=setTimeout(function(){t.onInnerScroll(),i=null},D)}})(),this.options=e||{},this.element=o,this.listeners={},this.checkTimeoutId=null,this.scrollContainer=r,this.finishInitialization()}var n=c.prototype;return n.destructor=function(){m.resize.detach(this.onResize),this.listenToViewport?m.changed.detach(this.onScroll):this.scrollContainer.removeEventListener("scroll",this.onScroll)},n.on=function(e,t,r){var i=this;this.listeners[e]=function(s){typeof t=="string"&&r&&(t=r[t]);var l=[s.type,i],h=s.args;if(h&&h.length)for(var d=h.length,a=0;a<d;a++)l.push(h[a]);u.isFunction(t)&&t.apply(i,l)}},n.off=function(e){this.listeners[e]=function(){}},n.fire=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];e in this.listeners&&this.listeners[e].apply(this,[{type:e,args:r}])},n.getScrollPosition=function(){return this.currentScrollPos()},n.getViewportSize=function(){return this.viewportSize},n.findScrollableAncestor=function(e){for(var t=e.parentNode,r=e.ownerDocument;this.isOrdinaryElement(t)&&!(!p.hasClass(t,"wrapper")&&y(t));)t=t.parentNode;return this.isTopLevelElement(t,r)?window:t},n.isOrdinaryElement=function(e){return e&&e!==window&&e!==document},n.isTopLevelElement=function(e,t){return e===null||e===t||e===t.body},n.updateDimensions=function(){this.options.direction===v?this.offset=p.getTotalOffsetLeft(this.element):this.offset=p.getTotalOffsetTop(this.element),this.updateOuterSize(),this.viewportSize=this.currentViewportSize(),this.fire("update-dimensions",this.element)},n.updateOuterSize=function(){this.outerSize=this.currentElementOuterSize()},n.insertFragment=function(e,t,r){for(var i=window.document.createDocumentFragment();e.firstChild;)i.appendChild(e.firstChild);var s=this.element,l=(0,S.start)().then(function(){t?s.appendChild(i):s.insertBefore(i,s.firstChild)});this.processUpdateDimensions(t,r,l)},n.processUpdateDimensions=function(e,t,r){var i=this;r||(r=(0,S.start)());function s(){u.isFunction(t)&&t(),i.updateDimensions()}if(e)r.resolve(),setTimeout(s,17);else{var l=function(){if(i.updateDimensions(),!(Math.abs(d-i.outerSize)<5)){d=i.outerSize;var E=d-h;a.scrollBy?a.scrollBy(0,E):f(a,Element)&&(a.scrollTop+=E)}},h=i.currentElementOuterSize(),d=0,a=i.scrollContainer;r.resolve(),s(),setTimeout(l,0)}},n.onResize=function(){setTimeout(this.updateDimensions,25)},n.finishInitialization=function(){var e=this;this.isHorizontal?(this.currentScrollPos=function(){return f(e.scrollContainer,Element)&&e.scrollContainer.scrollLeft||0},this.currentViewportSize=function(){return f(e.scrollContainer,Element)?e.scrollContainer.clientWidth:0},this.currentElementOuterSize=function(){return e.element.offsetWidth||0}):(this.currentScrollPos=function(){return f(e.scrollContainer,Window)?e.scrollContainer.pageYOffset||0:e.scrollContainer.scrollTop||0},this.currentViewportSize=function(){return f(e.scrollContainer,Window)?e.scrollContainer.innerHeight:e.scrollContainer.clientHeight},this.currentElementOuterSize=function(){return e.element.offsetHeight||0}),this.lastScrollPos=this.currentScrollPos(),this.listenToViewport?m.changed.attach(this.onScroll):this.scrollContainer.addEventListener("scroll",this.onScroll),this.on(b,"onData",this),this.updateDimensions(),m.resize.attach(this.onResize),u.isFunction(this.options.onInit)&&this.options.onInit(this)},n.onData=function(e,t,r,i){this.addData(r,i)},n.onInnerScroll=function(){var e=this.options;e.dynamicHeight&&this.updateOuterSize();var t=this.outerSize,r=this.offset,i=this.currentScrollPos(),s=u.isFunction(e.bottomThreshold)?e.bottomThreshold(i,this.viewportSize,r,t):r+t,l=u.isFunction(e.topThreshold)?e.topThreshold(i,this.viewportSize,r,t):0;this.checkTop(i,l),this.checkBottom(i,r,s),this.lastScrollPos=i,this.fire("scroll",i,this.viewportSize,this.outerSize)},n.checkBottom=function(e,t,r){e+t+this.viewportSize>=r&&e>=this.lastScrollPos&&(e>0||e===this.lastScrollPos)&&this.fire(g,!0)},n.checkTop=function(e,t){e<=t&&e<=this.lastScrollPos&&this.fire(g,!1)},n.checkEdge=function(e){return e?this.onInnerScroll():this.checkTimeoutId===null&&(this.checkTimeoutId=setTimeout(this.onCheckEdgeTimeout,O)),this},n.addData=function(e,t,r){var i=this,s=window.document.createElement("div");if(typeof e=="string")s.innerHTML=e;else if(Array.isArray(e))for(var l=0;l<e.length;l++)s.appendChild(e[l]);else s.appendChild(e);this.options.direction===v?this.loadResources(s,function(){i.insertFragment(s,t,r)}):this.insertFragment(s,t,r)},n.loadResources=function(e,t){var r=e.getElementsByTagName("img"),i=r.length,s=0;if(i>0)for(var l=0;l<i;l++){var h=r[l];h.complete||(s++,h.onload=h.onerror=function(){s--,s===0&&t()})}s||t()},n.onCheckEdgeTimeout=function(){this.checkTimeoutId=null,this.onInnerScroll()},C(c,[{key:"listenToViewport",get:function(){return this.scrollContainer===window}},{key:"isHorizontal",get:function(){return this.options.direction===v}}]),c})();function L(c,n){return new k(c,n)}return T})(__jsRegistry.df, __jsRegistry.s, __jsRegistry.d, __jsRegistry.bd, __jsRegistry.n)||window);
__jsRegistry.lh = __globalRegistry["dH4H79w"] || (__globalRegistry["dH4H79w"] = (function(){return function(n){var r="okData";return n[r]||(n[r]={})}})()||window);
__jsRegistry.li = __globalRegistry["fqhCXag"] || (__globalRegistry["fqhCXag"] = (function(){var c,h=n.prototype;function n(t){var e=this;e._tailFetchesLeft=t.autoFetchCount!==c?t.autoFetchCount:3,e._headFetchesLeft=t.headFetchCount!==c?t.headFetchCount:3,e._initialRepeatedFetches=t.repeatedFetchCount!==c?t.repeatedFetchCount:0,e._repeatedFetchesLeft=e._initialRepeatedFetches,e._repeatedFetching=!1}return h.reset=function(t){var e=this;t?e._repeatedFetching?e._repeatedFetchesLeft=e._initialRepeatedFetches:e._tailFetchesLeft=0:e._headFetchesLeft=0},h.setRepeatedFetching=function(t){this._repeatedFetching=t},h.hasRepeatedFetching=function(){return this._repeatedFetching},h.decrement=function(t){var e=this;e._repeatedFetching?e._repeatedFetchesLeft--:t?e._tailFetchesLeft--:e._headFetchesLeft--},h.hasMore=function(t){var e=this,a=e._repeatedFetching?e._repeatedFetchesLeft:t?e._tailFetchesLeft:e._headFetchesLeft;return a>0},{FetchCount:n,create:function(e){return new n(e)}}})()||window);
__jsRegistry.lj = __globalRegistry["cSnzvg"] || (__globalRegistry["cSnzvg"] = (function(){var n;return function(){if(!n){var r=document.createElement("div"),i=window.getComputedStyle(r,null),e=["webkit","Moz","O","ms"],l=e.length,t;for(t=0;t<l;t++){var u=e[t]+"ColumnWidth";if(u in i){n=u;break}}n||(n="columnWidth")}return n}})()||window);
__jsRegistry.lk = __globalRegistry["aGVLMbg"] || (__globalRegistry["aGVLMbg"] = (function(e){return{updateLoadingUrls:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.ll = __globalRegistry["aFxGJvg"] || (__globalRegistry["aFxGJvg"] = (function(Ae,Ve,ve,re,Xe,g,x,Qe,Ye,r,Je,ie,Ke,v,Ce,Ze,$e,Le,_e,Ue,et,je,tt,pe,st,rt){var ne="prevPageURL",ae="nextPageURL",ue="loading",B="data-next-url",V="data-prev-url",fe="data-page-url",D="dlist",it="."+D+(" ."+D),Oe=".grid,.list-block:not(.js-no-paging)",Te="init",nt="."+D+"."+Te,Ee="before-load",me="load-succeeded",ye="after-load",Pe="load-error",$="ld",be=$+"t",Re=$+"b",at="js-y",ut="js-n",le="js-append-top",U="js-append-bot",de="mnlt",ee="mnlb",Ie="js-complete-top",He="js-complete-bot",ft=".js-load-more",lt=".js-refresh",dt="js-ajax-list-no-auto-fetch",ot=".js-load-opposite-edge",Ne=".js-load-more-bot",ct="__switch-feed",gt="switch-feed",ht="stopScrollTimeout",St=400,oe=Array.prototype,te,X;function Me(t){var e=_e.getState();e.url=t,_e.accountStateUpdate()}var we=2;function Fe(t){t=t||{};var e=t.dom,i=t.pageLoad,d=t.preservePosition,_=t.locationHashPosition,C=t.prependToHead,E=t.dynamicCounters,j=t.hasExternalNotify,u=t.dynamicHeight,S=!1;function f(s,q,p,N,b,O,M,R){if(!(!C&&!s)){var L=!1,Q=g(p),Y=s?ae:ne,w=s?B:V;if(R=R||p.getAttribute(w),!!R&&N(Ee,b,s,O)!==!1){var J=Q[ue];if(!J){var he=function(){L||K()},K=function(){g(p)[ue]=null,N(ye,b,s,O)},n=Xe.request(R);ve.loadingInitiated.trigger({atBottom:s}),Q[ue]=n.xhr,E&&n.xhr.setRequestHeader("X-Update-Feed-Counter","1"),n.then(function(){p.offsetParent&&x(Qe.createDomTree(this.response()).children,function(l){if(l){var k=l.getAttribute("action"),W=l.getAttribute("target-id"),Z=l.getAttribute("target-qs"),c=l.children,a,o;W||Z?(a=document.getElementById(W)||(Z?document.querySelector(Z):null),o=a!==null):o=!1;var y=l.querySelectorAll("script");switch(setTimeout(function(){x(y,Ze.run)},0),k){case"append":case"prepend":var F=l.getAttribute(k==="append"?B:V),P=F!==null&&F.length>0;if(N(me,b,s,O,c,P),c.length!==0){var se=function(){re.trigger({element:l,atBottom:s}),At(k,a,A),K(),M==="horizontal"&&t.showScrollHint&&!S&&(!o||p.offsetWidth>a.innerWidth)&&setTimeout(function(){S||(S=!0,o&&r.addClass(a,"scroll-hint"))},100)};L=!0,o&&ce(a,F,Y,w),g(a)[fe]=R;var A=oe.slice.call(c),z=!1,T=0,I=document.getElementsByTagName(gt)[0];a.lastElementChild&&a.lastElementChild.classList.contains(ct)&&I&&(z=!0,T=parseInt(I.getAttribute(ht),10)||0),z&&T?setTimeout(function(){q.addData(A,s,se)},T):q.addData(A,s,se)}else o&&ce(a,null,Y,w);break;case"content":o&&(r.clear(a),a.appendChild(Ye(l)),De(a,l.getAttribute(V),ne,V),De(a,l.getAttribute(B),ae,B));break;case"remove":o&&r.remove(a);break;case"attribute":o&&a.setAttribute(l.getAttribute("name"),l.getAttribute("value"));break;case"special":rt(l.outerHTML);break}}})},function(){N(Pe,b,s,O)}).anyway(he),n.withToken().send()}}}}function m(s){var q=v.matches(s,it),p=s.getElementsByClassName(D),N=s.getElementsByClassName(D).length,b=r.hasClass(s,"__manual-loading"),O=v.matches(s,".or-hor")?"horizontal":"vertical",M,R=g(s),L=s.querySelectorAll(Oe);if(L.length+p.length!==0){if((b||r.hasClass(s,dt))&&(t.autoFetchCount=0,t.repeatedFetchCount=0,t.headFetchCount=0),M=Je.create(t),N>0){for(var Q=[],Y,w=0;w<N;w++){Y=p[w];for(var J=0,he=L.length;J<he;J++){var K=L[J];Y.contains(K)||Q.push(K)}}L=Q}else L=s.querySelectorAll(Oe);oe.push.apply(t.lists,oe.slice.call(L)),R.fetchCountInstance=M,R.manualLoading=b||!1,O==="horizontal"&&x(L,function(n){g(n).container=s,Ge(null,null,n)}),r.removeClass(s,ut),r.addClass(s,at),!b&&L.length!==0&&s.getAttribute("data-disabled")!=="true"?x(L,function(n){var l;n.ignoreFirstLoad=n.getAttribute("ignoreFirstLoad");var k=qe.bind(this,n),W=g(n);W.checkLoadingUrlsEvent=k,W.cardsBeforePreload=n.getAttribute("data-cardsBeforePreload"),je.updateLoadingUrls.attach(k);function Z(c){var a=et.toolbar.height;re.attach(c.checkEdge),qe(n),W[fe]=window.location.href,c.on("at-edge",function(T,I,h){M.hasMore(h)&&!n.ignoreFirstLoad&&(h||c.getScrollPosition()>=0&&c.getScrollPosition()<=450||i)&&f(h,c,n,xe,s,!1,O,null)});var o=Ge;O==="vertical"&&(o=function(I,h,Se){g(n).listMiddle=Math.round(r.getTotalOffsetLeft(n)+n.offsetWidth/2)}),c.on("update-dimensions",o);var y="data-avpos";if(d&&!n.hasAttribute(y)){n.setAttribute(y,"1");var F=0;if(_){var P=window.location.hash;if(P&&P.length>0&&P.indexOf("#_s-")===0){P=P.substring(4);var se=j?F>1:F>0;if(se)return;var A=document.getElementById(P);if(A||(A=document.getElementsByName(P)[0]),A&&(v.matches(A,".it")||(A=v.parentBySelector(A,".it")),A))if(Ue.get("isPositionFixed")){var z=A.getBoundingClientRect().top;document.body.scrollTop+=z-a,z>a+1&&(n.scrollTop=z-a)}else A.scrollIntoView()}}c.on("scroll",(function(){var T,I=function(){vt(c,{container:n,hasExternalNotify:j,locationHashPosition:_,anchorAttributeNames:["name","id"],hasEntryAnchors:!1}),T=null};return function(){F++,T&&clearTimeout(T),T=setTimeout(I,200)}})())}q||(te=function(I){var h=I.target,Se=v.matches(h,lt),Be=v.matches(h,ot);if(v.isChildOf(h,s)&&(v.matches(h,ft)||Se||Be)){var Ct=h.href||h.dataset.href;return f(v.matches(h,Ne)||v.parentBySelector(h,Ne)!==null,c,n,xe,s,!0,O,Se||Be?Ct:null),n.ignoreFirstLoad=!1,!0}}),setTimeout(function(){c.checkEdge(!0)},0)}l=Ve.create(n,{direction:O,useNativeScroll:!0,nativeScrollingFixEnabled:!0,dynamicHeight:u,bottomThreshold:(function(){return O==="horizontal"?function(c,a,o,y){return o+y-a}:function(c,a,o,y){return o+y-a*we}})(),topThreshold:function(a,o,y){return y+o},onInit:Z}),n.okFetchScroll=l}):(r.addClass(s,Ie),r.addClass(s,He),r.removeClass(s,U),r.removeClass(s,le)),r.removeClass(s,Te),M.hasMore(!0)||(r.removeClass(s,U),r.addClass(s,ee)),M.hasMore(!1)||(r.removeClass(s,le),r.addClass(s,de))}}for(var G=0,ge=e.length;G<ge;G++)m(e[G])}function xe(t,e,i,d,_,C){var E=g(e),j=E.manualLoading,u=E.fetchCountInstance;switch(t){case Ee:if(!d&&j)return!1;r.addClass(e,$),r.addClass(e,i?Re:be);break;case me:var S=i?ee:de,f=i?U:le;u.decrement(i),!j&&!u.hasMore(i)&&(r.removeClass(e,f),r.addClass(e,S)),!C||!_||!_.length?(r.removeClass(e,S),r.removeClass(e,f),r.addClass(e,i?He:Ie)):(i||Ae.messaging)&&d&&(u.setRepeatedFetching(!0),u.reset(!0),u.hasMore(i)&&(r.removeClass(e,ee),r.addClass(e,U),E.manualLoading=!1));break;case Pe:u.reset(!0),u.reset(!1),E.manualLoading=!0,r.addClass(e,de),r.addClass(e,ee),r.removeClass(e,"js-dlb");break;case ye:setTimeout(function(){r.removeClass(e,$),r.removeClass(e,be),r.removeClass(e,Re)},100);break}}function ce(t,e,i,d){g(t)[i]=e,e?t.setAttribute(d,e):t.removeAttribute(d)}function De(t,e,i,d){typeof e=="string"&&ce(t,e,i,d)}function Ge(t,e,i){if(r.hasClass(i,"grid")){var d=i.children,_=d.length;if(_>0){var C=g(i).colData;if(!C){var E=window.getComputedStyle(i,null),j=parseInt(E[Ke()],10),u=parseInt(i.getAttribute("data-rows")||1,10);!isNaN(j)&&!isNaN(u)&&(C={width:j,rowCount:u},g(i).colData=C)}C&&(i.style.width=C.width*Math.ceil(_/C.rowCount)+"px")}}}function At(t,e,i){(t==="append"||t==="prepend")&&(ve.messageLoaded.trigger({direction:t}),ie.items.added.trigger({container:e,operation:t,elements:i}),tt.process())}function qe(t){var e=g(t);e[ae]=t.getAttribute(B),e[ne]=t.getAttribute(V)}function vt(t,e){var i=e.container,d=g(i).listMiddle,_=e.hasExternalNotify,C=e.locationHashPosition,E=e.anchorAttributeNames,j=e.hasEntryAnchors;if(document.elementFromPoint&&d){var u=document.elementFromPoint(d,_?150:0),S,f;if(u&&!v.matches(u,".it")&&(u=v.parentBySelector(u,".it")),u){if(f=g(i)[fe],f){var m=null;if(C){if(x(E,function(p){if(m=u.getAttribute(p),m)return m}),!m){var G=u.querySelector("a[name]");G&&(m=G.getAttribute("name"))}m&&(S=f.indexOf("#"),S>-1&&(f=f.substring(0,S)),f+="#_s-"+m,j=!0)}if(St<t.getScrollPosition()&&(!j||m)&&Me(f),_)try{window.external.notify("replace-url:"+f)}catch(p){}}}else{var ge=t.getScrollPosition(),s=t.getViewportSize();if(ge<s&&(f=window.location.href,S=f.indexOf("#"),S>-1)){var q=f.substring(S);q!="#lst"&&(f=f.substring(0,S),Me(f))}}}}function H(){X.dom=document.querySelectorAll(nt),Fe(X)}function ke(){We(X),H(),st.recalculateStubs()}function We(t){var e=t.lists;e&&x(e,function(i){var d=i.okFetchScroll;d&&(re.detach(d.checkEdge),d.destructor()),je.updateLoadingUrls.detach(g(i).checkLoadingUrlsEvent)}),te=null,t.initOnAutoLoading&&ie.items.added.detach(H),t.liveSearchOn&&pe.updated.detach(H),t.lists=[]}function ze(t){return te&&te(t)}return $e.create({name:"initAjaxBlock",update:function(e){X=e,e.lists=[],we=parseFloat(e.fetchScrollingMultiplier),Ce.register(ze)},lateUpdate:function(e){e.dom=document.getElementsByClassName(D),Fe(e),e.initOnAutoLoading&&ie.items.added.attach(H),e.liveSearchOn&&pe.updated.attach(H),e.initOnNavigationInterop&&Le.finished.attach(ke)},discard:function(e){We(e),Ce.revoke(ze),X=null,e.initOnNavigationInterop&&Le.finished.detach(ke)}}),Ae.initAjaxListLoading=H,{initAjaxListLoading:H}})(__jsRegistry.c, __jsRegistry.lg, __jsRegistry.fv, __jsRegistry.hf, __jsRegistry.bw, __jsRegistry.lh, __jsRegistry.k, __jsRegistry.cq, __jsRegistry.ct, __jsRegistry.s, __jsRegistry.li, __jsRegistry.gt, __jsRegistry.lj, __jsRegistry.t, __jsRegistry.ea, __jsRegistry.cr, __jsRegistry.x, __jsRegistry.w, __jsRegistry.ft, __jsRegistry.ac, __jsRegistry.bk, __jsRegistry.lk, __jsRegistry.cx, __jsRegistry.ar, __jsRegistry.hb, __jsRegistry.de)||window);
__jsRegistry.lm = __globalRegistry["l2eMkKQ"] || (__globalRegistry["l2eMkKQ"] = (function(h,s,r,e){var t=(0,h.create)({top:0,height:0});s.onChanged("isPositionFixed",i),r.onChanged("isShown",i);function i(){var o=0,a=e.toolbar.height;s.get("isPositionFixed")&&(o+=e.toolbar.height),r.get("isShown")&&(o+=e.smartBanner.height,a+=e.smartBanner.height),t.set("top",o),t.set("height",a)}return i(),t})(__jsRegistry.ab, __jsRegistry.ac, __jsRegistry.jf, __jsRegistry.bk)||window);
__jsRegistry.ln = __globalRegistry["sucQyhw"] || (__globalRegistry["sucQyhw"] = (function(d,o,n,p,a,u,c){var r={};Object.defineProperty(r,"stickyPanelViewModel",{enumerable:!0,get:function(){return e}});var m=10,e=(0,u.create)({isShown:!1,isExists:!1,bottom:0,right:0}),h=(function(){function f(i,t){this.topOffset=0,this.isAlreadySlidDown=!1;var l=t.getAttribute("data-target");if(this.panel=t,this.updateTopOffset(),l&&(this.target=document.getElementsByClassName(l)[0],this.target)){var g=(0,p.throttle)(this.onViewportChanged,m);o.attachUntilRendering(n.changed,g,this),this.onViewportChanged(),e.setPart({bottom:this.getBottom(),right:t.offsetLeft+t.offsetWidth,isExists:!0}),o.rendering.attachOnce(function(){e.set("isExists",!1)}),a.onChanged("top",function(){this.updateTopOffset(),this.updateShownPanel(),e.set("bottom",this.getBottom())},this)}}var s=f.prototype;return s.onViewportChanged=function(){var t=!(0,n.fitHeight)(this.target,this.topOffset-this.target.offsetHeight).fitTop;t?(e.set("right",this.panel.offsetLeft+this.panel.offsetWidth),this.isAlreadySlidDown||this.switchShownPanel(!0)):this.isAlreadySlidDown&&this.switchShownPanel(!1)},s.getBottom=function(){return this.panel.offsetTop+this.panel.offsetHeight+this.topOffset},s.switchShownPanel=function(t){e.set("isShown",t),this.isAlreadySlidDown=t,this.updateShownPanel()},s.updateShownPanel=function(){this.panel.style[c.transform]=e.get("isShown")?"translateY("+this.topOffset+"px)":""},s.updateTopOffset=function(){this.topOffset=a.get("top")},f})();return h.isInstant=!0,(0,d.register)("stickyPanel",h),r})(__jsRegistry.am, __jsRegistry.w, __jsRegistry.bd, __jsRegistry.ba, __jsRegistry.lm, __jsRegistry.ab, __jsRegistry.au)||window);
__jsRegistry.lo = __globalRegistry["mxSmWg"] || (__globalRegistry["mxSmWg"] = (function(a,g,p,s,h,e){var l;function w(){return l=l||document.getElementById("wrapper")}var r=(function(){function c(n,i){this.isShown=!1,this.isIntersectWithPanel=!1,this.isExistsPanel=!1,this.any={tap:function(){w().scrollIntoView({behavior:"smooth",block:"start"})}},this.target=i,this.isExistsPanel=s.stickyPanelViewModel.get("isExists"),this.isExistsPanel&&this.listenPanelIsShowing(!0),g.changed.attach(this.onCheck,this),s.stickyPanelViewModel.onChanged("isExists",function(t){this.isExistsPanel=t,this.listenPanelIsShowing(t)},this),h.onChanged("top",this.calculateButtonPosition,this),this.calculateButtonPosition()}var o=c.prototype;return o.listenPanelIsShowing=function(i){s.stickyPanelViewModel.switchChanges(i,["isShown","bottom"],this.calculateButtonPosition,this)},o.onCheck=function(i){var t=i.scrollTop>i.height/2;if(this.isExistsPanel){var u=this.target.offsetLeft-e.offsets.normal<s.stickyPanelViewModel.get("right");u!==this.isIntersectWithPanel&&(this.isIntersectWithPanel=u,this.calculateButtonPosition())}if(t!==this.isShown){var f=this.target;(0,a.switchClass)(f,t,"__show-up"),(0,a.switchClass)(f,!t,"__close-up"),this.isShown=t}},o.calculateButtonPosition=function(){this.target.style.top=this.isIntersectWithPanel&&s.stickyPanelViewModel.get("isShown")?s.stickyPanelViewModel.get("bottom")+e.offsets.normal+"px":h.get("top")+e.offsets.normal+"px"},c})();r.isInstant=!0,(0,p.register)("moveToTop",r)})(__jsRegistry.s, __jsRegistry.bd, __jsRegistry.am, __jsRegistry.ln, __jsRegistry.lm, __jsRegistry.bk)||window);
__jsRegistry.lp = __globalRegistry["fNuWlJw"] || (__globalRegistry["fNuWlJw"] = (function(){var e=!1,a=!1,r=!1,i=!1;function t(){return a||(e=window.FileReader||window.FileReaderSync,a=!0),e}function p(){if(!i){var l=new XMLHttpRequest;r=t()&&"upload"in l,i=!0}return r}return{read:t,upload:p}})()||window);
__jsRegistry.lq = __globalRegistry["c6J0hA"] || (__globalRegistry["c6J0hA"] = (function(){return{createError:function(r,e,t,n){return{text:r,type:e,from:t,data:n}}}})()||window);
__jsRegistry.lr = __globalRegistry["uCgnPGQ"] || (__globalRegistry["uCgnPGQ"] = (function(d,j,f,v){function h(r,e){var o=e.uploadOperation;o.onSingleItemUploaded&&o.onSingleItemUploaded.call(e.uploadOperationHooksCtx,r),e.currentFileIndex<e.fileQueueSize-1?(e.currentFileIndex+=1,l(e)):e.resultTask.done||e.resultTask.resolve(r)}function l(r){var e=r.concreteUploadModule,o=r.uploadOperation,n=o.files||o.fileInput.files,a=r.uploadOperationHooksCtx;if(!r.resultTask.rejected){var i=r.currentFileIndex,s=o.uploadData,t=v.isArray(s)?s[i]:s;if(e.upload(n[i],null,t,r).then(h,k,r),o.onPrepareUploadContainer&&o.onPrepareUploadContainer.call(a),o.onPreviewCreate){var c=URL.createObjectURL(n[i]);o.onPreviewCreate.call(a,c),f.rendering.attachOnce(function(){URL.revokeObjectURL(c)})}}}function k(r,e){e.resultTask.reject(r)}function u(r,e,o,n,a){this.resultTask=r,this.uploadOperation=e,this.currentFileIndex=0,this.fileQueueSize=o,this.uploadOperationHooksCtx=n,this.concreteUploadModule=a}return u.prototype.handleEvent=function(r){var e=this.uploadOperation;r.type==="progress"&&e.progressListener&&e.progressListener.call(this.uploadOperationHooksCtx,r)},{uploadMultiple:function(e,o){var n=d.start(),a=e.files||e.fileInput.files,i=e.hooksCtx||e,s=a.length;if(e.alreadyUploaded+s>e.uploadLimit&&(s=e.uploadLimit-e.alreadyUploaded,e.onLimitViolation.call(i)),s>0){var t=new u(n,e,s,i,o);l(t)}else n.reject();return n}}})(__jsRegistry.n, __jsRegistry.lq, __jsRegistry.w, __jsRegistry.d)||window);
__jsRegistry.ls = __globalRegistry["u4AVq2w"] || (__globalRegistry["u4AVq2w"] = (function(c,p,U,i,a){var n="getUploadPhotoEndpoint";function k(r,e){r.status==="ok"?(e.uploadSuccessAdaptee=r.uploadSuccessAdaptee,d(e.file,r.uploadUrl,e)):e.task.reject(a.createError(r.error,"networkAnswer",n,r))}function f(r,e){e.task.reject(a.createError("","network",n))}function j(r,e){var s=e.task;s.currentTask=null;var t=e.uploadSuccessAdaptee,o=JSON.parse(this.response());o.error?s.reject(a.createError(t.error,"networkAnswer","uploadPhoto",o)):s.resolve({photoUrl:t.photoUrl,photoId:t.photoId,uploadData:o[0],availableForUpload:t.availableForUpload})}function v(r,e){var s=e.task;s.currentTask=null,s.reject(a.createError("","network","uploadPhoto"))}function d(r,e,s){var t=c.request(e,"POST").attachFile(r).then(j,v,s).setExternal();s.progressListener&&t.xhr.upload.addEventListener("progress",s.progressListener,!1),s.task.currentTask=t.send()}function T(){var r=this;return r.currentTask&&r.currentTask.abort(),r}return{upload:function(e,s,t,o){var l=i.start();l.abort=T();var u={file:e,task:l,uploadSuccessAdaptee:null,progressListener:o};return t&&t.uploadUrl&&t.uploadSuccessAdaptee?(u.uploadSuccessAdaptee=t.uploadSuccessAdaptee,d(e,t.uploadUrl,u)):l.currentTask=p.request(s,"POST").then(k,f,u).withToken().send(),l}}})(__jsRegistry.bw, __jsRegistry.fm, __jsRegistry.m, __jsRegistry.n, __jsRegistry.lq)||window);
__jsRegistry.lt = __globalRegistry["fpjOALw"] || (__globalRegistry["fpjOALw"] = (function(){function t(r){return Math.ceil(r.loaded/r.total*100)+"%"}return{showProgressDirect:function(s,e){e&&(e.style.width=t(s))},showProgress:function(s,e){if(e){var i=e.getElementsByClassName("file-progressbar_progress")[0];i.style.width=t(s)}},clearProgress:function(s){if(s){var e=s.getElementsByClassName("file-progressbar_progress")[0];e.style.width="0"}}}})()||window);
__jsRegistry.lu = __globalRegistry["awkaNUg"] || (__globalRegistry["awkaNUg"] = (function(e){return{editDescription:function(o,t,n,u){return e.run("photos.editDescription",{photoId:o,albumId:t,groupId:n,text:u})},getPhotos:function(o,t,n,u,p,d,i,s,h,l,I,m){return e.run("photos.get",{photoId:u,groupId:t,albumId:n,ownerId:o,single:p,initialOrder:d,isOrderFixed:i,photoStreamUserId:s,isGroupPhotoStream:h,chatMessageId:l,logActivityId:I,isCropMode:m})},links:function(){return e.run("photos.links",{})},texts:function(){return e.run("photos.texts",{})},del:function(o,t){return e.run("photos.delete",{photoId:o,groupId:t})},textsToSetMain:function(o){return e.run("photos.setMain.texts",{albumId:o})},setMain:function(o,t){return e.run("photos.setMain",{photoId:o,albumId:t})},setCover:function(o,t,n){return e.run("photos.setCover",{photoId:o,albumId:t,groupId:n})},info:function(o,t,n){return e.run("photos.info",{photoId:o,albumId:t,groupId:n})},vote:function(o,t){return e.run("photos.vote",{photoId:t,albumId:o})},markSpam:function(o,t){return e.run("spam.mark",{entities:[{type:t,id:o}]})},acceptAllAutoPins:function(o){return e.run("photos.acceptAllAutoPins",{photoId:o})},acceptCustomPin:function(o,t,n,u){return e.run("photos.acceptCustomPin",{photoId:o,pinUserId:t,x:n,y:u})},deleteCustomPin:function(o,t){return e.run("photos.deleteCustomPin",{photoId:o,pinUserId:t})},blockMember:{prepare:function(o,t){return e.run("group.blockMember.prepare",{groupId:o,userId:t})},go:function(o,t){return e.run("group.blockMember",{groupId:o,userId:t})}},addBookmark:function(o,t){return e.run("photos.addBookmark",{photoId:o,groupId:t})},removeCover:function(o){return e.run("photos.removeCover",{photoId:o})},saveSinglePhoto:function(o,t,n,u,p){return e.run("photos.saveSingle",{photoId:o,albumId:t,token:n,place:u,groupId:p})},cropPhoto:function(o,t,n,u,p){return e.run("photos.crop",{photoId:o,x1:t,y1:n,x2:u,y2:p})},logPhotoView:function(o,t,n,u,p){return e.run("photos.log.view",{stateId:o,logCmd:t,photoId:n,isPhotoLayer:u,isFakeNews:p})},logPhotoViewV2:function(o,t,n,u){return e.run("photos.log.viewV2",{cards:[{info:{stateId:o,logCmd:t,photoId:n,isExplicit:u}}]})}}})(__jsRegistry.fx)||window);
__jsRegistry.lv = __globalRegistry["adwn7Dg"] || (__globalRegistry["adwn7Dg"] = (function(L,i,oe,O,ne,R,z,q,p,g,ie,S,D,j,E,T){var V=";",F=",",r,B,c,h,I,U,A,_;function y(t){var e=document.getElementsByClassName("js-ui-state")[0];e.className="js-ui-state "+t}function H(){y("__complete");var t=document.querySelector(".js-ui-state_element.__complete .js-upload-dyn-label"),e=v(u()).toString();t.setAttribute("data-photos-uploading",e);var a=document.getElementById("upload_file_input");a&&(a.value="")}function J(t){if(!(r&&t&&t.isManualReject)){if(t.data){var e=c["errorType-error_"+t.data.error];if(e){p.show(e),logClientEvent("multi.photo.upload.known.failure",[e]);return}}p.show(c.commonProblem),logClientEvent("multi.photo.upload.common.failure")}}function b(){return document.querySelector(".js-ui-state_element.__complete .base-button[data-view=fileUpload], .js-ui-state_element.__complete .base-button_target[data-view=fileUpload]")}function W(){p.show(B),i.addClass(b(),"dsn")}function G(){var t=u(),e=t.getElementsByClassName("js-clone-source")[0],a=e.cloneNode(!0);i.addClass(a,"js-pphoto-candidate"),i.removeClass(a,"js-clone-source"),i.removeClass(a,"dsn"),t.appendChild(a),i.removeClass(t,"dsn"),y("__loading")}function K(t){var e=t.photoId+","+t.uploadData.token,a="field_pp_tokens",l=document.getElementById(a);l.value?l.value+=";"+e:l.value=e;var o=u().lastChild;o.setAttribute("data-photo-id",e.split(",")[0])}function Q(t,e){t&&t.success&&(e.outerHTML=t.html)}function w(){p.show(c.commonProblem),logClientEvent("multi.photo.upload.common.failure")}function X(t){var e=u();if(e&&!r.rejected){var a=e.lastChild,l=a.getElementsByClassName("js-upload-target")[0];l&&(K(t),S.saveSinglePhoto(t.photoId,U,t.uploadData.token,A,_).then(function(o){Q(o,l)},w).anyway(function(){if(a){var o=a.getElementsByClassName("file-progressbar")[0];o&&i.remove(o);var s=a.getElementsByClassName("oact")[0];s&&i.removeClass(s,"dsn")}}))}}var u=function(){return document.getElementById("pphoto-upload_list")};function Y(t){var e=u().lastChild.querySelector(".js-upload-target");e.style.backgroundImage="url("+t+")"}function Z(t){var e=u();e&&q.showProgress(t,e.lastChild.getElementsByClassName("file-progressbar")[0])}function P(t,e,a){return t.replace(new RegExp(e,"g"),a)}function $(t,e,a){var l;if(a){var o=function(C){N(t,C)},s=function(){p.show(c.commonProblem)},d={photoCount:t.files.length,multipleUploadEnabled:!0},n=e.getAttribute("data-js-allocate-url");D.request(n,"POST",d).then(o,s).withToken().send()}else l=JSON.parse(e.getAttribute("data-js-upload-url"));if(l){var m=[];g(Object.keys(l),function(f){var C=P(l[f].uploadUrl,"&amp;","&"),ae=P(l[f].previewUrl,"&amp;","&"),le={status:"ok",uploadSuccessAdaptee:{availableForUpload:0,error:"Ошибка загрузки",photoId:f,photoUrl:ae,status:"ok"},uploadUrl:C};m.push(le)}),N(t,m)}}function ee(t){var e=!1;return g(t.files,function(a){a.size/1024/1024>I&&(e=!0)}),e}function N(t,e){if(ee(t)){p.show(c.singleFileSizeViolated),logClientEvent("multi.photo.upload.size.violated");return}r=R.uploadMultiple({fileInput:t,uploadData:e,onLimitViolation:W,onPrepareUploadContainer:G,alreadyUploaded:v(u()),uploadLimit:h,onSingleItemUploaded:X,onPreviewCreate:Y,progressListener:Z},z).then(H,J);var a=Math.min(t.files.length,h).toString(),l=document.querySelector(".js-ui-state_element.__loading .js-upload-dyn-label");l.setAttribute("data-photos-uploading",a)}j.addFuncHandler("remove-photo-preview",{tap:function(e){var a=u(),l=E.parentBySelector(e.target,".js-pphoto-candidate"),o=l.getAttribute("data-photo-id");S.del(o,null).then(function(){if(a.removeChild(l),v(a)==0){M();var s=document.getElementsByClassName("js-ui-state")[0];s.className="js-ui-state __initial"}else{var d=document.getElementById("field_pp_tokens"),n=d.value.split(";");if(n.length>1){for(var m=0;m<n.length;m++)if(o==n[m].split(",")[0]){n.splice(m,1);break}te(n,d)}else d.value=""}i.removeClass(b(),"dsn")},w).anyway(function(){if(v(a)==0){var s=document.getElementsByClassName("js-ui-state")[0];s.className="js-ui-state __initial"}i.removeClass(b(),"dsn")})}}),j.addFuncHandler("abort-userphoto-multiupload",{tap:function(){if(r&&!r.done){r.reject({isManualReject:!0});var e=u();if(e){var a=e.lastChild;if(i.hasClass(a,"js-pphoto-candidate")&&a.getElementsByClassName("file-progressbar").length)if(e.removeChild(a),v(e)==0){var l=document.getElementsByClassName("js-ui-state")[0];l.className="js-ui-state __initial",M()}else y("__complete")}var o=document.getElementById("upload_file_input");o&&(o.value="")}}}),j.addFuncHandler("albumCreationIntermediate",{tap:function(e){var a=document.getElementsByClassName("album-pack_form")[0],l=document.getElementById("field_ro"),o=E.parentBySelector(e.target,".toggled-button_item-link.__placeholder");l.value=o.getAttribute("data-url"),a.querySelector("input[type=submit]").click()}});function k(){var t="",e=document.querySelectorAll(".album-pack_actions");g(e,function(l){var o=l.getElementsByClassName("xpnd")[0],s=o?encodeURIComponent(o.value):"",d=l.querySelector(".drop-down_opener .toggled-button_item-link"),n=JSON.parse(d?d.getAttribute("data-model"):l.getAttribute("data-model"));n&&(t+=n.photoId+F+n.entityId+F+s+V)});var a=document.getElementById("field_ptamt");a.value=t}function v(t){return t.getElementsByClassName("js-pphoto-candidate").length}function te(t,e){t=t.filter(function(a){return a!=null}),e.value=t.join(";")}function M(){document.getElementById("field_pp_tokens").value=""}function x(){return document.getElementsByClassName("album-pack_form")[0]}return T.navigating.attach(function(){r&&!r.done&&r.reject({isManualReject:!0})}),L.multipleUserPhotoUpload=O.create({init:function(e){B=e.limitViolationLabel,c=e.uploadErrorVocabulary,h=e.maxUploadSize,I=e.maxSingleFileSizeMB,_=e.groupId},update:function(e){var a=x();a&&a.addEventListener("submit",k),U=e.knownAlbumId,_=e.groupId,A=e.photoPlace},discard:function(){var e=x();e&&e.removeEventListener("submit",k)}}),{startMultiUpload:$}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.bw, __jsRegistry.x, __jsRegistry.ew, __jsRegistry.lr, __jsRegistry.ls, __jsRegistry.lt, __jsRegistry.es, __jsRegistry.k, __jsRegistry.m, __jsRegistry.lu, __jsRegistry.fm, __jsRegistry.an, __jsRegistry.t, __jsRegistry.w)||window);
__jsRegistry.lw = __globalRegistry["pj6ZbDA"] || (__globalRegistry["pj6ZbDA"] = (function(r,n,h,p,o,v,f){var u="OK:navigating",g="OK:popstate",_="js-skip-confirm-leave",C=function(){},a=!1;function l(t){t=t||{},this._unloadWrapper=this._unloadWrapper.bind(this),this.createEvents(),this.start(),t.asService||n.rendering.attachOnce(this.end,this)}l.prototype={constructor:l,createEvents:function(){this.onPopState=o.create(),this.onUnload=o.create(),this.onNavigate=o.create(),this.onPageLeaving=o.create()},start:function(){this.listening||(r.statePopping.attach(this._statePoppingWrapper,this),n.navigating.attach(this._navigatingWrapper,this),n.finished.attach(this._finished,this),window.addEventListener("beforeunload",this._unloadWrapper),document.body.addEventListener("submit",this._formSubmit),f.register(this._handleAllClicks),this.listening=!0)},end:function(){this.listening&&(r.statePopping.detach(this._statePoppingWrapper,this),n.navigating.detach(this._navigatingWrapper,this),n.finished.detach(this._finished,this),window.removeEventListener("beforeunload",this._unloadWrapper),document.body.removeEventListener("submit",this._formSubmit),f.revoke(this._handleAllClicks),this.listening=!1)},_unloadWrapper:function(i){this.pageLeavingController({type:i.type,event:i})},_navigatingWrapper:function(i){this.pageLeavingController({type:u,event:i})},_statePoppingWrapper:function(i){this.pageLeavingController({type:g,event:i})},_formSubmit:function(i){var e=i.target,s=null;e&&(s=e.okSubmitSender||e.okSubmitBtn),m(s)},_handleAllClicks:function(i){m(i.target)},_finished:function(){a=!1},confirmUnload:function(){this.onUnload.attach(d)},confirmPopstate:function(){this.onPopState.attach(d)},pageLeavingController:S};function S(t){var i=t.type,e=t.event;if(this.onPageLeaving.trigger(t),i==="beforeunload"){if(this.onUnload.trigger(t),t.cancelled)return e.preventDefault(),e.returnValue="На странице остались несохраненные данные, уйти?"}else if(i===g){if(this.onPopState.trigger(t),t.cancelled){e.cancelled=!0;var s=e.cancelTask=h.start();t.onCancel&&t.onCancel(s),s.join(c(t.dialogOptions))}}else if(i===u){if(this.onNavigate.trigger(t),t.cancelled&&!a){e.cancelled=!0;var j=this;c(t.dialogOptions).then(C,function(){j.end(),r.go(e.state)})}a&&(a=!1)}}function d(t){t.cancelled=!0}function m(t){t&&v.hasClass(t,_)&&(a=!0)}function c(t){t=t||{url:"?st.cmd=pageLeaveConfirmationDialog&st.rtu="+location.search,dontPush:!0,confirmByClose:!0};var i=h.start();return p.show(t).then(function(e){e?i.resolve():i.reject()},function(){i.reject()}),i}return{construct:l,showConfirmDialog:c}})(__jsRegistry.ft, __jsRegistry.w, __jsRegistry.n, __jsRegistry.jn, __jsRegistry.u, __jsRegistry.s, __jsRegistry.ea)||window);
__jsRegistry.lx = __globalRegistry["pr29EjQ"] || (__globalRegistry["pr29EjQ"] = (function(a,i,t){var r=t.start();i.create({name:"pageLeaveMonitorService",update:function(e){e.asService=!0,r.resolve(new a.construct(e))},discard:function(){s(function(e){e.end()}),r=t.start()}});function s(n){return r.then(n)}return{onServiceReady:s}})(__jsRegistry.lw, __jsRegistry.x, __jsRegistry.n)||window);
__jsRegistry.ly = __globalRegistry["fAx330A"] || (__globalRegistry["fAx330A"] = (function(s,v,j,u,c,f,g,m,y,p){var r="upload_file_input";function n(l){s.videoUploadStatus&&(l.cancelled=!0,l.dialogOptions={url:"?st.cmd=videoUploadLeaveConfirmationDialog&st.rtu="+window.location.search,dontPush:!0,confirmByClose:!0})}s.fileUpload=j.create({init:function(){s.vuploadReplaceState=function(t){var e=u.getState();e.url=t,u.accountStateUpdate()};function a(i,t){this.dom=t,this.model=i,this.domLink=t.href?t:t.querySelector("a")}a.prototype={selectFile:{tap:function(t){if(!g.upload()){f.allowDefault(t);return}var e=document.getElementById(r);e&&e.parentNode&&e.parentNode.removeChild(e);var h=this,o=this.domLink.href;function S(U){var d=U.target.files,b=d.length;if(h.model.multiple==="true")if(o=m.replaceParams(o,{"st.ubs":b}),h.model.samePage){var P=document.getElementById(r),C=document.getElementById("photo_upload_form");y.startMultiUpload(P,C,!0)}else c.change(o);else d.length>0&&(o=m.replaceParams(o,{"st.flnm":d[0].name})),c.change(o)}return e=document.createElement("input"),e.setAttribute("class","hidden-file-input"),e.setAttribute("type","file"),e.setAttribute("id",r),e.addEventListener("change",S,!1),document.body.appendChild(e),this.model&&this.model.accept?e.setAttribute("accept",this.model.accept):e.removeAttribute("accept"),this.model&&this.model.multiple==="true"&&e.setAttribute("multiple","true"),e.style.top=Math.floor(v.getTotalOffsetTop(t.target))+"px",e.focus(),e.click(),!1}}},f.register("fileUpload",a)},update:function(a){s.updateVideoUploadState&&s.updateVideoUploadState(),a.isConfirmLeave&&p.onServiceReady(function(i){i.onPopState.attach(n),i.onNavigate.attach(n)})},discard:function(){p.onServiceReady(function(a){a.onPopState.detach(n),a.onNavigate.detach(n)})}})})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.x, __jsRegistry.ft, __jsRegistry.ew, __jsRegistry.am, __jsRegistry.lp, __jsRegistry.m, __jsRegistry.lv, __jsRegistry.lx)||window);
__jsRegistry.lz = __globalRegistry["p4xQQ"] || (__globalRegistry["p4xQQ"] = (function(f,d,m,h,j,p,v){var n;function g(){n&&(n.abort(),n=null)}function c(e){j.change(e)}function b(e,t){var a=n.response();c(a||t),n=null}function x(e,t){c(t),n=null}function u(e,t,a,s,o){d.addClass(e,"ld"),d.addClass(document.body,"js-sm-upldng"),n=m.request(t,"POST").attachFile(a).then(b,x,s).setExternal().send(),o.parentNode&&o.parentNode.removeChild(o)}function w(){var e=document.getElementById("upload_file_input");if(!(!e||!e.files||!e.files.length)){var t=document.getElementById("photo_upload_form");if(t)if(e.multiple)p.startMultiUpload(e,t,!1);else{var a=t.getAttribute("data-js-upload-url");if(a){var s=t.getAttribute("data-js-error-url"),o=t.getAttribute("data-size-restrictions"),l=e.files[0];if(o){var U=URL.createObjectURL(l),i=new Image;i.onload=function(){var r=JSON.parse(o);r.min.w>i.width||r.min.h>i.height||r.max.w<i.width||r.max.h<i.height?v.show(r.dimensionViolationLabel,1e4):u(t,a,l,s,e)},i.src=U}else u(t,a,l,s,e)}}}}f.photoUpload=h.create({init:function(){},update:function(){g(),w()}})})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.bw, __jsRegistry.x, __jsRegistry.ew, __jsRegistry.lv, __jsRegistry.es)||window);
__jsRegistry.ma = __globalRegistry["o75K9kg"] || (__globalRegistry["o75K9kg"] = (function(r,a,i){function e(n,o){this.form=o}e.prototype={goAway:{tap:function(o){if(window.location.href.indexOf("jsessionid")===-1){r.allowDefault(o);return}var u=o.target,t=this.form;t.okSubmitBtn=u;var f=i.data(t),s=a.request(t.action,"post",f);s.xhr.okNoReferrer=!0,s.send()}}},r.register("form-outlink",e)})(__jsRegistry.am, __jsRegistry.bw, __jsRegistry.fb)||window);
__jsRegistry.mb = __globalRegistry["eS69vjA"] || (__globalRegistry["eS69vjA"] = (function(e){return{found:e.create(),cleared:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.mc = __globalRegistry["g93fMQQ"] || (__globalRegistry["g93fMQQ"] = (function(s,d,c){var e;function a(){e&&(e.disabled=!1)}function t(){e&&(e.disabled=!0)}s.create({name:"groupAccountPayout",update:function(){e=document.getElementById("button-transfer"),d.found.attach(a),d.cleared.attach(t)},discard:function(){d.found.detach(a),d.cleared.detach(t)}})})(__jsRegistry.x, __jsRegistry.mb, __jsRegistry.s)||window);
__jsRegistry.md = __globalRegistry["dlOcQwQ"] || (__globalRegistry["dlOcQwQ"] = (function(){function d(r){var t={};t.root=r;for(var e=r.querySelectorAll("[data-id]"),a=0;a<e.length;a++){var n=e[a];t[n.getAttribute("data-id")]=n}return t}return{byDataId:d}})()||window);
__jsRegistry.me = __globalRegistry["e7L1X5Q"] || (__globalRegistry["e7L1X5Q"] = (function(h,n,m,r,c,d,l,s){function a(t,o){this.model=t,this.dom=m.byDataId(o)}a.prototype={search:{tap:function(o,j){var e=this.dom;l.run(this.model.actionName,{data:e.fieldSearch.value}).then(function(i){c(i.html),i.success?s.found.trigger():s.cleared.trigger()},function(){d.show()})}},clear:{tap:function(o,j){var e=this.dom;r.removeClass(e.fieldSearchContainer,"hidden"),r.clear(e.entityContainer),s.cleared.trigger()}}},n.register("entityInlineSearch",a)})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.md, __jsRegistry.s, __jsRegistry.de, __jsRegistry.es, __jsRegistry.fx, __jsRegistry.mb)||window);
__jsRegistry.mf = __globalRegistry["s1pZmvw"] || (__globalRegistry["s1pZmvw"] = (function(o,l,h,f,j,R,T){var _="1",A="X-Ajax-Nav-Search",E="__OK_QUERY__",g=500,c=null,t=null,n=-1,i,S=j.create(function(r){var e;return i&&i.searchThreshold&&(e=i.searchThreshold),setTimeout(r,e||g)},function(r){clearTimeout(r)});function b(){var r=c,e=t;r===this&&(c=null,t=null,r.rejected?e.reject():e.resolve())}function m(){n!==-1&&S.removeCallback(n),c!==null&&(c.abort(),c=null),t!==null&&(t.reject(),t=null)}var u={tuneRequest:function(e){var a=e.ajaxTask;a.header(A,_),this.data.searchFrom&&a.header("X-Search-From",this.data.searchFrom),l.get("voiceSearchUsed")&&(a.header("X-Search-VoiceUsed","true"),l.set("voiceSearchUsed",!1)),c=a,a.anyway(b)},data:{searchFrom:null}};function v(r,e,a){n=-1;var s=a.type==="global",d=R.replaceParams(r,{_searchToolbarMode:s&&l.get("isToolbarSearchMode"),_searchFieldId:a.inputId,_searchQueryType:a.queryType}).replace(E,encodeURIComponent(e));u.data.searchFrom=a.from,u.keepScroll=!0,s&&l.get("isGlobalSearchState")||!s&&l.get("isSearchResultState")?o.replace(d,null,u):o.change(d,null,u)}return{setSettings:function(e){i=e},search:function(e,a,s){return m(),s.isCurrentPage||a||s.isAllowEmpty?(t=f.start(),s.isImmediate?v(e,a,s):n=S.callCallback(v,e,a,s),t):(l.get("isSearchResultState")&&h.back(),null)},closeGlobalSearch:function(){return m(),h.back(),T.navigated}}})(__jsRegistry.ew, __jsRegistry.bm, __jsRegistry.ft, __jsRegistry.n, __jsRegistry.ap, __jsRegistry.m, __jsRegistry.w)||window);
__jsRegistry.mg = __globalRegistry["iyxQSbw"] || (__globalRegistry["iyxQSbw"] = (function(){var n,r;return document.selection?(n=function(){var e=document.selection.createRange();return e.moveStart("textedit",-1),e.text.length},r=function(e,t){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",t),s.select()}):(n=function(e){return e.selectionStart},r=function(e,t){e.setSelectionRange(t,t)}),{setToEnd:function(e){var t=e.value;t&&(e.selectionStart=e.selectionEnd=t.length)},getCursorPosition:n,setCursorPosition:r}})()||window);
__jsRegistry.mh = __globalRegistry["vmvJnEA"] || (__globalRegistry["vmvJnEA"] = (function(e,t){var r={};Object.defineProperty(r,"videoSearchBuses",{enumerable:!0,get:function(){return s}});var s={changeQueryString:(0,e.create)(),changeFilters:(0,e.create)(),changeQid:(0,e.create)(),requestFilterChange:(0,e.create)()};return t.storeFields({videoSearchBuses:s}),r})(__jsRegistry.u, __jsRegistry.c)||window);
__jsRegistry.mi = __globalRegistry["cOfOWtA"] || (__globalRegistry["cOfOWtA"] = (function(r,C,v,a,I,h,m,j,E,F,f,z,w,R,k,B,T,G,W,P){var S="data-endpoint",Q="data-endpoint-empty",b="data-react-video-search",O="__OK_",x="__",D=m.QueryType.COMMON;function N(t){var e=this.inputRoot;a.switchClass(e,t,"__active"),h.set("isSearchFieldActive",t)}function L(t){(this.isAlwaysApplyFilters||this.canBeSearchWithEmptyQuery)&&a.switchClass(this.inputRoot,t,"__show-exit")}function M(t,e){e.showOrCleanCompletions(),e.state.set("inProgress",!1)}function V(t){var e=this;a.switchClass(e.inputRoot,t,"__in-progress")}function H(){_(this)}function U(){_(this)}function _(t){var e=t.state;e.get("isActive")&&t._setQuery(h.get("contextSearchQuery"),!0)}function l(t,e){this._init(t,e)}l.prototype={_init:function(e,i){var s=i.getElementsByClassName("search_input")[0],n=s.form;return this.inputRoot=i,this.input=s,this.inputId=s.id,this.form=n,this.endpoint=n.getAttribute(S),this.endpointEmpty=n.getAttribute(Q),this.isReactVideoSearch=s.getAttribute(b),this.from=s.getAttribute("data-from"),this.isUsed=s.getAttribute("data-used")!==null,this.isAlwaysApplyFilters=s.getAttribute("data-always-apply-filters")!==null,this.completionsRefnodeId="completions-for-"+this.inputId,this.completions=void 0,this._initStateWatchers(s),this._ownInit(),this._focusInputIfShould(),this},_initStateWatchers:function(e){var i=this;i.state=i._createState(e.value).onChanged("isActive",N,i).onChanged("inProgress",V,i)},_ownInit:function(){var e=this;return e.canBeSearchWithEmptyQuery=!1,e.type="context",e.state.onChanged("query",e._checkQueryActiveStateWatcher,e),e.state.onChanged("isFocused",e._checkIsFocusedActiveStateWatcher,e),this._initSearchViewModelWatchers(e),e},_initSearchViewModelWatchers:function(){var e=this;h.onChanged("contextSearchQuery",H,e).onChanged("isContextSearchState",U,e).onChanged("contextSearchEndpoint",e.setEndpoint,e).onChanged("isSearchResultState",L,e)},_focusInputIfShould:function(){var e=this.input,i=e.getAttribute("data-focus-after-search")==="true";i&&setTimeout(function(){var s=e.value;e.focus(),e.setSelectionRange?e.setSelectionRange(s.length,s.length):(e.value="",e.value=s)},0)},postConstruct:function(){this.initSearchFieldFilters()},initSearchFieldFilters:function(){var e=this;e.filtersInstances=m.initSearchFieldFilters(e.inputId)},checkIsActive:function(){var e=this.state;return e.get("query")!==""||e.get("isFocused")},_checkQueryActiveStateWatcher:function(){this.state.set("isActive",this.checkIsActive())},_checkIsFocusedActiveStateWatcher:function(){var e=this.state,i=this.checkIsActive();!i&&e.get("isElementBeforeBlurInActiveZone")||e.set("isActive",i)},_getFiltersValues:function(){var e=this,i={};return j(e.filtersInstances,function(s){E.copy(s.getFiltersValues(),i)}),i},_runSearch:function(e,i,s,n){if(!i||this._beforeRunSearch()){var c=this.endpoint,o=this.state.get("query");if((!o||o.length===0)&&this.endpointEmpty?c=this.endpointEmpty:this.filtersInstances&&(o||this.isAlwaysApplyFilters)&&(this._getFiltersValues(),F(this._getFiltersValues(),function(K,X){c=c.replace(O+X+x,K)})),this._needToHandleSearchInReactComponent(n)){P.videoSearchBuses.changeQueryString.trigger(o);return}var d=C.search(c,o,{isCurrentPage:this.isUsed,isAllowEmpty:this.canBeSearchWithEmptyQuery||this.isAlwaysApplyFilters,isImmediate:e||!1,queryType:s||D,type:this.type,inputId:this.inputId,from:this.from});return d!==null&&(this.state.set("inProgress",!0),d.anyway(M,this)),d}return B.rejected},_needToHandleSearchInReactComponent:function(e){return!e&&this.isReactVideoSearch},_beforeRunSearch:function(){return!0},performSearch:function(e,i){i=i||{};var s=this.input;return this.state.set("isActive",!0),s.focus(),this._setQuery(e||""),k(function(){f.setToEnd(s)}),this._runSearch(!0,i.checkBeforeSearch,i.queryType)},initialSearch:function(e){var i=this;return i.state.set("isActive",!0),i._runSearch(e,!1,null,!0)},_createState:function(e){return v.create(this._prepareStateModel({query:e,inProgress:!1,isActive:!1,isFocused:!1}))},_prepareStateModel:function(e){return e},_cleanInput:function(){return this._setQuery("")},_setQuery:function(e,i){var s=this,n=s.input,c=s.state;if(e.trim()!==c.get("query").trim()){//!Внимание! оптимизации по проверке идентичного значения, в связи с хитростями работы бека, делать нельзя!
if(n.setAttribute("value",e),i&&s.state.get("isFocused")&&document.activeElement===n){var o=f.getCursorPosition(n);n.value=e,f.setCursorPosition(n,o)}else n.value=e;c.set("query",e)}return s},showOrCleanCompletions:function(){var e=document.getElementById(this.completionsRefnodeId);return e?this.completions=r.resolve(e,"queryCompletions").renderCompletions(this.completions):this._removeCompletions(),this},_removeCompletions:function(){return this.completions&&(a.remove(this.completions),this.completions=null),this},activate:function(){var e=this;return e.state.set("isActive",!0),e},clearOrClose:function(){return this.state.get("query")?(this.input.focus(),this._cleanInput(),this._runSearch()):(this.state.set("isActive",!1),this.input.blur(),this._goBackToBaseState()),this.canBeSearchWithEmptyQuery||this._removeCompletions(),this},_goBackToBaseState:function(){if(!(!h.get("isSearchResultState")||!(this.canBeSearchWithEmptyQuery||this.isAlwaysApplyFilters))){var e=this.input.dataset.onCloseReturnUrl;e?W.go(e,null):T.back()}},setEndpoint:function(e){return this.endpoint=e,this.form.setAttribute(S,e),this},inputInteraction:{focus:function(e){r.allowDefault(e),this.state.set("isFocused",!0)},blur:function(e){this.state.set("isElementBeforeBlurInActiveZone",A(e.relatedTarget)),r.allowDefault(e),this.state.set("isFocused",!1)},input:function(e){var i=this,s=i.input.value,n=i.state;s.trim()!==n.get("query").trim()&&(n.set("query",i.input.value),i._runSearch(!1))},keyDown:function(e){var i=!0;switch(e.keyCode){case 13:if(R.searchConfiguration.dismissKeyboardOnEnter){this.input.blur();break}else{i=!1;break}case 27:i=!1,this.clearOrClose();break}i&&r.allowDefault(e)}},closeInteraction:{tap:function(e){this.clearOrClose()}},focusOnInput:{tap:function(){var e=this.input;e.focus(),f.setCursorPosition(e,e.value.length)}}};function p(t,e){l.call(this,t,e)}w(p,l);var u=p.prototype;u._initStateWatchers=function(t){var e=this;e.state=e._createState(t.value).onChanged("isActive",q,e).onChanged("isFocused",Y,e).onChanged("isFilled",Z,e)},u._createState=function(t){return v.create(this._prepareStateModel({query:t,isActive:!1,isFocused:!1,isFilled:!1}))},u._runSearch=function(){this.form.submit()},u.closeInteraction={tap:function(){var e=this;e.input.value="",setTimeout(function(){e.form.submit()})},keyDown:function(e){r.allowDefault(e)}};var g=u.superclass.prototype.inputInteraction;u.inputInteraction={input:function(e,i){this.state.set("isActive",!0),this.state.set("isFilled",this.input.value)},focus:g.focus,blur:g.blur,keyDown:function(e,i){r.allowDefault(e)}};function Y(t){a.switchClass(this.form,t,"__focused")}function Z(t){a.switchClass(this.form,t,"__filled")}function q(t){a.switchClass(this.form,t,"__active")}function y(t){var e=document.querySelector('.input-text[data-view="contextSearchField"]'),i=r.resolve(e,"contextSearchField");i&&!i.checkIsActive()&&!A(t.target)&&i.state.set("isActive",!1)}function A(t){return I.parentBySelector(t,".js-search-active-zone")!==null}return{behaviorConstructor:l,NonLiveSearchFieldBehavior:p,init:function(){r.register("contextSearchField",l)},initNonLiveSearch:function(){r.register("nonLiveSearchField",p)},discard:function(){r.tapPreview.detach(y)},onSearchServiceUpdate:function(){r.tapPreview.attach(y)}}})(__jsRegistry.am, __jsRegistry.mf, __jsRegistry.ab, __jsRegistry.s, __jsRegistry.t, __jsRegistry.bm, __jsRegistry.bn, __jsRegistry.k, __jsRegistry.aa, __jsRegistry.l, __jsRegistry.mg, __jsRegistry.r, __jsRegistry.bu, __jsRegistry.ar, __jsRegistry.jk, __jsRegistry.n, __jsRegistry.ft, __jsRegistry.w, __jsRegistry.ea, __jsRegistry.mh)||window);
__jsRegistry.mj = __globalRegistry["A5TdziQ"] || (__globalRegistry["A5TdziQ"] = (function(o,e,c,l,i){function n(){}var r=n.prototype=i.clone(o.behaviorConstructor.prototype);r.deactivate=function(){var t=this;return t.state.set("isActive",!1),t};function u(t){e.set("clientGlobalSearchQuery",t)}function h(t){e.set("isGlobalSearchOn",t)}function S(){s(this)}function f(){s(this)}function s(t){var a=e.get("globalSearchQuery");t._setQuery(a,!0),!a&&!e.get("isGlobalSearchState")&&(t.state.set("isActive",!1),t.input.blur())}function b(t){this._setQuery(t,!0)}return r._ownInit=function(){var t=this;return t.canBeSearchWithEmptyQuery=!0,t.type="global",t.startScrollPosition=null,e.onChanged("globalSearchQuery",S,t).onChanged("clientGlobalSearchQuery",b,t).onChanged("isGlobalSearchState",f,t),t.state.onChanged("query",u,t).onChanged("isActive",h,t),t},r.clearOrClose=function(){var t=this;o.behaviorConstructor.prototype.clearOrClose.call(t);var a=e.get("globalSearchQuery");return a||c.closeGlobalSearch().attachOnce(t._returnInitialGlobalScroll,t),t},r._beforeRunSearch=function(){return!e.get("isGlobalSearchState")},r._saveAndResetGlobalScroll=function(){var t=this;return t.startScrollPosition=l.recordScroll(),l.resetScroll(),t},r._returnInitialGlobalScroll=function(){var t=this;return t.startScrollPosition&&(l.resetScroll(t.startScrollPosition),t.startScrollPosition=null),t},n})(__jsRegistry.mi, __jsRegistry.bm, __jsRegistry.mf, __jsRegistry.bd, __jsRegistry.aa)||window);
__jsRegistry.mk = __globalRegistry["tz2fXgA"] || (__globalRegistry["tz2fXgA"] = (function(n,o,u,a,c){function i(t,e){this._init(t,e)}var s=i.prototype=a.clone(o.prototype);s._ownInit=function(){var t=this;return o.prototype._ownInit.call(t),t.state.onChanged("wasInFocusInActiveSession",function(e){e&&this._saveAndResetGlobalScroll()},t),t},s._prepareStateModel=function(t){return t.wasInFocusInActiveSession=!1,t},s.inputInteraction.focus=function(t){var e=this;e.state.set("wasInFocusInActiveSession",!0),o.prototype.inputInteraction.focus.call(e,t)};function r(t){var e=this;n.allowDefault(t),e.state.get("isActive")||(e.state.set("isActive",!0),e._runSearch(!0,!0))}return c.firefox&&(s.inputInteraction.touchStart=r),s.inputInteraction.tap=r,{behaviorConstructor:i,init:function(){document.getElementsByClassName("toolbar")[0],n.register("toolbarSearchField",i)}}})(__jsRegistry.am, __jsRegistry.mj, __jsRegistry.s, __jsRegistry.aa, __jsRegistry.ak)||window);
__jsRegistry.ml = __globalRegistry["gw9ZwaA"] || (__globalRegistry["gw9ZwaA"] = (function(l,s,r,c,i,h){function o(e){return e.state.get("isActive")&&!i.get("isGlobalSearchState")}function u(e){var t=this;o(t)&&t._saveAndResetGlobalScroll(),r.switchClass(c.getWrapper(),e,"__global-search-active"),n(t)}function d(e){n(this)}function n(e){r.switchClass(document.body,o(e),"__global-search-empty-mode")}function a(e,t){this._init(e,t)}var m=a.prototype=h.clone(s.prototype);return m._ownInit=function(){var e=this;return s.prototype._ownInit.call(e),i.onChanged("isGlobalSearchState",d,e),e.state.onChanged("isActive",u,e),e},{behaviorConstructor:a,init:function(){l.register("globalSearchField",a)}}})(__jsRegistry.am, __jsRegistry.mj, __jsRegistry.s, __jsRegistry.ax, __jsRegistry.bm, __jsRegistry.aa)||window);
__jsRegistry.mm = __globalRegistry["pTpuXBA"] || (__globalRegistry["pTpuXBA"] = (function(a,n,l,s){function t(e,r){this._init(e,r)}function u(e){var r=this;r.input.value=e,s.switchClass(r.inputRoot,e,"__active")}function c(e){this.input.value=e}return t.prototype={_init:function(r,o){var i=this;return i.inputRoot=o,i.input=o.getElementsByClassName("search_input")[0],l.onChanged("globalSearchQuery",u,i).onChanged("clientGlobalSearchQuery",c,i),i},_provideQueryForGlobalSearch:function(){n.provideQueryForGlobalSearch(this.input.value)},inputInteraction:{tap:function(){this._provideQueryForGlobalSearch()},input:function(){this.input.value!==""&&this._provideQueryForGlobalSearch()}},closeInteraction:{tap:function(){var r=this;r.input.value="",r._provideQueryForGlobalSearch()}}},{behaviorConstructor:t,init:function(){a.register("providerGlobalsSearchField",t)}}})(__jsRegistry.am, __jsRegistry.bn, __jsRegistry.bm, __jsRegistry.s)||window);
__jsRegistry.mn = __globalRegistry["sKkPBcw"] || (__globalRegistry["sKkPBcw"] = (function(o,s,e,t){function r(i,c){this._init(i,c)}var a=r.prototype=t.clone(e.behaviorConstructor.prototype);return a._provideQueryForGlobalSearch=function(){s.sidebar.close(!0),e.behaviorConstructor.prototype._provideQueryForGlobalSearch.call(this)},{behaviorConstructor:r,init:function(){o.register("sidebarSearchField",r)}}})(__jsRegistry.am, __jsRegistry.az, __jsRegistry.mm, __jsRegistry.aa)||window);
__jsRegistry.mo = __globalRegistry["aJNWbQQ"] || (__globalRegistry["aJNWbQQ"] = (function(r){return{markConversationAsRead:function(e){return r.run("chat.push.markAsRead",{conversationIdStr:e})},sendTypingStatus:function(e){return r.run("chat.push.typing-status",{conversationIdStr:e})},sendStickerPM:function(e,s,t,i){return r.run("chat.send.sticker",{conversationIdStr:e,stickerId:s,pervertStickerReply:t,replyMsgIdStr:i})},sendStickerDscs:function(e,s,t,i,c,o,u,d,a,k){return r.run("discussion.send.sticker",{discussionSubjectID:e,discussionTypeID:s,discussionGroupID:t,replyLinkTemplate:i,returnUrl:c,stickerId:o,pervertStickerReply:u,replyCommentId:d,commentPublisherId:a,isOfficial:k})},renewStickerPanel:function(e){return r.run("messaging.renew.sticker.recents",{stickerContext:e})},closeRedLink:function(e){return r.run("messaging.close.red.link",{bannerId:parseInt(e)})},hideOkMessengerPromo:function(){return r.run("messaging.hide.ok-messenger.promo",{})},touchDialogSearch:function(){return r.run("lss.touchChats",{})}}})(__jsRegistry.fx)||window);
__jsRegistry.mp = __globalRegistry["mISbhQ"] || (__globalRegistry["mISbhQ"] = (function(c,y,a,F,h,w,u,i,m,l,d){var g=3e5;function r(e,t){this._init(e,t)}var s=r.prototype=h.clone(c.behaviorConstructor.prototype);function o(e,t){i.switchClass(t.inputRoot,e,"__active"),a.set("isSearchFieldActive",e)}function f(e){var t=Date.now(),n=e.state.get("lastTouchStamp")||-1;t>n+g&&d.touchDialogSearch().anyway(function(){e.state.set("lastTouchStamp",Date.now())})}function S(e){e&&(o(e,this),f(this))}function v(){return i.hasClass(__js_temp_htmlTag,"__tablet-msg")}function j(){v()||this.state.get("isActive")&&this._setQuery(a.get("contextSearchQuery"),!0)}function p(e){var t=this;i.switchClass(t.inputRoot,e,"__in-progress")}function C(){var e=this.state,t=e.get("query")!==""||e.get("isFocused");o(t,this)}return s._initStateWatchers=function(e){var t=this;t.state=s._createState(e.value).onChanged("isActive",S,t).onChanged("inProgress",p,t).onChanged("isFocused",C,t)},s._initSearchViewModelWatchers=function(){a.onChanged("isContextSearchState",j,this)},s.clearOrClose=function(){var e=this,t=document.querySelector("#dlgs-search .item.sm");if(t){var n=t.getElementsByClassName("sclnk")[0],_=m.replaceParams(n.href,{_aid:"","st.lsrch":""});window.location.href=_}else o(!1,this),e._setQuery("",!0),l.back()},{behaviorConstructor:r,init:function(){u.register("messagingSearchField",r)}}})(__jsRegistry.mi, __jsRegistry.mg, __jsRegistry.bm, __jsRegistry.bd, __jsRegistry.aa, __jsRegistry.jk, __jsRegistry.am, __jsRegistry.s, __jsRegistry.m, __jsRegistry.ft, __jsRegistry.mo)||window);
__jsRegistry.mq = __globalRegistry["gGKF5KQ"] || (__globalRegistry["gGKF5KQ"] = (function(r,n,s,a){function i(t,e){this._init(t,e)}return i.prototype={_init:function(e,o){this.domRoot=o},more:{tap:function(){a.toggleClass(this.domRoot,"__expand")}},switchFilter:{tap:function(e){e.preventDefault();var o=s.parentBySelector(e.target,"[data-endpoint]",this.domRoot);o&&n.provideEndpointForGlobalSearch(o.getAttribute("data-endpoint"))}}},{init:function(){r.register("globalSearchFilterSwitcher",i)}}})(__jsRegistry.am, __jsRegistry.bn, __jsRegistry.t, __jsRegistry.s)||window);
__jsRegistry.mr = __globalRegistry["sChxP7g"] || (__globalRegistry["sChxP7g"] = (function(n,c,a,h,u){var d="search_mod";function s(){}function r(t,e){this._init(t,e)}function f(t){var e=this.filtersRoot;a.switchClass(e,t,"__filters-active")}function l(){c.useFilterForField(this.searchFieldId)}return r.prototype={_init:function(e,i){var o=this;o.filtersRoot=i,o.searchFieldId=i.getAttribute("data-search-filter-for"),o.field=null},postConstruct:function(){var e=this;e.field=c.getSearchFieldInstance(e.searchFieldId),e.field.state.synced("isActive",f,e)},getFiltersValues:function(){return h.serialize(this.filtersRoot.getElementsByClassName(d))},_useFilter:l,_toggleCheckbox:function(e){var i=!e.checked;i?e.setAttribute("checked","checked"):e.removeAttribute("checked"),e.checked=i,this._useFilter()},filterRootInteraction:{touchStart:s},checkboxFilters:{touchStart:function(e){var i=u.parentBySelector(e.target,".field");i&&this._toggleCheckbox(i.getElementsByTagName("input")[0])},tap:s},checkboxFiltersInput:{change:l,touchStart:function(e){this._toggleCheckbox(e.target)},tap:s}},{behaviourConstructor:r,init:function(){n.register("searchFilter",r)}}})(__jsRegistry.am, __jsRegistry.bn, __jsRegistry.s, __jsRegistry.fa, __jsRegistry.t)||window);
__jsRegistry.ms = __globalRegistry["sR0tbQg"] || (__globalRegistry["sR0tbQg"] = (function(o,h,a,c,i){function r(t,s,e,n){var u=this;u.formSubmitButton=document.getElementsByClassName("filter_submit")[0]}r.prototype={clearChip:{tap:function(s,e){var n=e.getAttribute("data-id-for");l(n,this.formSubmitButton),a.remove(e)}}},r.isInstant=!0,o.register("searchChips",r),c.specialEnvelopes.contextSearchEndpoint={run:function(s){i.set("contextSearchEndpoint",s.contentDomFirst.textContent)}};function l(t,s){var e=document.getElementById(t);if(e){switch(m(e)){case"checkbox":e.checked=!1;break;case"select":e.selectedIndex=0;break;case"text":case"tel":e.value="";break}s.click()}}function m(t){return t.tagName==="SELECT"?"select":t.tagName==="INPUT"?t.type:null}})(__jsRegistry.am, __jsRegistry.bn, __jsRegistry.s, __jsRegistry.fh, __jsRegistry.bm)||window);
__jsRegistry.mt = __globalRegistry["sP6ReGA"] || (__globalRegistry["sP6ReGA"] = (function(r,t,h,n,i,a,S,o,j,d,g,b,m,F,u){r.search=t.create({init:function(s){a.init(),S.init(),o.init(),j.init(),d.init(),g.init(),b.init(),m.init(),i.init(),u.searchConfiguration=s},update:function(s){h.set("isToolbarSearchOn",s.isToolbarSearchOn||!1),i.initGlobalSearchFields(),n.setSettings(s),a.onSearchServiceUpdate()},discard:function(){a.discard()}}),r.nonLiveSearch=t.create({init:function(s){a.initNonLiveSearch(s)}}),r.updateSearchState=function(e){var s=e.isGlobalSearchState,c=e.isContextSearchState,l=s&&e.query||"";(c||s)&&e.searchFieldId&&i.activateSearchField(e.searchFieldId),h.setPart({isSearchResultState:e.isSearchResultState||!1,isGlobalSearchState:s||!1,isContextSearchState:c||!1,globalSearchEndpoint:e.globalSearchEndpoint.replace(/&amp;/g,"&"),globalSearchQuery:l,clientGlobalSearchQuery:l,contextSearchQuery:c&&e.query||""})}})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.bm, __jsRegistry.mf, __jsRegistry.bn, __jsRegistry.mi, __jsRegistry.mk, __jsRegistry.ml, __jsRegistry.mm, __jsRegistry.mn, __jsRegistry.mp, __jsRegistry.mq, __jsRegistry.mr, __jsRegistry.ms, __jsRegistry.ar)||window);
__jsRegistry.mu = __globalRegistry["s4CIOdg"] || (__globalRegistry["s4CIOdg"] = (function(i,n,o){function s(t,r){this.root=r,this.insertion=t.insertion,this.refNodeId=t.refNodeId,this.searchBehavior=n.getSearchFieldInstance(t.searchInputId)}s.prototype={renderCompletions:function(r){var e;return document.body.contains(r)?e=this.replaceCompletions(r):e=this.insertCompletions(),o.removeClass(e,"hidden"),e},replaceCompletions:function(r){var e=this.root;return e.removeAttribute("id"),o.replace(r,e),e},insertCompletions:function(){var r=this.root;r.removeAttribute("id");var e=document.getElementById(this.refNodeId);if(e){var a=this.insertion;switch(a){case"APPEND":e.appendChild(r);break;case"REPLACE":o.replace(e,r);break;case"AFTER":e.insertAdjacentElement("afterend",r);break;case"BEFORE":e.insertAdjacentElement("beforebegin",r);break;case"KEEP":return r}}return r},updateQuerySearch:{tap:function(r,e){this.searchBehavior.performSearch(e.getAttribute("data-query-str"),{queryType:n.QueryType.COMPLETION})}}},i.register("queryCompletions",s)})(__jsRegistry.am, __jsRegistry.bn, __jsRegistry.s)||window);
__jsRegistry.mv = __globalRegistry["cOF0LAg"] || (__globalRegistry["cOF0LAg"] = (function(w,u,r,A,k,y,i,x,p,m,h,n,D,l,c,g){var s,f="posting-cover";function j(o,e){return e.multiUploadPhoto(e.dom.fileInput,o),e}function P(o,e){var t=e.dom.errorTextContainer.getAttribute("data-error-get-upload");i.show(t)}function d(o,e){var t=this;t.dom=g.byDataId(e),t.getUploadUrlEndpoint=t.dom.fileInput.getAttribute("data-get-upload-url-endpoint")}d.prototype={multiUploadPhoto:function(e,t){var a=this;return s=m.uploadMultiple({fileInput:e,uploadData:t,onPrepareUploadContainer:v,alreadyUploaded:0,uploadLimit:1,onSingleItemUploaded:U,onPreviewCreate:I,progressListener:C,hooksCtx:a},h).then(T,b,a),a.currentUploadTask=s},_processingInput:function(){var e=this;return l.upload()&&e.dom.fileInput.files?(c.request(e.getUploadUrlEndpoint,"POST").then(j,P,e).withToken().send(),!0):!1},uploadInputInteraction:{change:function(e){this._processingInput()}},removeUploadPhoto:{tap:function(e){this.resetPhoto(!0)}},resetPhoto:function(e){this.dom.fieldPhoto.setAttribute("value",""),e&&(this.dom.fileInput.value=null),r.switchClass(this.dom.imageUploadAction,!e,"hidden"),r.switchClass(this.dom.imageUploadContent,e,"hidden")}};function v(){this.resetPhoto(!1),n.clearProgress(this.dom.imageUploadFileProgress),r.removeClass(this.dom.imageUploadFileProgress,"hidden")}function U(o){var e=o.photoId+","+o.uploadData.token;this.dom.fieldPhoto.setAttribute("value",e),r.addClass(this.dom.imageUploadFileProgress,"hidden")}function I(o){this.dom.imageUploadImg.style.backgroundImage="url("+o+")"}function C(o){var e=this.dom.imageUploadFileProgress;e&&n.showProgress(o,e)}function F(){s&&!s.done&&(s.reject({isManualReject:!0}),this.resetPhoto(!0))}function T(o,e){}function b(o,e){s&&o&&o.isManualReject||(i.show(o),e.resetPhoto(!0))}OK.initCoverPhotoUpload=u.create({init:function(e){if(l.upload())p.register("coverPhotoUpload",d);else{var t=document.getElementsByClassName(f)[0];r.addClass(t,"hidden")}},abort:F})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.s, __jsRegistry.t, __jsRegistry.an, __jsRegistry.fv, __jsRegistry.es, __jsRegistry.kz, __jsRegistry.am, __jsRegistry.lr, __jsRegistry.ls, __jsRegistry.lt, __jsRegistry.ak, __jsRegistry.lp, __jsRegistry.fm, __jsRegistry.md)||window);
__jsRegistry.mw = __globalRegistry["lrDBMew"] || (__globalRegistry["lrDBMew"] = (function(G,L,o,j,H,J,p,r,S,_,I,E,V,g,y,U){var i,P="posting-photos",N="posting-photos_ul",d="posting-photos_item",T="."+d,b="__button",B="posting-photos_item_upload",h="js-clone-source",C="js-cloned",c="__has-photos";function O(a,e){return e.multiUploadPhoto(e.fileInput,a),r.photosStartUpload.trigger(),o.addClass(e.rootForm,c),e}function A(a,e){var t=e.errorTextContainer.getAttribute("data-error-get-upload");p.show(t)}function v(a,e){var t=this;t.rootForm=e,t.imageContainer=e.getElementsByClassName(N)[0],t.imageUploadItem=e.getElementsByClassName(b)[0],t.imageUploadItemLabel=e.getElementsByClassName(B)[0],t.icPost=t.imageUploadItemLabel?e.getElementsByClassName("ic-camera-24")[0]:null,t.icSpinner=t.imageUploadItemLabel?e.getElementsByClassName("posting-photos_ic-spinner")[0]:null;var s=e.getElementsByClassName("upload-photo-files_input")[0];t.fileInput=s;var n=s.getAttribute("data-model");t.dataModel=JSON.parse(n),t.errorTextContainer=e.getElementsByClassName("js-error-container")[0],t.getUploadUrlEndpoint=s.getAttribute("data-get-upload-url-endpoint"),t.fakeCount=t.imageUploadItem?2:1,U.attachUntilRendering(r.clearForm,this.onClearPostingForm,this)}v.prototype={multiUploadPhoto:function(e,t){var s=this,n=s.dataModel.photoLimit,u=f(s);return i=_.uploadMultiple({fileInput:e,uploadData:t,onLimitViolation:x,onPrepareUploadContainer:F,alreadyUploaded:u,uploadLimit:n,onSingleItemUploaded:M,onPreviewCreate:R,progressListener:k,hooksCtx:s},I).then(D,q,s),s.currentUploadTask=i},_processingInput:function(){var e=this,t=e.fileInput;return g.upload()&&t&&t.files&&t.files.length?(r.filesSelected.trigger(t),e.processingInput(e,t.files),!0):!1},processingInput:function(e,t){var s={};s.photoCount=t.length,y.request(e.getUploadUrlEndpoint,"POST",s).then(O,A,e).withToken().send()},uploadInputInteraction:{change:function(e){this._processingInput()}},removeUploadPhoto:{tap:function(e){var t=j.parentBySelector(e.target,T);o.remove(t),l(this)}},onClearPostingForm:function(){var e=this.imageContainer.getElementsByClassName(C);if(e){for(var t=e.length-1;t>=0;t--)o.remove(e[t]);l(this)}}};function F(){this.imageUploadItemLabel&&(o.addClass(this.imageUploadItemLabel,"__photo-loading"),o.addClass(this.icPost,"hidden"),o.removeClass(this.icSpinner,"hidden"));var a=this.imageContainer,e=a.getElementsByClassName(h)[0],t=e.cloneNode(!0);o.removeClass(t,h),o.addClass(t,C),o.removeClass(t,"dsn"),a.appendChild(t),l(this)}function M(a){var e=this.imageContainer;if(e){var t=e.lastChild,s=t.getElementsByClassName("js-upload-target")[0],n=a.photoId+","+a.uploadData.token;if(s){s.style.backgroundImage="url("+a.photoUrl+")";var u=t.getElementsByClassName("file-progressbar")[0];u&&t.removeChild(u);var m=t.getElementsByClassName("js-upload-input")[0];m.setAttribute("value",n),(m.type==="radio"||m.type==="checked")&&(m.checked=!0)}}}function R(a){var e=this.imageContainer,t=e.lastChild.querySelector(".js-upload-target");t.style.backgroundImage="url("+a+")"}function k(a){var e=this.imageContainer;e&&E.showProgress(a,e.lastChild.getElementsByClassName("file-progressbar")[0])}function x(){var a=this.errorTextContainer.getAttribute("data-error-limit");p.show(a)}function f(a){var e=a.imageContainer;return e.getElementsByClassName(d).length-a.fakeCount}function w(){if(i&&!i.done){i.reject({isManualReject:!0});var a=this.imageContainer;if(a){var e=a.lastChild;o.hasClass(e,d)&&!o.hasClass(e,"js-clone-source")&&e.getElementsByClassName("file-progressbar").length&&(a.removeChild(e),l(this))}this.fileInput.value=null}}function D(a,e){e.imageUploadItemLabel&&(o.removeClass(e.imageUploadItemLabel,"__photo-loading"),o.removeClass(e.icPost,"hidden"),o.addClass(e.icSpinner,"hidden")),e.fileInput.value=null;var t=e.imageContainer;t.scrollLeft=t.scrollWidth}function q(a,e){var t=e.imageContainer;i&&a&&!a.isManualReject&&(p.show(a),t.removeChild(t.lastChild)),e.fileInput.value=null}function l(a){var e=a.dataModel.photoLimit,t=f(a);t>=e?r.photosUploadLimitReached.trigger():r.photosUploadLimitCleared.trigger(),t<=0&&(r.photosCleared.trigger(),o.removeClass(a.rootForm,c))}OK.initListPhotoUpload=L.create({init:function(e){if(g.upload())S.register("listPhotoUpload",v);else{var t=document.getElementsByClassName(P)[0];t&&o.addClass(t,"hidden")}},abort:w})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.s, __jsRegistry.t, __jsRegistry.an, __jsRegistry.fv, __jsRegistry.es, __jsRegistry.kz, __jsRegistry.am, __jsRegistry.lr, __jsRegistry.ls, __jsRegistry.lt, __jsRegistry.ak, __jsRegistry.lp, __jsRegistry.fm, __jsRegistry.w)||window);
__jsRegistry.mx = __globalRegistry["dNQumng"] || (__globalRegistry["dNQumng"] = (function(n,t){return{onload:function(e){var o=n.start();return t(e,"load",function(s){o.resolveIfNotDone()}),t(e,"error",function(s){o.rejectIfNotDone()}),o},ontime:function(e){var o=n.start();return setTimeout(function(){o.resolve()},e),o}}})(__jsRegistry.n, __jsRegistry.o)||window);
__jsRegistry.my = __globalRegistry["fY2XXQ"] || (__globalRegistry["fY2XXQ"] = (function(n,r){function s(a){var e=new Image,c=r.onload(e);return e.src=URL.createObjectURL(a),c}var m=/\.(png|jpg|jpeg|gif)$/i,t;return{validate:function(e){return e&&m.test(e.name)?s(e):t||(t=n.start().reject())}}})(__jsRegistry.n, __jsRegistry.mx)||window);
__jsRegistry.mz = __globalRegistry["rjAKwVg"] || (__globalRegistry["rjAKwVg"] = (function(d,h,U,B,r,N,p,f,g,m,n,j,C,E,a,i,l,v){function M(o,t){o.status==="redirect"?t.currentSetMainTask.resolve(o.redirect):t.currentSetMainTask.reject(a.createError(o.error,"networkAnswer","setMain",o))}function _(o,t){o?t.currentSetMainTask.reject(a.createError(o,"networkAnswer","setMain")):t.currentSetMainTask.reject(a.createError(o,"network","setMain"))}function P(o,t){t.currentSetMainApiTask=C.run(t.setAsMainEndpoint,{photoId:o.photoId,token:o.uploadData.token}).then(M,_,t)}function k(o,t){t.currentSetMainTask.reject(o)}function u(o){o.state.set("inProcess",!1),o.currentSetMainApiTask=null,o.currentUploadTask=null,o.currentSetMainTask=null}function b(o,t){u(t),t.hideError(),i.change(o)}function S(o,t){this===t.currentSetMainTask&&(u(t),logClientEvent("ajax.newReg.fail.photo",o.from),o.type==="network"?E.show():t.showError(o.text))}function A(o){var t=this;r.switchClass(t.rootForm,o,"__photo-loading"),n.setDisabled(t.buttonUpload,o),n.setDisabled(t.buttonRetryUpload,o)}function y(o){var t=this;r.switchClass(t.selectedPhotoContent,o,"__hidden"),r.switchClass(t.loadErrorContent,!o,"__hidden"),r.switchClass(t.choosePhotoContent,o,"__hidden"),r.switchClass(t.chooseErrorContent,!o,"__hidden")}function F(o){var t=this;t.hideError(),r.switchClass(t.stub,!o,"__hidden"),r.switchClass(t.nonStub,o,"__hidden")}function T(o,t){var e=t.uploader;e.selectedFile===t.validatedFile&&(e.currentPhoto=t.validatedFile,e.hideError(),e.renderImage(URL.createObjectURL(t.validatedFile)))}function w(o,t){var e=t.uploader;e.selectedFile===t.validatedFile&&e.showError(e.errorTextChoose.getAttribute("data-error-file-type"))}function c(o,t){var e=this;e.rootForm=t,e.stub=t.getElementsByClassName("registration-photo_no_photo")[0],e.nonStub=t.getElementsByClassName("registration-photo_has_photo")[0],e.imageContainer=t.getElementsByClassName("registration-photo_img")[0],e.buttonUpload=t.getElementsByClassName("registration-photo_upload-button")[0],e.buttonRetryUpload=t.getElementsByClassName("registration-photo_retry-upload-button")[0],e.choosePhotoContent=t.getElementsByClassName("registration-photo_choose-photo-content")[0],e.chooseErrorContent=t.getElementsByClassName("registration-photo_choose-photo-error")[0],e.errorTextChoose=t.getElementsByClassName("js-error-text_choose")[0],e.selectedPhotoContent=t.getElementsByClassName("registration-photo_selected-photo-content")[0],e.loadErrorContent=t.getElementsByClassName("registration-photo_load-error-content")[0],e.errorTextLoad=t.getElementsByClassName("js-error-text_load")[0];var s=t.getElementsByClassName("registration-upload-files_input")[0];e.fileInput=s,e.currentUploadTask=null,e.currentSetMainApiTask=null,e.currentSetMainTask=null,e.getUploadUrlEndpoint=s.getAttribute("data-get-upload-url-endpoint"),e.setAsMainEndpoint=s.getAttribute("data-set-as-main-endpoint"),e.initialUploadData={uploadSuccessAdaptee:JSON.parse(s.getAttribute("data-initial-upload-success-adaptee")),uploadUrl:s.getAttribute("data-initial-upload-url")},e.selectedFile=null,e.currentPhoto=null,e.state=j.create({inChoose:!0,inProcess:!1,inError:!1}).onChanged("inProcess",A,e).onChanged("inError",y,e).onChanged("inChoose",F,e)}c.prototype={renderImage:function(t){var e=this,s=!t;return e.imageContainer.style.backgroundImage="url("+t+")",e.state.set("inChoose",s),e},showError:function(t){var e=this;return e.state.get("inChoose")?e.errorTextChoose.innerHTML=t:e.errorTextLoad.innerHTML=t,e.state.set("inError",!0),e},hideError:function(){var t=this;return t.state.set("inError",!1),t},_processingFirstPhotoFromInput:function(){var t=this;if(l.upload()){var e=t.fileInput.files[0];if(e!==null)return t.selectedFile=e,v.validate(e).then(T,w,{validatedFile:e,uploader:t}),!0}return!1},uploadPhoto:function(t){var e=this,s=e.initialUploadData;s&&(e.initialUploadData=null);var I=g.upload(t,e.getUploadUrlEndpoint,s).then(P,k,e);return e.currentUploadTask=I},setFileAsMainPhoto:function(t){var e=this,s=e.currentSetMainTask=p.start().then(b,S,e);return m.start(s),e.state.set("inProcess",!0),e.uploadPhoto(t),s},closeUploadedPhoto:function(){var t=this;return t.fileInput.value="",t.renderImage().hideError()},closeAction:{tap:function(t){this.closeUploadedPhoto()}},uploadAction:{tap:function(){var t=this;t.setFileAsMainPhoto(t.currentPhoto)}},retryUploadAction:{tap:function(){var t=this;t.setFileAsMainPhoto(t.currentPhoto)}},uploadInputInteraction:{change:function(t){this._processingFirstPhotoFromInput()}}},d.initRegistrationPhotoUpload=h.create({init:function(t){l.upload()?f.register("registrationPhotoUpload",c):i.change(t.fallbackLink)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.bw, __jsRegistry.fm, __jsRegistry.s, __jsRegistry.m, __jsRegistry.n, __jsRegistry.am, __jsRegistry.ls, __jsRegistry.da, __jsRegistry.ku, __jsRegistry.ab, __jsRegistry.fx, __jsRegistry.es, __jsRegistry.lq, __jsRegistry.ew, __jsRegistry.lp, __jsRegistry.my)||window);
__jsRegistry.na = __globalRegistry["fgQv9wQ"] || (__globalRegistry["fgQv9wQ"] = (function(j,f,u,v,d){var c="__error",h="data-validate-patterns",p={ignore:_};function l(r){var e=this,t=u.parentBySelector(r,".selects-set"),i=u.parentBySelector(r,".field");e.fieldRoots=[],t&&e.fieldRoots.push(t),i&&e.fieldRoots.push(i),e.fieldElement=r,e.fieldType=r.type,e.isErrorShown=d.has(this.fieldRoots,function(s){return f.hasClass(s,c)});var a=r.getAttribute(h);if(a&&a.length>2)try{var o=JSON.parse(a);e.validationPatterns=R();for(var n in o)e.validationPatterns[n]=new RegExp(o[n])}catch(s){}}l.prototype={constructor:l,validate:function(e){var t=this;return t._hideError(),t._validatePattern(e),t},_hideError:function(){var e=this;return e.isErrorShown&&v(e.fieldRoots,function(t){f.removeClass(t,c)}),e},_validatePattern:function(e){var t=this.validationPatterns;if(t)for(var i in t){var a=p[i];a&&a.call(this,e,t[i])}}};function _(r,e){var t=r.data,i;if(t&&e.test(t)){var a=r.target,o=this.fieldType==="number",n=a.value||(o?a.getAttribute("value"):""),s=n.indexOf(t);s===-1&&(s=n.length),a.value=n.replace(e,""),o&&(i="number",a.type="tel"),a.setSelectionRange(s,s),i&&(a.type=i)}}function R(){if(Object.create)return Object.create(null);var r={};return r.__proto__=null,r}return{create:function(e){return new l(e)}}})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.t, __jsRegistry.k, __jsRegistry.bl)||window);
__jsRegistry.nb = __globalRegistry["fFVMVww"] || (__globalRegistry["fFVMVww"] = (function(t){function n(a){return a.okFieldValidation?a.okFieldValidation:a.okFieldValidation=t.create(a)}function i(a){n(a.target).validate(a)}return{createHandlers:function(){return{input:i,change:i}}}})(__jsRegistry.na)||window);
__jsRegistry.nc = __globalRegistry["v6vE1Jw"] || (__globalRegistry["v6vE1Jw"] = (function(o,a){function e(r,t){}return e.prototype={validate:a.createHandlers()},{behaviorConstructor:e}})(__jsRegistry.am, __jsRegistry.nb)||window);
__jsRegistry.nd = __globalRegistry["fVmdnXA"] || (__globalRegistry["fVmdnXA"] = (function(a,e,i,r){a.formValidation=e.create({init:function(){r.register("validatableForm",i.behaviorConstructor)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.nc, __jsRegistry.am)||window);
__jsRegistry.ne = __globalRegistry["jVlZkQA"] || (__globalRegistry["jVlZkQA"] = (function(n){n.showJamliveIframe=function(t){setTimeout(function(){if(!document.getElementById("jamliveiframe")){var e=document.createElement("iframe");e.id="jamliveiframe",e.style.display="none",e.src=t.url,document.body.appendChild(e)}},t.timeout)}})(__jsRegistry.c)||window);
__jsRegistry.nf = __globalRegistry["gbxr74Q"] || (__globalRegistry["gbxr74Q"] = (function(c,A,P,T,I,m,B,b,f,i){var u,w,_,j,x,v,g,p,o;c.showLottery=function(n,e,t){var d=0,s=new A.newInstance;s.lock();var a=document.getElementById("game-lottery-layer");a&&document.body.removeChild(a),a=document.createElement("div"),a.className="game-lottery",a.id="game-lottery-layer",a.innerHTML='<div class="top-box"><div class="game-info"><img class="game-info-img u-ava_img" src="'+n+'"/><div class="game-block"><div class="game-name">'+e+'</div><div class="run-status">'+_+'</div></div></div><div class="progress" id="game_lottery_progress"></div></div><div class="dialog-box"><div class="popup-box"><div class="box-bg"></div><div class="title">'+w+'</div><div class="percent">+'+g+'%</div><div class="okbtn base-button __modern __accept" id="game_lottery_on_ok"><div class="base-button_bg"></div><div aria-hidden="true" class="base-button_content"><div class="base-button_content_text">'+j+'</div></div></div></div><input type="button" class="nobtn" value="'+x+'" id="game_lottery_on_no"></div>',document.body.appendChild(a);var h=document.getElementById("game_lottery_progress"),l=setTimeout(function r(){d++,h.style.width=d*100/u+"%",d<=u?l=setTimeout(r,1e3):L()},1e3);function y(){s.unlock(),clearTimeout(l);var r=document.getElementById("game-lottery-layer");r&&document.body.removeChild(r)}function L(){m.statePopping.detach(y),s.unlock(),clearTimeout(l),o?(i.change(t),document.body.removeChild(a)):window.location.href=t}document.getElementById("game_lottery_on_no").onclick=L;function N(){m.statePopping.detach(y),s.unlock(),clearTimeout(l),b.request(f.insertParams(p,{"st.action":"accept"}),"POST").then(function(r){r.result?o?i.change(v):window.location.href=v:o?i.change(t):window.location.href=t},function(){o?i.change(t):window.location.href=t}).send()}document.getElementById("game_lottery_on_ok").onclick=N,m.statePopping.attach(y)};function k(n,e){this.elem=e,this.model=n}k.prototype={click:{tap:function(e){var t=this.elem.getAttribute("data-app-url")||e.target.getAttribute("data-app-url"),d=this.elem.getAttribute("data-new-window")||e.target.getAttribute("data-new-window");if(g>0){var s=this.elem.getAttribute("data-app-icon")||e.target.getAttribute("data-app-icon"),a=this.elem.getAttribute("data-app-name")||e.target.getAttribute("data-app-name");b.request(f.insertParams(p,{"st.action":"check"}),"POST").then(function(h){h.result?o?i.change(t):window.location.href=t:c.showLottery(s,a,t)},function(){o?i.change(t):window.location.href=t}).send()}else d==="true"?window.open(t,"_blank"):o?i.change(t):window.location.href=t;return e.preventDefault(),!1}}},c.initGameLottery=I.create({init:function(e){u=e.maxLotteryDuration,w=e.textMotivation,_=e.textLaunching,j=e.textDeposit,x=e.textNo,v=e.paymentRechargeUrl,p=e.lotteryPromoCommand||"/dk?st.cmd=ajaxGameLottery",g=e.discount,o=e.fixAjaxNavigation,P.register("showGameLottery",k)}}),T.addFuncHandler("openInNewWindow",{tap:function(e,t){window.open(t.href,"_blank")}})})(__jsRegistry.c, __jsRegistry.ez, __jsRegistry.am, __jsRegistry.an, __jsRegistry.x, __jsRegistry.ft, __jsRegistry.bw, __jsRegistry.fm, __jsRegistry.m, __jsRegistry.ew)||window);
__jsRegistry.ng = __globalRegistry["df5N1A"] || (__globalRegistry["df5N1A"] = (function(l,u,t){var i,e,a,o;function d(n){a=document.querySelector(".daily-reward-banner_host"),e=n.ticks,o=n.callback,a&&t.removeClass(a,"hidden"),u.use(n.url+"main.js",function(){a!=null&&setTimeout(function(){r(e)},n.delay)});function c(s){i=l.OkArt.run({name:n.name,rootUrl:n.url,host:a,appendToHost:!0,onFinished:s})}function r(s){c(),e--,s>0?setTimeout(function(){r(e)},n.animationDelay):(t.addClass(a,"hidden"),o&&n.callback())}}function m(){i&&(e=0,i.stop(),setTimeout(function(){t.addClass(a,"hidden")},250))}return{play:d,stop:m}})(__jsRegistry.ei, __jsRegistry.q, __jsRegistry.s)||window);
__jsRegistry.nh = __globalRegistry["dx3PKWg"] || (__globalRegistry["dx3PKWg"] = (function(u,h,n,m,i,c,o,y){var a,r;function d(s,e){this.root=e}d.prototype={closeDailyReward:{tap:function(e,t){i.stop(),l(t)}}},m.register("dailyRewardBehavior",d);function l(s){a&&(c.request(s.href,"POST").send(),a=!1)}u.create({name:"dailyRewardAnimation",update:function(e){if(!a){var t=e.bannerId;r=document.getElementById("dailyRewardBanner").cloneNode(!0),y.removeClass(r,"hidden"),n.show(r.outerHTML,e.durationTotal,{type:n.NotificationType.TRANSPARENT,insertMode:n.NotificationInsertMode.CONTENT}),i.play({url:e.resourceUrl,name:e.name,delay:e.delay,animationDelay:e.animationDelay,ticks:e.animationTicks,callback:function(){if(a){var j=document.querySelector(".daily-reward-banner_close");l(j),o.log("daily_rubies",["banner-show-finished",t])}}}),a=!0,o.log("daily_rubies",["banner-show-started",t])}},discard:function(){r=null,a=null}})})(__jsRegistry.x, __jsRegistry.c, __jsRegistry.es, __jsRegistry.am, __jsRegistry.ng, __jsRegistry.bw, __jsRegistry.a, __jsRegistry.s)||window);
__jsRegistry.ni = __globalRegistry["lBEdgw"] || (__globalRegistry["lBEdgw"] = (function(u,a,n,o,g,j){var s=".js-ajax-btn",v=".js-ajax-envelope-btn",d="js-env-loader",i="js-env-loading";u.create({name:"listenToAjaxPageUpdateLinks",init:function(l){a.onLinkToAjaxEnvelope({selector:v,requestDelayTime:l.requestDelayTime||0,prepare:function(e){var r=e.target,c={};if(n.hasClass(r,d)){var p=r.getAttribute("data-env-loader-id"),m=p?document.getElementById(p):r;n.addClass(m,i),c.loaderTarget=m}return c},complete:function(e){e.loaderTarget&&n.removeClass(e.loaderTarget,i)},processing:{onComplete:function(e){j.htmlFromEnvelopeInserted.trigger(e)}}}),a.onLink({selector:s,requestDelayTime:l.requestDelayTime||0,prepare:function(e){var r=e.target;if(o.matches(r,s)||(r=o.parentBySelector(r,s)),r)return{target:r,wrapper:r.parentNode};e.cancelled=!0},success:function(e){e.wrapper.outerHTML=e.response}}),a.onLink({selector:".js-action"})}})})(__jsRegistry.x, __jsRegistry.fd, __jsRegistry.s, __jsRegistry.t, __jsRegistry.u, __jsRegistry.dm)||window);
__jsRegistry.nj = __globalRegistry["dWVe4Gg"] || (__globalRegistry["dWVe4Gg"] = (function(v,i,o,d,l,a){var e,n,t,s;function c(){t=document.querySelector(".js-daily-reward-portlet-poster"),s=l(m,200)}function m(){if(t){var r="__active";a.switchClass(t,n,r),setTimeout(function(){t&&a.removeClass(t,r)},200)}}function u(r){e&&(n=r.inViewport,r.inViewport?o.changed.attach(s):o.changed.detach(s))}d.create({name:"dailyRewardInitPortlet",update:function(){e=document.querySelector(".js-daily-reward-portlet"),e&&(i.initObserver("dailyRewardInitPortletObserver",{viewThreshold:0}),i.observe(e,{registered:c,track:u},"dailyRewardInitPortletObserver"))},discard:function(){window.removeEventListener("scroll",s),e&&i.unobserve(e),e=t=s=null}})})(__jsRegistry.aw, __jsRegistry.dj, __jsRegistry.bd, __jsRegistry.x, __jsRegistry.bb, __jsRegistry.s)||window);
__jsRegistry.nk = __globalRegistry["gGHnKzQ"] || (__globalRegistry["gGHnKzQ"] = (function(r,s,m,a,i,h){var d=function(g,c){var t=this;this.model=g,this.root=c,this.open={tap:function(e,l){var o=t.model,n=o.width,p=o.height,u={px:(0,a.getFlooredPercent)((0,i.touchX)(e),n),py:(0,a.getFlooredPercent)((0,i.touchY)(e),p)};t.openGame(u)}},this.openGame=function(e){var l=t.model.linkTemplate,o=encodeURIComponent('"'),n=(0,h.simpleReplacer)(l,{x:e.px,y:e.py},{regexp:new RegExp(o+"__(\\w+)__"+o,"g")});m.log("click.main",["game",t.model.bannerId]),s.change(n)}};(0,r.register)("gameChallenge",d)})(__jsRegistry.am, __jsRegistry.ew, __jsRegistry.a, __jsRegistry.ds, __jsRegistry.aj, __jsRegistry.fe)||window);
__jsRegistry.nl = __globalRegistry["eXDHCNQ"] || (__globalRegistry["eXDHCNQ"] = (function(h,a){var E="data-content",C="data-expand-class",m="data-hide-class",v="data-more",c="__expand",o="__short",T="hidden",p=".js-content",A=".js-more",u=".js-once-log-expand",l=(function(){function d(f,e){var s=this;this.isArea=!1,this.expandClass="",this.hideClass="",this.expand={tap:function(_,g){var r=s.contentElement,i=s.moreElement;r&&i&&(i.contains(_.target)||s.isArea)&&((0,a.addClass)(r,s.expandClass),(0,a.addClass)(i,s.hideClass),(0,a.hasClass)(r,o)||s.removeTargetLog())}};var t=e.querySelector(e.getAttribute(E)||p),n=e.querySelector(e.getAttribute(v)||A);this.expandElement=e.querySelector(u),this.isArea=!!e.dataset.area,this.contentElement=t,this.moreElement=n,this.expandClass=e.getAttribute(C)||c,this.hideClass=e.getAttribute(m)||T,t&&n?t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth?(0,a.removeClass)(n,this.hideClass):((0,a.addClass)(n,this.hideClass),(0,a.addClass)(t,o),this.removeTargetLog()):this.removeTargetLog()}var S=d.prototype;return S.removeTargetLog=function(){this.expandElement&&this.expandElement.dataset&&this.expandElement.dataset.logClick&&delete this.expandElement.dataset.logClick},d})();l.isInstant=!0,(0,h.register)("expandContent",l)})(__jsRegistry.am, __jsRegistry.s)||window);
__jsRegistry.nm = __globalRegistry["alTAfIw"] || (__globalRegistry["alTAfIw"] = (function(){var t={};Object.defineProperty(t,"AndroidServiceEventsService",{enumerable:!0,get:function(){return e}});var e=(function(){function r(){}var i=r.prototype;return i.sendEvent=function(n,c){var o;if((o=window.OKApp)!=null&&o.processServiceEvent){var d=JSON.stringify({event:n,data:c});window.OKApp.processServiceEvent(d)}},i.sendBottomLayerEvent=function(n){this.sendEvent("WEB_BOTTOM_LAYER_SHOW",n)},r})();return e.instance=new e,t})()||window);
__jsRegistry.nn = __globalRegistry["cdFDsg"] || (__globalRegistry["cdFDsg"] = (function(m,P,f,j,F,K,M,R,D,T){var x={};function z(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,t).get})}z(x,{get close(){return C},get discard(){return re},get init(){return te},get isOpened(){return oe},get open(){return Z},get setBottomSheetHeight(){return ee}});function W(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var h=D,o,y,A,i={},E,u;function v(e,r){var t=e.getElementsByClassName(r);return t&&t.length>0?t[0]:null}function Y(e,r){if(e){if(u=e,o=document.getElementById("ok-app-frame-ctoolbar"),A=document.getElementById("ok-app-frame-ctoolbar_overlay"),e.controlToolbarModificator&&o.classList.add(e.controlToolbarModificator),y=document.getElementsByClassName("game-frame_frame")[0],y){if(e.problem){i.callback&&i.callback.error(e.problem);return}T.AndroidServiceEventsService.instance.sendBottomLayerEvent(!0);var t="window.open=";if(e.html.indexOf(t)===0)window.open(e.html.substring(t.length));else{S(!0);var a=J(e);V(y,a)}i.currentBlock=r}}else u=void 0}function V(e,r){if(r){var t=0;h(r.getElementsByTagName("img"),function(a){if(!(a.complete&&a.naturalHeight>1)){var n=function(){t==1&&O(e,r),t--},s=new Image;s.src=a.src,s.onload=n,s.onerror=n,t++}}),t||O(e,r)}}function N(e){var r=.9,t=o,a=t.querySelectorAll("[data-custom-height-set]");h(a,function(d){d.style.height="",d.style.maxHeight=""});var n=e.getElementsByTagName("IFRAME")[0],s=window.innerHeight*r;n&&n.parentElement&&(n.parentElement.style.height=s-v(e,"title").offsetHeight-Number(n.getAttribute("data-offset"))+"px",n.parentElement.setAttribute("data-custom-height-set","1"));var c=i.fixMaxHeight?s:Math.min(s,e.offsetHeight);t.style.maxHeight=c+"px",(!u||u.hideCloseControl!==!0)&&t.querySelector(".game-frame_ctoolbar-close").classList.remove("dsn"),u&&u.closeWithOverlay===!0&&A.classList.remove("dsn");var l=e.getAttribute("data-controls"),b=e.getAttribute("data-content");if(b&&l&&e.offsetHeight>s){var w=v(e,b);w.style.maxHeight=c-v(e,"title").offsetHeight-v(e,l).offsetHeight-Number(e.getAttribute("data-offset"))+"px",w.setAttribute("data-custom-height-set","1")}var g=e.querySelectorAll("[data-height-limit]");h(g,function(d){d.style.height=Math.min(d.scrollHeight,Number(d.getAttribute("data-height-limit"))*window.innerHeight)+"px",d.setAttribute("data-custom-height-set","1")});var p=v(e,"ctoolbar-user_list"),H=e.querySelectorAll("[data-check-scroll]");h(H,function(d){var k=d.getAttribute("data-check-scroll"),B=d.querySelector(":not(."+k+")");d.style.overflowY=B.offsetHeight<p.offsetHeight?"hidden":"scroll"}),h(e.querySelectorAll("[data-set-height]"),function(d){var k=0,B=d.parentElement;h(B.children,function(_){_.getAttribute("data-set-height")||(k+=_.offsetHeight)}),d.style.maxHeight=c-k-(v(B,"title")?0:v(e,"title").offsetHeight)+"px",d.setAttribute("data-custom-height-set","1")});var q=e.getAttribute("data-toolbar-class");q&&f.addClass(o,q),G()}function G(){o.setAttribute("data-orientation",String(window.innerWidth))}function O(e,r){for(var t=r.firstElementChild,a=o.lastElementChild;o.childNodes.length>1;)o.removeChild(a);f.addClass(e,"__fade"),f.addClass(o,"__open"),N(t),o.appendChild(t),document.body.removeChild(r)}function J(e){var r=document.createElement("DIV");r.className="invisible whp";var t=F.createDomTree(e.html);return r.appendChild(t.firstElementChild),document.body.appendChild(r),r}function Q(e){i.callback&&i.callback.error((typeof e>"u"?"undefined":W(e))=="object"?"errorKey"in e?e.errorKey:"service":e)}function S(e){typeof m.OKApp<"u"&&typeof m.OKApp.registerBackProcessor<"u"&&(e?(m.OKApp.registerBackProcessor("__controlToolbarBackProcessor"),window.__controlToolbarBackProcessor=function(){C()}):m.OKApp.removeBackProcessor())}function X(e){typeof m.OKApp>"u"||typeof m.OKApp.setFullScreen>"u"||m.OKApp.setFullScreen(e)}function Z(e,r,t,a,n,s){if(n===void 0&&(n=!1),s===void 0&&(s=!1),L(),u=void 0,e){if(a&&i.currentBlock===e){t.error("layer already exists");return}if(o=document.getElementById("ok-app-frame-ctoolbar"),o)return i.opened=!0,i.callback=t,i.silentClose=n,i.fixMaxHeight=s,j.run("fapi.requestBlock."+e,r).then(function(c){Y(c,e)},Q)}}function $(){L(),u=void 0,S(!1),X(!0)}function C(e){$();var r=[],t={};h(o.querySelectorAll("[data-result]"),function(c){var l=c.getAttribute("data-result");l&&!(l in t)&&(r.push(l),t[l]=1)});var a=[],n={};h(o.querySelectorAll("[data-error]"),function(c){var l=c.getAttribute("data-error");l&&!(l in n)&&(a.push(l),n[l]=1)}),i.callback&&!e&&!i.silentClose&&(a.length>0?i.callback.error(a.join(",")):r.length>0?i.callback.success(r.join(",")):i.callback.error("cancel"),i.callback=null),i.opened=!1,T.AndroidServiceEventsService.instance.sendBottomLayerEvent(!1),f.removeClass(y,"__fade"),f.removeClass(o,"__open"),o.style.maxHeight="0";var s=o.querySelector(".game-frame_ctoolbar-close");for(s&&!s.classList.contains("dsn")&&s.classList.add("dsn"),A&&!A.classList.contains("dsn")&&A.classList.add("dsn");o.childNodes.length>1;)o.removeChild(o.lastChild);i.currentBlock=void 0}function I(){E&&(document.body.style.height=window.innerHeight+"px"),o.offsetHeight>1&&o.getAttribute("data-orientation")!=String(window.innerWidth)&&N(o.lastElementChild)}function L(){u&&u.controlToolbarModificator&&o.classList.remove(u.controlToolbarModificator)}P.addFuncHandler("ctoolbar-close",{tap:function(){C()}});var U=function(r,t){var a=this;this.switchTabs={tap:function(n){var s=M.parentBySelector(n.target,".tabs_item"),c=a.domRoot.getElementsByClassName("tabs_list")[0],l=Array.prototype.indexOf.call(c.childNodes,s),b=a.domRoot.querySelectorAll(".ctoolbar-user_list .list-block"),w=v(a.domRoot,"ctoolbar-user_list");w.scrollTop=0,h(b,function(g,p){f.switchClass(g,p!=l,"__hide"),p==l&&(w.style.overflowY=g.offsetHeight<w.offsetHeight?"hidden":"scroll")}),h(c.childNodes,function(g,p){f.switchClass(g,p!=l,"__active");var H=g.firstElementChild;p==l?(f.removeClass(H,"alnk"),f.addClass(H,"aslnk")):(f.removeClass(H,"aslnk"),f.addClass(H,"alnk"))})}},this.domRoot=t,this.model=r};function ee(e,r,t,a){var n=document.getElementById("ok-app-in-ctoolbar"),s=R.calc().height,c=n.offsetHeight,l=Math.floor(c*(t/r));s>l?(n.style.height=l+"px",e.success("height changed")):e.error("invalid height passed");var b=document.querySelector(".js-ct-launch-header");f.switchClass(b,a,"hidden")}function te(e){o=document.getElementById("ok-app-frame-ctoolbar"),y=document.getElementsByClassName("game-frame_frame")[0],o&&(o.style.maxHeight="0"),i={},E=e,window.addEventListener("resize",I),E&&(document.body.style.height=window.innerHeight+"px")}function re(){o=null,y=null,S(!1),window.removeEventListener("resize",I),E&&document.body.style.removeProperty("height"),i.opened=!1}function oe(){return i.opened===!0}return K.register("controlToolbarNav",U),m.storeFields({closeControlToolbar:C}),x})(__jsRegistry.c, __jsRegistry.an, __jsRegistry.s, __jsRegistry.fx, __jsRegistry.cq, __jsRegistry.am, __jsRegistry.t, __jsRegistry.bd, __jsRegistry.k, __jsRegistry.nm)||window);
__jsRegistry.no = __globalRegistry["aiJWkoA"] || (__globalRegistry["aiJWkoA"] = (function(A,E,_,T){var v={};function y(i,o){for(var e in o)Object.defineProperty(i,e,{enumerable:!0,get:Object.getOwnPropertyDescriptor(o,e).get})}y(v,{get appRatingAutomation(){return I},get updateRatingValueInMenu(){return g}});function p(){return p=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},p.apply(this,arguments)}var L=(function(){function i(e,r){var t=this,d;this.model=e,this.root=r,this.onCommentChange=function(a){t.updateModel({comment:a.target.value}),t.model.comment.length>=(t.model.commentMaxLength||200)?t.setError(0,!0):t.setError(0,!1),t.validateSubmitButton()},this.closeToolbar=function(){var a;(a=t.commentInput)==null||a.removeEventListener("input",t.onCommentChange),_.close()},this.validateSubmitButton=function(){var a=t.model,m=a.rating,n=a.previousRating,s=a.comment,l=!!t.commentInput,u=!!m,c=m!==n,B=!l||s!==t.initialComment,x=u&&(c||B);if(x){var h,b;(h=t.submitButton)!=null&&h.hasAttribute("disabled")&&((b=t.submitButton)==null||b.removeAttribute("disabled"))}else{var f,C;(f=t.submitButton)!=null&&f.hasAttribute("disabled")||((C=t.submitButton)==null||C.setAttribute("disabled","disabled"))}},this.setError=function(a,m){var n=a===1?t.model.moderationErrorText:t.model.maxLengthErrorText;if(m){var s,l;t.errorContainer&&(t.errorContainer.innerText=n||""),(s=t.commentInput)!=null&&s.classList.contains("__has_error")||((l=t.commentInput)==null||l.classList.add("__has_error"))}else{var u,c;t.errorContainer&&(t.errorContainer.innerText=""),(u=t.commentInput)!=null&&u.classList.contains("__has_error")&&((c=t.commentInput)==null||c.classList.remove("__has_error"))}},this.rate={tap:function(a,m){E.run("fapi.app.rating",{userId:t.model.userId,appId:t.model.appId,rating:t.model.rating,comment:t.model.comment,isFirstTimeComment:!t.initialComment}).then(function(n,s){n.problem?(n.problem==="moderation"&&t.setError(1,!0),t.root.setAttribute("data-error",n.problem)):(t.root.setAttribute("data-result",t.model.rating.toString()),g(t.model.rating,n.averageRating),t.closeToolbar())},function(){t.root.setAttribute("data-error","service"),t.closeToolbar()})}},this.select={tap:function(a,m){var n,s=m.getAttribute("data-index");(0,T.htmlElementsAsArray)(((n=t.starsContainer)==null?void 0:n.children)||[]).forEach(function(l){l.getAttribute("data-index")<=s?l.classList.contains("active")||l.classList.add("active"):l.classList.remove("active")}),t.updateModel({rating:+s}),t.validateSubmitButton()}},this.init={tap:function(a,m){}},this.submitButton=document.getElementsByName("button_app_rating")[0],this.starsContainer=document.getElementsByClassName("app-rating_stars")[0],this.commentInput=document.getElementsByClassName("app-rating_comment")[0],this.errorContainer=document.getElementsByClassName("app-rating_error-container")[0],(d=this.commentInput)==null||d.addEventListener("input",this.onCommentChange),this.initialComment=e.comment||"",this.model.isFirstTimeComment=!this.initialComment}var o=i.prototype;return o.updateModel=function(r){this.model=p({},this.model,r),this.root.okData=this.model,this.root.setAttribute("data-model",JSON.stringify(this.model))},i})();(0,A.register)("appRating",L);var g=function(i,o){var e=document.getElementsByClassName("app-bottomsheet_rating-container")[0];if(e&&o){e.lastChild&&e.removeChild(e.lastChild);var r=document.createElement("span");if(r.innerHTML=o.toFixed(1).toString(),e.append(r),e.classList.remove("__hidden"),i){var t=document.getElementsByClassName("app-bottomsheet_my-rating")[0];if(t)t.innerHTML=i.toString();else{var d=document.createElement("span");d.classList.add("app-bottomsheet_my-rating"),d.innerHTML=i.toString();var a=document.createElement("span");a.classList.add("app-bottomsheet_separator"),a.innerHTML="/",e.lastChild.before(d,a)}}}},I={run:function(o){var e="ok-app-frame",r=document.getElementById(e),t=r.getAttribute("data-rating-automation-enabled"),d=r.getAttribute("data-rating-last-shown-date"),a=r.getAttribute("data-rating-value"),m=r.getAttribute("data-rating-show-delay-days"),n=r.getAttribute("data-rating-show-gap-minutes");if(t==="true"&&d!=null&&m&&n&&(!a||a==="0")){var s=6e4,l=s*60*24;if(!d){setTimeout(o,+n*s);return}var u=new Date(d);u.setTime(u.getTime()+ +m*l),Date.now()>u.getTime()&&setTimeout(o,+n*s)}}};return v})(__jsRegistry.am, __jsRegistry.fx, __jsRegistry.nn, __jsRegistry.bl)||window);
__jsRegistry.np = __globalRegistry["tzl8ssA"] || (__globalRegistry["tzl8ssA"] = (function(t,p,c,s){function r(n,o,e,a){var g={success:function(){},error:function(l){l==="cancel"&&p.log("app.games",[o+".close","mobile_html",e,a,null,!1],"cancel")}};t.open(n,{appId:e},g,!0)}return{openAppRating:{trigger:function(o,e,a){r("appRating","rating_dialog",e,a)}},openAppComplain:{trigger:function(o,e,a){r("appComplain","app_complaint",e,a)}},openGameMenu:s.create()}})(__jsRegistry.nn, __jsRegistry.a, __jsRegistry.no, __jsRegistry.u)||window);
__jsRegistry.nq = __globalRegistry["tvSBbQQ"] || (__globalRegistry["tvSBbQQ"] = (function(_,r,l,p,S,T,O,f,A){var c="__toggle-on",h="__top",k="__top-switchable-menu",j="__center-switchable-menu",L="__top-switchable",I="data-toggle-unlinked",B="data-toggle-events",E="data-appId",y="data-userId",N="js-ajax-toggle-link",o=[],d=!1;function w(t,i){this.data=t,this.viewContext=i,this.togglerState=!1,this.togglerInitState,i.getAttribute("data-toggle-checked")=="true"&&(this.togglerInitState=!0),this.unlinked=i.getAttribute(I)}function D(t){for(var i=o.length,e=t.target,s=!1,a=i;a--&&!s;)s=p.isChildOf(e,o[a]);s||this.toggleOff()}function b(){!this.unlinked&&this.togglerState!==this.togglerInitState&&l.switchClass(this.viewContext,this.togglerInitState,c)}function x(){m(),o.length=0,d=!1}function m(){var t=o.length;if(t)for(var i=t;i--;){var e=o[i].okBehavior;e&&e.resetToggleBlock()}}function P(){r.tapPreview.detach(this.onOutClick,this)}function V(){if(l.hasClass(this.viewContext,L)){var t=!this.togglerState;if((!t||l.hasClass(this.viewContext,h))&&l.removeClass(this.viewContext,h),t){var i=this.viewContext.parentNode.getElementsByClassName(k)[0];O.shallOpenUpwards(i)&&l.addClass(this.viewContext,h)}}}function M(){if(!this.togglerState){var t=this.viewContext.parentNode.getElementsByClassName(j)[0];t&&(t.style.marginLeft=t.clientWidth/-2+"px",t.style.left="50%")}}function v(t,i){var e=this,s=e.viewContext;t.href&&(i.preventDefault(),l.hasClass(t,N)&&A.goSpecific(t)),l.hasClass(s,c)?(e.togglerState=!1,f.close.trigger(),l.removeClass(s,c)):(e.togglerState=!0,f.close.trigger(),l.addClass(s,c)),e.switchTopClass(),e.switchCenterClass(),d||(d=!0,o=document.querySelectorAll("[data-view=toggleView]"),r.tapPreview.attach(e.onOutClick,e),T.navigating.attachOnce(function(){e.removeOutClickListener(),e.resetToggleModule()})),typeof e.togglerInitState>"u"&&(e.togglerInitState=!e.togglerState);var a=t.getAttribute(B),n=t.getAttribute(E),C=t.getAttribute(y);a&&a!==""&&a.split(" ").forEach(function(g){var u=_[g];u&&u.trigger(e.togglerState,n,C)}),r.allowDefault(i)}w.prototype={toggleView:{tap:function(i,e){v.call(this,e,i)},keyDown:function(i,e){i.keyCode===13&&v.call(this,e,i)}},onOutClick:D,resetToggleBlock:b,resetToggleModule:x,removeOutClickListener:P,switchTopClass:V,switchCenterClass:M,toggleOff:function(){this.removeOutClickListener(),this.resetToggleModule()},toggleOn:function(i,e){v.call(this,i,e)},hideToggle:{tap:function(i,e){this.toggleOff()}},setSelectedValue:{tap:function(i,e){var s=e.cloneNode(!0);s.removeAttribute("data-func"),s.removeAttribute("data-view");var a=p.parentBySelector(e,".drop-down"),n=a.querySelector(".drop-down_opener");l.clear(n),n.appendChild(s),this.toggleOff&&this.toggleOff()}},selectAndPropagateValue:{tap:function(i,e){var s=JSON.parse(e.getAttribute("data-model")).entityId,a=document.querySelectorAll(".drop-down .toggled-button_items");S(a,function(n){var C=n.getElementsByClassName("toggled-button_item-link");S(C,function(g){var u=JSON.parse(g.getAttribute("data-model"));if(u&&u.entityId===s){var R=r.getOrMakeBehavior(g);R.setSelectedValue.tap.call(this,i,g)}})}),this.toggleOff()}}},r.register("toggleView",w),f.close.attach(m)})(__jsRegistry.np, __jsRegistry.am, __jsRegistry.s, __jsRegistry.t, __jsRegistry.k, __jsRegistry.w, __jsRegistry.kj, __jsRegistry.he, __jsRegistry.ea)||window);
__jsRegistry.nr = __globalRegistry["i1KNqkQ"] || (__globalRegistry["i1KNqkQ"] = (function(n){function t(i,e){this.element=e,this.inputFile=e.getElementsByClassName("input-file_upload-element")[0],this.label=e.getElementsByClassName("input-file_filename-label")[0],this.inputFile.addEventListener("change",this)}t.prototype={updateFilename:function(){this.inputFile.files&&this.inputFile.files[0]&&(this.label.textContent=this.inputFile.files[0].name)},selectFile:{tap:function(e){this.inputFile.click()}},handleEvent:function(e){switch(e.type){case"change":e.target===this.inputFile&&this.updateFilename();break}}},n.register("fileInput",t)})(__jsRegistry.am)||window);
__jsRegistry.ns = __globalRegistry["eOFkD6w"] || (__globalRegistry["eOFkD6w"] = (function(n,l,o,v){var f="field",_="."+f,m="field_symbols-counter",i="__error";function u(e,t){var r=this,s=[],a=h(t),d=parseInt(t.getAttribute("data-counter-maxlength")||t.getAttribute("maxlength"),10);r._canWork=!1,r.input=t,r._counters=a,r._countersTexts=s,r.valueLength=t.value.length,r.maxLength=d,r.isValid=!0,a&&a.length!==0&&!isNaN(d)&&(r._canWork=!0,l(a,function(A){var N=n.getTextNode(A);s.push(N)}),c(r))}var g=u.prototype;g.fieldInteraction={input:function(){var t=this;t.valueLength=t.input.value.length,c(t)}};function c(e){e.isValid=E(e),L(e)}function E(e){return e.valueLength<=e.maxLength}function L(e){var t=e.maxLength-e.valueLength,r=e.isValid;l(e._countersTexts,function(s,a){s.nodeValue=t,r?o.removeClass(e._counters[a],i):o.addClass(e._counters[a],i)})}function h(e){var t=n.parentBySelector(e,_);return t?t.getElementsByClassName(m):null}return{init:function(){v.register("editableFieldWithCounter",u)}}})(__jsRegistry.t, __jsRegistry.k, __jsRegistry.s, __jsRegistry.am)||window);
__jsRegistry.nt = __globalRegistry["lw2LZzg"] || (__globalRegistry["lw2LZzg"] = (function(t,i){function e(n,s){this._select=s}return e.prototype={select:{change:function(){i.change(this._select.value)}}},{init:function(){t.register("linksSelect",e)}}})(__jsRegistry.am, __jsRegistry.ew)||window);
__jsRegistry.nu = __globalRegistry["bDnrljw"] || (__globalRegistry["bDnrljw"] = (function(n,s){function e(){}e.prototype={getElement:function(){var t=document.getElementById("bottom-sheet");return t||null},open:function(){this.getElement()&&typeof document.getElementById("bottom-sheet").open=="function"&&this.getElement().open()},isOpened:function(){if(this.getElement()&&typeof document.getElementById("bottom-sheet").isOpened=="function")return this.getElement().isOpened()},close:function(){this.getElement()&&typeof this.getElement().close=="function"&&this.getElement().close()},setLoading:function(t){typeof t=="boolean"&&this.getElement()&&typeof this.getElement().setLoading=="function"&&this.getElement().setLoading(t)},setContent:function(t){Object.prototype.toString.call(t)==="[object Array]"&&this.getElement()&&typeof this.getElement().setContent=="function"&&this.getElement().setContent(t)},setOnPerformActionCallback:function(t,i){this.getElement()&&typeof this.getElement().setOnPerformActionCallback=="function"&&this.getElement().setOnPerformActionCallback(t,i)}},s.register("bottomSheetFacade",e),n.bottomSheet={open:e.prototype.open.bind(e.prototype),close:e.prototype.close.bind(e.prototype),isOpened:e.prototype.isOpened.bind(e.prototype),setLoading:e.prototype.setLoading.bind(e.prototype),setContent:e.prototype.setContent.bind(e.prototype),setOnPerformActionCallback:e.prototype.setOnPerformActionCallback.bind(e.prototype)}})(__jsRegistry.c, __jsRegistry.am)||window);
__jsRegistry.nv = __globalRegistry["uVxexmA"] || (__globalRegistry["uVxexmA"] = (function(e,i,t,n,o){e.uiComponents=i.create({init:function(s){s.isEditableFieldWithCounterEnabled&&t.init(),n.init()}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.ns, __jsRegistry.nt, __jsRegistry.nu)||window);
__jsRegistry.nw = __globalRegistry["hJzkyew"] || (__globalRegistry["hJzkyew"] = (function(r,a){r.heightToMaxEqualizer=function(i){var e=i.target,t=e.getAttribute("data-selector");t&&a.newEvenHeightGroup(e.querySelectorAll(t)).equalizeHeight()}})(__jsRegistry.c, __jsRegistry.jv)||window);
__jsRegistry.nx = __globalRegistry["sE2ZM1w"] || (__globalRegistry["sE2ZM1w"] = (function(w,N,M,f){var l=[],n=null,c=!1,y=0,I=0,A=400,m=f.androidVersion&&f.androidVersion.number<5,D=m&&!f.chrome,i=m||f.iOSVersion&&f.iOSVersion<10||f.winphone,T=i?8:1/0,E=1,O=i?4:1/0,p=0,S=i?2e3:1e4;function k(){n===null&&(n=w.run(R))}function F(){n!==null&&(w.stop(n),n=null)}function V(){l.length=0,F()}function R(){var s=Date.now();if(c&&s-I>S&&j(),!c&&s-y>A){for(var r=0,e=p+O,a=p,t=l.length;a<t&&a<e;a++){var u=l[a];u.spriteCanvas?b(s,u)||e++:r<E&&P(s,u)?r++:e++}a>=t?p=0:p=a}n=w.run(R)}function b(s,r){var e=r.frameIndices;r.currentFrame=Math.max(0,Math.round((s-r.startTime)/r.frameDuration)%e.length);var a=e[r.currentFrame];if(a!==r.previousFrame){r.previousFrame=a;var t=r.canvas,u=r.drawing2d,o=t.width,d=t.height;D?t.width=t.width:u.clearRect(0,0,o,d);var v=r.spriteColumns;return u.drawImage(r.spriteCanvas,Math.floor(a%v)*o,Math.floor(a/v)*d,o,d,0,0,o,d),!0}return!1}function x(s){var r=s.sprite,e=r.naturalHeight;if(e<=0)return!1;var a=s.fpsReduction||i&&s.fps>T,t=a?Math.round(s.fps/T):1,u=document.createElement("canvas");s.spriteCanvas=u;var o=Math.ceil(r.naturalWidth/(e*t)),d=Math.ceil(Math.sqrt(o)),v=Math.ceil(o/d);s.spriteRows=v,s.spriteColumns=d,u.width=d*e,u.height=v*e;var q=u.getContext("2d");if(s.startTime=Date.now()+Math.round(34*Math.random()),t>1&&!s.fpsReduction){s.fpsReduction=t;for(var C=s.frameIndices,g=0;g<C.length;g++)C[g]=Math.floor(C[g]/t)}for(var L=Math.floor(r.naturalWidth/(e*t)),h=0;h<L;h++)q.drawImage(r,h*e*t,0,e,e,e*Math.floor(h%d),e*Math.floor(h/d),e,e);return!0}function P(s,r){if(!r.spriteCanvas&&!x(r))return!1;if(!r.canvas){var e=r.sprite,a=r.target,t=a.querySelector("canvas")||document.createElement("canvas");t.className="sprite-anim-canvas",t.width=t.height=e.naturalHeight,r.drawing2d=t.getContext("2d"),r.canvas=t,r.frameDuration=Math.round(1e3/r.fps),b(s,r),a.hasAttribute("data-static-image")||a.setAttribute("data-static-image",a.style.backgroundImage);var u=r.elementToHide;u&&(u.style.display="none"),a.appendChild(t),r.target.style.removeProperty("background-image")}return!0}M.touchStartPreview.attach(function(){I=Date.now(),c=!0});function j(){y=Date.now(),c=!1}return M.touchEndPreview.attach(j),{stopAll:V,enroll:function(r){l.indexOf(r)===-1&&l.push(r),k()},forget:function(r){var e=l.indexOf(r);if(e!==-1){l.splice(e,1);var a=r.spriteCanvas;r.spriteCanvas=null,a&&(a.width=a.height=1);var t=r.target.getAttribute("data-static-image");t&&(r.target.style.backgroundImage=t);var u=r.canvas;if(r.canvas=null,u){var o=r.elementToHide,d=u.parentNode;d&&(o&&o.style.removeProperty("display"),d.removeChild(u),u.width=u.height=1)}}l.length===0&&F()}}})(__jsRegistry.aq, __jsRegistry.bd, __jsRegistry.am, __jsRegistry.ak)||window);
__jsRegistry.ny = __globalRegistry["oHopmRQ"] || (__globalRegistry["oHopmRQ"] = (function(u,a,d){var t;return{play:function(n){var o=d.endWithSlash(n.baseUrl);u.use(o+"main.js",function(){var s=n.name,e={overlay:a.OkArt[s]},i=n.createHost(e);if(i!=null){var m=function(){r||(r=!0,n.onFinished(e))},r=!1;t=a.OkArt.run({name:s,rootUrl:o,host:i,appendToHost:n.appendToHost===!0,onFinished:m,onGameStarted:n.onGameStarted,onGameFinished:n.onGameFinished}),a.OkArt.onFinished=function(){!r&&!__js_temp_htmlTag.contains(t.domRoot)&&m()},e.playing=t,n.onStarted(e)}})}}})(__jsRegistry.q, __jsRegistry.ei, __jsRegistry.m)||window);
__jsRegistry.nz = __globalRegistry["gYexAPw"] || (__globalRegistry["gYexAPw"] = (function(F,w,y,j,I,T,S,b){var P="__copy-above-overlay",_="gift-overlay-host",i=[],v=0,c=!1,s,h;function u(){var a=Array.prototype.slice.apply(document.getElementById("content").getElementsByClassName("js-gift"));i.length=0;for(var t=i.length,e=a.length;t<e;t++){var n=a[t],l=F.getOrMakeBehavior(n);l&&l.gift&&l.gift.overlay&&i.push(l)}i.length>0&&!s&&(v=-1,g())}function g(){if(!(i.length===0||h)){var a=v<0?0:v,t=!1,e;do{v=++v>=i.length?0:v,e=i[v];var n=j.fit(e.node,1,1,-e.node.offsetWidth/2);if(t=n.fitLeft&&n.fitTop&&n.fitRight&&n.fitBottom,v===a&&!t){c=!0;return}}while(!t);e.togglePlay(!0)}}function k(a,t,e){var n=e.parentNode,l=a.appearance,r=l.position||{},o=e.offsetWidth,d=e.offsetHeight,E=e.offsetTop,x=e.offsetLeft,m=1,O=window.getComputedStyle(e).backgroundSize||"";if(O.indexOf("%")===O.length-1){m=parseFloat(O)/100;var A=1-m;E+=d*A/2,x+=o*A/2}var H=o*r.width*m,L=d*r.height*m,f=document.createElement("div");y.addClass(f,_),r.entity==="above"&&W(f,t,e,n);var p=f.style;return p.position="absolute",p.top=E+(d-L)/2+"px",p.left=x+(o-H)/2+"px",p.width=H+"px",p.height=L+"px",n.appendChild(f),t.overlayHost=f,f}function W(a,t,e,n){y.addClass(a,"__under-gift");var l=e.cloneNode(!1);y.addClass(e,"__overlayed-by-copy"),y.addClass(l,P),y.removeClass(l,"js-gift"),l.removeAttribute("data-view"),l.removeAttribute("data-model");var r=l.style;r.top=e.offsetTop.toFixed(2)+"px",r.left=e.offsetLeft.toFixed(2)+"px",l.appendChild(t.toggleOverlayPlayNode.cloneNode(!1)),n.appendChild(l),e.okPositioningClone=l,C(e,!0)}function C(a,t){var e=a.okPositioningClone;e&&y.switchClass(e,!t,"__on-hold")}function G(a){if(s){var t=s;s=null,t.togglePlay(!1)}s=a;var e=a.node,n=a.gift.overlay;w.play({baseUrl:n.baseUrl,name:n.name,appendToHost:!0,createHost:function(r){if(!__js_temp_htmlTag.contains(e))return null;var o=a.overlayHost;if(!o){var d=e.parentNode;a.overlayHost=o=d.getElementsByClassName(_)[0],o&&(e.okPositioningClone=d.getElementsByClassName(P)[0])}return o?(C(e,!0),o):k(r.overlay,a,e)},onStarted:function(r){a.playingOverlay=r.playing},onFinished:function(r){var o=s===a;o&&(s=null),a.playingOverlay=null,a.setOverlayPlayState(!1),C(e,!1),o&&g()}})}return I.giftAnimOverlays=T.create({init:function(){j.changed.attach(function(){c&&(c=!1,g())})},update:function(t){t.autoPlay&&(h=!1,s=null,u(),S.items.added.attach(u),b.htmlFromEnvelopeInserted.attach(u))},discard:function(){c=!1,i.length=0,S.items.added.detach(u),b.htmlFromEnvelopeInserted.detach(u);var t=s&&s.playingOverlay;t&&t.stopImmediately()}}),{play:G,setAutoPlayEnabled:function(t){h=!t}}})(__jsRegistry.am, __jsRegistry.ny, __jsRegistry.s, __jsRegistry.bd, __jsRegistry.c, __jsRegistry.x, __jsRegistry.gt, __jsRegistry.dm)||window);
__jsRegistry.oa = __globalRegistry["M9Hh9Qw"] || (__globalRegistry["M9Hh9Qw"] = (function(f,o,h,l){var c={};Object.defineProperty(c,"MassDeletePresentsBehavior",{enumerable:!0,get:function(){return i}});function m(a,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](a):a instanceof n}var d="mass-delete-presents-confirm",i=function(n,u){var e=this;this.model=n,this.element=u,this.destroy=function(){o.detach(e.newDialogEventHandler)},this.newDialogEventHandler=function(s){if(s.dialog.getContentElement().classList.contains(d)){var t=document.getElementById("field_massDeletePresentIds");t&&(t.value=Object.keys(e.checkboxes).join(","))}},this.onChange=function(s){var t=s.target;if(!(!m(t,HTMLInputElement)||!t.classList.contains("js-gifts-select-present-input")||!t.hasAttribute("data-present-id"))){var r=t.getAttribute("data-present-id");r&&(t.checked?e.checkboxes[r]=t:delete e.checkboxes[r],e.deleteButton&&(e.isEmptyObject(e.checkboxes)?e.deleteButton.setAttribute("disabled","disabled"):e.deleteButton.removeAttribute("disabled")))}},this.isEmptyObject=function(s){for(var t in s)if(s.hasOwnProperty(t))return!1;return!0},this.selectPresentForDelete={change:function(s){(0,l.allowDefault)(s),e.onChange(s)}},this.deleteSelectedPresents={tap:function(){f.show({url:e.model.link,modifier:d})}},this.checkboxes={},this.deleteButton=u.querySelector(".js-gifts-selected-delete-target"),o.attach(this.newDialogEventHandler),h.navigating.attachOnce(this.destroy)};return i.isInstant=!0,(0,l.register)("massDeletePresentsBehavior",i),c})(__jsRegistry.gh, __jsRegistry.fw, __jsRegistry.w, __jsRegistry.am)||window);
__jsRegistry.ob = __globalRegistry["gjlxsA"] || (__globalRegistry["gjlxsA"] = (function(i,o,l){function a(s,e){this.gift=s,this.node=e,this.playingOverlay=null,this.overlayHost=null,this.toggleOverlayPlayNode=e.getElementsByClassName("__gift-overlay-toggle")[0]}a.prototype={togglePlayOverlay:{tap:function(e){var t=!this.playingOverlay;l.setAutoPlayEnabled(t),this.togglePlay(t)}},togglePlay:function(e){if(this.setOverlayPlayState(this,e),e)l.play(this);else{var t=this.playingOverlay;t&&t.stop()}},setOverlayPlayState:function(e){o.switchClass(this.toggleOverlayPlayNode,e,"__playing")}},i.register("gift",a)})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.nz, __jsRegistry.oa)||window);
__jsRegistry.oc = __globalRegistry["iwVqFzw"] || (__globalRegistry["iwVqFzw"] = (function(i,s){var o={},m=5;function d(e){var t=new Image,n=i.onload(t);return t.src=e,n.img=t,n}function u(e){var t=s.start().then(r,r),n=0;function a(){d(e).then(l,g)}function r(){delete o[e]}function l(){t.resolveIfNotDone(this.img)}function g(){if(!t.done){if(++n>=m){t.reject();return}setTimeout(a,200)}}return a(),t}function f(e){return o[e]||(o[e]=u(e))}return{load:f}})(__jsRegistry.mx, __jsRegistry.n)||window);
__jsRegistry.od = __globalRegistry["grkHMsQ"] || (__globalRegistry["grkHMsQ"] = (function(g,w,y,n,s,h,U,I,p,A,T){g.animateGift=function(i){n.observe(i.target,m)};var m={registered:function(r){var e=r.target;if(!r.giftAnimation){for(var o=parseInt(e.getAttribute("data-frames"),10)||60,c=JSON.parse(e.getAttribute("data-framedelays"))||{},d=parseInt(e.getAttribute("data-fps"),10)||24,l=parseInt(e.getAttribute("data-replaydelay"),10)||0,u=e.getAttribute("data-lazy-animated-url"),F=1e3/d+1,v=[],a=0;a<o;a++){var f=c[a]||1;a===o-1&&l>0&&(f+=Math.round(l*1e3/F));for(var j=0;j<f;j++)v.push(a)}var t={target:e,sprite:null,canvas:null,spriteCanvas:null,spriteRows:0,spriteColumns:0,drawing2d:null,time:Date.now(),startTime:0,currentFrame:0,previousFrame:-1,currentValue:null,frameIndices:v,frameDuration:0,framesCount:o,fps:d,readyForUse:!1};r.giftAnimation=t,u&&(p.load(u).then(function(b){t.sprite=b,t.readyForUse=!0,r.inViewport&&s.enroll(t)}),t.readyForUse=!1)}},track:function(r){var e=r.giftAnimation;r.inViewport?e.readyForUse&&s.enroll(e):s.forget(e)}};n.addListener(m)})(__jsRegistry.c, __jsRegistry.aq, __jsRegistry.x, __jsRegistry.dj, __jsRegistry.nx, __jsRegistry.ob, __jsRegistry.t, __jsRegistry.s, __jsRegistry.oc, __jsRegistry.w, __jsRegistry.bd)||window);
__jsRegistry.oe = __globalRegistry["sphI19A"] || (__globalRegistry["sphI19A"] = (function(v,m,T,o,C,D,U){var f="retryButton",E="timerBlock",i="countdownTimer",I="confirmButton",_="elapsedTime",B="st.attachedOk",O="ok-amount-custom",y="data-mmss",g="ok-amount-list-radio-item",h="attach_phone_panel_select_country",j="ok-amount-custom",a=null,d=null,n=null;function p(){d=document.getElementById(i),n=setTimeout(u,1e3)}function A(t){var e=t.split(":");return(parseInt(e[0])*60+parseInt(e[1]))*1e3}function u(){if(a-=1e3,a<0)return M(),!1;var t=Math.floor(a/(1e3*60)),e=Math.floor(a/1e3)%60;e<10&&(e="0"+e),d.innerText=t+":"+e,n=setTimeout(u,1e3)}function M(){n&&(window.clearTimeout(n),n=null);var t=document.getElementById(f);if(t){var e=document.getElementById(E);e&&(o.addClass(e,"dsn"),o.removeClass(t,"dsn"),o.addClass(t,"dsib"))}}function N(){var t=document.getElementById(O);t&&t.addEventListener("click",function(){var e=document.getElementsByName(B);e&&m(e,function(r){r.checked=!1})})}v.sendPresentUtils=T.create({init:function(){},update:function(){N();var e=document.getElementById(i);e&&(document.getElementById(I).addEventListener("click",function(){var s=document.getElementById(_);s.value=document.getElementById(i).innerText}),a=A(e.getAttribute(y)),p());var r=document.getElementsByClassName(g);r.length!==0&&m(r,function(s){s.addEventListener("click",function(){var l=document.getElementById(j);l&&(l.value="")})});var c=document.getElementById(h);c&&c.addEventListener("change",function(){this.form.submit()})},discard:function(){n&&(clearTimeout(n),n=null)}})})(__jsRegistry.c, __jsRegistry.k, __jsRegistry.x, __jsRegistry.s, __jsRegistry.t, __jsRegistry.an, __jsRegistry.am)||window);
__jsRegistry.of = __globalRegistry["iRZfVXQ"] || (__globalRegistry["iRZfVXQ"] = (function(){function n(i){return i.detail===0||i.clientX===0&&i.clientY===0}return n})()||window);
__jsRegistry.og = __globalRegistry["cBpcpSQ"] || (__globalRegistry["cBpcpSQ"] = (function(a,s,c,n){function t(e,i){this.img=document.getElementById("captcha"),this.input=i.getElementsByClassName("js-captcha_input")[0]}t.prototype={getNewCaptcha:{tap:function(i){this.img.src="/cap?"+Date.now(),this.input.value=""}}},a.captchaService=s.create({init:function(){c.register("captcha",t)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.am, __jsRegistry.of)||window);
__jsRegistry.oh = __globalRegistry["eLK2YQ"] || (__globalRegistry["eLK2YQ"] = (function(m,O,v,n,I,g,x){var d="__bound",o="hidden";function l(t,e){var a=this;a.container=e,a.dom=v.byDataId(a.container),a.firstItemOffsetTop=a.container.childNodes[0].offsetTop,a.saveOpen=e.getAttribute("data-save-open"),m.tapPreview.detach(c),u(a),x.attachUntilRendering(I.resize,C,a)}l.prototype={listenTap:function(e){this.saveOpen&&m.tapPreview[e?"attach":"detach"](c)},expand:{tap:function(e){n.removeClass(this.container,d),n.addClass(this.dom.expandItem,o),this.dom.collapseItem&&n.removeClass(this.dom.collapseItem,o),this.listenTap(!0)}},collapse:{tap:function(e){n.addClass(this.container,d),this.dom.collapseItem&&n.addClass(this.dom.collapseItem,o),n.removeClass(this.dom.expandItem,o),this.moreItemMoved||h(this),this.listenTap()}}},l.isInstant=!0,m.register("expandItems",l);function c(t){var e=t.target;e.tagName.toLowerCase()==="a"&&e.href&&!e.getAttribute("data-func")&&(e.href=g.insertParam(e.href,"st.fall","on"))}function C(){u(this)}function u(t){var e=t.container,a=t.firstItemOffsetTop,r=t.dom,s=e.getAttribute("data-open");if(!(!s&&!n.hasClass(e,d))){n.addClass(r.expandItem,o);var i=e.getAttribute("data-max-height");if(!(!i||e.scrollHeight<=i)){if(s||r.atSelectedItem&&f(r.atSelectedItem,a,i)){n.removeClass(e,d),r.collapseItem&&n.removeClass(r.collapseItem,o),t.listenTap(!0);return}n.removeClass(r.expandItem,o),h(t)}}}function h(t){var e=t.container,a=t.firstItemOffsetTop,r=e.getAttribute("data-max-height"),s=t.dom.expandItem,i=e.childNodes,T=i.length,p=j(a,i,T,r);p>0&&(s.parentNode.insertBefore(s,i[p]),f(s,a,r)&&s.parentNode.insertBefore(s,i[p-1])),t.moreItemMoved=!0}function j(t,e,a,r){for(var s=0;s<a;s++)if(f(e[s],t,r))return s;return-1}function f(t,e,a){return t.offsetTop-e>=a}})(__jsRegistry.am, __jsRegistry.c, __jsRegistry.md, __jsRegistry.s, __jsRegistry.bd, __jsRegistry.m, __jsRegistry.w)||window);
__jsRegistry.oi = __globalRegistry["dUV04Kw"] || (__globalRegistry["dUV04Kw"] = (function(){function r(o){return o<10?"0":""}function t(o){var n=Math.floor(o/1e3),e=Math.floor(n/3600),s=Math.floor(n%3600/60),u=Math.floor(n%60);return[e!==0?e+":":"",r(s),s,":",r(u),u].join("")}function a(o){return t(o*1e3)}return{msToHMS:t,secToHMS:a}})()||window);
__jsRegistry.oj = __globalRegistry["TOKx8xw"] || (__globalRegistry["TOKx8xw"] = (function(o,s){function t(e){this._timerTextNode=o.getTextNode(e)}return t.prototype.set=function(e){this._timerTextNode.nodeValue=s.msToHMS(e)},t})(__jsRegistry.t, __jsRegistry.oi)||window);
__jsRegistry.ok = __globalRegistry["apq4uLQ"] || (__globalRegistry["apq4uLQ"] = (function(n){function s(t,i,e){this._animationFrameId=-1,this._time=i,this._frameProcessor=t,this._context=e,this._onNewFrame=r.bind(this),this._startTime=Date.now(),this._onNewFrame()}function r(){var t=(Date.now()-this._startTime)/this._time;t>=1&&(t=1),this._frameProcessor.call(this._context,t),t!==1&&(this._animationFrameId=n.run(this._onNewFrame))}return s.prototype.stop=function(){return this._animationFrameId!==-1&&n.stop(this._animationFrameId),this},{run:function(i,e,o){return new s(i,e,o)}}})(__jsRegistry.aq)||window);
__jsRegistry.ol = __globalRegistry["CWSFBXg"] || (__globalRegistry["CWSFBXg"] = (function(o){var c="progress-indicator";function n(e){this._size=e.offsetWidth;var t=e.getAttribute("data-model"),i=JSON.parse(t);this._color=i.indicatorColor;var s=document.createElement("canvas");s.className=c,e.appendChild(s);var a=window.devicePixelRatio||1;s.width=this._size*a,s.height=this._size*a,this._context=s.getContext("2d"),this._context.scale(a,a)}return n.prototype.animateInitialState=function(e,t){t==null&&(t=500),o.run(function(i){this.set(i*e)},t,this)},n.prototype.set=function(e){var t=this._context,i=this._size/2;t.clearRect(0,0,this._size,this._size),t.beginPath(),t.arc(i,i,i-1,-(Math.PI/2),Math.PI*2*(e/100)-Math.PI/2),t.lineTo(i,i),t.lineTo(i,0),t.fillStyle=this._color,t.fill()},n})(__jsRegistry.ok)||window);
__jsRegistry.om = __globalRegistry["g2yGKmA"] || (__globalRegistry["g2yGKmA"] = (function(l,d,u,S,c,f,h){var T="js-gift-hot-sale",v="js-loader",L="js-timer",A="__sale-finished",E="gift-hot-sale_send-button",j="gifts_lnk";function a(e){this._root=e;var t=e.getAttribute("data-model"),s=JSON.parse(t),m=s.saleTimeLeftSeconds,g=s.saleTimeLeftPercent,_=s.savedEndDateMS,r;_==null?(r=Date.now()+m*1e3+10,s.savedEndDateMS=r,e.setAttribute("data-model",JSON.stringify(s))):r=_,this._endDateMS=r;var N=m/g;this._msInPercent=Math.floor(N*1e3),this._timer=new S(e.getElementsByClassName(L)[0]),this._loader=new c(e.getElementsByClassName(v)[0]),this._giftHotSaleFrame=I.bind(this),this._currentTimeoutId=-1,C(this),this.run()}function i(e){return e._endDateMS-Date.now()}function n(e,t){return 100-e/t._msInPercent}function C(e){var t=i(e);t>0&&e._loader.animateInitialState(n(t,e),200)}function I(){var e=i(this);if(e>1e3)this._timer.set(e),this._loader.set(n(e,this)),this._currentTimeoutId=setTimeout(this._giftHotSaleFrame,1e3);else{this._timer.set(0),this._loader.set(100),f.addClass(this._root,A);var t=this._root.getElementsByClassName(E)[0];t&&h.setDisabled(t,!0);var s=this._root.getElementsByClassName(j)[0];s&&s.removeAttribute("href")}}var o=a.prototype;o.run=function(){this._giftHotSaleFrame()},o.stop=function(){this._currentTimeoutId!==-1&&(clearTimeout(this._currentTimeoutId),this._currentTimeoutId=-1)},l.giftsHotSale=d.create({update:function(){u.default("gift-hot-sale",document.getElementsByClassName(T),function(t){new a(t)})}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.er, __jsRegistry.oj, __jsRegistry.ol, __jsRegistry.s, __jsRegistry.ku)||window);
__jsRegistry.on = __globalRegistry["hCB7LyA"] || (__globalRegistry["hCB7LyA"] = (function(r,a,o,n,m){var u="js-hot-sale",l="js-timer",h="__endSale",_="hostSaleBLink";function s(t){this._root=t,this.startTime=Date.now(),this.millisLeft=1e3*(parseInt(t.getAttribute("data-left-seconds"),10)||0);var e=t.getElementsByClassName(u)[0];e&&(this._timer=new n(e),this._hotSaleFrame=c.bind(this),this._currentTimeoutId=-1,this.run())}function S(t){return t.millisLeft-(Date.now()-t.startTime)}function c(){var t=S(this);if(t>1e3)this._timer.set(t),this._currentTimeoutId=setTimeout(this._hotSaleFrame,1e3);else{this._timer.set(0),m.addClass(this._root,h);var e=this._root.getElementsByClassName(_)[0];e&&e.removeAttribute("href")}}var i=s.prototype;i.run=function(){this._hotSaleFrame()},i.stop=function(){this._currentTimeoutId!==-1&&(clearTimeout(this._currentTimeoutId),this._currentTimeoutId=-1)},r.hotSale=a.create({update:function(){o.default("hot-sale",document.getElementsByClassName(l),function(e){new s(e)})}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.er, __jsRegistry.oj, __jsRegistry.s)||window);
__jsRegistry.oo = __globalRegistry["gah9jkw"] || (__globalRegistry["gah9jkw"] = (function(t,i,n){var s=1e3,r=3e3;t.giftWithSurprise=i.create({update:function(){setTimeout(function(){var e=document.querySelector(".js-gift-chest_animation");e&&n.addClass(e,"gift-chest_animation")},s),setTimeout(function(){var e=document.querySelector(".js-gift-chest-title");e&&(document.querySelector(".send-present_title").innerHTML=e.innerHTML)},r)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.s)||window);
__jsRegistry.op = __globalRegistry["pYGBHqQ"] || (__globalRegistry["pYGBHqQ"] = (function(d,l){var s=function(e,t){for(var i="",n=0,u=e.length;n<u;n++){var r=e.charAt(n);t.indexOf(r)!=-1&&(i+=r)}return(i*1||"")+""};function f(){var a=document.querySelector(".js-transfer-send-form");if(a){var e=document.querySelector(".js-transfer-send-amount"),t=document.querySelector(".js-transfer-send-button"),i=e.getAttribute("data-min-length")||1,n=e.getAttribute("data-symbols")||"0123456789";a.addEventListener("submit",function(u){if(e.value!=""){t.disabled=!0;return}u.preventDefault()}),e.addEventListener("input",function(u){var r=s(e.value,n);r!=e.value&&(e.value=r),o(t,r,i)}),o(t,s(e.value,n),i)}}function o(a,e,t){a.disabled=e.length<t||e*1<=0}d.p2pTransfersValidate=l.create({update:f})})(__jsRegistry.c, __jsRegistry.x)||window);
__jsRegistry.oq = __globalRegistry["iXUpSEQ"] || (__globalRegistry["iXUpSEQ"] = (function(u,l,v,i,m){var A="js-gift-interaction-btns",_="js-interactive-art",f="js-interactive-art_w",g="js-topText",T="__light",I="__normal",j=54,H=56,a=null,o=function(){var e=document.getElementById(_);if(e){var y=e.getAttribute("data-url"),h=e.getAttribute("data-receive-mode")==="true",p=e.getAttribute("data-is-android")==="true",E=e.getAttribute("data-overlay-name"),O=document.getElementById(g);if(m.update(),p){var c=document.getElementById(f),b=c.getBoundingClientRect().height;c.style.minHeight=b-j-H+"px"}v.play({baseUrl:y,name:E,appendToHost:!0,createHost:function(){return e},onStarted:function(t){a=t.playing;var B=t.overlay.createControlsDomRoot();B.innerHTML=O.innerHTML},onFinished:function(t){},onGameStarted:function(){var t=document.getElementById(A);t&&h&&(t.classList.remove(T),t.classList.add(I))},onGameFinished:function(){}})}},s=function(){a&&(a.stop(),a=null)},d=function(){s(),o()};u.interactiveArt=l.create({update:function(){o(),i.resize.attach(d)},discard:function(){s(),i.resize.detach(d)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.ny, __jsRegistry.bd, __jsRegistry.js)||window);
__jsRegistry.or = __globalRegistry["dAbzmXg"] || (__globalRegistry["dAbzmXg"] = (function(){function n(t){this.node=t,this.data=e(t)}n.prototype={getOption:r};function e(t){var a=t.getAttribute("data-map");return a?JSON.parse(a):null}function r(t){return this.data[t]}return{create:function(a){return new n(a)}}})()||window);
__jsRegistry.os = __globalRegistry["hrJC7eQ"] || (__globalRegistry["hrJC7eQ"] = (function(){function t(e,n){history.replaceState(Object.assign(history.state||{},e),document.title,n)}return{changeHistoryState:t}})()||window);
__jsRegistry.ot = __globalRegistry["aP4dg"] || (__globalRegistry["aP4dg"] = (function(y,T,j,S,p,B,g,h,I){var i,a,t,s,f,r={joinedGroupTopOffset:0,prevSimilarGroupsContainerTopOffset:null,columnCount:0},d="afterend",l="beforebegin",F=50;function P(o){t?s=t:(p.htmlFromEnvelopeInserted.attach(c),g.changed.attach(m));var e=o.index==1&&o.contentDomFirst;if(e){t=e;var u=j.create(e);f=u.getOption("cardsCount");var w=u.getOption("sourceGroupId");if(i=document.getElementById(w),i){var n={};n.position=H(),a=i.parentNode,m(),s&&v(s),r.columnCount>1?(n.beaconNode=i,i.offsetLeft>i.offsetWidth/2?(n.position==l&&C(i.previousElementSibling,n),n.beaconNode.insertAdjacentElement(n.position,t)):(n.position==d&&C(i.nextElementSibling,n),n.beaconNode.insertAdjacentElement(n.position,t))):i.insertAdjacentElement(n.position,t),N(n.position)}}}function c(o){var e=o.envelopes[0];e&&e.action=="attribute"&&e.value.indexOf("js-collapsed-widths")>0&&(f--,f||(v(t),G(),E()))}function N(o){var e=r.prevSimilarGroupsContainerTopOffset;o==l&&(!e||e>r.joinedGroupTopOffset)&&(document.body.scrollTop+=t.offsetHeight),o==d&&e&&e<r.joinedGroupTopOffset&&(document.body.scrollTop-=t.offsetHeight)}function C(o,e){o?e.beaconNode=o:e.position=e.position==l?d:l}function H(){var o=window.innerHeight-i.getBoundingClientRect().bottom;return o<F?l:d}function m(){i&&(r.joinedGroupTopOffset=i.getBoundingClientRect().top,r.prevSimilarGroupsContainerTopOffset=s?s.getBoundingClientRect().top:null,r.columnCount=Math.ceil(a.offsetWidth/i.offsetWidth))}function v(o){a.removeChild(o)}function E(){i=a=t=s=f=void 0}function b(){t&&(v(t),E(),G(),g.changed.detach(m),p.htmlFromEnvelopeInserted.detach(c))}function A(o){if(o.location=="profile"&&(t=document.body.getElementsByClassName("ajax-portlet")[0],t)){h.changeHistoryState({},I.replaceParams(location.href,{"st.isJoined":"off"})),p.htmlFromEnvelopeInserted.attach(c),a=t.parentNode;var e=j.create(t);f=e.getOption("cardsCount")}}function G(){r.columnCount=0,r.joinedGroupTopOffset=0}T.specialEnvelopes.createSimilarGroupsBlock={run:P};function O(){}O.prototype={hide:{tap:function(e,u){h.changeHistoryState({},u.href),b()}}},S.register("ajaxPortlet",O),y.ajaxPortletService=B.create({update:A,discard:b})})(__jsRegistry.c, __jsRegistry.fh, __jsRegistry.or, __jsRegistry.am, __jsRegistry.dm, __jsRegistry.x, __jsRegistry.bd, __jsRegistry.os, __jsRegistry.m)||window);
__jsRegistry.ou = __globalRegistry["aBec4Hw"] || (__globalRegistry["aBec4Hw"] = (function(c,r,y,d,f,p,v,C){function l(t,e){this.node=e,this.model=t}l.prototype={spoofInputForm:{tap:function(e){this.performInputSpoofing(e)},focus:function(e){this.performInputSpoofing(e)}},sendFastComment:{tap:function(){var e=this.node,n=e.getElementsByClassName("fastcom-input_area")[0];if(n.value.replace(/^\s+|\s+$/g,"").length){r.addClass(e,"ld");var o=this;p.run("send.fast.comment",{discussionSubjectId:this.model.discussionId,discussionTypeId:this.model.discussionTypeId,previousCommentCount:this.model.commentCount,commentText:n.value}).then(function(s){if(s&&s.success){n.value="",n.style.minHeight="0px";var i=e.getElementsByClassName("last-comment")[0];i.insertAdjacentHTML("beforeend",s.html),o.model.commentCount=s.adjustedCommentCount;var m=e.previousSibling;if(!r.hasClass(m,"__app-like-view")){var a=m.querySelector(".widget-list_i.__comment .ic_tx");a.textContent=s.commentLabelHtml}}else u()},function(){u()}).anyway(function(){r.removeClass(e,"ld")})}}},performInputSpoofing:function(e){var n=e.target;if(!g(this.node)){logClientEvent("fast.comment.initiated",[this.model.feedType]),r.clear(n);var o=document.getElementById("fastcom-source"),s=o.getElementsByClassName("fastcom-input_area")[0],i=o.getElementsByClassName("fastcom-env-wrapper")[0],m=o.getElementsByClassName("ic-progress")[0],a=s.cloneNode(!0);n.insertBefore(a,null),v.expand(a);var h=i.cloneNode(!0);n.parentNode.appendChild(h);var j=m.cloneNode(!0);n.parentNode.appendChild(j),a.focus()}}};function u(){var t=document.getElementById("fastcom-source"),e=t.getElementsByClassName("js-fastcom-trouble-text")[0];C.show(e.textContent)}function g(t){return t.querySelector(".fastcom-input_area")}c.initFastCommenting=f.create({init:function(){d.register("fastComment",l)}})})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.am, __jsRegistry.x, __jsRegistry.fx, __jsRegistry.kw, __jsRegistry.es)||window);
__jsRegistry.ov = __globalRegistry["r42Sg3w"] || (__globalRegistry["r42Sg3w"] = (function(){return{MARKER_CLASS_NAME:"js-render-depend",SHOWED_EVENT_TYPE:"_okRenderDependShowed",HIDE_EVENT_TYPE:"_okRenderDependHide"}})()||window);
__jsRegistry.ow = __globalRegistry["riaqLZA"] || (__globalRegistry["riaqLZA"] = (function(n,s,E){function m(o,a,t,d){var e=o.getElementsByClassName(s.MARKER_CLASS_NAME);t&&(e=n.filterToCopy(e,t,d));for(var i=E(a?s.SHOWED_EVENT_TYPE:s.HIDE_EVENT_TYPE),r=0,l=e.length;r<l;r+=1)e[r].dispatchEvent(i)}return m})(__jsRegistry.bl, __jsRegistry.ov, __jsRegistry.bo)||window);
__jsRegistry.ox = __globalRegistry["TGG0vaw"] || (__globalRegistry["TGG0vaw"] = (function(n,i,m,E,w,h,O,g){var d="toggledBlock",l="__open",p="__closed",u=".toggled-block",f=".toggled-block-preview",v=".toggled-block-content";function c(e,t){this.model=e,this._init(t)}h.register(d,c);var r=c.prototype;return r._findElements=function(e){var t=e.getAttribute("data-toggled-id"),s='[data-toggled-content="'+t+'"]',o=document.querySelector(s);return this._root=n.parentBySelector(o,u+'[data-toggled-id="'+t+'"]'),this._switcher=e,this._content=o,this._contentWrapper=n.parentBySelector(o,".toggled-block-content-w"),this._preview=document.querySelector('[data-toggled-preview="'+t+'"]'),this._textNodes=document.querySelectorAll('[data-toggled-text-source="'+t+'"]'),this},r._init=function(e){return this._findElements(e),this._isOpen=i.hasClass(this._contentWrapper,l),this},r._selfPreviewElementFilter=function(e){return this._preview===n.parentBySelector(e,f)},r._processSwitcher=function(e){return i.switchClass(this._switcher,e,l),this},r._processPreview=function(e){return this._preview&&(i.switchClass(this._preview,e,p),g(this._preview,!e,this._selfPreviewElementFilter,this)),this},r._processText=function(e){var t=this._textNodes;if(t.length)for(var s=0,o=t.length;s<o;s++){var a=t[s],_=a._okTextModel||(a._okTextModel=JSON.parse(a.getAttribute("data-toggled-text-model")||"{}"));_&&(a.textContent=e?_.on:_.off)}return this},r._selfContentElementFilter=function(e){return this._content===n.parentBySelector(e,v)},r._processContent=function(e){return i.switchClass(this._contentWrapper,e,l),g(this._content,e,this._selfContentElementFilter,this),this},r._processRoot=function(e){return this._root&&i.switchClass(this._root,e,l),this},r.toggle=function(){var e=this._isOpen=!this._isOpen;return this._processRoot(e)._processSwitcher(e)._processText(e)._processPreview(e)._processContent(e)},r.switchToggle={tap:function(t){h.allowDefault(t);var s=t.target;if(s.tagName==="LABEL"&&s.htmlFor){var o=document.getElementById(s.htmlFor);o&&(o.skipToggle=!0)}s.skipToggle?s.skipToggle=!1:this.toggle()}},{impl:c,VIEW_NAME:d}})(__jsRegistry.t, __jsRegistry.s, __jsRegistry.bl, __jsRegistry.c, __jsRegistry.x, __jsRegistry.am, __jsRegistry.ov, __jsRegistry.ow)||window);
__jsRegistry.oy = __globalRegistry["tl3B0ig"] || (__globalRegistry["tl3B0ig"] = (function(h,f,g,m,j,p){var u="$ok-data-min-h",l=[],i={hideControlByContentHeight:C};function B(n,e,t){var r=e[u];if(t||!r){var a=window.getComputedStyle(n);e[u]=r=a.maxHeight||a.height}return r}function C(){var n=this._switcher,e=this.model.pluginData,t=this._contentWrapper.getElementsByClassName(e.container)[0];if(t){var r=parseInt(B(t,n,e.disableCache),10),a=this._content.getElementsByClassName(e.item),s=t.getBoundingClientRect().top,o=0,d=0,c=a.length;if(c){for(;o<=r&&c--;)o=Math.max(o,a[c].getBoundingClientRect().bottom);d=o-s}d&&m.switchClass(n,d<=r,"__js-off-control")}}function v(){for(var n in l)if(l.hasOwnProperty(n))for(var e=l[n],t=0,r=e.length;t<r;t++){var a=e[t];i[a.model.pluginData.name].call(a)}}return h.toggleBlockSwitchControllerPlugin=j.create({update:function(){var e=document.querySelectorAll('[data-view="'+p.VIEW_NAME+'"]');if(e.length){for(var t=0,r=e.length;t<r;t++){var a=f.getOrMakeBehavior(e[t]),s=a.model&&a.model.pluginData;if(s){var o=s.name;i[o].call(a),(l[o]||(l[o]=[])).push(a)}}g.resize.attach(v)}},discard:function(){g.resize.detach(v),l=[]}}),{addPlugin:function(e,t){i[e]=t}}})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.bd, __jsRegistry.s, __jsRegistry.x, __jsRegistry.ox)||window);
__jsRegistry.oz = __globalRegistry["a58Nk4w"] || (__globalRegistry["a58Nk4w"] = (function(a,s,t,i,n){a.adCanvas=function(r){var e=r.target;if(s.hasClass(e,"dsn"))if(s.removeClass(e,"dsn"),window.innerWidth>414){s.removeClass(e,"js-stretch");var o=e.outerHTML;s.remove(e),n.show({url:location.href,contentHtml:o,replaceHistory:!0,modifier:"__ad-canvas"})}else e.style.height=window.innerHeight+"px";else s.hasClass(e.parentNode,"modal")&&(s.addClass(e.parentNode,"__ad-canvas"),e.style.height="")}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.x, __jsRegistry.fw, __jsRegistry.gh)||window);
__jsRegistry.pa = __globalRegistry["aNUHptg"] || (__globalRegistry["aNUHptg"] = (function(x,C,d,y,l,m){var f="js-ajax-click-busy";function c(){this.proxyConfig={},u(this,this.proxyConfig,"prepare",v),u(this,this.proxyConfig,"success",h),u(this,this.proxyConfig,"cancel",b),this.ajaxEnvelopeHandler=C.getAjaxEnvelopeHandler(this.proxyConfig),this.originalConfig=d.clone(this.proxyConfig)}function u(e,a,r,t){var i=t.name;e[i]=t,Object.defineProperty(a,r,{configurable:!1,enumerable:!0,get:function(){return e[i].bind(e)},set:function(s){e[i]=function(n){return m.isFunction(s)&&s.call(e,n),t.call(e,n)}}})}c.prototype={addAjaxHandlerMap:function(a){for(var r in a){var t=a[r];for(var i in t)this.addAjaxHandler(i,r,t[i],t.configurator)}},addAjaxHandler:function(a,r,t,i){var o=this.constructor.prototype,s=o[r];if(s===void 0)o[r]=s={};else if(s.hasOwnProperty(a))throw new Error(r+" handler already exist in context");if(s[a]===void 0)s[a]=function(n,g){var j=t.call(this,n,g);return this._isBusy||j!==!1&&(i&&(this._isBusy=!0,l.addClass(this.rootNode,f),i(this)),this.ajaxEnvelopeHandler(n)),j};else throw new Error(r+" handler already exist in "+a+" gesture")},_completeCallback:h,_super:function(){this.superclass.call(this)}};function v(e){var a={},r=e.target,t=r&&r.href;return t?(e.uri=t,e.method="post"):l.hasClass(r,"js-axb")?x.allowDefault(e):a.cancelled=!0,a}function p(e){d.resetObjectState(e.proxyConfig,e.originalConfig,!1),e._isBusy=!1,l.removeClass(e.rootNode,f)}function b(e){p(this)}function h(e){p(this)}return{addCustomAjaxHandlerMap:function(a,r,t){a.prototype.addAjaxHandlerMap(r,t)},superOf:function(a){return y(a,c)}}})(__jsRegistry.am, __jsRegistry.fd, __jsRegistry.aa, __jsRegistry.bu, __jsRegistry.s, __jsRegistry.d)||window);
__jsRegistry.pb = __globalRegistry["PQQJ9Iw"] || (__globalRegistry["PQQJ9Iw"] = (function(l,S,g,o,u,d,v,x,U){var y=".base-button_target.js-ajax-envelope-btn",k=5;function n(t,a){this._super(),this.okDataModel=t,this.rootNode=a,this.cardsCounter=0,this.isRrequiredStateUpdate=!0,this.isAjaxLocked=!1,this.nextUrl=c(a)}g.superOf(n),n.prototype.setUpdated=function(){this.isRrequiredStateUpdate=!1},n.prototype.setNeedUpdate=function(){this.isRrequiredStateUpdate=!0},n.prototype.lockAjax=function(t){this.isAjaxLocked=t},n.prototype.addAjaxHandlerMap({acceptCard:{tap:p,configurator:h},hideCard:{tap:p,configurator:h}});function c(t){return t.getAttribute("data-next-url")}function p(t,a){var e=this,r=e.okDataModel;r&&!r.portletInstance&&(r.portletInstance=e,e.cardsBeforePreload=parseInt(r.cardsBeforePreload)||k),e.isRrequiredStateUpdate&&(j(e),e.nextUrl&&(e.ajaxLoadTask=u.request(e.nextUrl,"post").then(function(B){d(B),e.nextUrl=c(e.rootNode),e.setNeedUpdate()}).anyway(function(){i("isUpdated",e),e.lockAjax(!1)})),e.setUpdated());var s=document.getElementById(a.getAttribute("data-linked-parent-id"));s&&(o.addClass(s,"__closed"),e.cardsCounter--,e.cardsCounter<e.cardsBeforePreload&&e.setNeedUpdate()),e.nextUrl?m(e.cardsCounter,e.cardsBeforePreload)?i("isUpdating",e):e.cardsCounter>0&&m(e.cardsCounter-1,e.cardsBeforePreload)&&i("beforeUpdate",e):e.cardsCounter<=0?i("isEmpty",e):(e.cardsCounter-1===e.cardsBeforePreload||e.cardsCounter-1===0)&&i("beforeEmpty",e)}var E={isUpdating:A,isUpdated:null,isEmpty:b,beforeUpdate:null,beforeEmpty:null};function A(t){t.isAjaxLocked||(t.ajaxLoadTask.send(),t.setNeedUpdate(),t.lockAjax(!0))}function b(t){t.isEmpty=!0}function f(t){var a=t.getElementsByClassName("dlist_bottom")[0];a?o.removeClass(a,"hidden"):o.addClass(t,"hidden")}function m(t,a){return t===a===0||t<=a}function i(t,a){var e=E[t];e&&e(a)}function j(t){return t.cardsCounter=t.rootNode.getElementsByClassName("pure-item").length}function d(t){var a=t.response;a&&d(a)}function C(t){if(t.isEmpty){var a=t.rootNode,e=v.findParent(a,function(s){return o.hasClass(s,"dlist")});if(e){var r=a.getAttribute("data-next-block");r?u.request(r,"post").then(function(s){d(s.response),x.items.added.trigger()},function(s){f(e)}).send():f(e)}}else j(t)}function h(t){var a=t.proxyConfig;a.selector=y,a.complete=function(r){C(t)},a.cancel=function(e){var r=e.target;r&&o.hasClass(r,"js-axb")&&(r.form?r.form.okSubmitSender=r:r.okSubmitSender=r,l.allowDefault(e),U.finished.attachOnce(function(s){s&&o.hasClass(s,"friend-request-form")&&C(t)}))}}l.register("FriendsAjaxPortletBehavior",n)})(__jsRegistry.am, __jsRegistry.ea, __jsRegistry.pa, __jsRegistry.s, __jsRegistry.bw, __jsRegistry.de, __jsRegistry.t, __jsRegistry.gt, __jsRegistry.w)||window);
__jsRegistry.pc = __globalRegistry["fx1lCQw"] || (__globalRegistry["fx1lCQw"] = (function(l,p,c,u,v){var a,n,i,d;p.addFuncHandler("vk-portlet-friends-button",{tap:function(o){if(n){var r=n,t={};if(t.client_id=a,t.display="mobile",t.redirect_uri=i,t.scope="friends",t.response_type="code",t.v="response_type",r=c.insertParams(r,t),d){var e=document.createElement("iframe");e.style.positon="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",e.style.width="100%",e.style.height="100%",e.src=r,document.getElementById("vkPortletContent").appendChild(e)}else u.change(r)}}});function y(s){a=s.appId,n=s.apiUri,i=s.redirectUri,d=s.useIframe}l.vkFriends=v.create({update:function(o){y(o)}})})(__jsRegistry.c, __jsRegistry.an, __jsRegistry.m, __jsRegistry.ew, __jsRegistry.x)||window);
__jsRegistry.pd = __globalRegistry["lPDUALA"] || (__globalRegistry["lPDUALA"] = (function(J,L,W,D,Z,r,C,b,R,M,A,V,q,z){var c,h,t,a,v,d,j,l,H,g,p=0,E=0,F,S,w,T=!1,s=__js_temp_htmlTag,n={isScrollActionShown:!1,isFullHeightApplied:!1};function O(){s.scrollTop=0,window.scrollTo(0,0)}function u(o){n.isScrollActionShown&&(o=o||!1,r.switchClass(a,!o,"hidden"),n.isScrollActionShown=o)}function k(){r.addClass(t,"__y-fit-content")}function G(){r.removeClass(t,"__y-fit-content")}function x(){t.offsetHeight+p<f()&&(W.calculateForElement(t,{height:f(),fullheightNodesWrapper:t}),T&&(t.style.height=t.style.minHeight)),n.isFullHeightApplied=!0}function B(){var o=s.scrollTop;if(t.style.minHeight="",T&&(t.style.height=""),u(!0),O(),!(o>0&&o/l>.18)){var e=X();if(document.body.scrollHeight>l){n.isPageHasScroll=!0;var i=e/f();if(i<F.spaceForFeed&&H>q.breakpoint.phablet){i<F.spaceForScrollAction&&u(!1),k();return}}else n.isPageHasScroll=!1;e<=f()?(u(n.isPageHasScroll),w||x()):e-v<=f()?(u(!1),w||x()):(u(!1),n.isFullHeightApplied=!1)}}function K(o){c=document.getElementById("head"),c&&(r.addClass(c,"logo-anim"),r.addClass(c,"__loading"))}function Q(o){n.isScrollActionShown&&r.addClass(a,"__active")}function X(o){k();var e=t.offsetHeight;return G(),e}function Y(o){var e=d&&typeof d.getBoundingClientRect=="function"&&d.getBoundingClientRect().top;if(e>0){var i=s.scrollTop+e-(g?p:0);D.run(s,function(m,y){m.scrollTop=y},{to:i,time:200}).onAnimationEnd.attachOnce(function(){s.scrollTop=i})}else d.scrollIntoView(),g&&(s.scrollTop-=p)}var _=M(function(o){j=l,l=window.innerHeight,H=C.calc().width,v=n.isScrollActionShown?a.offsetHeight:0,Math.abs(l-j)/l>.2&&B()},150);function N(){window.scrollTo(0,1);var o=s.scrollTop;o>0&&o<=1||(s=document.body),window.scrollTo(0,0)}function f(){return l-E}b.addFuncHandler("accept-cookie-policy",{tap:function(e){document.cookie="_acceptCP=1; path=/; expires=Tue, 19 Jan 2038 03:14:07 UTC; domain=.ok.ru",logClientEvent("cookie.policy.accepted");var i=V.parentBySelector(e.target,".cookie-policy");i.parentNode.removeChild(i)}});var P=function(e){e.spaceForFeed=e.spaceForFeed||.7,e.spaceForScrollAction=e.spaceForScrollAction||.5,F=e,Math.max(s.scrollTop,document.body.scrollTop)<10&&(typeof window.requestAnimationFrame=="function"?requestAnimationFrame(N):N()),T=A.ie||A.winphone,c=document.getElementById("head"),h=document.getElementById("bottom-navbar"),t=document.getElementsByClassName("login-page")[0],a=document.getElementsByClassName("js-login-scroller-block")[0],d=document.getElementsByClassName("assist-feeds")[0],g=R.get("isPositionFixed"),l=j=window.innerHeight,H=C.calc().width;for(var i=document.getElementsByClassName("js-autofocus"),m=0,y=i.length;m<y;m++){var I=i[m];I.focus(),z.setToEnd(I)}n.isScrollActionShown=!!a,v=a&&a.offsetHeight||0,g&&(p=c.offsetHeight),h&&(E=h.offsetHeight),K(),B(),Q(),window.addEventListener("resize",_),b.addFuncHandler("login_jumpToFeeds",{tap:Y})};J.loginPageService=L.create({init:function(e){S=e.fixInitLoginServiceJs||!1,w=e.flexboxHeightNoJS||!1,S||P(e)},update:function(e){S&&P(e)},discard:function(e){window.removeEventListener("resize",_)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.js, __jsRegistry.ju, __jsRegistry.n, __jsRegistry.s, __jsRegistry.bd, __jsRegistry.an, __jsRegistry.ac, __jsRegistry.bb, __jsRegistry.ak, __jsRegistry.t, __jsRegistry.bk, __jsRegistry.mg)||window);
__jsRegistry.pe = __globalRegistry["lIKvEjw"] || (__globalRegistry["lIKvEjw"] = (function(m){var t="sign-in-block",l=6e4,i,o;function a(){var e=document.getElementById(t);e==null||e.classList.remove("invisible")}function u(){var e=document.getElementById(t);e==null||e.classList.add("invisible")}function n(){o&&clearTimeout(o),o=setTimeout(a,i)}var r=function(v,d){this.loginFormCloser={tap:function(){u(),n()}};var s=d.getAttribute("data-timeout");i=s?parseInt(s):l,n()};r.isInstant=!0,(0,m.register)("loginFormCloser",r)})(__jsRegistry.am)||window);
__jsRegistry.pf = __globalRegistry["pqseNzg"] || (__globalRegistry["pqseNzg"] = (function(G,U,o,v,c,X,u,n,q,F,re,K,Y,Z,y){var Q="__focus-on",O="__focus-off",A="__calendar-on",E="__calendar-off",R="__layer-on",M="__picked",$="__default",h="__decor",V="js-photo-action",P="__size-",b=0,ee=100,N=q.newInstance(),C={className:"__picker-opened"},f={className:"__picker-closed"},m={className:"__picker-disabled"},w=[C,f,m];function te(e,t){for(var a=t.root,s=w.length;s--;){var r=w[s];o.switchClass(a,e==r,r.className)}}function H(e,t){var a=this;a.root=t,n.attachUntilRendering(u.filesSelected,this.doOpenLayerWithUploader,this)}H.prototype={openLayer:{tap:function(t){this.doOpenLayer()}},openLayerWithUploader:{tap:function(t){c.allowDefault(t)}},doOpenLayerWithUploader:function(t){F.isChildOf(t,this.root)&&this.doOpenLayer()},doOpenLayer:function(){o.addClass(document.body,"ofh"),o.addClass(this.root,R),N.lock();var t=this.root.getElementsByClassName("posting-topic_text_area")[0];t&&t.focus()}};function I(e,t){var a=this;a.root=t;var s=a.dom=X.byDataId(t);a.textActivated=!1,a.expandable=o.hasClass(t,O),a.opened=!1,a.pickerMod=s.startDecor?C:f,a.pickerLastEnabledMod=s.startDecor?C:f,a.tmpPickedItems=null,a.defaultNonDecoratorFontRule=JSON.parse(s.noPick&&s.noPick.getAttribute("data-font-rule")||"{}"),a.defaultDecoratorFontRule=JSON.parse(s.decorActive&&s.decorActive.getAttribute("data-default-font-rule")||"{}"),a.prevFontSize,a.calendarOpened=!1,a.toStatusDefault=s.setToStatusCheckbox&&s.setToStatusCheckbox.checked,a.textDefault=s.postingTextarea.value||"",a.pickedRule=a.defaultNonDecoratorFontRule,a.onDecorHideElements=t.getElementsByClassName("js-decor-hide"),s.startDecor&&(g(a,s.startDecor),l(a)),n.attachUntilRendering(u.photosStartUpload,this.disablePicker,this),n.attachUntilRendering(u.photosCleared,this.enablePicker,this),n.attachUntilRendering(u.photosUploadLimitReached,this.photosUploadLimitReached,this),n.attachUntilRendering(u.photosUploadLimitCleared,this.photosUploadLimitCleared,this),n.attachUntilRendering(Z.opening,function(){s.postingTextarea.blur()}),n.rendering.attachOnce(this.closeForm,this)}I.prototype={touchForm:{tap:function(t,a){var s=o.hasClass(this.root,O);s&&o.hasClass(a,V)&&y.log("postingTopicFormOld",["status","photo"]),l(this),_(this,!0),c.allowDefault(t)},input:function(t){l(this),c.allowDefault(t),this.textActivated||(o.addClass(this.root,"__text-activated"),this.textActivated=!0)}},cancelForm:{tap:function(t){z(this)}},openPicker:{tap:function(t){!this.opened&&this.dom.statMDecor&&(this.dom.statMDecor.value="on"),l(this),D(this,C),_(this,!0)}},closePicker:{tap:function(t){g(this,t.target),l(this),D(this,f)}},pickColor:{tap:function(t){g(this,t.target),l(this)}},toggleCalendar:{tap:function(t){_(this,!0),this.calendarOpened=!this.calendarOpened,T(this.root,this.calendarOpened,A,E),this.dom.toStatusCont&&o.switchClass(this.dom.toStatusCont,this.calendarOpened,"hidden"),c.allowDefault(t)}},openToggleCatalog:{tap:function(t){var a=o.hasClass(this.dom.decorCatalog,"hidden");k(this,a),a&&this.updateCatalogMaxHeight()}},closeCatalog:{tap:function(t){k(this,!1)}},updateCatalogMaxHeight:function(){var t=this.dom;if(t.decLists){var a=K.calc();if(a.height>=a.width){var s=a.height-Y.toolbar.height-t.btnsExt.offsetTop-t.btnsExt.offsetHeight+t.decLists.offsetHeight;s>=ee?t.decLists.style.maxHeight=s+"px":t.decLists.style.maxHeight="none"}}},disablePicker:function(){x(this,!0)},enablePicker:function(){x(this,!1)},closeForm:function(){z(this)},photosUploadLimitReached:function(){this.dom.photoUp&&o.addClass(this.dom.photoUp,"hidden")},photosUploadLimitCleared:function(){this.dom.photoUp&&o.removeClass(this.dom.photoUp,"hidden")}};function l(e){if(e.dom.inputDecoratorId){var t=e.dom.postingTextarea.value||"",a=se(e.pickedRule,t)||0;if(a!=e.prevFontSize){e.prevFontSize&&o.removeClass(e.root,P+e.prevFontSize),o.addClass(e.root,P+a),e.prevFontSize=a;var s=a===0;x(e,s),e.onDecorHideElements&&v(e.onDecorHideElements,function(r){o.switchClass(r,!s,"hidden")})}}}function g(e,t){var a=e.dom;if(!(!a.inputDecoratorId||!t)){var s=t.getAttribute("data-decor-id");e.tmpPickedItems&&v(e.tmpPickedItems,function(d){o.removeClass(d,M)}),e.tmpPickedItems=e.root.querySelectorAll('[data-decor-id="'+s+'"]'),v(e.tmpPickedItems,function(d){o.addClass(d,M)}),a.inputDecoratorId.value=s;var r=t.getAttribute("data-font-rule");r?e.pickedRule=JSON.parse(r):e.pickedRule=s?e.defaultDecoratorFontRule:e.defaultNonDecoratorFontRule;var i=t.getAttribute("data-img");if(o.hasClass(t,$))o.removeClass(a.postingTextareaCover,h),o.removeClass(a.postingTextarea,h),a.postingTextareaCover.removeAttribute("style");else{o.addClass(a.postingTextareaCover,h),o.addClass(a.postingTextarea,h);var S=t.getAttribute("style");i&&(S+="background-image: url('"+i+"');"),a.postingTextareaCover.setAttribute("style",S)}o.switchClass(a.postingTextareaCover,i,"__decor-image"),e.updateCatalogMaxHeight()}}function _(e,t){t!=e.opened&&(e.opened=t,e.expandable&&(T(e.root,t,Q,O),y.log("postingTopicFormOld",["status","open"])))}function ae(e){var t=e.dom;u.clearForm.trigger(),t.postingTextarea.value=e.textDefault,t.postingTextarea.style.minHeight="0",t.postingTextareaCover.removeAttribute("style",""),t.setToStatusCheckbox&&(t.setToStatusCheckbox.checked=e.toStatusDefault),t.toStatusCont&&o.removeClass(t.toStatusCont,"hidden"),t.calendarInpt&&(t.calendarInpt.checked=!1,T(e.root,!1,A,E));var a=t.errors;a&&a.firstChild&&a.removeChild(a.firstChild)}function D(e,t){e.dom.inputDecoratorId&&t!=e.pickerMod&&(t!=m&&(e.pickerLastEnabledMod=t),e.pickerMod=t,e.dom.inputDecoratorId.disabled=t==f||t==m,te(t,e))}function x(e,t){D(e,t?m:e.pickerLastEnabledMod)}function z(e){ae(e),g(e,e.dom.noPick),l(e),D(e,f),_(e,!1),k(e,!1);var t=F.parentBySelector(e.root,".post-in-layer");t&&(o.removeClass(document.body,"ofh"),o.removeClass(t,R),N.unlock()),e.dom.statMDecor&&(e.dom.statMDecor.value="off")}function k(e,t){var a=e.dom;a.decorCatalog&&(o.switchClass(a.decorCatalog,!t,"hidden"),o.switchClass(a.decorActive,t,"hidden"))}function T(e,t,a,s){o.switchClass(e,t,a),o.switchClass(e,!t,s)}function se(e,t){if(!e)return null;var a=0,s=1,r=b,i=0;function S(p){var W=t.length;if(p.symbolCountDefined&&W>p.symbolCount)return!1;if(p.lineCountDefined){var L=p.lineLength;r!=L&&(a=0,s=1,r=L,i=0);var J=p.lineCount;if(s>J)return!1;for(var oe=p.lineLengthDefined;a<W;a++){var j=!1;if(t.charAt(a)=="\n"?(i=0,j=!0):(i++,oe&&i>L&&(i=1,j=!0)),j&&++s>J)return a++,!1}}return!0}for(var d=0;d<e.length;d++){var B=e[d];if(S(B))return B.size}return null}G.postingTopicFocus=U.create({init:function(){c.register("postingTopic",I),c.register("postingLayer",H)},update:function(t){if(t.focusFormOnLoad){var a=document.getElementsByClassName("posting-topic_text_area")[0];a&&a.focus()}}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.s, __jsRegistry.k, __jsRegistry.am, __jsRegistry.md, __jsRegistry.kz, __jsRegistry.w, __jsRegistry.ez, __jsRegistry.t, __jsRegistry.kw, __jsRegistry.bd, __jsRegistry.bk, __jsRegistry.as, __jsRegistry.a)||window);
__jsRegistry.pg = __globalRegistry["pz8SndA"] || (__globalRegistry["pz8SndA"] = (function(c,n,g){var t=void 0;function s(a,i){}s.prototype={pickPhotoAndOpenForm:{change:function(i){var e=i.target;if(t=e.files,t&&t.length){var o=e.getAttribute("data-link");g.change(o)}}}},r.isInstant=!0;function r(a,i){if(t&&t.length){var e=document.getElementsByClassName("posting-photos")[0];if(e){var o=n.getOrMakeBehavior(e);o.processingInput(o,t)}}}n.register("postingPhotoActivator",s),n.register("postingPhotoActivatorHook",r)})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.ew)||window);
__jsRegistry.ph = __globalRegistry["pPbo8w"] || (__globalRegistry["pPbo8w"] = (function(t,r,i,o,e,n){t.pollForEnvelopes=function(s){s.redirectUri?(e.removeClass(s.target,"js-call"),n.change(s.redirectUri)):s.uri&&(e.removeClass(s.target,"js-call"),setTimeout(function(){i.request(s.uri,"get").then(function(){r(this.response()),s.initStub&&o.recalculateStubs()}).send()},s.timeout))}})(__jsRegistry.c, __jsRegistry.de, __jsRegistry.bw, __jsRegistry.hb, __jsRegistry.s, __jsRegistry.ew)||window);
__jsRegistry.pi = __globalRegistry["pnNrk1Q"] || (__globalRegistry["pnNrk1Q"] = (function(L,j,o,f,i,d,g,I,l){var a="arrow-active",n=50,c=5;function h(r,e,t,s){I.run(function(){s>1?(r.scrollLeft=r.scrollLeft+t,h(r,e,t,s-1)):r.scrollLeft=e})}function u(r,e){var t=(e-r.scrollLeft)/c;h(r,e,t,c)}function m(r,e){var t=this;t.root=e,t.dom=f.byDataId(e),t.imageWidth=e.getElementsByClassName("product-slider_list_pic")[0].offsetWidth,t.scrollContainer=e.getElementsByClassName("product-slider_list")[0],t.imagesCount=Math.floor(t.scrollContainer.scrollWidth/t.imageWidth),t.currentImageIndex=0,t.currentStartTouchX=0,t.currentScrollLeft=0}m.prototype={slideImage:{tap:function(e){var t=g.parentBySelector(e.target,"a");t&&d.goPhoto(t)},touchStart:function(e){o.allowDefault(e),this.currentStartTouchX=i.touchX(e),this.currentScrollLeft=this.scrollContainer.scrollLeft},touchMove:function(e){o.allowDefault(e);var t=this.imageWidth,s=i.touchX(e)-this.currentStartTouchX;Math.abs(s)>t&&(s=s>0?t:-t),this.scrollContainer.scrollLeft=this.currentScrollLeft-s},touchEnd:function(e){o.allowDefault(e);var t=i.touchX(e)-this.currentStartTouchX;t<-n&&this.currentImageIndex<this.imagesCount-1?this.nextImage(this.currentScrollLeft,!0):t>n&&this.currentImageIndex>0?this.nextImage(this.currentScrollLeft,!1):u(this.scrollContainer,this.currentScrollLeft)}},arrowLeft:{tap:function(e){this.currentImageIndex>0&&this.nextImage(this.scrollContainer.scrollLeft,!1)}},arrowRight:{tap:function(e){this.currentImageIndex<this.imagesCount-1&&this.nextImage(this.scrollContainer.scrollLeft,!0)}},nextImage:function(e,t){this.scrollToImage(e,t?this.currentImageIndex+1:this.currentImageIndex-1)},scrollToImage:function(e,t){u(this.scrollContainer,e+this.imageWidth*(t-this.currentImageIndex)),this.currentImageIndex=t,this.dom.currentPhotoIndex&&(this.dom.currentPhotoIndex.innerHTML=t+1),this.dom.scrollArrowLeft&&(l.switchClass(this.dom.scrollArrowLeft,this.currentImageIndex>0,a),l.switchClass(this.dom.scrollArrowRight,this.currentImageIndex<this.imagesCount-1,a))}},o.register("productImageSlider",m)})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.am, __jsRegistry.md, __jsRegistry.aj, __jsRegistry.fu, __jsRegistry.t, __jsRegistry.aq, __jsRegistry.s)||window);
__jsRegistry.pj = __globalRegistry["sCfClJA"] || (__globalRegistry["sCfClJA"] = (function(){var E={CLEAN_INPUT:1,REQ_DEBOUNCE:2,IN_PLACE:4,KEEP_INPUT_ACTIVE:8,PRESERVE_SUGGEST:16,CLEAN_SUGGEST:32};return{SearchOptions:E,searchProvider:null}})()||window);
__jsRegistry.pk = __globalRegistry["s8FdBaA"] || (__globalRegistry["s8FdBaA"] = (function(w,p,r,h,S,O,V){var l="SuggestSearchView",u="__loading",d="hidden",g=h.create(),y=V.SearchOptions;function n(t,e){this.model=t||(t={}),this.layer=e,this.searchResults=e,this.inited=!1,this.viewOpen=!1,this.selectedSuggest=null,this.viewOpened=h.create();var s=this;this.initTask=O.start().then(function(i){s.searchController=i,s.viewOpened.attach(i.viewChanged.trigger,i.viewChanged),i.waitingResults.attach(o,s),s.inited=!0})}n.prototype={constructor:n,finishInitiation:function(e){return this.initTask.resolveIfNotDone(e),this},bindController:function(e){return this.searchController&&this.searchController.waitingResults.detach(o),this.searchController=e,e.waitingResults.attach(o,this),this},createView:function(){this.selectedSuggest=null,this.viewOpened.trigger({open:this.viewOpen=!0,root:this.layer}),this.createViewPublic()},createViewPublic:function(){r.removeClass(this.layer,d)},destroyView:function(){this.viewOpened.trigger({open:this.viewOpen=!1,root:this.layer}),this.destroyViewPublic()},destroyViewPublic:function(){r.addClass(this.layer,d)},isViewOpen:function(){return this.viewOpen},renderSearchResult:function(e){var s=this.searchResults;r.clear(s),s.appendChild(e)},decorateOnResultEvent:function(e){return e},selectSearchResults:{tap:function(e,s){var i=this.searchController,c=p.findParent(e.target,function(f){return r.hasClass(f,"suggest-search_item")});if(c){var v=i.activeInput,a=c._okSuggestData;g.trigger(this.decorateOnResultEvent({suggestField:v,target:c,payload:a,appendData:function(C){this.target._okSuggestData=a=C}})),a&&(this.selectedSuggest=v.value=a.data),i.hasOptions(y.KEEP_INPUT_ACTIVE)?this.destroyView():i.closeSearch()}}}},w.register(l,n);function o(t){var e=this.layer,s=t.task;s.done||(S.start(s),r.addClass(e,u),s.anyway(function(){r.removeClass(e,u)}))}return{constructor:n,onResultSelected:g,VIEW_NAME:l}})(__jsRegistry.am, __jsRegistry.t, __jsRegistry.s, __jsRegistry.u, __jsRegistry.da, __jsRegistry.n, __jsRegistry.pj)||window);
__jsRegistry.pl = __globalRegistry["saeFIKw"] || (__globalRegistry["saeFIKw"] = (function(g,c,y,i,C,E,l,f,j,I){var p="SuggestSearchLayerView",m="suggest-search-layer",L="suggest-search-input",b="suggest-search-content",v,S=C.create(),n={contentNode:null,toolbar:null};function h(t,e){f.constructor.call(this,t,e);var s=this;this.searchField=document.getElementById(L),this.searchResults=document.getElementById(b),this.form=this.searchField.form,this.scrollLocker=E.newInstance(),this.searchController,this.scrollTop,this.toolbarOffset,this.form.addEventListener("submit",function(r){r.preventDefault();var o=s.searchController;o&&s.searchController.closeSearch()},!0),this.initTask.then(function(r){r.createHistoryPage("suggestSearchLayer")})}j(h,f.constructor);var a=h.prototype;a.createViewPublic=F,a.destroyViewPublic=_,a.decorateOnResultEvent=function(t){return t.searchField=this.searchField,t},a.closeInteraction={tap:function(){var e=this.searchController;e.onCloseSearch.tap.call(e)}},a.inputInteraction={input:function(e,s){var r=this.searchController;r.onStartSearch.input.call(r,e,s)},keyUp:function(e,s){var r=this.searchController;r.onStartSearch.keyUp.call(r,e,s)}},g.iOS&&(a.selectSearchResults={},Object.assign(a.selectSearchResults,a.superclass.prototype.selectSearchResults),a.selectSearchResults.touchMove=function(t){i.allowDefault(t),this.searchField.blur()}),i.register(p,h);function F(t){var e=n.toolbar;this.toolbarOffset=e?e.getBoundingClientRect().bottom:0,this.scrollTop=l.calc().scrollTop,this.lastScrollData=l.recordScroll(),this.scrollLocker.lock();var s=n.contentNode,r=this.layer,o=this.searchField,d=this.searchController.activeInput;if(d){var R=d.value;u.call(this),l.changed.attach(u,this),o.value=R,o.placeholder=d.placeholder,s.parentNode.insertBefore(r,s),c.addClass(s,"hidden"),c.addClass(r,"__open"),g.iOS?setTimeout(function(){o.focus(),I.setToEnd(o)},10):o.focus()}else this.searchController.closeSearch()}function _(){this.delay=void 0;var t=this,e=this.layer;c.removeClass(e,"__open"),c.removeClass(n.contentNode,"hidden"),document.body.appendChild(e),this.searchField.placeholder=this.searchField.getAttribute("data-placeholder"),this.scrollLocker.unlock(),l.resetScroll(this.lastScrollData),l.changed.detach(u,this),S.trigger({searchField:this.searchField,suggestField:this.searchController.activeInput}),setTimeout(function(){c.clear(t.searchResults)},20)}function u(t){var e=this.layer,s=e.style,r=l.calc();s.height=r.height-this.toolbarOffset+"px"}function N(t){return i.getOrMakeBehavior(document.getElementById(m))}y.create({name:"suggestSearchLayer",update:function(){n.contentNode=document.getElementById("content"),n.toolbar=document.getElementById("head")}});var T={get:function(e){return v||(v=N())}};return{INSTANCE:T,onLayerClosed:S,LAYER_ID:m,VIEW_NAME:p}})(__jsRegistry.ak, __jsRegistry.s, __jsRegistry.x, __jsRegistry.am, __jsRegistry.u, __jsRegistry.ez, __jsRegistry.bd, __jsRegistry.pk, __jsRegistry.bu, __jsRegistry.mg)||window);
__jsRegistry.pm = __globalRegistry["aYtAFhA"] || (__globalRegistry["aYtAFhA"] = (function(p,f,o,h,d){function s(i){return i&&i.value}function r(i,e){this.form=e}r.prototype={lookup:function(e){var u=this.form,t=u.field_zipcode;if(t){var l=s(u.field_cityCustomName),n=s(u.field_adrFL);l&&n&&f.run("zipcode.get",{city:l,address:n}).then(function(g){var c=g.code;c&&(t.value=c)},function(){t.value=""}),e&&o.allowDefault(e)}},find:{blur:a,change:a}};function a(i,e){this.lookup(i,e)}o.register("autoZip",r),d.onResultSelected.attach(function(i){var e=o.resolve(i.suggestField,"autoZip");e&&e.lookup(null)})})(__jsRegistry.c, __jsRegistry.fx, __jsRegistry.am, __jsRegistry.pl, __jsRegistry.pk)||window);
__jsRegistry.pn = __globalRegistry["cMVcvZw"] || (__globalRegistry["cMVcvZw"] = (function(m,c,u){u.register("countdownTimer",e);function e(r,t){var n=this.redrawTimerValue(r.countdownEndTime,t);n.total>=0&&this.animateCountdown(t,r.countdownEndTime)}e.isInstant=!0,e.prototype={redrawTimerValue:function(t,n){var o=d(t);return n.innerHTML=f(o),o},animateCountdown:function(t,n){var o=this,i=setInterval(function(){var s=o.redrawTimerValue(n,t);s.total<=0&&clearInterval(i)},1e3)}};function d(r){var t=r-new Date,n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),i=Math.floor(t/(1e3*60*60)%24),s=Math.floor(t/(1e3*60*60*24));return{total:t,days:s,hours:i,minutes:o,seconds:n}}function f(r){return l(r.days)+a(r.hours)+":"+a(r.minutes)+":"+a(r.seconds)}function l(r){return r>=10?r+":":r>0?"0"+r+":":""}function a(r){return r>=10?r:r>0?"0"+r:"00"}})(__jsRegistry.s, __jsRegistry.bd, __jsRegistry.am)||window);
__jsRegistry.po = __globalRegistry["sxz1LgQ"] || (__globalRegistry["sxz1LgQ"] = (function(u,l,j,s,o,d,g,h){var v="data-friend-id",a="__show",c="compactGiftSendingForm",m="compactGiftSendingFriendIdField",r=1500,i=!1,I=d.create().translateX(-100,"%"),S=d.create().translateX(0);function f(n,e){this._root=e;var t=e.querySelector(".send-gift-by-one-click-rejection");this._rejection=t,this._rejectionLoaderLine=t.querySelector(".send-gift-by-one-click-rejection_loader_line"),this._sendingTimeoutId=-1}f.prototype={startSendingProcess:function(){if(!i){i=!0;var e=this;s.addClass(this._rejection,a);var t=this._rejectionLoaderLine;I.applyTo(t),t.style[g.transition+"Duration"]=r+"ms",o.run(function(){o.run(function(){S.applyTo(t)})}),this._sendingTimeoutId=setTimeout(function(){e.sendGift()},r)}},sendGift:function(){var e=this._root.getAttribute(v),t=document.getElementById(m);t.value=e;var _=document.getElementById(c);h.submitForm(_)},rejectSending:function(){i=!1,clearTimeout(this._sendingTimeoutId),s.removeClass(this._rejection,a)},send:{tap:function(){this.startSendingProcess()}},reject:{tap:function(){this.rejectSending()}}},u.sendGiftByOneClick=l.create({update:function(e){i=!1,c=e.formId||"compactGiftSendingForm",m=e.friendFieldId||"compactGiftSendingFriendIdField",r=e.rejectionShowingTimeout||1500},init:function(){j.register("sendGiftByOneClick",f)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.am, __jsRegistry.s, __jsRegistry.aq, __jsRegistry.av, __jsRegistry.au, __jsRegistry.an)||window);
__jsRegistry.pp = __globalRegistry["pRr3ZLg"] || (__globalRegistry["pRr3ZLg"] = (function(e,r){var a=r.createCardReadTracking({listId:"promo-dialog",actionName:"promo.dialog.log.view",serviceName:"trackGiftsPromoDialog"});return e.trackGiftsPromoDialogSeen=a.trackReadsSimple,a})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.pq = __globalRegistry["pWwT3CA"] || (__globalRegistry["pWwT3CA"] = (function(r,s){var e=s.createCardReadTracking({listId:"sections-list",actionName:"promo.presents.log.view",serviceName:"trackGiftsPromoSections"});return r.trackGiftsPromoSectionsSeen=e.trackReadsSimple,e})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.pr = __globalRegistry["mTcpkew"] || (__globalRegistry["mTcpkew"] = (function(){var i=Array.prototype.join,p=" ",D={DEFAULT:void 0,FORWARD:"forward",BACKWARD:"backward"},f={TELEPHONE:"tel",TEXT:"text"},A=/[\D]+/g,E="&",e="x",o=e+e,c=o+e,l=c+e,_=l+e,L=_+e;function N(r,n){var a=[],v=0,I="",R=r.replace(/./g,function(s,y){for(var u=0,X=n.length;u<X;u++){var t=n[u],d=s.match(t.regexp);if(d&&(t.pos===void 0||t.pos===y))return v+=t.symbolLength,t.type>0?a.push(s):I+=s,s}return""});return{result:R,resultWithoutSpecial:I,symbolsLength:v,specialSymbols:a}}function h(r){return r=r||p,function(){return i.call(arguments,r)}}function m(r,n){var a=document.createElement("INPUT");return a.className=r.className+" input-mask-echo",a.disabled=!0,a.type=n,r.parentNode.insertBefore(a,r),a}return{parseStringForMask:N,joinMaskFromArgs:h,createEchoInput:m,DeleteMode:D,InputTypes:f,NON_DIGIT_REG:A,WILDCARD:e,NO_LIMITS_WILDCARD:E,_2X:o,_3X:c,_4X:l,_5X:_,_6X:L}})()||window);
__jsRegistry.ps = __globalRegistry["mzMp8Ig"] || (__globalRegistry["mzMp8Ig"] = (function(X,q,A,M){var _=/./gm,k=M.WILDCARD,o=M.NO_LIMITS_WILDCARD,P=new RegExp(k+"{1,3}","gi"),F=new RegExp(o,"g"),d=M.parseStringForMask;function O(s,e,t,r,a){var n=e.prefix||"",l=e.mask,u=e.allowedRegexTokens,f=n+l,h=parseInt(e.fixedPart,10)||0,g=n&&d(n,u).result||"",i=d(s,u),m=i.result;if(e.isDynamic){var c=Math.max(m.length+1-g.length,2),v=new Array(c).join(k);f=f.replace(o,c>5?v.match(P).join(" "):v)}var x=a&&a.selectionStart||void 0,V=a&&a.selectionEnd||void 0,T=x-V===0,w=f[t]&&f[t]!==k;if(r&&T&&w){var R,D,N=s.length,L=f.slice(0,N);r===M.DeleteMode.BACKWARD?(R=L.lastIndexOf(k,t),D=t,t=R):(R=t,D=L.indexOf(k,t)),s=s.slice(0,R)+(D>0&&s.slice(D)||"")}var G=t>0&&d(s.substring(0,t),u).result;i=d(s,u),m=i.result;var p,b=E(m,{minMaskLength:h,carretPlace:t}),j=f.replace(_,b.replacer),y=j.length;return p=b.getData().wildcardPositions[Math.max(G.length-g.length-1,0)],p=p+1||h,I(j,t>=y?y:p)}function E(s,e){var t=e.carretPlace||0,r=e.minMaskLength,a=0,n=-1,l=0,u=0,f=[],h=s.length;return{getData:function(){return{replaceCount:a,lastReplaceIndex:n,carretIndex:l,decorCount:u,wildcardPositions:f}},replacer:function(i,m,c){var v="";if(a<h){var x=s[a];i.toLowerCase()===k&&f.push(m)||i===x?(a++,a===t&&(l=a),a===h&&(n=m-1),v=x):(u++,v=i)}else m<r&&(u++,v=i);return v}}}function S(s,e){var t=e.carretPlace;s.setSelectionRange(t,t)}function W(s,e,t){var r=s&&s.value||"",a="";if(t){var n=t.mask||"";a+=(t.prefix||"")+(n.replace(F,"")||""),a=a.trim().slice(r.length)}e.value=r+a}function I(s,e){return{value:s,carretPlace:e}}function C(s,e){this.field=s,this.maskData=e||{unsettled:!0},this.events={maskApplied:A.create()}}return C.prototype={_inputController:function(e){var t=this.maskData,r=t.allowedRegexTokens,a=t.mask,n=t.prefix||"",l=e.carretPlace,u=e.sourceText,f=u.length,h=e.event,g=h&&h.data,i=n+a,m=u.substring(l),c=Math.max(n.length,parseInt(t.fixedPart,10)),v=this.maskingResult||{};return g&&d(g,r).result===""?(this.maskingResult=I(v.value||"",Math.max(l-1,0)),!1):!t.isMaskUpdate&&c>0&&l!==null&&l<=c?!t.isImmutable&&l<c?(Object.assign(this.maskData,{prefix:"",fixedPart:0,mask:o,isDynamic:!0,isWaitsMask:!0,pLength:void 0}),!0):(this.maskingResult=I(l===c?i.substring(0,c)+m:this.maskingResult&&this.maskingResult.value||i.substring(0,c)+m,c),!1):(!t.isMaskUpdate&&!t.isImmutable&&!t.isDynamic&&i.length<f&&Object.assign(t,{mask:o,isDynamic:!0,isWaitsMask:!0}),!0)},setField:function(e){this.field=e},setFieldValue:function(){this.field.value=this.maskingResult.value},setMaskData:function(e){var t=e.mask;return e.prefix=e.prefix||"",e.fixedPart=e.fixedPart||0,e.isImmutable=e.isImmutable||!1,e.isWaitsMask=e.isWaitsMask||!1,e.isDynamic=t&&t.indexOf(o)>-1,this.maskData=e,this},mergeIntoMaskData:function(e){return Object.assign(this.maskData,e),this},setImmutable:function(e){return this.maskData.isImmutable=!!e,this},setDynamic:function(){var e=this.maskData;return e.mask=o,e.isDynamic=!0,this},setRequireMask:function(){return this.maskData.isWaitsMask=!0,this},setEchoInputValue:function(e){W(this.field,e,this.maskData)},setDefaultMaskData:function(e){return e.mask=o,e.prefix?e.fixedPart=e.prefix.length:e.isWaitsMask=!0,e.isDynamic=!0,e.isImmutable=!1,Object.assign(this.maskData,e),this},moveCarret:function(){S(this.field,this.maskingResult)},getMaskData:function(){return this.maskData},getMaskingResult:function(e,t,r,a){return this.maskingResult=O(e,this.maskData,t||this.field.selectionStart,r,a)},applyMask:function(e){this._inputController(e)&&(this.getMaskingResult(e.sourceText,e.carretPlace,e.deleteMode,e.input),this.maskData.isMaskUpdate=!1),this.setFieldValue(),e.leaveFocus||this.moveCarret(),this.events.maskApplied.trigger(this.maskingResult)}},{MaskDecorator:C}})(__jsRegistry.ex, __jsRegistry.r, __jsRegistry.u, __jsRegistry.pr)||window);
__jsRegistry.pt = __globalRegistry["clKAqaA"] || (__globalRegistry["clKAqaA"] = (function(t,c){function s(g,e){this.form=e,this.suggestSearchInstance}s.prototype={select:{init:n,change:n}};function n(g,e){var r=this.form.field_cityCustomName;this.suggestSearchInstance=this.suggestSearchInstance||t.resolve(r,"SuggestSearch"),this.suggestSearchInstance.updateArgument({location:c.getSelectedOptions(e)[0].value},r)}t.register("countrySuggestSearch",s)})(__jsRegistry.am, __jsRegistry.fa)||window);
__jsRegistry.pu = __globalRegistry["cRfqCjw"] || (__globalRegistry["cRfqCjw"] = (function(a,d,r,g,c){var u=(function(){function l(o,e){this.form=e;var s=d.onResultSelected;c.attachUntilRendering(s,this.onChange,this)}var n=l.prototype;return n.onChange=function(e){var s=e.payload.locationId,t=e.suggestField.dataset.targetCityField,i=t&&this.form.getElementsByClassName(t)[0];s&&i&&(0,r.hasClass)(e.suggestField,"js-city-field")&&(this.suggestSearchInstance=this.suggestSearchInstance||(0,a.resolve)(e.suggestField,"SuggestSearch"),this.switchDisabled(i,!s),this.suggestSearchInstance.updateArgument({location:s},i),i.value="")},n.switchDisabled=function(e,s){var t=(0,g.parentBySelector)(e,".field");t&&((0,r.switchClass)(t,s,"__disabled"),s?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))},l})();(0,a.register)("citySuggestSearch",u)})(__jsRegistry.am, __jsRegistry.pk, __jsRegistry.s, __jsRegistry.t, __jsRegistry.w)||window);
__jsRegistry.pv = __globalRegistry["AuSN7Q"] || (__globalRegistry["AuSN7Q"] = (function(n,h,c){var o=c.DeleteMode;function d(i,e){this.input=e,this.deleteMode=o.DEFAULT}function l(){}return d.prototype={constructor:d,getAllowedSymbols:l,createEchoInput:l,getPossiblyMaskData:l,extractMaskDecorator:l,mask:{input:function(i,e,t){var m=e.value,a=this.extractMaskDecorator(i,e,t);if(a){var s=a.mask;if(s||(s=a.mask=new h.MaskDecorator(e),a.echo=this.createEchoInput(e)),m==="")s.setMaskData({allowedRegexTokens:this.getAllowedSymbols()}).setImmutable(!1).setDynamic().setRequireMask();else if(s.getMaskData().isWaitsMask){var k=this.getPossiblyMaskData(m);k&&(s.setMaskData(Object.assign({},k)),s.mergeIntoMaskData({allowedRegexTokens:this.getAllowedSymbols(),isMaskUpdate:!0}).setImmutable(!1))}s.getMaskData().unsettled||(s.applyMask({event:i,sourceText:m,deleteMode:this.deleteMode,input:e,carretPlace:e.selectionStart}),s.setEchoInputValue(a.echo||(a.echo=this.createEchoInput(e))))}},keyDown:function(e){n.allowDefault(e),this.deleteMode=o.DEFAULT;var t=e.key;(t?t==="Delete":e.keyCode===46)?this.deleteMode=o.FORWARD:(t?t==="Backspace":e.keyCode===8)&&(this.deleteMode=o.BACKWARD)}}},{construct:d}})(__jsRegistry.am, __jsRegistry.ps, __jsRegistry.pr)||window);
__jsRegistry.pw = __globalRegistry["suKXOyQ"] || (__globalRegistry["suKXOyQ"] = (function(){var i=String.prototype;typeof i.startsWith!="function"&&(i.startsWith=function(n,t){return this.indexOf(n,t=t||0)===t})})()||window);
__jsRegistry.px = __globalRegistry["RbbsAiA"] || (__globalRegistry["RbbsAiA"] = (function(){var n={REGULAR:0,SPECIAL:1};function s(e,t){this.regexp=e,this.pos=t,this.symbolLength=1,this.type=0}return s.prototype={setSpace:function(t){return this.symbolLength=t,this},setType:function(t){return this.type=t,this}},{instance:s,typesList:n}})()||window);
__jsRegistry.py = __globalRegistry["pg1XKDw"] || (__globalRegistry["pg1XKDw"] = (function(N,_,n){var x=_.instance,p=[new x(/\d/),new x(/^\+/,0).setSpace(0).setType(_.typesList.SPECIAL)],T=n.WILDCARD,l=n._2X,v=n._3X,X=n._4X,R="-",o=n.joinMaskFromArgs(R),j={m10:[{mask:n.joinMaskFromArgs(" ")(v,o(v,X))}],m9:[{mask:o(v,v,v)}],m8:[{mask:o(v,v,l)}],m7:[{mask:o(v,l,l)}],m6:[{mask:o(v,v)}],m5:[{mask:o(T,l,l)}]},y={ru:function(e,r,t,a){var s=e.symbolsLength;if(a&&s===10)return r[2];if(s===11)return r[B(e.result,t)]}};function B(f,e){for(var r=0,t=e.length;r<t;r++){var a=e[r];if(f.startsWith(a))return r}return-1}function h(f,e){var r=e.localMasks,t=e.localPrefixes,a=e.strategy,s=e.forceLocal;return a?a(f,r,t,s):!1}function d(f){var e={};for(var r in f)if(f.hasOwnProperty(r)){for(var t=f[r],a=[],s=0,i=t.length;s<i;s++){var m=t[s].prefix;m&&a.push(n.parseStringForMask(m,p).result)}e[r]=a}return e}function w(f,e,r,t){var a=f.masksJson,s=f.loc2PrefixesMap,i=n.parseStringForMask(e,p),m=i.result,g=e.length,k=i.symbolsLength,E=i.specialSymbols[0]==="+";if(r){var S=a[r];if(S){var W=h(i,{localMasks:S,localPrefixes:s[r],strategy:y[r],forceLocal:t});if(W||t)return W||S[0]}if(t)return!1}for(var L in s){var P,u=a[L],D=s[L],F=y[L];if(F&&(P=h(i,{localMasks:u,localPrefixes:D,strategy:F}),P))return P;if(E)for(var M=0,Y=u.length;M<Y;M++){var I=u[M];if((I.prefix||"").trim()===m)return I}if(D.length===1){var b=u[0],H=D[0];if(m.startsWith(H)&&k===parseInt(b.pLength,10))return b}}if(!E&&g>0&&g<11){var A="m"+g,O=a[A]||j[A];return O&&O[0]}return!1}return{defaultShortMasks:j,loc2PrefixesMapper:d,getMaskByLocale:h,getPossiblyMaskData:w,ALLOWED_SYMBOLS:p}})(__jsRegistry.pw, __jsRegistry.px, __jsRegistry.pr)||window);
__jsRegistry.pz = __globalRegistry["foFDMMA"] || (__globalRegistry["foFDMMA"] = (function(e){return{getConfig:e.start()}})(__jsRegistry.n)||window);
__jsRegistry.qa = __globalRegistry["pGrJmrA"] || (__globalRegistry["pGrJmrA"] = (function(N,k,E,O,l,p,L,_){var I=p.ALLOWED_SYMBOLS,v;k(a,E.construct);function a(e,t){E.construct.apply(this,arguments)}a.prototype.processSelectCountry=function(e,t,m){var u=this;_.getConfig.then(function(C){v=C;var w=e.type,o=document.getElementById(m);if(o){var n=o.value,c=o.name,j=u.fieldDecorators||(u.fieldDecorators={}),i=j[c];i||(i=j[c]={});var s=i.mask,y={},d=!1,g=n==="",h=s&&(s.getMaskData().prefix||"").replace(l.NON_DIGIT_REG,"")===n.replace(l.NON_DIGIT_REG,""),D=w==="init";if(g||h){d=!0;var r=t.selectedOptions;if(r?r=r[0]:t.options&&(r=t.options[t.selectedIndex]),r)try{y=JSON.parse(r.getAttribute("data-value"))}catch(A){}}if(g||h||D){var M=(y.code||"").toLowerCase(),f=y.prefix||"";f&&f.slice(-1)!==" "&&(f=f+" ");var S=p.getPossiblyMaskData(v,n,M,d);s?n="":j[c].mask=s=new L.MaskDecorator(o),S?s.setMaskData(Object.assign({},S)):(g||h)&&s.setDefaultMaskData({prefix:f}),s.getMaskData().unsettled||(s.mergeIntoMaskData({allowedRegexTokens:I,isMaskUpdate:!0,isImmutable:!1}),s.applyMask({event:e,sourceText:n,carretPlace:D?null:o.selectionStart,leaveFocus:!0}),s.setEchoInputValue(i.echo||(i.echo=u.createEchoInput(o))))}}})},a.prototype.selectCountry={init:b,change:b},a.prototype.getAllowedSymbols=function(){return I},a.prototype.createEchoInput=function(e){return l.createEchoInput(e,l.InputTypes.TELEPHONE)},a.prototype.getPossiblyMaskData=function(e){return p.getPossiblyMaskData(v,e,null,null)},a.prototype.extractMaskDecorator=function(e,t,m){return this.fieldDecorators[t.name]};function b(e,t,m){this.processSelectCountry(e,t,m)}O.register("phoneMask",a)})(__jsRegistry.c, __jsRegistry.bu, __jsRegistry.pv, __jsRegistry.am, __jsRegistry.pr, __jsRegistry.py, __jsRegistry.ps, __jsRegistry.pz)||window);
__jsRegistry.qb = __globalRegistry["cCcI80g"] || (__globalRegistry["cCcI80g"] = (function(n,r){var v=n.instance,o=[new v(/\d/)],_=r._3X,a=r._4X,k=r._5X,M=r._6X,f=" ",s=r.joinMaskFromArgs(f),t={m16:[{mask:s(a,a,a,a)}],m17:[{mask:s(a,a,a,k)}],m18:[{mask:s(a,a,a,M)}],m19:[{mask:s(a,a,a,a,_)}]};function L(S){var X=r.parseStringForMask(S,o),e=X.symbolsLength;if(e>0&&e<20){var u="m"+Math.max(e,16),m=t[u];return m&&m[0]}return!1}return{defaultShortMasks:t,getPossiblyMaskData:L,ALLOWED_SYMBOLS:o}})(__jsRegistry.px, __jsRegistry.pr)||window);
__jsRegistry.qc = __globalRegistry["cpTmw"] || (__globalRegistry["cpTmw"] = (function(m,o,u,n,i,k){var c=i.ALLOWED_SYMBOLS;m(s,o.construct);function s(e,t){o.construct.apply(this,arguments);var r=this.decoratorData={};r.mask=new k.MaskDecorator(t),r.mask.setMaskData({allowedRegexTokens:c}).setRequireMask();var a=t.value;a.length>0&&this.mask.input.apply(this,[null,t])}s.prototype.getAllowedSymbols=function(){return c},s.prototype.createEchoInput=function(e){return n.createEchoInput(e,n.InputTypes.TEXT)},s.prototype.getPossiblyMaskData=i.getPossiblyMaskData,s.prototype.extractMaskDecorator=function(e,t,r){var a=this.decoratorData;return a.mask.mergeIntoMaskData({isWaitsMask:!0,isMaskUpdate:!0}),a},s.isInstant=!0,u.register("creditCardMask",s)})(__jsRegistry.bu, __jsRegistry.pv, __jsRegistry.am, __jsRegistry.pr, __jsRegistry.qb, __jsRegistry.ps)||window);
__jsRegistry.qd = __globalRegistry["f9FH4nw"] || (__globalRegistry["f9FH4nw"] = (function(I,k,v,X,Y,q,W,z,Q,y,V,Z,F,E,$,ee,A,B){var g=F.isSupported,O=18e5,N="fd.",h="data-form-func",p="data-form-init-task",D="["+p+"]",j="@FormBehaviorInitEvent",R=/\b([\w-_:]+)\b/g,l={},C={text:1,tel:1,"select-one":1},M=Array.prototype.slice,H=E(w),f=B.localStorage;function d(t,e){this.model=t,this.form=e,this.disabledTargets={};var r=this.form;this.docBehavior=v.getOrMakeBehavior(__js_temp_htmlTag);for(var s=r.parentNode,n=s.querySelectorAll(D),a=0,o=n.length;a<o;a++){var m=n[a];this._runTasks(m.getAttribute(p),{type:j,target:r},r)}this.formFunctionNames=r.getAttribute(h),this.isInited=!0}var u=function(e,r){this._formHandler(e,r)},U={tap:function(e,r){if(u.call(this,e,r),!e.defaultPrevented){var s=this.docBehavior||(this.docBehavior=v.getOrMakeBehavior(__js_temp_htmlTag));s.any.tap.call(s,e,r)}},focus:u,blur:u,input:u,change:u};d.prototype={_runTask:function(e,r,s){var n=e.split(":"),a=n[0],o=n[1],m=this.disabledTargets[a];if(!m||m.indexOf(s)===-1){var i=this[a];i&&i.call(this,r,s,o)}},_runTasks:function(e,r,s){if(e)for(var n=e.match(R),a=0,o=n.length;a<o;a++)this._runTask(n[a],r,s)},_formHandler:function(e,r){this.isInited&&(this._runTasks(e.target.getAttribute(h),e,e.target),this._runTasks(this.formFunctionNames,e,r))},_disableFunction:function(e,r){var s=this.disabledTargets;s[e]=s[e]||[],s[e].push(r)},_enableFunction:function(e,r){var s=this.disabledTargets[e];if(s){var n=s.indexOf(r);n>-1&&(this.disabledTargets[e]=s.splice(n,1))}},saveValues:x,restoreValues:K,formHandler:U},d.isInstant=!0,v.register("formBehavior",d);function w(t){for(var e=t.elements,r={},s=0,n=e.length;s<n;s++){var a=e[s],o=a.type;C[o]&&_(a)&&!a.disabled&&a.value!==void 0&&a.value.trim().length>0&&(o==="select-one"?r[a.id]=a.selectedIndex:r[a.name]=a.value)}r.tstamp=Date.now(),P(S(t),r)}function x(t,e){if(g){var r=t.type;T(r,"change","blur","submit")&&H(e)}}function K(t,e,r){if(T(t.type,j)&&g){var s=l.dataLifetime||O,n=S(e),a=L(n),o={};if(a){o=JSON.parse(a);var m=o.tstamp||0;if(Date.now()-m<s){for(var i in o)if(o.hasOwnProperty(i)){var c=e.elements[i]||document.getElementById(i);if(c&&_(c)){var J=c.type;if(J==="select-one"){var b=c.options[o[i]];b&&(b.selected=!0)}else c&&(c.value=o[i])}}}else G(n)}}}function T(t,e){return M.call(arguments,1).indexOf(t)>-1}function _(t){return t.getAttribute("data-field-unrecoverable")!=="true"}function S(t){return N+t.id}function L(t){return f.getItem(t)}function P(t,e){f.setItem(t,JSON.stringify(e))}function G(t){f.removeItem(t)}I.formService=k.create({init:function(e){l=e,l.loc2PrefixesMap=A.loc2PrefixesMapper(e.masksJson),y.getConfig.resolve(e)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.am, __jsRegistry.an, __jsRegistry.ps, __jsRegistry.pt, __jsRegistry.pu, __jsRegistry.qa, __jsRegistry.qc, __jsRegistry.pz, __jsRegistry.u, __jsRegistry.s, __jsRegistry.ch, __jsRegistry.el, __jsRegistry.w, __jsRegistry.dm, __jsRegistry.py, __jsRegistry.bs)||window);
__jsRegistry.qe = __globalRegistry["w1e1oLg"] || (__globalRegistry["w1e1oLg"] = (function(){var o={},a;try{a=window.sessionStorage}catch(r){}function S(r,e){var n=r.step,s=n.wizardId,t=g(s),w=!t||n.isRoot;w&&(t={doneSteps:{}},f(s,t)),e(t);var i=n.markAsDone;if(i)for(var c=0;c<i.length;c++)t.doneSteps[i[c]]=!0;f(s,t)}function u(r){return"wizard_"+r}function g(r){r=u(r);try{return JSON.parse(a.getItem(r))||o[r]}catch(e){return o[r]}}function f(r,e){r=u(r);try{a.setItem(r,JSON.stringify(e))}catch(n){}o[r]=e}return{withWizard:S,useStorage:function(e){a=e}}})()||window);
__jsRegistry.qf = __globalRegistry["wLujGKg"] || (__globalRegistry["wLujGKg"] = (function(u,e,i,p,f,l,j){if(j.okApp)return;var n=0,T=17,s=-1,a=-1;u.wizard=function(t){l.withWizard(t,function(o){var S=t.step,r=e.getState();if(o.doneSteps[S.stepId]||r.wizardDoneStep){var k=r.stateToRecover&&r.stateToRecover.type==="ajaxDialog";r.wizardDoneStep=!0,e.accountStateUpdate();var d=document.getElementById("boxPage");i.addClass(d,"__wizard-skipped"),f.rendering.attachOnce(function(){s!==-1&&(clearTimeout(s),s=-1),a!==-1&&(clearTimeout(a),a=-1),i.removeClass(d,"__wizard-skipped")}),c(),s=setTimeout(function(){m(),e.back(),k&&setTimeout(function(){e.back()},n)},n)}})};function c(){var t=Array.prototype.slice.apply(document.getElementsByTagName("iframe"));return p(t,function(o){o.src="about:blank"}),window.stop(),t}function m(){a=setTimeout(I,T),c()}function I(){e.getState().wizardDoneStep&&(e.back(),m())}})(__jsRegistry.c, __jsRegistry.ft, __jsRegistry.s, __jsRegistry.k, __jsRegistry.w, __jsRegistry.qe, __jsRegistry.ak)||window);
__jsRegistry.qg = __globalRegistry["bJbf0kQ"] || (__globalRegistry["bJbf0kQ"] = (function(X,V,a,g,c,s,B,v,x,j){var y=x.transform,p=750,I=20,h=50,k="js-banner",L="slides_list_item",A="slides_marker_check",C="__transit",l="js-slide-active";function o(t,n,e){t.currentBannerIndex=n,t.currentX=e.offsetLeft,t.dom.bannersList.style[y]="translateX("+-1*t.currentX+"px)",t.markersEnabled&&(t.markerCheckboxes[n].checked=!0),t.prevElem=t.curElem,t.curElem=e}function u(t,n,e){var r=n<t.currentBannerIndex;o(t,n,t.bannerImages[n]),t.onSlideEvent.trigger({toIndex:n,isBack:r,isWithButton:e})}function b(t,n){if(n<0){if(n=t.bannersLastIndex,t.cycle)return o(t,n,t.dom.fakeLeft),!0}else if(n>t.bannersLastIndex&&(n=0,t.cycle))return o(t,n,t.dom.fakeRight),!0;return o(t,n,t.bannerImages[n]),!1}function f(t,n){var e=n?t.currentBannerIndex+1:t.currentBannerIndex-1;return b(t,e)}function _(t,n){u(this,t,n)}function N(t){this.clearTimer();var n=parseInt(t.target.getAttribute("data-idx"));T(this),u(this,n),S(this,!1),this.model.nonStoppable&&this.startTimer(),this.onSlideEvent.trigger({toIndex:n})}function m(t,n){var e=this;e.root=n,e.model=t,e.fordibTouch=t.fordibTouch,e.autoPlayEnabled=typeof t.autoPlayEnabled=="boolean"?t.autoPlayEnabled:!0,e.dom=g.byDataId(n);var r=e.markerCheckboxes=n.getElementsByClassName(A);e.markersEnabled=r.length,e.bannerImages=n.getElementsByClassName(k),e.bannersCount=e.bannerImages.length,e.bannersLastIndex=e.bannersCount-1,e.currentBannerIndex=0,e.currentStartTouchX=0,e.currentStartTouchY=0,e.cycle=typeof t.cycle=="boolean"?t.cycle:!0;function i(){T(e);var d=f(e,!0);S(e,d),e.timerActive&&(e.timeoutId=setTimeout(i,t.interval))}e.startTimer=function(){e.autoPlayEnabled&&(e.timerActive=!0,e.timeoutId=setTimeout(i,t.interval))},e.clearTimer=function(){e.timerActive=!1,clearTimeout(e.timeoutId)},e.startTimer(),B.attachUntilRendering(v.resize,this.initLayout,this),B.rendering.attachOnce(function(){e.clearTimer()}),e.onSlideEvent=j.create(),this.initLayout()}function T(t){s.addClass(t.dom.bannersList,C)}function S(t,n){setTimeout(function(){t.prevElem&&s.removeClass(t.prevElem,l),s.removeClass(t.dom.bannersList,C),n&&u(t,t.currentBannerIndex),s.addClass(t.curElem,l)},p)}m.prototype={initLayout:function(){this.bannerWidth=this.root.getElementsByClassName(L)[0].offsetWidth,u(this,this.currentBannerIndex),this.prevElem&&s.removeClass(this.prevElem,l),s.addClass(this.curElem,l)},markerClick:{tap:N},slideBanner:{tap:function(n){var e=this.docBehavior||(this.docBehavior=a.getOrMakeBehavior(__js_temp_htmlTag));e.any.tap.call(e,n,n.target)},touchStart:function(n){a.allowDefault(n),!this.fordibTouch&&(this.clearTimer(),this.currentStartTouchX=c.touchX(n),this.currentStartTouchY=c.touchY(n),this.touchValidated=!1,this.isVerticalScroll=!1)},touchMove:function(n){if(a.allowDefault(n),!(this.fordibTouch||this.isVerticalScroll)){var e=c.touchX(n)-this.currentStartTouchX,r=Math.abs(e),i=c.touchY(n)-this.currentStartTouchY,d=Math.abs(i);if(!this.touchValidated&&d>r&&d>I){this.isVerticalScroll=!0;return}if(r>I&&(this.touchValidated=!0),(this.currentBannerIndex===this.bannersLastIndex&&e<0||this.currentBannerIndex===0&&e>0&&!this.cycle)&&(this.touchValidated=!1),this.touchValidated){var E=this.bannerWidth;r>E&&(e=e>0?E:-E),this.dom.bannersList.style[y]="translateX("+(e-this.currentX)+"px)"}}},touchEnd:function(n){if(a.allowDefault(n),!this.fordibTouch){var e=c.touchX(n)-this.currentStartTouchX;T(this);var r=!1;e<-h&&(this.currentBannerIndex<this.bannersLastIndex||this.cycle)?r=f(this,!0):e>h&&(this.currentBannerIndex>0||this.cycle)?r=f(this,!1):u(this,this.currentBannerIndex),S(this,r),(!this.touchValidated||this.model.nonStoppable)&&this.startTimer();var i=e>h;this.onSlideEvent.trigger({toIndex:this.currentBannerIndex,isBack:i})}}},scrollToIndexFunc:_},m.isInstant=!0,a.register("bannersCarousel",m)})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.am, __jsRegistry.md, __jsRegistry.aj, __jsRegistry.s, __jsRegistry.w, __jsRegistry.bd, __jsRegistry.au, __jsRegistry.u)||window);
__jsRegistry.qh = __globalRegistry["abgfWw"] || (__globalRegistry["abgfWw"] = (function(g,p,X,j,E){var L="js-profile-cover_adjuster",S="js-adjust-init_button",r,s,d,b=2,n={};function u(){n={}}function c(e){var t=e.touches;n={},t&&t.length===1&&(n.pointerStartX=t[0].clientX,n.pointerStartY=t[0].clientY)}function i(e){var t=E.firstTouchRaw(e);if(t&&r){var T=s?n.pointerStartY-t.clientY:n.pointerStartX-t.clientX,P=(T/Math.pow(Math.PI,b)).toFixed(2),f=window.getComputedStyle(r),h=s?f.backgroundPositionY:f.backgroundPositionX,o=parseFloat(h.substring(0,h.length-1))+parseFloat(P);o=o<0?0:o>100?100:o,s?(r.style.backgroundPositionY=o+"%",document.getElementById("fr_offsetY").value=o):(r.style.backgroundPositionX=o+"%",document.getElementById("fr_offsetX").value=o)}}function v(e){n={pointerStartX:e.clientX,pointerStartY:e.clientY},a().addEventListener("mousemove",i),p.addClass(d,"dsn")}function m(){n={},a().removeEventListener("mousemove",i)}function l(){var e=a();e&&(e.addEventListener("touchstart",c),e.addEventListener("touchmove",i),e.addEventListener("touchend",u),e.addEventListener("mousedown",v),e.addEventListener("mouseup",m)),d=document.getElementsByClassName(S)[0]}function a(){return document.getElementsByClassName(L)[0]}g.initProfileCoverAdjustments=j.create({update:function(){l(),r=document.querySelector(".js-profile-cover_adjuster .profile-card_cover"),s=r.parentNode.getAttribute("data-vertical")==="true"},discard:function(){l();var t=a();t&&(t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",i),t.removeEventListener("touchend",u),t.removeEventListener("mousedown",v),t.removeEventListener("mouseup",m)),r=null,s=!0}})})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.x, __jsRegistry.aj)||window);
__jsRegistry.qi = __globalRegistry["ve2GAFw"] || (__globalRegistry["ve2GAFw"] = (function(w,c,R,p,l,u,d){var m=7500,o;function g(t,e){this.domRoot=e,this.model=t}function n(t){var e=document.querySelector(".input-text_visual .ic-mic"),r=document.getElementById("voice-recording-dialog");c.switchClass(e,t,"__mod"),c.switchClass(r,!t,"dsn")}function f(t,e){if(t){d.set("voiceSearchUsed",!0),d.set("clientGlobalSearchQuery",e.results[0][0].transcript);var r=l.getOrMakeBehavior(t);r.initialSearch(!0)}}function h(t){var e=new webkitSpeechRecognition;return e.continuous=!1,e.interimResults=!1,e.lang=t,e.start(),e}g.prototype={start:{tap:function(){var e=this.model.errorVocabulary,r=document.getElementById("GlobalSearchFormField");if(window.hasOwnProperty("webkitSpeechRecognition")){o=h(this.model.locale),n(!0);var j=setTimeout(i,this.model.recordingTimeout);o.onresult=function(s){o&&o.stop(),f(r,s),n(!1),logClientEvent("voice.input.success"),o=null,clearTimeout(j)},o.onerror=function(s){o.stop(),n(!1);var v=s.error,a=e[v];a=a||e.unknown,u.show(a,m),logClientEvent("voice.input.error",[v]),o=null}}else u.show(e.unsupported,m),logClientEvent("voice.input.unsupported")}},done:{tap:function(){o&&(o.stop(),setTimeout(function(){o&&i()},500))}}},l.register("voiceRecording",g);function i(){o&&(n(!1),o.stop(),o=null)}p.navigated.attach(i)})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.w, __jsRegistry.am, __jsRegistry.es, __jsRegistry.bm)||window);
__jsRegistry.qj = __globalRegistry["ptAmLpA"] || (__globalRegistry["ptAmLpA"] = (function(s,e,a){var r=a.createCardReadTracking({supportsScrollParent:!0,listId:"photo-collage-feed",serviceName:"trackPhotoSlider",actionName:"photoSlider.logRead"});e.trackPhotoSliderReads=r.trackReadsSimple})(__jsRegistry.ex, __jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.qk = __globalRegistry["PMl0igQ"] || (__globalRegistry["PMl0igQ"] = (function(e,c){function s(i,o){this.conf=o||(o={}),this.root=i,this.rootBox=i.getBoundingClientRect(),this.isStretchedToRoot=o.isStretchedToRoot||!0,this.geometry={positions:new h(o.positions),dimensions:new a(o.dimensions)}}s.prototype={constructor:s,detachBlock:function(){e.changed.detach(this.recalculatePosition,this)},attachBlock:function(o){this.block=o,this.setPosition(),c.attachUntilRendering(e.changed,this.recalculatePosition,this)},setPosition:function(){var o=this.block.style,T=this.geometry.positions.direction,r=this.rootBox,l=this.conf.offsetLeft||0,d=this.conf.offsetTop||0,u=this.conf.offsetWidth||0;if(T===t.BOTTOM){var O=r.bottom+e.calc().scrollTop,f=r.left+Math.min(0,window.pageYOffset||(document.scrollingElement||__js_temp_htmlTag).scrollLeft);o.top=O+d+"px",o.left=f+l+"px"}o.position="absolute",this.isStretchedToRoot&&(o.width=(this.conf.width||r.width)-u+"px")},recalculatePosition:function(){this.rootBox=this.root.getBoundingClientRect(),this.setPosition()}};function h(i){i=i||{},this.direction=t[i.direction]||t.BOTTOM,this.transition=n[i.transition]||n.OPPOSITE,this.transtionDirection=this.transition===n.OPPOSITE?t.getOpposite(this.direction):t.getFlow(this.direction)}function a(i){i=i||{},this.width=i.width,this.height=i.height}var n={OPPOSITE:0,FLOW:1},t={TOP:1,RIGHT:2,BOTTOM:4,LEFT:8};return t.getOpposite=function(i){switch(i){case t.TOP:return t.BOTTOM;case t.BOTTOM:return t.TOP;case t.LEFT:return t.RIGHT;case t.RIGHT:return t.LEFT}},t.getFlow=function(i){switch(i){case t.TOP:return t.RIGHT;case t.RIGHT:return t.BOTTOM;case t.BOTTOM:return t.LEFT;case t.LEFT:return t.TOP}},{aConstructor:s}})(__jsRegistry.bd, __jsRegistry.w)||window);
__jsRegistry.ql = __globalRegistry["sixlAcA"] || (__globalRegistry["sixlAcA"] = (function(o,p,c,u,n){var i="SuggestSearchPopupView";function e(t,r){t=t||{},o.constructor.call(this,t,r),this.parentPrototype=this.superclass.prototype,this.popupParent=document.body}n(e,o.constructor);var a=e.prototype;a.createViewPublic=function(){this.parentPrototype.createViewPublic.call(this),this.popupParent.appendChild(this.layer);var t=this.popup=new p.aConstructor(this.searchController.activeInputWrapper,this.model);t.attachBlock(this.layer)},a.destroyViewPublic=function(){this.parentPrototype.destroyViewPublic.call(this),this.popupParent.removeChild(this.layer),this.popup.detachBlock(this.layer)},u.register(i,e);function h(t,r){var s=document.createElement("div");return s.setAttribute("data-view",i),r&&s.setAttribute("data-model",JSON.stringify(r)),c.addClasses(s,"suggest-search-popup-view hidden "+(t||"")),s}return{VIEW_NAME:i,aConstructor:e,createLayer:h}})(__jsRegistry.pk, __jsRegistry.qk, __jsRegistry.s, __jsRegistry.am, __jsRegistry.bu)||window);
__jsRegistry.qm = __globalRegistry["sJ3o2UA"] || (__globalRegistry["sJ3o2UA"] = (function(o,t,u){var s=function(){},c="SuggestSearchFilterView";function r(i,n){t.constructor.call(this,i,n)}u(r,t.constructor);var e=r.prototype;return e.constructor=r,e.createViewPublic=s,e.destroyViewPublic=s,o.register(c,r),{constructor:r,VIEW_NAME:c}})(__jsRegistry.am, __jsRegistry.pk, __jsRegistry.bu)||window);
__jsRegistry.qn = __globalRegistry["susmMA"] || (__globalRegistry["susmMA"] = (function(c){function d(R,f,C,_){if(c.RANGE){var r=C.query.toLowerCase(),l=r.length;if(l){var o=f.getElementsByClassName("suggest-search_item_data __result")[0];if(o)for(var m=o.childNodes,n=0,g=m.length;n<g;n++){var a=m[n];if(a.nodeType===3){var s=a.nodeValue||"";if(s.length){for(var e=s.toLowerCase().indexOf(r),u=[];e>-1;){var t=document.createRange();t.setStart(a,e),t.setEnd(a,e+l),u.push(t),e=s.toLowerCase().indexOf(r,e+1)}for(var v=0,w=u.length;v<w;v++){var E=u[v],i=document.createElement("SPAN");i.className="suggest-select",i.setAttribute("aria-hidden","true"),E.surroundContents(i)}}}}}}}return{selectRangeDecorator:d}})(__jsRegistry.af)||window);
__jsRegistry.qo = __globalRegistry["BxMsGRQ"] || (__globalRegistry["BxMsGRQ"] = (function(){var o={};function n(e,t){this.options=e||o,this.defaultConfig=this.config=t||0}return n.prototype={constructor:n,add:function(t){return this.config|=t,this},addNamed:function(t){this.add(this.options[t])},addNamedOptions:function(t){for(var i=t.length;i--;)this.addNamed(t[i]);return this},remove:function(t){return this.config&=~t,this},removeNamed:function(t){return this.remove(this.options[t]),this},removeNamedOptions:function(t){for(var i=t.length;i--;)this.removeNamed(t[i]);return this},resetAll:function(){return this.config=0,this},resetToDefault:function(){return this.config=this.defaultConfig,this},has:function(t){var i=this.config;return i&&(i&t)===t},hasNamed:function(t){return this.has(this.config[t])},getConfig:function(){return this.config},accepts:function(t){return typeof this.options[t]<"u"}},{builder:n}})()||window);
__jsRegistry.qp = __globalRegistry["mztcsVQ"] || (__globalRegistry["mztcsVQ"] = (function(a){return{shallow:function(e,o){for(var n=arguments.length,s=1;s<n;s++){var r=arguments[s];Object.assign(e,r)}}}})(__jsRegistry.ex)||window);
__jsRegistry.qq = __globalRegistry["DEDbCEA"] || (__globalRegistry["DEDbCEA"] = (function(){function i(n,a){return a!=null&&typeof Symbol<"u"&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](n):n instanceof a}var o=/[,\s]+/,f={DOMKeyValueCacheMixin:!0,domKVCacheKey:"#okCachedParam#",copyParam:function(a,r){var t=c(this.domKVCacheKey,a,r);return t?i(t,Array)?t.slice():Object.assign({},t):this.readParam(a,r)&&this.copyParam(a,r)},readParam:function(a,r){var t=c(this.domKVCacheKey,a,r);return t||u(this.domKVCacheKey,a,r,h(a.getAttribute(this.TYPE_TO_ATTR_MAP[r])))},updateParam:function(a,r,t){var e=this.readParam(r,t);if(e){var s=i(a,Array)?e.concat(a):Object.assign(e,a);r.setAttribute(this.TYPE_TO_ATTR_MAP[t],JSON.stringify(s)),u(this.domKVCacheKey,r,t,s)}}};function c(n,a,r){return a[n+r]}function u(n,a,r,t){return a[n+r]=t}function h(n){if(n){var a=n[0];return a==="["||a==="{"?JSON.parse(n):n.split(o)}return!1}return f})()||window);
__jsRegistry.qr = __globalRegistry["sWAq9TQ"] || (__globalRegistry["sWAq9TQ"] = (function(M,b,ae,L,P,ne,U,B,W,Q,Y,c,d,v,y,H,g,q,z,F){function x(s,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](s):s instanceof e}var C="__viewing",K=300,J=U.selectRangeDecorator,l=P.SearchOptions,j=g.create(),_=g.create(),X="data-search-argument",Z="data-search-options",$="data-search-config",o={ARGUMENT:1,OPTIONS:2,CONFIG:4},m={};m[o.ARGUMENT]=X,m[o.OPTIONS]=Z,m[o.CONFIG]=$;var p={IN_LAYER:"IN_LAYER",IN_PLACE:"IN_PLACE",IN_POPUP:"IN_POPUP"};function S(s,e){s=s||{},this.initialized=!1,this.root=e,this.model=s,this.layerQS=s["content-qs"],this.layerModifier=s["content-mod"],this.preventSubmit=s.preventSubmit;var t=this.mode=s.mode||this.layerQS&&p.IN_PLACE||p.IN_LAYER;this.activeInput,this.activeInputWrapper,this.inputProps={},this.page=null,this.searchTask=d.resolved,this.loadingTask=d.resolved,this.waitingResults=g.create(),this.viewChanged=g.create();var r=this._initStrategies[t].call(this);if(r){var i=this.searchView=c.getOrMakeBehavior(r.layer);x(i,L.constructor)&&(i.finishInitiation(this),this.initialized=!0)}var a=this;e.addEventListener("submit",function(h){a.preventSubmit&&h.preventDefault(),a.closeSearch()}),this.viewChanged.attach(function(h){var n=h.open;this.activeInputWrapper&&v.switchClass(this.activeInputWrapper,n,C),n?(c.tapPreview.attach(this.onOutClick,this),document.contains(this.activeInput)||this.restoreInput()):c.tapPreview.detach(this.onOutClick,this),_.trigger({open:n,field:this.activeInput})},this)}var I={};I[p.IN_LAYER]=function(){return{layer:document.getElementById(b.LAYER_ID)}},I[p.IN_PLACE]=function(){return{layer:N(this.layerQS)}},I[p.IN_POPUP]=function(){var s={offsetLeft:this.model.popupOffsetLeft,offsetTop:this.model.popupOffsetTop,offsetWidth:this.model.popupOffsetWidth};return{layer:N(this.layerQS)||M.createLayer(this.layerModifier,s)}};function N(s){return document.getElementById(s)||document.querySelector(s)}S.prototype={constructor:S,TYPE_TO_ATTR_MAP:m,_initStrategies:I,openSearchView:function(){var e=this.searchView;if(!e.isViewOpen()){e.bindController(this);var t=this.page;t?t.isActive()||t.goOrSwapIfSamePage({pageName:"page@"+t.type}):this.startController()}},getTargetProps:function(e){return e=e||this.activeInput,this.inputProps[e.id]},setTargetProps:function(e,t){return e=e||this.activeInput,this.inputProps[e.id]=t},hasOptions:function(e,t){return this.getOptions(t||this.activeInput).has(e)},getOptions:function(e){return this.getTargetProps(e||this.activeInput).options},_startSearchTask:w,_startSearchTaskDebounced:B(w),startSearch:function(e,t,r,i){var a=this.loadingTask;a.done||a.resolve(),a=this.loadingTask=d.start(),this.waitingResults.trigger({task:a});var h=this.getTargetProps(this.activeInput);!i&&h.options.has(l.REQ_DEBOUNCE)?(this.delay=h.config.delay||K,this._startSearchTaskDebounced(e,t,r)):this._startSearchTask(e,t,r)},closeSearch:function(){if(this.initialized){var e=this.page;e?e.isActive()&&F.back():this.finishController()}},startController:function(){this.searchView.createView()},finishController:function(){clearTimeout(this.debounceId);var e=this.searchView,t=this.searchTask;t.abort&&t.abort(!0);var r=this.activeInput;if(r){var i=this.getOptions(r);i.has(l.CLEAN_INPUT)?r.value="":i.has(l.PRESERVE_SUGGEST)&&(r.value=e.selectedSuggest||this.originalInputValue),r.blur(),v.removeClass(this.activeInputWrapper,C)}e.isViewOpen()&&e.destroyView(),c.tapPreview.detach(this.onOutClick,this)},onOutClick:function(e){var t=e.target;this.root.contains(t)||this.searchView.layer.contains(t)||this.closeSearch()},createHistoryPage:function(e,t){var r=this.page=z.create(e,t);r.init(),r.activated.attach(this.startController,this),r.deactivated.attach(this.finishController,this)},hasActiveInput:function(){return!!this.activeInput},applyInput:function(e){var t=e.target,r=this.activeInput=e.input,i=this.getTargetProps(t)||this.setTargetProps(t,se());i.argument=this.readArgument(r),i.config=this.readParam(r,o.CONFIG),i.options.addNamedOptions(this.readParam(r,o.OPTIONS)||[]),this.activeInputWrapper=y.findParent(r,ee)||y.findParent(r,te)||r.parentElement},restoreInput:function(){var e=this.activeInput;if(e){var t=document.getElementById(e.id);t||(t=document.getElementsByClassName(e.className),t.length===1?t=t[0]:t.length===0&&(t=null)),t?this.applyInput({target:t,input:t}):this.closeSearch()}},copyArgument:function(e){return this.copyParam(e,o.ARGUMENT)},readArgument:function(e){return this.readParam(e,o.ARGUMENT)},updateArgument:function(e,t){return this.updateParam(e,t,o.ARGUMENT)},readCurrentOptions:function(){return this.readParam(this.activeInput,o.OPTIONS)},readCurrentConfig:function(){return this.readParam(this.activeInput,o.CONFIG)},onStartSearch:{tap:function(e,t){if(this.initialized&&!t.disabled){var r,i;t.nodeName==="LABEL"?(i=t.htmlFor,i&&(r=this.root[i]||document.getElementById(i))):(i=t.getAttribute("data-focus-for"))?r=document.getElementById(i):r=t,this.originalInputValue=r.value,r&&this.activeInput!==r&&this.applyInput({target:t,input:r}),this.hasOptions(l.CLEAN_SUGGEST)&&(r.value=""),this.openSearchView(),this.startSearch(r.value,t,e,!0)}},input:function(e,t){this.openSearchView();var r=t.value;this.hasOptions(l.PRESERVE_SUGGEST)||(this.activeInput.value=r),this.startSearch(r,t,e)},keyUp:function(e){c.allowDefault(e),(e.code==="Escape"||e.key==="Escape")&&this.closeSearch()}},onCloseSearch:{tap:function(){this.closeSearch()}}},H.shallow(S.prototype,q),c.register("SuggestSearch",S);function ee(s){return v.hasClass(s,"suggest-field")}function te(s){return v.hasClass(s,"field")}function se(s,e,t){return{argument:s||{},config:e||{},options:t||new Q.builder(P.SearchOptions,0)}}function w(s,e,t){var r=this,i=this.searchTask;i.abort&&i.abort(!0),i.rejectIfNotDone();var a=this.getTargetProps(this.activeInput).argument;if(a&&(s!==this.previousQuery||!s))this.previousQuery=a.query=s,this.searchTask=i=(this.searchProvider||P.searchProvider||Y.run)(a.searchName,a),i.searchArgument=a,i.then(function(n){n=n||{};var u=this.searchArgument,A=n.htmlResult,O=n.result,R=n.resultDOM,T=d.start();if(T.then(function(G){r.previousResultDOM=G,r.searchView.renderSearchResult(G)}),R)T.resolve(R);else if(A){var E=A.html;if(E&&E.length){for(var k=W.createDomTree(E).firstChild,D=k.children,f=0,ie=D.length;f<ie;f++){var V=D[f];re(f,V,u,n),J(f,V,u,n)}T.resolve(k)}}j.trigger({result:O,isEmpty:!O||O.length===0,suggestField:r.activeInput,searchField:e,query:u.query,searchName:u.searchName,renderTask:T})},function(n){r.previousQuery=void 0,r.previousResultDOM=void 0}).anyway(function(n){var u=r.loadingTask;u.done||(this.rejected?u.reject():u.resolve()),r.lastSearchStamp=Date.now()});else{var h=r.previousResultDOM;h&&r.searchView.renderSearchResult(h),this.loadingTask.reject()}}function re(s,e,t,r){var i=Object.assign({},r.result[s]);i.name=t.searchName,e._okSuggestData=i}return{ParamType:o,onSearchData:j,onSearchStateChanged:_}})(__jsRegistry.ql, __jsRegistry.pl, __jsRegistry.qm, __jsRegistry.pk, __jsRegistry.pj, __jsRegistry.w, __jsRegistry.qn, __jsRegistry.el, __jsRegistry.cq, __jsRegistry.qo, __jsRegistry.fx, __jsRegistry.am, __jsRegistry.n, __jsRegistry.s, __jsRegistry.t, __jsRegistry.qp, __jsRegistry.u, __jsRegistry.qq, __jsRegistry.gg, __jsRegistry.ft)||window);
__jsRegistry.qs = __globalRegistry["sPm0eCQ"] || (__globalRegistry["sPm0eCQ"] = (function(o){var a=void 0;function s(e,t){var r=o.start();if(a){var n=u(a.children,new RegExp(t.query,"gi"));return r.resolve({resultDOM:n})}return r.resolve({})}function u(e,t){for(var r=document.createDocumentFragment(),n=0,v=e.length;n<v;n++){var i=e[n],d=i.innerText&&t&&!t.test(i.innerText);if(!d){var f=i.cloneNode(!0);r.append(f)}}return r}function c(e){a=e.optionListContainer}return{searchProvider:s,initLayer:c}})(__jsRegistry.n)||window);
__jsRegistry.qt = __globalRegistry["su7S5UQ"] || (__globalRegistry["su7S5UQ"] = (function(m,I,s,p,c,l,v,j){var u=j.create(),S="data-picker-data",n,i,d,o;function h(t){var e=t.target,r=t.payload,a;r?a=r.value:(a=e.getAttribute("data-value"),t.appendData({value:a,data:e.innerText,isSelected:s.hasClass(e,"__selected"),isDisabled:s.hasClass(e,"__disabled"),isSecondary:s.hasClass(e,"__secondary")})),n.value=a,u.trigger({target:e,value:a,valueChanged:i!==a}),i=a}function g(t){t.open?c.searchProvider=v.searchProvider:c.searchProvider=null}return m.create({name:"searchSelect",init:function(e){var r=e.target;o=p.resolve(r,"SuggestSearch")},update:function(e){var r=e.target,a=JSON.parse(r.getAttribute(S));n=document.getElementById(a.hiddenInputId),i=n.value,d=document.getElementById(a.hiddenOptionsListId),d&&(o.viewChanged.attach(g),v.initLayer({optionListContainer:d})),l.onResultSelected.attach(h)},discard:function(){o.viewChanged.detach(g),l.onResultSelected.detach(h)}}),{onItemSelectPostprocess:u}})(__jsRegistry.x, __jsRegistry.w, __jsRegistry.s, __jsRegistry.am, __jsRegistry.pj, __jsRegistry.pk, __jsRegistry.qs, __jsRegistry.u)||window);
__jsRegistry.qu = __globalRegistry["swWsQyg"] || (__globalRegistry["swWsQyg"] = (function(o,n,r){var s=(function(){function a(){var e=this;this.select={tap:function(t,h){r.onSearchStateChanged.attach(e.onSearchClosed,e)}}}var i=a.prototype;return i.onSearchClosed=function(t){(0,n.behavior)().invisible(t.open),!t.open&&this.onSearchClosed&&r.onSearchStateChanged.detach(this.onSearchClosed,this)},a})();(0,o.register)("suggestSearchLayerHideFader",s)})(__jsRegistry.am, __jsRegistry.fi, __jsRegistry.qr)||window);
__jsRegistry.qv = __globalRegistry["dZwh7Hg"] || (__globalRegistry["dZwh7Hg"] = (function(g,c,h){var u=(function(){function a(v,e){this.root=e,h.attachUntilRendering(c.onResultSelected,this.onChange,this)}var l=a.prototype;return l.onChange=function(e){var r,s,n=(s=e.suggestField)==null||(r=s.dataset)==null?void 0:r.searchExtractFields;if(n){var t={};try{t=JSON.parse(n)}catch(d){}for(var o in t){var i=this.root.getElementsByClassName(t[o])[0];i&&(i.value=e.payload[o])}}},a})();(0,g.register)("dataExtractionSuggestSearch",u)})(__jsRegistry.am, __jsRegistry.pk, __jsRegistry.w)||window);
__jsRegistry.qw = __globalRegistry["bVow2Yw"] || (__globalRegistry["bVow2Yw"] = (function(m,h,S,b,E,j,v,c,F,y){var u=null,p="search_mod";function d(i,t){u=t}d.isInstant=!0,d.prototype={show:{tap:function(t,r){var s=document.querySelector(".js-search-with-bottom-menu-filter .input-text"),e=m.resolve(s,"contextSearchField");e&&e.initSearchFieldFilters(),u.classList.add("__filters-visible"),F.hide.attachOnce(function(){u.classList.remove("__filters-visible")}),c.show(r.dataset)}}};function f(i,t){this.filtersRoot=t,t.addEventListener("submit",this.submitForm.bind(this));var r=t.querySelector("[name=button_close]");if(r){var e=function(){c.close(),r.removeEventListener("click",e)},s=e;r.addEventListener("click",e)}}f.isInstant=!0,f.prototype={submitForm:function(t){var r=t.target,s=j.data(t.target),e=r.querySelectorAll("[data-link-filter]"),l=u.getElementsByClassName(p),o={};t.preventDefault(),v(e,function(n){o[n.dataset.linkFilter]=s[n.name]}),r.dataset.usePrevValueIfNull&&I(s,l,o),v(l,function(n){o[n.name]!==void 0&&(n.value=o[n.name][0])});var a=this.filtersRoot.dataset.searchFilterFor;a&&h.useFilterForField(a),c.close()}};function I(i,t,r){var s=y.htmlElementsAsArray(t);Object.keys(r).forEach(function(e){var l=Array.isArray(i.valueOnInit)&&i.valueOnInit.length>0?i.valueOnInit[0]:void 0;if(!(r[e][0]!==""||!l)){var o=s.findIndex(function(n){return n.name===e&&n.value===l});if(o!==-1)for(var a=o-1;a>=0;a--)s[a].name===e&&(r[e]=[s[a].value])}})}m.register("bottomMenuSearchFilter",d),m.register("bottomMenuSearchFilterEntity",f)})(__jsRegistry.am, __jsRegistry.bn, __jsRegistry.s, __jsRegistry.fa, __jsRegistry.t, __jsRegistry.fb, __jsRegistry.k, __jsRegistry.fi, __jsRegistry.ff, __jsRegistry.bl)||window);
__jsRegistry.qx = __globalRegistry["sCiIYpQ"] || (__globalRegistry["sCiIYpQ"] = (function(n,o,t,l){var s,e,d="data-has-specializations";function i(a){if(a.valueChanged){e=l.byDataId(s.form);var c=a.target;s.checked=!c.getAttribute(d),e.skillsTumbler.checked=!0,r()}}function r(){e.skillsSpecializations.value="",e.skillsSpecializationsEnum&&(o.addClass(e.skillsSpecializationsEnum,"hidden"),o.removeClass(e.skillsSpecializationsEmpty,"hidden"))}n.create({name:"searchBusinessCategories",update:function(c){s&&t.onItemSelectPostprocess.detach(i),s=c.target,t.onItemSelectPostprocess.attach(i)},discard:function(){s=void 0,t.onItemSelectPostprocess.detach(i)}})})(__jsRegistry.x, __jsRegistry.s, __jsRegistry.qt, __jsRegistry.md)||window);
__jsRegistry.qy = __globalRegistry["stSQbsw"] || (__globalRegistry["stSQbsw"] = (function(a,n,s,d){var e;function o(t){t.valueChanged&&(e.buttonToActivate.disabled=!t.value)}a.create({name:"searchBusinessPortlet",update:function(c){e&&s.onItemSelectPostprocess.detach(o),e=d.byDataId(c.target),s.onItemSelectPostprocess.attach(o)},discard:function(){e=void 0,s.onItemSelectPostprocess.detach(o)}})})(__jsRegistry.x, __jsRegistry.s, __jsRegistry.qt, __jsRegistry.md)||window);
__jsRegistry.qz = __globalRegistry["s28tHpQ"] || (__globalRegistry["s28tHpQ"] = (function(U,o,b,T,m,A){function d(){}var p="data-friend-id",j="data-group-id",l="data-error-toast-text",I="__loading",S="userFilter",F="groupFilter",n=null;function c(e,t){b.switchClass(e,t,I)}function O(e){e&&e.parentNode.removeChild(e)}function g(e){}function f(e){e&&(e.checked=!e.checked,v(e.getAttribute(l)))}function v(e){m(e)}function _(e){var t={};e.type==="radio"?t[e.name]=e.value:t[e.name]=e.checked,n&&n.abort();var r=o.request(e.getAttribute("data-action"),"post",t);n=r,r.send().then(function(a){var s=a.responseText;s&&s.length!==0&&A(s)}).anyway(function(){n=null})}function h(e,t,r){var a=parseInt(t.getAttribute(p),10),s=parseInt(t.getAttribute(j),10),i=a?"user-card-"+a:"user-card-"+s,u=document.getElementById(i);c(u,!0);var R={"uns.tumblerState":r==="toggle"?!t.checked:!0,"uns.userId":a||"","uns.groupId":s||""};o.request(t.getAttribute("data-action"),"POST",R).then(r==="toggle"?g.bind(this,t):O.bind(this,u),r==="toggle"?f.bind(this,t):v.bind(this,t.getAttribute(l))).anyway(c.bind(this,u,!1)).send()}d.prototype={toggleUser:{change:function(t,r){h(t,r,"toggle")}},removeUser:{tap:function(t,r){h(t,r,"remove")}},changeToggleSettingOption:{change:function(t){_(t.target)}},changeFilter:{tap:function(t,r){var a=r.getAttribute("data-filter-type"),s=JSON.parse(r.getAttribute("data-user-filter-value")),i=JSON.parse(r.getAttribute("data-group-filter-value"));a===S?s=!s:a===F&&(i=!i),o.request(r.getAttribute("data-action"),"POST",{"uns.userFilter":s,"uns.groupFilter":i}).then(g.bind(this,r),f.bind(this,r)).send()}}},T.register("toggleUsersTumbler",d)})(__jsRegistry.c, __jsRegistry.bw, __jsRegistry.s, __jsRegistry.am, __jsRegistry.ee, __jsRegistry.de)||window);
__jsRegistry.ra = __globalRegistry["bncl3Q"] || (__globalRegistry["bncl3Q"] = (function(c,d,g,n){var s=n.create(),u=n.create(),i={parent:function(a,e){return g.parentBySelector(a,e)},query:function(a,e){return document.querySelector(e)}};return c.addFuncHandler("removeTargetBlock",{tap:function(a,e){var r=e.getAttribute("data-func-args");r=JSON.parse(r||"{}");var o=r.query,y='[data-remove-block-id="'+o+'"]',v=i[r.by],t=v&&v(e,y);t&&(s.trigger({query:o,target:t}),d.remove(t),u.trigger({query:o,target:t}))}}),{onBeforeRemove:s,onRemove:u}})(__jsRegistry.an, __jsRegistry.s, __jsRegistry.t, __jsRegistry.u)||window);
__jsRegistry.rb = __globalRegistry["sS7skVA"] || (__globalRegistry["sS7skVA"] = (function(_,o,u,v,f,k){var p="js-sticky-block-hook",B="__out-of-view",S="__show-up",r="hidden",i,c,s,d=u.isNativeRAFSupported?window.requestAnimationFrame:u.run,n=document.body,a,t,e;function h(){setTimeout(function(){o.addClass(e,r)},450),d(function(){o.removeClass(t,B),o.removeClass(e,S),s&&(n.style.paddingBottom=s)})}function y(){d(function(){o.addClass(t,B),o.removeClass(e,r),e.style.width=a.offsetWidth+"px",n.style.paddingBottom=parseInt(s,10)+e.offsetHeight+"px",d(function(){o.addClass(e,S)})})}function g(l){var m=l.inViewport;m?h():y()}_.create({name:"stickyBlock",update:function(){if(n=document.body,s=getComputedStyle(n).paddingBottom,a=document.getElementById("content"),t=document.getElementsByClassName(p)[0],t){e=t._okClone=t.cloneNode(!0),a.appendChild(e),o.addClasses(e,r+" js-sticky-block __bot"),o.removeClass(e,p),i=function(){e.style.width=a.offsetWidth+"px"},c=function(j){j.target===e&&(n.style.paddingBottom=s,k.unobserve(t))},f.onRemove.attach(c),v.resize.attach(i);var m=t.getAttribute("data-always-show-sticky-block");m?(t.style.display="none",y()):k.observe(t,{registered:function(){},track:g})}},discard:function(){v.resize.detach(i),f.onRemove.detach(c)}})})(__jsRegistry.x, __jsRegistry.s, __jsRegistry.aq, __jsRegistry.bd, __jsRegistry.ra, __jsRegistry.dj)||window);
__jsRegistry.rc = __globalRegistry["s77WAVQ"] || (__globalRegistry["s77WAVQ"] = (function(c,l,a,f,h,m,g,r){var o={},d=(0,g.create)({isPortraitMode:null}),u=(function(){function p(s,t){var i,n;this.topOffset=0,this.targetOffset=0,this.isPortraitMode=!1,this.panel=t,this.updateTargetOffset(t),this.updateTopOffset(),this.orientation=(i=t.dataset)==null?void 0:i.orientation,this.isStub=((n=t.dataset)==null?void 0:n.isStub)==="true",this.isStub&&(this.stub=document.createElement("div"),this.stub.className="sticky-panel-stub",this.updateStubHeight(),this.panel.after(this.stub)),f.stickyPanelViewModel.setPart({bottom:this.getBottom(),right:t.offsetLeft+t.offsetWidth,isExists:!0,isShown:!0}),this.orientation?(h.resize.attach(this.onResize,this),d.onChanged("isPortraitMode",this.updateSticky,this),this.updateSticky((0,h.isPortraitMode)())):this.switchSticky(!0),l.rendering.attachOnce(this.removeListeners,this),a.onChanged("top",this.onUpdateTop,this),r.onChanged("isLocked",this.onUpdateTop,this)}var e=p.prototype;return e.removeListeners=function(){this.name&&o[this.name]&&delete o[this.name],h.resize.detach(this.onResize,this),d.offChanged("isPortraitMode",this.updateSticky,this).set("isPortraitMode",null),a.offChanged("top",this.onUpdateTop,this),r.offChanged("isLocked",this.onUpdateTop,this),f.stickyPanelViewModel.setPart({isExists:!1,isShown:!1})},e.onUpdateTop=function(){this.updateTopOffset(),f.stickyPanelViewModel.set("bottom",this.getBottom())},e.onResize=function(){d.set("isPortraitMode",(0,h.isPortraitMode)()),this.updateStubHeight()},e.updateSticky=function(t){if(t!==null){var i=this.orientation==="portrait",n=t===i;n&&(this.updateTargetOffset(this.panel),this.updateTopOffset()),this.switchSticky(n)}},e.switchSticky=function(t){(0,m.switchClass)(this.panel,t,"__sticky")},e.updateTopOffset=function(){this.topOffset=a.get("top"),r.get("isLocked")&&(this.topOffset=Math.max(a.get("top"),a.get("height")-window.scrollY)),this.panel.style.top=this.topOffset+this.targetOffset+"px"},e.updateStubHeight=function(){this.isStub&&(this.stub.style.height=this.panel.offsetHeight+"px")},e.updateTargetOffset=function(t){if(t.dataset){t.dataset.name&&(this.name=t.dataset.name,o[this.name]=t);var i=t.dataset.target;i&&o[i]&&(this.targetOffset=o[i].offsetHeight-1)}},e.getBottom=function(){return this.panel.offsetHeight+this.topOffset+this.targetOffset},p})();u.isInstant=!0,(0,c.register)("staticStickyPanel",u)})(__jsRegistry.am, __jsRegistry.w, __jsRegistry.lm, __jsRegistry.ln, __jsRegistry.bd, __jsRegistry.s, __jsRegistry.ab, __jsRegistry.ey)||window);
__jsRegistry.rd = __globalRegistry["fnO3MwA"] || (__globalRegistry["fnO3MwA"] = (function(f,a){var c,s="js-sticky-hook-id",n=function o(e){var t=this;this.scrollContainer=window,this.scrollDirection="DOWN",this.scrollDelta=0,this.scrollPosition=0,this.state="scroll",this.topShift=0,this.onScroll=function(){var i=window.pageYOffset;i!==t.scrollPosition&&(t.scrollDelta=i-t.scrollPosition,t.scrollDirection=t.scrollDelta>0?"DOWN":"UP",t.scrollPosition=i,t.render())},this.onResize=function(){t.render()},this.init=function(){var i=l(t.stickyWrapper);t.scrollDelta=0,t.scrollPosition=window.pageYOffset,delete t.scrollDirection,t.setTopShift(0),t.setState("scroll"),t.state==="scroll"&&(t.wrapperAbsoluteTop=i)},this.render=function(){t.wrapperAbsoluteTop=l(t.stickyWrapper);var i=window.pageYOffset;i>t.wrapperAbsoluteTop-o.fixedTopThreshold?t.setState("top"):t.init()},this.setState=function(i){var h=t.stickyContainer.classList;switch(i){case"top":h.add("__fixed-top");break;case"scroll":h.remove("__fixed-top"),t.stickyContainer.style.marginTop=t.topShift+"px";break}t.state=i},this.setTopShift=function(i){t.topShift!==i&&(t.topShift=i<0?0:i)},this.destroy=function(){t.scrollContainer.removeEventListener("scroll",t.scrollHandler,!1),window.removeEventListener("resize",t.resizeHandler)},this.stickyWrapper=e;var d=e.getAttribute("data-sticky-container");this.stickyContainer=d?document.querySelector(d):e.firstChild,this.wrapperAbsoluteTop=l(this.stickyWrapper),this.scrollHandler=(0,a.throttle)(this.onScroll,o.throttleDelay),this.resizeHandler=(0,a.throttle)(this.onResize,o.throttleDelay),this.init(),this.render(),this.scrollContainer.addEventListener("scroll",this.scrollHandler,!1),window.addEventListener("resize",this.resizeHandler,!1)};n.throttleDelay=10,n.fixedTopThreshold=((c=document.getElementById("head"))==null?void 0:c.offsetHeight)||0;function l(o){return o.getBoundingClientRect().top+window.pageYOffset}var r={},p=0;function u(){return++p}function k(o){var e=o.getAttribute(s);e&&r[e]||(e||(e=""+u(),o.setAttribute(s,e)),r[e]=new n(o))}function y(o){var e=o.getAttribute(s),t=r[e];t&&(t.destroy(),delete r[e])}var v={name:"fashionStickyBlock",update:function(e){e.target&&k(e.target)},discard:function(e){e.target&&y(e.target)}};(0,f.create)(v)})(__jsRegistry.x, __jsRegistry.ba)||window);
__jsRegistry.re = __globalRegistry["dUFKj6A"] || (__globalRegistry["dUFKj6A"] = (function(e){var r={};function i(u,s){for(var t in s)Object.defineProperty(u,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(s,t).get})}i(r,{get discussionsDraw(){return n},get discussionsHide(){return o}});var n=(0,e.create)(),o=(0,e.create)();return r})(__jsRegistry.u)||window);
__jsRegistry.rf = __globalRegistry["sDeBhNw"] || (__globalRegistry["sDeBhNw"] = (function(h,v,g,l,r,p){var m={};Object.defineProperty(m,"ShowDurationWatchers",{enumerable:!0,get:function(){return b}});function u(){return u=Object.assign||function(a){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i])}return a},u.apply(this,arguments)}var c=48,H=20,A="js-duration-watching-block",P="data-duration-watching-key",b=(function(){function a(){var t=this;this.viewStartedAt={},this.totalViewed={},this.pageHidingPeriods=[],this.pageHidingStartTime=null,this.startListeningTime=null,this.isWatchingBlocksEnabled=!1,this.handleViewportChange=(0,v.debounce)(function(){t.updateViewsAndDuration()},300),this.handleDiscussionsOpen=function(){t.viewStartedAt.durationDiscussionMs=Date.now(),h.discussionsHide.attachOnce(t.handleDiscussionsClose)},this.handleDiscussionsClose=function(){t.calcAndAddOne("durationDiscussionMs")},this.handlePageVisibilityChange=function(){l.isHidden()?t.startPageHidingPeriod():t.completeHidingPeriodIfStarted()},this.handleWindowFocus=function(){t.completeHidingPeriodIfStarted()},this.handleWindowBlur=function(){t.startPageHidingPeriod()}}var n=a.prototype;return n.listen=function(i){i===void 0&&(i=!1),this.isWatchingBlocksEnabled=i,l.addListener(this.handlePageVisibilityChange),window.addEventListener("focus",this.handleWindowFocus),window.addEventListener("blur",this.handleWindowBlur),this.startListeningTime=Date.now(),this.isWatchingBlocksEnabled&&(h.discussionsDraw.attach(this.handleDiscussionsOpen),g.changed.attach(this.handleViewportChange),this.updateViewsAndDuration())},n.getTotalDurations=function(){var i=(0,r.isNum)(this.startListeningTime)?f(this.startListeningTime,Date.now(),this.pageHidingPeriods):-1;return{blockDurations:u({},this.totalViewed),durationMs:i}},n.updateViewsAndDuration=function(){var i=this;(0,p.htmlElementsAsArray)(document.getElementsByClassName(A)).forEach(function(s){var e=s.getAttribute(P);if((0,r.isNonEmptyStr)(e)){var d=(0,r.isNum)(i.viewStartedAt[e]),o=i.isVisible(s);!d&&o?i.viewStartedAt[e]=Date.now():d&&!o&&i.calcAndAddOne(e)}})},n.startPageHidingPeriod=function(){(0,r.isNum)(this.pageHidingStartTime)||(this.pageHidingStartTime=Date.now())},n.completeHidingPeriodIfStarted=function(){var i=this.pageHidingStartTime;(0,r.isNum)(i)&&(this.pageHidingPeriods.push([i,Date.now()]),this.pageHidingStartTime=null)},n.calcAndAddAllUnfinishedView=function(){var i=this;this.completeHidingPeriodIfStarted(),Object.keys(this.viewStartedAt).forEach(function(s){i.calcAndAddOne(s)})},n.calcAndAddOne=function(i){var s=this.viewStartedAt[i];if((0,r.isNum)(s)){var e=this.totalViewed[i];e=(0,r.isNum)(e)?e:0,this.totalViewed[i]=e+f(s,Date.now(),this.pageHidingPeriods),delete this.viewStartedAt[i]}},n.isVisible=function(i){var s=__js_temp_htmlTag.clientHeight,e=i.getBoundingClientRect(),d=(e.bottom>s?s:e.bottom)-(e.top<0?0:e.top);e.top<c&&(d-=Math.min(c-e.top,c));var o=Math.min(s,e.height)*H/100;return d>o},n.destroy=function(){this.viewStartedAt={},this.totalViewed={},this.pageHidingPeriods=[],this.pageHidingStartTime=null,this.startListeningTime=null,g.changed.detach(this.handleViewportChange),l.removeListener(this.handlePageVisibilityChange),window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),h.discussionsDraw.detach(this.handleDiscussionsOpen),h.discussionsHide.detach(this.handleDiscussionsClose)},a})();function f(a,n,t){var i=0;t.forEach(function(e){var d=e[0],o=e[1],S=s(d),w=s(o);S?i+=(w?o:n)-d:w?i+=o-a:d<a&&o>a&&(i+=n-a)});function s(e){return e>=a&&e<=n}return n-a-i}return m})(__jsRegistry.re, __jsRegistry.by, __jsRegistry.bd, __jsRegistry.bg, __jsRegistry.d, __jsRegistry.bl)||window);
__jsRegistry.rg = __globalRegistry["sJ2D6MQ"] || (__globalRegistry["sJ2D6MQ"] = (function(i,d,l){function r(){return r=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},r.apply(this,arguments)}var o=null,h={name:"durationStatWatchers",update:function(e){s(),o=new u(e)},discard:function(){o!=null&&o.sendLog(),s()}},u=(function(){function a(t){var n=this;this.logData=null,this.durationWatchers=new l.ShowDurationWatchers,this.handleUnload=function(){n.sendLog()},this.logEventId=t.logEventId,this.logData=r({eventStartMs:Date.now(),eventType:"SHOW",durationMs:-1},t.logData?t.logData:null),this.durationWatchers.listen(t.isFeedBlocksDurationEnabled),window.addEventListener("beforeunload",this.handleUnload)}var e=a.prototype;return e.sendLog=function(){var n=this.logData;n!==null&&(this.durationWatchers.calcAndAddAllUnfinishedView(),Object.assign(n,this.durationWatchers.getTotalDurations()),d.log(this.logEventId,[JSON.stringify(n)]))},e.destroy=function(){this.logData=null,this.durationWatchers.destroy(),window.removeEventListener("beforeunload",this.handleUnload)},a})();function s(){o!=null&&(o.destroy(),o=null)}(0,i.create)(h)})(__jsRegistry.x, __jsRegistry.a, __jsRegistry.rf)||window);
__jsRegistry.rh = __globalRegistry["nEbOkaQ"] || (__globalRegistry["nEbOkaQ"] = (function(e){return e.create({isShown:!0})})(__jsRegistry.ab)||window);
__jsRegistry.ri = __globalRegistry["nEYbAw"] || (__globalRegistry["nEYbAw"] = (function(e,s,i){e.navbarController=function(n){o(n)};function o(n){s.onChanged("isShown",function(a){i.switchClass(n.target,!a,"hidden")})}})(__jsRegistry.c, __jsRegistry.rh, __jsRegistry.s)||window);
__jsRegistry.rj = __globalRegistry["nbsyNTA"] || (__globalRegistry["nbsyNTA"] = (function(u,i,t,c,a,h,n){function o(s,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](s):s instanceof e}var l=n.NonLiveSearchFieldBehavior;function r(s,e){this.root=e,this.model=s;var v=this.searchForm=document.querySelector(s.formQs);if(v){var S=this.searchField=this.searchForm.getElementsByClassName("search_input")[0],d=t.getOrMakeBehavior(S),m=this.nonLiveSearch=o(d,l);m?c.cancelled.attach(function(){this.toggleSearch(!1)},this):(this.toggleSearch(a.get("isSearchFieldActive")||a.get("isSearchResultState")),a.onChanged("isSearchFieldActive",this.toggleSearch,this))}}r.isInstant=!0,r.prototype={onActivate:{tap:function(){this.toggleSearch(!0);var e=this.searchField;e.focus(),this.nonLiveSearch&&e.click()}},toggleSearch:function(e){i.switchClass(this.searchForm,!e,"hidden"),h.set("isShown",!e)}},t.register("navbarSearch",r)})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.am, __jsRegistry.ar, __jsRegistry.bm, __jsRegistry.rh, __jsRegistry.mi)||window);
__jsRegistry.rk = __globalRegistry["odBXwQ"] || (__globalRegistry["odBXwQ"] = (function(y,i,h,o,j,l,m,d,S,E){var p=null,s=null;i.offersGeoServiceFromSearch=d.create({update:function(e){o.onResultSelected.attach(r,s=c(e))},discard:function(e){u(),m.navigated.attach(function a(){var n=e.target;document.contains(n)?n._okSuggestOnselect||(o.onResultSelected.attach(r,s=c(e)),n._okSuggestOnselect=!0):(u(),m.navigated.detach(a))})},dispose:function(){u()}}),i.offersGeoServiceDeprecated=d.create({update:function(e){o.onResultSelected.attach(r,e.context=c(e))},discard:function(e){o.onResultSelected.detach(r,e.context)}}),i.offersGeoService=d.create({update:function(e){o.onResultSelected.attach(r,e.context=c(e))},discard:function(e){o.onResultSelected.detach(r,e.context),e.target.okProc=!1}}),S.specialEnvelopes.contextSearchEndpoint={run:function(e){var a=e.contentDomFirst;if(a){j.set("contextSearchEndpoint",a.textContent);var n=document.getElementById("ServicesSearchFormField");if(n){var f=l.getOrMakeBehavior(n);f.initialSearch(!0)}}}};function u(){s&&o.onResultSelected.detach(r,s)}function c(t){return{target:t.target,get form(){return this.target.getElementsByClassName("geo-link_form")[0]}}}function r(t){var e=t.payload;if(e.name==="search.country.predefined"){var a=this.target,n=a.getAttribute("data-context"),f=a.getElementsByClassName("geo-link_label_tx")[0];if(f.textContent=e.data,n==="offersGeoService"||p===n){var g=e.geoIP;g&&x(this.form,g)}}}function x(t,e){var a=t.getElementsByClassName("js-geo-field")[0];a.value=e;var n=t.elements;h.onLayerClosed.attachOnce(function(){n.accept_geo.click()})}function v(t,e){this.context=e.getAttribute("data-context")}v.prototype={prepareSearch:{tap:function(e,a){l.allowDefault(e),p=this.context;var n=this.input||(this.input=document.getElementById(a.htmlFor));n.value=""}}},l.register("OffersGeo",v)})(__jsRegistry.ex, __jsRegistry.c, __jsRegistry.pl, __jsRegistry.pk, __jsRegistry.bm, __jsRegistry.am, __jsRegistry.w, __jsRegistry.x, __jsRegistry.fh, __jsRegistry.ak)||window);
__jsRegistry.rl = __globalRegistry["tqJmzg"] || (__globalRegistry["tqJmzg"] = (function(g,t,o,s){function e(){}e.prototype={toggleTheme:{change:function(r,a){s.toggleTheme(),t.request(a.getAttribute("data-command"),"POST").send()}}},o.register("toggleThemeBehavior",e)})(__jsRegistry.c, __jsRegistry.bw, __jsRegistry.am, __jsRegistry.cm)||window);
__jsRegistry.rm = __globalRegistry["rdjqz8Q"] || (__globalRegistry["rdjqz8Q"] = (function(l,u,m,i,d,f){var s="data-command",p="recent-items-menu-block";function r(){}function a(e,n){u.request(e.getAttribute(s),"POST").then(n||function(){}).send()}function c(){var e=document.getElementById(p);e&&e.getAttribute(s)&&a(e,function(){f(this.response())})}function o(e){a(e,function(){i.hide(),c()})}return r.prototype={toggleRecent:{change:function(n,t){a(t)}},showMenu:{longTap:function(n,t){i.show({url:t.getAttribute(s),target:t,dontPush:!0})},tap:function(n,t){d.change(t.href)}},closeMenu:{tap:function(n,t){o(t)}},removeItem:{tap:function(n,t){o(t)}},emptyItems:{tap:function(n,t){o(t)}},hideItems:{tap:function(n,t){o(t)}}},m.register("recentBehavior",r),{reload:c}})(__jsRegistry.c, __jsRegistry.bw, __jsRegistry.am, __jsRegistry.gh, __jsRegistry.ew, __jsRegistry.de)||window);
__jsRegistry.rn = __globalRegistry["rJzoUQ"] || (__globalRegistry["rJzoUQ"] = (function(r,a,s,i){var c="ri";r.recentMonitor=a.create({update:function(){var e=document.getElementById("recent-items-menu-block");if(e){var o=e.getAttribute("data-cookie-value"),t=s.get(c);t&&o!==t.replace(/"/g,"")&&i.reload()}},discard:function(){}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.ga, __jsRegistry.rm)||window);
__jsRegistry.ro = __globalRegistry["pGfLeA"] || (__globalRegistry["pGfLeA"] = (function(t,n){function e(i,s){s.addEventListener("submit",function(){n.remove(s)},!1)}e.isInstant=!0,t.register("portalMessage",e)})(__jsRegistry.am, __jsRegistry.s)||window);
__jsRegistry.rp = __globalRegistry["tJRX4Mg"] || (__globalRegistry["tJRX4Mg"] = (function(n,s,o,m,C){var d=300,f="js-clamp-text",g="clamp-box-toggle-state",p="js-clamp-on",r="js-clamp-off";function a(l,e){var i=this;if(this.root=e,this.text=e.getElementsByClassName(f)[0],this.isClampApplied=!1,this.text){this.textParent=this.text.parentElement,this.checkClamping();var t=m(c,d);o.changed.attach(t,this),C.navigating.attachOnce(function(){o.changed.detach(t,i)})}}a.isInstant=!0,a.prototype={constructor:a,seekClamping:{tap:function(e){n.allowDefault(e),this.isClampApplied&&!s.hasClass(e.target,g)&&(this.isClamped=!this.isClamped,s.switchClass(this.root,this.isClamped,p),s.switchClass(this.root,!this.isClamped,r))}},checkClamping:c},n.register("textClamp",a);function c(){var l=this.textParent,e=this.text,i=e.cloneNode(!0),t=i.style;t.display="block",t.height="auto",t.maxHeight="none",t.whiteSpace="normal",t.width=Math.ceil(e.offsetWidth+1)+"px",t.visibility="hidden",t.position="fixed",t.pointerEvents="none",l.appendChild(i);var h=this.isClamped=i.offsetHeight-e.offsetHeight>1;this.isClampApplied=h,s.switchClass(this.root,h,p),s.switchClass(this.root,!h,r),s.remove(i)}})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.bd, __jsRegistry.el, __jsRegistry.w)||window);
__jsRegistry.rq = __globalRegistry["aZtIgLw"] || (__globalRegistry["aZtIgLw"] = (function(){Array.prototype.map||(Array.prototype.map=function(t,i){if(typeof t!="function")throw new TypeError(t+" is not a function");for(var r=this.length,n=new Array(r);r--;)n[r]=t.call(i,this[r],r,this);return n})})()||window);
__jsRegistry.rr = __globalRegistry["tpc5Hjw"] || (__globalRegistry["tpc5Hjw"] = (function(x,E,T,k,M,j,B,I,X){var b=7,D=3,P=300,w=10,C="topic-text_content",d="__crop",R="topic-text-token",S="clamp",_="data-more-text",H="js-clamp-off",W="__only-text",y=(function(){function h(r,t){this.prevTruncateTokens=[],this.target=t,this.linesLimitOther=h.getSafeLinesLimit(r.linesLimit,D),this.linesLimitText=h.getSafeLinesLimit(r.linesLimitText,this.linesLimitOther),this.moreText=r.moreText||"",this.getTokenLineHeight=this.getCalculateLineHeight,I.WEAK_MAP&&(this.tokensLineHeight=new WeakMap,this.getTokenLineHeight=this.getAndSaveTokenLineHeight),this.checkClamping();var e=(0,k.debounce)(this.checkClamping,P);M.attachUntilRendering(E.changed,e,this)}var l=h.prototype;return l.checkClamping=function(){var t=this.target.getElementsByClassName(C),e=[];j(t,function(s){if(!(0,T.hasClass)(s,H)){var g=s.parentElement.querySelectorAll("."+C+" > ."+R+":not(."+H+")"),a=(0,B.htmlElementsAsArray)(g),o=this.getLinesLimit(s),n=1,i;a.length===0&&a.push(s);for(var m=a[0],u=this.getTokenLineHeight(m),v=0,K=a.length;v<K;v++){var L=a[v],f=L.getBoundingClientRect(),U=h.getHeightWithoutClamp(f.height,L.scrollHeight),F=Math.round(U/u);typeof i<"u"&&(n=i.bottomLine,h.getBottomOfToken(i)-w<f.top&&n++);var c=n,p=c+F-1,A={tokenNode:L,blockNode:s,topLine:c,bottomLine:p,rect:f};if(p>o){var O=i&&c===i.bottomLine?c+1:c;if(O>o||p>o){var N=i&&O>o?i:A;e.push(N);break}}i=A}}},this),this.truncate(e,this.moreText),this.clearStyle(this.prevTruncateTokens,e),this.prevTruncateTokens=e},l.getAndSaveTokenLineHeight=function(t){if(!this.tokensLineHeight.has(t)){var e=this.getCalculateLineHeight(t);return this.tokensLineHeight.set(t,e),e}return this.tokensLineHeight.get(t)},l.getCalculateLineHeight=function(t){return Math.ceil(parseFloat(window.getComputedStyle(t).lineHeight))},l.getLinesLimit=function(t){return(0,T.hasClass)(t,W)?this.linesLimitText:this.linesLimitOther},l.getTokenCropSize=function(t){var e=this.getLinesLimit(t.blockNode),s=t.bottomLine>e?e-t.topLine+1:0;return Math.min(s,b)},l.truncate=function(t,e){for(var s=t.length,g=0;g<s;g++){var a=t[g],o=this.getTokenCropSize(a),n=a.tokenNode,i=a.blockNode;o>0&&(n.classList.add(S),n.classList.add("__"+o));var m=parseFloat(window.getComputedStyle(n).paddingBottom);i.style.maxHeight=n.offsetTop+n.offsetHeight-m+"px",i.classList.add(d),i.setAttribute(_,e)}},l.clearStyle=function(t,e){for(var s=e.map(function(u){return u.blockNode}),g=t.length,a=0;a<g;a++){var o=t[a],n=o.tokenNode,i=o.blockNode;if(s.indexOf(i)===-1){n.classList.remove(S),i.style.removeProperty("max-height"),i.classList.remove(d),i.removeAttribute(_);var m=this.getTokenCropSize(o);m>0&&n.classList.remove("__"+m)}}},h.getBottomOfToken=function(t){return t.rect.top+h.getHeightWithoutClamp(t.rect.height,t.tokenNode.scrollHeight)},h.getHeightWithoutClamp=function(t,e){return Math.max(t,e)},h.getSafeLinesLimit=function(t,e){return t!==void 0?parseInt(t,10):e},h})();y.isInstant=!0,(0,x.register)("topicTextClamp",y)})(__jsRegistry.am, __jsRegistry.bd, __jsRegistry.s, __jsRegistry.by, __jsRegistry.w, __jsRegistry.k, __jsRegistry.bl, __jsRegistry.af, __jsRegistry.rq)||window);
__jsRegistry.rs = __globalRegistry["p2SFiA"] || (__globalRegistry["p2SFiA"] = (function(a,l,r){a.pageWithStartupDialog=l.create({update:function(e){history.replaceState(null,null,e.refreshUrl),r.show({url:e.url})}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.gh)||window);
__jsRegistry.rt = __globalRegistry["eWMKZGA"] || (__globalRegistry["eWMKZGA"] = (function(c,u,d,p){var k="expandable-menu",v="expandable-menu_root",O="expandable-menu_container",S="expandable-menu-checkbox",T="__root-input",l="data-semi-checked",M=function(){},o={CHILD:1,ROOT:2,get BOTH(){return this.CHILD|this.ROOT},isRoot:function(e){return(e&this.ROOT)===this.ROOT},isInner:function(e){return(e&this.CHILD)===this.CHILD}};function C(n,e){n=n||{};var t=this;this.topmostMenu=e,this.root=e,this.controls=[],this.checkedControlsCount=0,this.semiCheckedControlsCount=0,this.isChild=u.hasClass(e,O),this.parentInput=null,this.cacheDOMvalues=n.cacheDomValues||!window._ok_forms_cacheValuesDisabled,this.isChild||(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){t.initMenu()}):this.initMenu())}C.isInstant=!0,C.prototype={handleCheck:{change:function(e,t){var i=t.checkboxInstance,s=void 0;i.isSemiChecked()&&(t.checked=!0,i.makeSemiCheck(!1),s=!0),i.makeCheckForRoot(t.checked,s),o.isRoot(i.roleType)&&i.makeCheckForChildren(t.checked)}},toggleMenu:{tap:function(e,t){var i=this.findMenuRoot(t),s=this.isOpen(i);u.switchClass(i,!s,"__is-open"),i._okMenu_isOpen=!s}},isOpen:function(e){return e._okMenu_isOpen||e.getAttribute("data-expanded")||!1},findMenuRoot:function(e){return d.findParent(e,function(t){return u.hasClass(t,v)})},initMenu:function(){for(var e=this,t=this.root.children,i=p.start(),s=0,r=t.length;s<r;s++){var a=t[s],h=a.getElementsByClassName(S)[0];h&&(this.controls.push(h),h.checked&&i.then(function(y,_){e.handleCheck.change({},_)},M,h),h.checkboxInstance=new f(h,a,this))}return i.resolve(),this},withTopmostMenu:function(e){return this.topmostMenu=e,this},withControlInput:function(e){return this.parentInput=e,this},updateControlState:function(){var e=this.parentInput;if(e){var t=e.target.checked,i=this.checkedControlsCount;this.controls.length===i&&this.semiCheckedControlsCount===0?(e.makeSemiCheck(!1),e.makeCheckForRoot(!0,t)):i>0?(e.makeSemiCheck(!0),e.makeCheckForRoot(!0,t)):(e.makeSemiCheck(!1),e.makeCheckForRoot(!1,t))}},setAsChild:function(){this.isChild=!0}},c.register("expandableMenu",C);function f(n,e,t){this.target=n,this.targetParent=e,this.menu=t,this.innerMenu=null,this.roleType=null;var i=this.parentInputId=n.getAttribute("data-parent-id");i&&this.initChildType(),u.hasClass(n,T)&&this.initRootType()}f.prototype={makeSemiCheck:function(e){var t=this.target,i=this.isSemiChecked();e?i||(t.setAttribute(l,"on"),t.indeterminate=!0,this.checkDOMValue(!1),this.menu.semiCheckedControlsCount++):i&&(t.removeAttribute(l),t.indeterminate=!1,this.menu.semiCheckedControlsCount--)},isSemiChecked:function(){return this.target.hasAttribute(l)},checkDOMValue:function(e){this.menu.cacheDOMvalues&&(e?this.target.setAttribute("checked",!0):this.target.removeAttribute("checked"))},makeCheckForRoot:function(e,t){var i=typeof t>"u",s=i||e!==t,r=this.target;r.checked=e,this.isSemiChecked()||this.checkDOMValue(e),s&&(e?this.menu.checkedControlsCount++:this.menu.checkedControlsCount--),this.menu.updateControlState()},makeCheckForChildren:function(e){for(var t=this.innerMenu.controls,i=0,s=t.length;i<s;i++){var r=t[i];r.checked=e,this.checkDOMValue(e);var a=r.checkboxInstance;a.makeSemiCheck(!1),o.isRoot(a.roleType)&&a.makeCheckForChildren(e)}this.innerMenu.checkedControlsCount=e?s:0},initChildType:function(){this.setType(o.CHILD),this.parentInput=document.getElementById(this.parentInputId)},initRootType:function(){this.setType(o.ROOT),this.innerMenu=c.getOrMakeBehavior(this.targetParent.getElementsByClassName(k)[0]).withTopmostMenu(this.menu.topmostMenu).withControlInput(this).initMenu()},setType:function(e){this.roleType=this.roleType|=e},removeType:function(e){this.roleType=this.roleType^e}};function m(n,e){for(var t=0,i=n.length;t<i;t++){var s=n[t],r=s.checkboxInstance;s.checked&&!r.isSemiChecked()?e.push(s.value):r.isSemiChecked()&&m(r.innerMenu.controls,e)}}return typeof Object.getOwnPropertyDescriptor=="function"&&!Object.getOwnPropertyDescriptor(o,"BOTH")&&typeof Object.defineProperty=="function"&&Object.defineProperty(o,"BOTH",{configurable:!1,enumerable:!0,get:function(){return this.CHILD|this.ROOT}}),{collectDataFromTree:function(e){var t=e.checkboxInstance;if(t){var i=[];return m(c.getOrMakeBehavior(t.menu.topmostMenu).controls,i),i}return[]}}})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.t, __jsRegistry.n)||window);
__jsRegistry.ru = __globalRegistry["ShhpKWA"] || (__globalRegistry["ShhpKWA"] = (function(o,s){function e(t,i){this.video=document.getElementsByClassName("js-video-to-switch-sound")[0]}e.prototype={toggleState:{tap:function(){this.video.muted=!this.video.muted}}},o.register("simpleVideoSoundToggler",e)})(__jsRegistry.am, __jsRegistry.s)||window);
__jsRegistry.rv = __globalRegistry["SHTjp3w"] || (__globalRegistry["SHTjp3w"] = (function(h,t){var e="__true",o="__false";function i(s,a){this.root=a,this.state=this.initState=t.hasClass(a,e)}i.prototype={toggleState:{tap:function(){this.switchClasses(),this.state=!this.state}},switchClasses:function(){t.switchClass(this.root,this.state,o),t.switchClass(this.root,!this.state,e)},reset:function(){this.state!==this.initState&&(this.switchClasses(),this.state=this.initState)}},h.register("simpleStateToggler",i)})(__jsRegistry.am, __jsRegistry.s)||window);
__jsRegistry.rw = __globalRegistry["bF1ZdbQ"] || (__globalRegistry["bF1ZdbQ"] = (function(i,a,t,n){var s={registered:function(){},track:function(e){n.switchClass(e.target,e.inViewport,"__animated")}};t.addListener(s),i.botPortletService=a.create({update:function(e){t.observe(e.target,s)},discard:function(e){t.unobserve(e.target)}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.dj, __jsRegistry.s)||window);
__jsRegistry.rx = __globalRegistry["eWq8O2Q"] || (__globalRegistry["eWq8O2Q"] = (function(){typeof Array.prototype.every!="function"&&(Array.prototype.every=function(e,t){if(this==null)throw new TypeError('"this" is null or not defined');for(var r=0;r<this.length;r++)if(!e.call(t,this[r],r,this))return!1;return!0})})()||window);
__jsRegistry.ry = __globalRegistry["sGTw9Tg"] || (__globalRegistry["sGTw9Tg"] = (function(E,p,u,I,d,_){var m="selectPlot",v="__selected",g="x",n={};n[n.UNSELECT=0]="UNSELECT",n[n.SELECT=1]="SELECT";var f=p.create();function h(r,t){r=r||{},this.model=r,this.id=r.id||t.id||t.getAttribute("data-plot-name"),this.root=t,this.drawOnStart=this.setFromModelOrNode("drawOnStart",!1),this.plotItems=[];var s=S(this.setFromModelOrNode("grid"));if(this.cells=s.cells||0,this.x=s.x,this.y=s.y,this.hasYHeight=!!this.y,this.isSelectedAll=this.setFromModelOrNode("isSelectedAll",!1),this.plotContent=this.setFromModelOrNode("items",[],y),this.touchCache={},this.drawOnStart){var e=this.setFromModelOrNode("selectedIds",[],A);this._buildPlotItems(e),this.drawPlot()}u.listenCritical(t)}h.prototype={constructor:h,_buildPlotItems:function(t){var s=this.isSelectedAll,e=!t||t.length===0;this.plotItems=[];for(var i=0,l=this.cells;i<l;i++)this.plotItems.push(new C(i,this.plotContent[i],s?!0:e?!1:t.indexOf(i)>-1));return this},setFromModelOrNode:function(t,s,e){var i=this.model[t];return i||(e?e.call(this,t)||s:this.root.getAttribute("data-"+t))},setSelectedItems:function(t,s){this.isSelectedAll=!!s,this._buildPlotItems(t);for(var e=this.root.children,i=0,l=e.length;i<l;i++){var o=e[i],a=this.plotItems[o._plotItemId];a&&d.switchClass(o,a.selected,v)}var c={id:this.id,items:this.plotItems,changedItem:null};return f.trigger(c),this},setItems:function(t){return this.plotItems=t,this},drawPlot:function(){for(var t=document.createDocumentFragment(),s=this.plotItems,e=0,i=s.length;e<i;e++){var l=s[e],o=document.createElement("DIV");d.addClass(o,"plot_i"),l.selected&&d.addClass(o,v),o.style.width=100/this.x+"%",o.innerText=l.value,o._plotItemId=l.id,t.appendChild(o)}return this.root.appendChild(t),this},toggle:function(t,s){var e=t._plotItemId,i=this.plotItems[e],l;typeof s<"u"?l=!!s:l=!i.selected,i.selected=l,d.switchClass(t,l,v),f.trigger({id:this.id,items:this.plotItems,changedItem:i})},isAllSelected:function(){return this.plotItems.every(function(t){return t.selected})},isNoneSelected:function(){return this.plotItems.every(function(t){return!t.selected})},selectCells:{touchStart:function(t,s){var e=I.firstTouch(t),i=e.x,l=e.y,o=document.elementFromPoint(i,l),a=this.plotItems[o._plotItemId];a&&(this.selectionMode=a.selected?n.UNSELECT:n.SELECT,this.toggle(o,this.selectionMode))},touchMove:function(t,s){t.preventDefault();var e=I.firstTouch(t),i=e.identifier,l=e.x,o=e.y;if(Math.min(l,o)>=0){var a=document.elementFromPoint(l,o);if(a){var c=this.touchCache[i];(!c||a!==c.target)&&a._plotItemId!==void 0&&this.toggle(a,this.selectionMode),this.touchCache[i]={target:a,x:l,y:o}}}else return!1},touchEnd:function(t,s){u.allowDefault(t),this.selectionMode=null}}};function S(r){var t=r.split(g),s=t[0],e=t[1];return{x:s,y:e,cells:s*(e||1)}}u.register(m,h);function C(r,t,s){this.id=r,this.value=t,this.selected=s||!1}function y(r){var t=this.model[r];if(!t){var s=this.root.getAttribute("data-"+r);if(s)return JSON.parse(s)}}function A(r){for(var t=(this.root.getAttribute("data-"+r)||"").split(","),s=[],e=0,i=t.length;e<i;e++)s.push(Number(t[e]));return s}return{SelectPlot:h,createRoot:function(t,s){var e;return s?e=document.getElementById(s):(e=document.createElement("DIV"),d.addClass(e,"plot"),e.setAttribute("data-view",m),e.setAttribute("data-func","selectCells"),t&&((e.okData={})[m]=t)),e},onChanged:f}})(__jsRegistry.rx, __jsRegistry.u, __jsRegistry.am, __jsRegistry.aj, __jsRegistry.s, __jsRegistry.bd)||window);
__jsRegistry.rz = __globalRegistry["oaH9EFw"] || (__globalRegistry["oaH9EFw"] = (function(){return window.OKWebView||(window.OKWebView={})})()||window);
__jsRegistry.sa = __globalRegistry["a9gBryQ"] || (__globalRegistry["a9gBryQ"] = (function(e){var r={};function n(b,t){for(var a in t)Object.defineProperty(b,a,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,a).get})}n(r,{get back(){return p},get subAppInterop(){return u},get tabMarkedAsRead(){return o}});var p=(0,e.create)(),u=(0,e.create)(),o=(0,e.create)();return r})(__jsRegistry.u)||window);
__jsRegistry.sb = __globalRegistry["aZgJ8wg"] || (__globalRegistry["aZgJ8wg"] = (function(j,s,l,E,m,_,r,f,S,O,T,I,g){function h(e,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}var o=T.create(),A=window.webkit,v=A&&A.messageHandlers,u="ajaxNavigate",b=3e4,c=p(u),a,w="mobMessage",y=p(w);_.create({name:"ajaxNavForApps",init:function(n){n=n||{},n.iosAjaxNavEnabled&&(c||(c=p(u)))&&(a=g.resolved,o.attach(P))},update:function(n){var t=document.getElementsByTagName("title")[0],N=t&&t.getAttribute("data-filter")||null;try{s.run(j.UPDATE_EVENT_COUNTERS,N)}catch(B){logClientEvent("JSError/OKApp.run",["updateEventCounters",N])}if(m.iOS){var d=window.okiosapp;d&&d.ok_titleLoaded&&d.ok_titleLoaded(document.title,t&&t.getAttribute("data-page-config")||"{}")}}});function M(e){var n=e.state.url;return typeof n=="string"?(a.rejectIfNotDone(),a=g.start(),a.payload={created:Date.now(),url:n},c.postMessage({url:n}),a):null}function P(e){if(e&&e.event===u){var n=a.payload;!e.cancel&&n.url===e.url&&Date.now()-n.created<=b?a.resolve(e):a.reject(e)}}l.open=function(e){e=JSON.parse(e||"{}"),e&&e.url&&f[e.newHistoryStep===!1?"replace":"change"](e.url)},l.onBack=function(){var e={handled:!1};try{E.back.trigger(e)}catch(n){S.INSTANCE.sendErrorWithInfo(n,"onBack","OKWebView"),e.handled=!1}e.handled||s.run("back","{}")},l.onAppMessage=function(e){var n=JSON.parse(e);o.trigger(n),n.reload&&f.reload()};function i(e,n){var t=s.run(e,JSON.stringify({url:n.state&&n.state.url||window.location.href}));return typeof t=="string"||h(t,String)?JSON.parse(t):null}r.navigating.attach(function(e){var n=i("onNavigationStart",e);n&&n.cancel?e.cancelled=n.cancel:c&&(e.navigationTask=M(e))}),r.rendering.attach(function(e){i("onRenderingStart",e)}),r.navigated.attach(function(e){i("onNavigationEnd",e)}),r.navigationFailed.attach(function(e){i("onNavigationFailed",e)}),r.programmaticBack.attach(function(){i("onProgrammaticBack",{})}),O.addFuncHandler("appBackBefore",{tap:function(n){s.run("backBefore",n.target.getAttribute("data-back-url"))}}),I.specialEnvelopes.closeWindow={run:function(n){window.close()}};function p(e){return v&&v[e]}function k(e,n){o.attach(e,n),r.navigated.attachOnce(function(){o.detach(e)})}return{onAppMessage:o,onPageAppMessage:k,mobMessageAppHandler:y}})(__jsRegistry.ef, __jsRegistry.eg, __jsRegistry.rz, __jsRegistry.sa, __jsRegistry.ak, __jsRegistry.x, __jsRegistry.w, __jsRegistry.ew, __jsRegistry.f, __jsRegistry.an, __jsRegistry.u, __jsRegistry.fh, __jsRegistry.n)||window);
__jsRegistry.sc = __globalRegistry["ajOlkQ"] || (__globalRegistry["ajOlkQ"] = (function(t,a,o){function n(e){e.event==="topicCreated"&&o.reload()}t.create({name:"createTopicPage",update:function(){a.onAppMessage.attach(n)},discard:function(){a.onAppMessage.detach(n)}})})(__jsRegistry.x, __jsRegistry.sb, __jsRegistry.ew)||window);
__jsRegistry.sd = __globalRegistry["cKiuYlQ"] || (__globalRegistry["cKiuYlQ"] = (function(a,e){(0,a.addFuncHandler)("copyAndToast",{tap:function(p,t,c){var o=c||{copy:t.getAttribute("data-copy"),toast:t.getAttribute("data-toast")||void 0},d=o.copy,n=o.toast;e(String(d),n)}})})(__jsRegistry.an, __jsRegistry.eh)||window);
__jsRegistry.se = __globalRegistry["vUpXO3w"] || (__globalRegistry["vUpXO3w"] = (function(F,A,K,m,s){var u="js-vk-connect-sdk-error",d="js-vk-connect-sdk-error-wrapper",p,v,l,o;function y(t){var r=0;if(typeof t=="number")return t;if(typeof t=="string"){var e=parseInt(t,10);if(!isNaN(e)&&e>0)return e}return r}function h(t){p=t["data-script-url"],v=y(t["data-app-id"]),t["data-auth-url"],l=t["data-external-device-id"],o=t["data-network-error-message"]}function f(t){if(t.redirectUrl){location.replace(t.redirectUrl);return}if(t.errorText){c(t.errorText);return}c(o)}function c(t){var r=document.getElementsByClassName(d)[0];r&&(r.style.display="block");var e=document.getElementsByClassName(u)[0];e&&(e.innerHTML=t)}function j(){var t=document.getElementsByClassName(d)[0];t&&(t.style.display="none");var r=document.getElementsByClassName(u)[0];r&&(r.innerHTML="")}function k(){c(o)}function g(t){if(!t)return null;var r={};r.provider=t.provider;var e=t.payload;if(e){var n={};n.type=e.type,n.auth=e.auth,n.token=e.token,n.uuid=e.uuid,n.ttl=e.ttl,r.payload=n}return r}function C(t,r){s.invoke("vkconnect/signIn",{payload:g(t),state:r}).then(f).catch(k)}function b(t){s.invoke("vkconnect/bind",{payload:g(t)}).then(f).catch(k)}function S(){}function E(t){if(location.protocol!=="https:"){startFallback();return}try{var r=function(i){C(i,t)},e=function(i){b(i)},n=function(i){i.payload.auth};OK.loader.use(p).then(function(){var a={external_device_id:l},i={appId:v,appSettings:a};OK.vkSuperAppKit=OK.vkSuperAppKit||window.SuperAppKit,OK.vkSuperAppKit.Config.init(i),OK.vkSuperAppKit.Connect.userVisibleAuth().then(r,S)},function(){})}catch(a){}}function D(){var t;function r(e,n){t=n.getAttribute("data-login-state"),n.getAttribute("data-super-app-token"),n.getAttribute("data-bind-super-app-token"),n.getAttribute("data-user-id"),n.getAttribute("data-user-first-name"),n.getAttribute("data-user-last-name"),n.getAttribute("data-user-avatar-url")}r.prototype={initVkConnect:{tap:function(n){j();try{E(t),n.preventDefault()}catch(a){startFallback(),a.preventDefault()}}}};try{m.register("vkConnect",r)}catch(e){}}A.create({name:"vkConnectService",init:function(r){h(r),D()}})})(__jsRegistry.s, __jsRegistry.x, __jsRegistry.bw, __jsRegistry.am, __jsRegistry.bx)||window);
__jsRegistry.sf = __globalRegistry["mnLX7A"] || (__globalRegistry["mnLX7A"] = (function(a){var s="starting",r="stopping",e="data-started",d="hidden";function n(o,t){o&&a.switchClass(o,t,d)}function u(o){this.dom=o}return u.prototype={onStartRolling:function(){var t=this.dom;n(t.buttonStart,!0),n(t.buttonRestart,!0),n(t.buttonPost,!0),n(t.buttonStop,!1),t.listContainer.setAttribute(e,"1"),this.mode=s},onStopRolling:function(){var t=this.dom;n(t.buttonStop,!0),n(t.buttonProgress,!1),this.mode=r},onOpenForecast:function(t,f){var i=this.dom;n(i.buttonProgress,!0),f?i.buttonPost&&(n(i.buttonPost,!1),i.buttonPostTarget.href=t):n(i.buttonRestart,!1)},isActivated:function(){var t=this.dom;return t.listContainer.getAttribute(e)},isStarting:function(){return this.mode===s},isStopping:function(){return this.mode===r}},u})(__jsRegistry.s)||window);
__jsRegistry.sg = __globalRegistry["mIiKJeg"] || (__globalRegistry["mIiKJeg"] = (function(t){var n="hidden";function i(o,e){this.dom=o,this.model=e}return i.prototype={onOpenForecast:function(e){if(this.model.showInlineResult){var r=this.dom,s=r.resultContainer,a=r.listContainer;s.style.height=a.offsetHeight+"px",s.innerHTML=e,t.addClass(a,n),t.removeClass(s,n)}},onStartRolling:function(){if(this.model.showInlineResult){var e=this.dom;t.removeClass(e.listContainer,n),t.addClass(e.resultContainer,n)}}},i})(__jsRegistry.s)||window);
__jsRegistry.sh = __globalRegistry["mDQQcnA"] || (__globalRegistry["mDQQcnA"] = (function(i){var c="data-variants-count",u="-12345",v="[variant]";function l(o,t){this.dom=o,this.model=t}return l.prototype={onOpenForecast:function(t,r,s){var a=this.fetchForecastResult(t);r.onOpenForecast(a.text),s.onOpenForecast(a.postUrl,a.isLast),a.isLast&&this.dom.resultContainer.setAttribute("data-last-post-url",a.postUrl),this.model.autoPost&&i.change(a.postUrl)},onOpenLastForecast:function(){var t=this.dom.resultContainer.getAttribute("data-last-post-url");t&&i.change(t)},fetchForecastResult:function(t){var r=this.dom.root,s=this.model,a=decodeURI(s.postUrl),n=r.getAttribute(c);n--,r.setAttribute(c,n);var p=s.variants[n],e=a.replace(/&amp;/g,"&");return e=e.replace(u,t),e=e.replace(v,p.variantId),{isLast:n==0,text:p.shortText,postUrl:e}}},l})(__jsRegistry.ew)||window);
__jsRegistry.si = __globalRegistry["cwFbz1g"] || (__globalRegistry["cwFbz1g"] = (function(a,r,s){var e="__animation",l="__picking",u=s.create().translateX(0);function m(t){this.dom=t}return m.prototype={onStartRolling:function(){var n=this.dom.animationContainer;a.removeClass(n,l),u.applyTo(n),n.style.transitionDuration="unset",a.addClass(n,e)},onStopRolling:function(){var n=this.dom.animationContainer;a.removeClass(n,e)},onStartPicking:function(){var n=this.dom.animationContainer;a.addClass(n,l)},translateX:function(n){var i=this.dom.animationContainer,o=s.create().translateX(n,"px");o.applyTo(i)},translateXWithTransition:function(n,i){var o=this.dom.animationContainer;o.style.transitionDuration=i+"ms";var C=this;r.run(function(){r.run(function(){C.translateX(n)})})}},m})(__jsRegistry.s, __jsRegistry.aq, __jsRegistry.av)||window);
__jsRegistry.sj = __globalRegistry["ceBLQ"] || (__globalRegistry["ceBLQ"] = (function(s,h,S,u,d,v,f,g,w){var p="motivator-game-carousel_item",a="__picked";function m(o,t){this.model=o,this.root=t;var i=h.byDataId(t);this.dom=i,this.items=t.getElementsByClassName(p),this.itemsCount=this.items.length/2,this.buttonsView=new u(i,o),this.resultView=new d(i,o),this.forecastView=new v(i,o),this.containerView=new f(i),this.initModel(o)}return m.prototype={onStartRolling:function(){this.resultView.onStartRolling(),this.buttonsView.onStartRolling(),this.containerView.onStartRolling(),this.itemWidth=this.items[0].offsetWidth,this.onRelayout()},onStopRolling:function(){this.buttonsView.onStopRolling();var t=this;setTimeout(function(){t.completeRollingAnimation()},this.model.stopDelay)},onRelayout:function(){this.rootWidth=this.dom.listContainer.offsetWidth},canAutoStart:function(){return!this.buttonsView.isActivated()},completeRollingAnimation:function(){var t=this.containerView,i=window.getComputedStyle(this.dom.animationContainer),n=g.getTransformStyleTranslateX(i);t.onStopRolling(),t.translateX(n);var e=this.calculatePickData(n);t.translateXWithTransition(e.translateX,e.translateTime);var r=this;setTimeout(function(){r.startPicking(e.index)},e.translateTime)},calculatePickData:function(t){var i=this.itemWidth,n=this.rootWidth,e=(n-i)/2,r=e-t,l=Math.floor(r/i)+1+this.model.stopItemShift,c=-l*i+e,C=Math.floor(this.model.timeItem*(t-c)/i);return{index:l,translateX:c,translateTime:C}},startPicking:function(t){this.containerView.onStartPicking();var i=this.items,n=i[t];s.addClass(n,a);var e=this;setTimeout(function(){e.resetItems(),e.openForecast(t)},this.model.openDelay)},openForecast:function(t){var i=t%this.itemsCount;this.forecastView.onOpenForecast(i,this.resultView,this.buttonsView)},resetItems:function(){s.removeClass(this.dom.animationContainer,"__picking"),w(this.root.getElementsByClassName(a),function(t){s.removeClass(t,a)})},initModel:function(t){var i=this.dom.animationContainer.style,n=this.model.timeItem*this.itemsCount;i.animationDuration=n+"ms"}},m})(__jsRegistry.s, __jsRegistry.md, __jsRegistry.ew, __jsRegistry.sf, __jsRegistry.sg, __jsRegistry.sh, __jsRegistry.si, __jsRegistry.aw, __jsRegistry.k)||window);
__jsRegistry.sk = __globalRegistry["gqTVj7Q"] || (__globalRegistry["gqTVj7Q"] = (function(n,u,g,C,d,h,f,a,p,S){var l="data-variants-count",v="motivator-game-grid_item",m="__picked";function c(i,t){this.model=i,this.root=t;var e=u.byDataId(t);this.dom=e,this.items=t.getElementsByClassName(v),this.itemsCount=this.items.length,this.initModel(),this.buttonsView=new d(e,i),this.resultView=new h(e,i),this.forecastView=new f(e,i)}return c.prototype={onStartRolling:function(){this.resetItems(),this.resultView.onStartRolling(),this.buttonsView.onStartRolling()},onStopRolling:function(){this.pickedIndex=Math.floor(Math.random()*(this.itemsCount-1)),this.stopWithSelectedItem()},onSelectItem:function(t,e){var o=this.dom.root.getAttribute(l);o!="0"?(this.pickedIndex=e-1,this.stopWithSelectedItem()):n.hasClass(t,m)&&this.forecastView.onOpenLastForecast()},canAutoStart:function(){return this.model.chestsAutoStart&&this.dom.root.getAttribute(l)!="0"||!this.buttonsView.isActivated()},stopWithSelectedItem:function(){this.buttonsView.onStopRolling();var t=this.items[this.pickedIndex];n.addClass(t,m);var e=this;setTimeout(function(){e.completeItemsAnimations()},this.model.stopDelay)},completeItemsAnimations:function(){var t=this;a(this.items,function(e,o){function s(){t.completeItem.call(t,e,o,t.pickedIndex)}p(e.firstChild.firstChild,"animationiteration",s)})},completeItem:function(t,e){var o=t.firstChild.firstChild;if(e===this.pickedIndex){var s=t.getAttribute("data-image-open"),I=o.src;s&&(o.src=s,t.setAttribute("data-image-tmp",I));var r=this;setTimeout(function(){o.style.animationIterationCount="0",r.openForecast.call(r,r.pickedIndex)},this.model.openDelay)}else o.style.animationIterationCount="0"},resetItems:function(){a(this.items,function(t){n.removeClass(t,m);var e=t.firstChild.firstChild;e.style.animationIterationCount="";var o=t.getAttribute("data-image-tmp");o&&(t.removeAttribute("data-image-tmp"),e.src=o)})},openForecast:function(t){this.forecastView.onOpenForecast(t,this.resultView,this.buttonsView)},initModel:function(t){var e=this.model.timeItem;e&&a(this.items,function(o){o.style.animationDuration=e+"ms"})}},c})(__jsRegistry.s, __jsRegistry.md, __jsRegistry.ew, __jsRegistry.w, __jsRegistry.sf, __jsRegistry.sg, __jsRegistry.sh, __jsRegistry.k, __jsRegistry.o, __jsRegistry.aq)||window);
__jsRegistry.sl = __globalRegistry["srYkQdw"] || (__globalRegistry["srYkQdw"] = (function(i,r,s){var e="__animation",u=s.create().translateY(0);function l(t){this.column=t}return l.prototype={onStartRolling:function(){var n=this.column;u.applyTo(n),n.style.transitionDuration="unset",i.addClass(n,e)},onStopRolling:function(){var n=this.column;i.removeClass(n,e)},translateY:function(n){var a=this.column,o=s.create().translateY(n,"px");o.applyTo(a)},translateYWithTransition:function(n,a){var o=this.column;o.style.transitionDuration=a+"ms";var m=this;r.run(function(){r.run(function(){m.translateY(n)})})}},l})(__jsRegistry.s, __jsRegistry.aq, __jsRegistry.av)||window);
__jsRegistry.sm = __globalRegistry["sjPeQ7Q"] || (__globalRegistry["sjPeQ7Q"] = (function(I,h,V,d,f,v,g,l,p){var w="motivator-game-slot_column_list",S="motivator-game-slot_item";function c(i,t){this.model=i,this.root=t;var o=h.byDataId(t);this.dom=o,this.items=t.getElementsByClassName(S),this.itemsCount=this.items.length/6,this.columns=t.getElementsByClassName(w),this.columnViews=[];var e=this;l(this.columns,function(n){e.columnViews.push(new g(n))}),this.rootHeight=this.columns[0].parentNode.offsetHeight,this.initModel(i),this.buttonsView=new d(o,i),this.resultView=new f(o,i),this.forecastView=new v(o,i)}return c.prototype={onStartRolling:function(){this.resultView.onStartRolling(),this.buttonsView.onStartRolling(),this.itemHeight=this.items[0].offsetHeight,l(this.columnViews,function(t){t.onStartRolling()}),this.columnCounts=0},onStopRolling:function(){this.buttonsView.onStopRolling();var t=this;setTimeout(function(){t.completeRollingAnimation()},this.model.stopDelay)},canAutoStart:function(){return!this.buttonsView.isActivated()},completeRollingAnimation:function(t,o){var e=0,n=this;l(this.columnViews,function(s,r){var u=window.getComputedStyle(s.column),m=p.getTransformStyleTranslateY(u);s.onStopRolling(),s.translateY(m);var a=n.calculatePickData(m,r);s.translateYWithTransition(a.translateY,a.translateTime),e=Math.max(e,a.translateTime)}),setTimeout(function(){var s=Math.floor(Math.random()*(n.itemsCount-1));n.completePickup(s)},e)},calculatePickData:function(t,o){var e=this.itemHeight,n=this.rootHeight,s=n,r=s-t;o==0&&(this.pickedItemIndex=Math.floor(r/e)+1+this.model.stopItemShift);var u=o*this.model.shiftPerSlot,m=this.pickedItemIndex+u,a=-m*e+s,j=Math.floor(this.model.timeItem*(t-a)/e);return{index:m,translateY:a,translateTime:j}},completePickup:function(t){var o=this;setTimeout(function(){o.openForecast(t)},o.model.openDelay)},openForecast:function(t){this.forecastView.onOpenForecast(t,this.resultView,this.buttonsView)},initModel:function(t){var o=this.model.timeItem*this.itemsCount;l(this.columns,function(e){e.style.animationDuration=o+"ms"})}},c})(__jsRegistry.s, __jsRegistry.md, __jsRegistry.w, __jsRegistry.sf, __jsRegistry.sg, __jsRegistry.sh, __jsRegistry.sl, __jsRegistry.k, __jsRegistry.aw)||window);
__jsRegistry.sn = __globalRegistry["w0s2qzg"] || (__globalRegistry["w0s2qzg"] = (function(i,r,e){var s="__animation",l=e.create().rotate(0);function m(t){this.dom=t}return m.prototype={onStartRolling:function(){var n=this.dom.animationContainer;l.applyTo(n),n.style.transitionDuration="unset",i.addClass(n,s)},onStopRolling:function(){var n=this.dom.animationContainer;i.removeClass(n,s)},rotateDegrees:function(n){var o=this.dom.animationContainer,a=e.create().rotate(n,"deg");a.applyTo(o)},rotateDegreesWithTransition:function(n,o){var a=this.dom.animationContainer,u=this;r.run(function(){a.style.transitionDuration=o+"ms",r.run(function(){u.rotateDegrees(n)})})}},m})(__jsRegistry.s, __jsRegistry.aq, __jsRegistry.av)||window);
__jsRegistry.so = __globalRegistry["wC9jTNQ"] || (__globalRegistry["wC9jTNQ"] = (function(r,c,w,u,h,d,v,g){var a=30,p="motivator-game-wheel_item",m="__picked";function l(i,t){this.model=i,this.root=t;var e=c.byDataId(t);this.dom=e,this.items=t.getElementsByClassName(p),this.itemsCount=this.items.length,this.initModel(i),this.buttonsView=new u(e,i),this.resultView=new h(e,i),this.forecastView=new d(e,i),this.containerView=new v(e)}return l.prototype={onStartRolling:function(){this.resultView.onStartRolling(),this.buttonsView.onStartRolling(),this.containerView.onStartRolling()},onStopRolling:function(){this.buttonsView.onStopRolling();var t=this;setTimeout(function(){t.completeRollingAnimation()},this.model.stopDelay)},canAutoStart:function(){return!this.buttonsView.isActivated()},completeRollingAnimation:function(){var t=this.containerView,e=window.getComputedStyle(this.dom.animationContainer),o=g.getTransformStyleAngleDegrees(e);t.onStopRolling(),t.rotateDegrees(o);var n=this.calculatePickData(o);t.rotateDegreesWithTransition(n.rotateAngle,n.translateTime);var s=this;setTimeout(function(){s.completePickup(n.index)},n.translateTime)},calculatePickData:function(t){var e=Math.floor(t/a)+1+this.model.stopItemShift,o=e%this.itemsCount,n=e*a,s=Math.floor(this.model.timeItem*(n-t)/a);return{index:o,rotateAngle:n,translateTime:s}},completePickup:function(t){var e=this.items[t];r.addClass(e,m);var o=this;setTimeout(function(){r.removeClass(e,m),o.openForecast(t)},o.model.openDelay)},openForecast:function(t){this.forecastView.onOpenForecast(t,this.resultView,this.buttonsView)},initModel:function(t){var e=this.dom.animationContainer,o=this.model.timeItem*this.itemsCount;e.style.animationDuration=o+"ms"}},l})(__jsRegistry.s, __jsRegistry.md, __jsRegistry.ew, __jsRegistry.sf, __jsRegistry.sg, __jsRegistry.sh, __jsRegistry.sn, __jsRegistry.aw)||window);
__jsRegistry.sp = __globalRegistry["moMoxbA"] || (__globalRegistry["moMoxbA"] = (function(m,s,r,l,u,w,c,v){function g(t,e){switch(t.gameType){case"CAROUSEL":return new u(t,e);case"GRID":return new w(t,e);case"SLOT":return new c(t,e);case"WHEEL":return new v(t,e)}}function a(t,e){var i=g(t,e);this.view=i,t.autoStartScroll&&i.canAutoStart()&&this.view.onStartRolling();var o=this.onRelayout.bind(this);r.attachUntilRendering(l.resize,o,this)}a.prototype={relaunch:{tap:function(e,i){var o=this.view,n=o.buttonsView;n&&(n.isStopping()||(n.isStarting()?o.onStopRolling():o.onStartRolling()))}},start:{tap:function(e,i){this.view.onStartRolling()}},stop:{tap:function(e,i){this.view.onStopRolling()}},selectItem:{tap:function(e,i,o){this.view.onSelectItem(i,o)}},onRelayout:function(){var e=this.view.onRelayout;e&&e.call(this.view)}},a.isInstant=!0,s.register("motivatorAnimationGame",a)})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.w, __jsRegistry.bd, __jsRegistry.sj, __jsRegistry.sk, __jsRegistry.sm, __jsRegistry.so)||window);
__jsRegistry.sq = __globalRegistry["mPDgzZg"] || (__globalRegistry["mPDgzZg"] = (function(d){d.motivatorInviteProposed=function(t){var a=t.target,e=[],o=document.querySelectorAll("[data-excluded-id]");o.forEach(function(c){e.push(c.dataset.excludedId)}),a.value=e.join(",")}})(__jsRegistry.c)||window);
__jsRegistry.sr = __globalRegistry["uSpV5g"] || (__globalRegistry["uSpV5g"] = (function(t){var a="feature.badge",n=navigator.setAppBadge;t.create({name:"userEventsMonitor",update:function(i){if(n){var e=i.newEvents;e?navigator.setAppBadge(e.messages+e.marks+e.events||0).then(function(){logClientEvent(a,["ok"])},function(o){logClientEvent(a,["fail"])}):(logClientEvent(a,["cleared"]),navigator.clearAppBadge())}}})})(__jsRegistry.x)||window);
__jsRegistry.ss = __globalRegistry["lsoW3gQ"] || (__globalRegistry["lsoW3gQ"] = (function(e,s,r,t){e.logObserverSupport=s.create({init:function(){var i=t.isNative?"native":"fallback";r.log("observerSupport",[i])}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.a, __jsRegistry.dh)||window);
__jsRegistry.st = __globalRegistry["anG1kPQ"] || (__globalRegistry["anG1kPQ"] = (function(n){return{sendPresent:function(e,r){return n.run("promoAvatar.sendPresent",{friendId:e,decorId:r})},create:function(e,r){return n.run("promoAvatar.create",{photoId:e,decorId:r})},commit:function(e,r,t,d){return n.run("promoAvatar.commit",{photoId:e,imageToken:r,decorId:t,encryptedPhotoId:d})}}})(__jsRegistry.fx)||window);
__jsRegistry.su = __globalRegistry["pPk38hQ"] || (__globalRegistry["pPk38hQ"] = (function(T,G,_,M,i,v,B){var k=30;function I(n,u){for(var c=u.querySelectorAll(".promo-avatar-card"),o=0,E=c.length;o<E;o++){var f=c[o],l=f.dataset;l.cardIndex=String(o),l.currentDecorIndex=String(0),x(f),O(f)&&l.imageToken&&p(f)}function x(e){for(var r=n.cards[e.dataset.cardIndex],t=r.decorKeys[e.dataset.currentDecorIndex],a=n.decorsRegistry[t],d=e.getElementsByClassName("promo-avatar-card_decor")[0].childNodes,y=0,L=d.length;y<L;y++){var s=d[y];s.nodeType===Node.ELEMENT_NODE&&((a.type==="STATIC"||a.type==="OLD_YOUNG")&&i.hasClass(s,"promo-avatar-card_one-frame")?(s.src=D(a.type==="STATIC"?a.firstFrameOverlaySrc:a.filteredPhotoSrc),i.removeClass(s,"hidden")):a.type==="DYNAMIC"&&i.hasClass(s,"promo-avatar-card_sprite")?(s.style.width=a.spriteWidth+"px",s.style.backgroundImage="url("+D(a.spriteSrc)+")",s.style.backgroundSize=a.spriteWidth+"px 224px",s.style.animationDuration=a.durationSec+"s",s.style.animationTimingFunction="steps("+a.framesNumber+", end)",i.removeClass(s,"hidden")):i.addClass(s,"hidden"))}var j=a.decorId||t;if(!r.friendId){var A=e.getElementsByClassName("js-promo-avatar-card_button-target");if(A.length){var F=A[0];F.href=C(a.section,null,j)}}var W=u.getElementsByClassName("promo-avatar-content_footer-link")[0];W.href=C(a.section,r.friendId,j)}function D(e){return e&&e[0]===n.decorUrlsInfo.prefixPlaceholder?n.decorUrlsInfo.commonPrefix+e.substring(1):e}function C(e,r,t){return(r?n.openAppInfo.friendTemplate.replace(n.openAppInfo.friendIdPlaceholder,r):n.openAppInfo.selfTemplate).replace(n.openAppInfo.decorIdPlaceholder,t).replace(n.openAppInfo.sectionPlaceholder,e)}this.findCardElem=function(e){return T.findParent(e,function(r){return!!r.dataset.cardIndex},u)},this.renderNextDecor=function(e){var r=Number(e.dataset.currentDecorIndex),t=n.cards[e.dataset.cardIndex].decorKeys.length;e.dataset.currentDecorIndex=String((r+1)%t),x(e)},this.sendPresentAvatar=function(e){var r=m(e),t=g(e);setTimeout(function(){r.parentNode&&N(r)},200),v.sendPresent(t.cardData.friendId,t.decorId).then(function(){b(e,n.sendAvatarInfo.buttonSentText)})},this.decorateInPlace=function(e){var r=m(e),t=g(e);N(r),v.create(t.cardData.selfPhotoId,t.decorId).then(function(a){var d=e.dataset;d.imageToken=a.token,d.encryptedPhotoId=a.encryptedPhotoId,d.attempt=String(1),p(e)})};function p(e,r){var t=e.dataset;if(!(Number(t.attempt)>k)){var a=(n.commitPromoAvatarInfo.delay||2e3)*(r?3:1);setTimeout(function(){K(e)},a)}}function K(e){var r=g(e),t=e.dataset;v.commit(r.cardData.selfPhotoId,t.imageToken,r.decorId,t.encryptedPhotoId).then(function(a){a.status==="IN_PROGRESS"?(t.attempt=String(Number(t.attempt)+1),p(e)):a.status==="SUCCESS"&&(delete t.imageToken,delete t.encryptedPhotoId,delete t.attempt,b(e,n.commitPromoAvatarInfo.decoratedText),B(a.ajaxEnvelopes))},function(){t.attempt=String(Number(t.attempt)+1),p(e,!0)})}function N(e){var r=S(e);i.addClass(r,"__process")}function O(e){var r=m(e);if(!r)return!1;var t=S(r);return i.hasClass(t,"__process")}function S(e){return e.getElementsByClassName("js-promo-avatar-card_button-target")[0]}function b(e,r){var t=m(e),a=t.parentNode;a.removeChild(t);var d=document.createElement("div");d.className="promo-avatar-card_done",d.textContent=r,a.appendChild(d)}function m(e){return e.getElementsByClassName("js-promo-avatar-card_button")[0]}function g(e){var r=n.cards[e.dataset.cardIndex],t=r.decorKeys[e.dataset.currentDecorIndex],a=n.decorsRegistry[t].decorId||t;return{cardData:r,decorId:a}}}I.prototype={cardSelectNextDecor:{tap:function(u,c){var o=this.findCardElem(c);o&&!h(o)&&this.renderNextDecor(o)}},buttonSendPresent:{tap:function(u,c){var o=this.findCardElem(c);h(o)||(P(o),this.sendPresentAvatar(o))}},buttonDecorateInPlace:{tap:function(u,c){var o=this.findCardElem(c);h(o)||(P(o),this.decorateInPlace(o))}}};function h(n){return!!n.dataset.used}function P(n){n.dataset.used="true"}I.isInstant=!0,_.register("promoAvatarPortlet",I)})(__jsRegistry.t, __jsRegistry.bb, __jsRegistry.am, __jsRegistry.bw, __jsRegistry.s, __jsRegistry.st, __jsRegistry.de)||window);
__jsRegistry.sv = __globalRegistry["nlGluA"] || (__globalRegistry["nlGluA"] = (function(r){function e(o,t){this.node=t,this.model=o}e.prototype={moveToBlock:{tap:function(t,a){var i=this.model.blockId;if(i){var n=document.getElementById(i);n&&n.scrollIntoView(!0)}}}},r.register("navByBlock",e)})(__jsRegistry.am)||window);
__jsRegistry.sw = __globalRegistry["pLAMXiw"] || (__globalRegistry["pLAMXiw"] = (function(){var n,a;return{getPhotoUploadIntentParams:function(){return n},setPhotoUploadIntentParams:function(o,e,r,d){n={files:o,getUploadUrl:e,photoLimit:r,limitError:d}},clearPhotoUploadIntentParams:function(){n=void 0},getVideoUploadIntentParams:function(){return a},setVideoUploadIntentParams:function(o){a={files:o}},clearVideoUploadIntentParams:function(){a=void 0}}})()||window);
__jsRegistry.sx = __globalRegistry["pQwEgxg"] || (__globalRegistry["pQwEgxg"] = (function(p,n,s,i){function a(r,l){}a.prototype={uploadPhotoInteraction:{change:function(l,t){i.log("postingTopicForm",["status","photo"]);var o=t.files;if(o&&o.length){var e=JSON.parse(t.dataset.model);n.setPhotoUploadIntentParams(o,e.getUploadUrl,e.photoLimit,e.limitError),s.change(t.dataset.link)}}},uploadVideoInteraction:{change:function(l,t){i.log("postingTopicForm",["status","video"]);var o=t.files;o&&o.length&&(n.setVideoUploadIntentParams(o),s.change(t.dataset.link))}}},p.register("postingFormEntry",a)})(__jsRegistry.am, __jsRegistry.sw, __jsRegistry.ew, __jsRegistry.a)||window);
__jsRegistry.sy = __globalRegistry["mPv1oow"] || (__globalRegistry["mPv1oow"] = (function(e){return{onOuterFocus:e.create(),onGrabbedBlockRemove:e.create(),draftSavedEvent:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.sz = __globalRegistry["sneSyQ"] || (__globalRegistry["sneSyQ"] = (function(A,F,b){var P=window.history,l=A.isSupported,v,c,g=!1,m,w,j,T=0,I=function(e){return Date.now()+"_"+T++},y=function(e){return Object.assign({},e)},N=function(e){return function(r,a){a[e]=r}},n={},i={};function q(t){window.localStorage.setItem(c(v),JSON.stringify(t))}function O(t){var e=window.localStorage.getItem(t);return e?JSON.parse(e):null}function B(){m>j||w?(s.saveStore(),b.draftSavedEvent.trigger()):s.flushStore()}function H(){var t={time:Date.now(),store:n};l&&(q(t),delete t.store);var e={};e[c(v)]=t,F.changeHistoryState({rv_savedPage:e})}function U(){return(P.state||{}).rv_savedPage}function h(t){var e=U();return e&&e[t]}function D(t){var e=U();return e?(delete e[t],!0):!1}function C(){g&&s.saveOrClean()}var s={getStore:function(){return n},initStore:function(e){v=e.name||document.domain,c=e.uidGenerator||I,g=e.persistent,m=j=Date.now(),i||(i={}),window.addEventListener("beforeunload",C)},discardStore:function(){n=null,i=null,window.removeEventListener("beforeunload",C)},createState:function(e){return e(n)},createStore:function(e,r,a,d){var o=Object.assign({},e);r=r||y;var S=!1,E=P.state;if(E&&g){var u=c(v);if(d){var _=l?O(u):h(u),f=_&&_.store;f&&(a&&a(o,f)?(D(u),Object.assign(o,f),w=_.time,S=!0):s.flushStore())}else{var L=h(u);if(L)if(confirm("Восстановить черновик?")){var f=l?O(u):L;D(u),f&&Object.assign(o,f.store)}else s.flushStore()}}return n=r(o)||y(o),{store:n,isRestored:S}},update:function(e,r,a,d){if(a.hasOwnProperty(r)){var o=a[r]||N(r);o(e,n),d&&(m=Date.now())}},saveOrClean:B,saveStore:H,flushStore:function(){var e=c(v);l&&window.localStorage.removeItem(e),D(e),w=null},sync:function(e,r){var a=Object.keys(r);return e.observe(a.join(" "),function(d,o,S){var E=this.event&&this.event.name!=="complete";s.update(d,S,r,E)},{init:!0})},addCommand:function(e,r){i[e]=r},removeCommand:function(e){delete i[e]},exec:function(e,r){var a=i[e];a&&(m=Date.now(),a(n,r))},addRequestParams:function(e){n.requestParams=e},getAndClearRequestParams:function(e){var r=n.requestParams;return delete n.requestParams,r}};return s})(__jsRegistry.ch, __jsRegistry.os, __jsRegistry.sy)||window);
__jsRegistry.ta = __globalRegistry["slPWXiw"] || (__globalRegistry["slPWXiw"] = (function(){return{STUB_FN:function(){},STUB_OBJ:{}}})()||window);
__jsRegistry.tb = __globalRegistry["RGtcoA"] || (__globalRegistry["RGtcoA"] = (function(A,x,O,C){var i=A.STUB_FN,P=function(){return Promise.resolve()},h="[\\w-]+",g="txt",v="param",U="param_opt",E="query",u={};u[g]=new RegExp("^("+h+")$"),u[v]=new RegExp("^{("+h+")}$"),u[U]=new RegExp("^:("+h+"):$"),u[E]=new RegExp("{\\?("+E+")}");var f={INACTIVE:0,ACTIVE:1,CLEAR:2};function T(r,e){e=e||{},this.name=j(r),this.schemas=Object.create(null),this.url=e.url,this.status=f.CLEAR,this.payload=null,this.loaded=null,this.request=Object.create(null),this.pageInstance=null;var t=e.routes;t&&this.addRoutes(t),this.onPageFetched=e.onPageFetched||P,this.onPageLoaded=e.onPageLoaded||i,this.onPageUpdate=e.onPageUpdate||i,this.onPageLeave=e.onPageLeave||i,this.onPageReady=e.onPageReady||i,this.onHashChanged=e.onHashChanged||i}T.prototype={getRequestField:function(e){return this.request[e]},getParam:function(e){var t=this.request;return t.params&&t.params[e]},getQuery:function(){return this.request.query},getRequestParams:function(){return(this.request||{}).params||{}},isFromHistory:function(){return!!this.getRequestField("fromHistory")},extractUrlParams:function(e,t){var o={};if(e&&e.length>1){for(var a=t.tokens,n=1,s=0,c=a.length;s<c;s++){var l=a[s],R=l.type;if(R!==g){var _=e[n++];_&&(o[l.key]=_)}}return o}return null},addRoutes:function(e){if(e){x.isArray(e)||(e=[e]);for(var t=0,o=e.length;t<o;t++){var a=e[t];if(!this.schemas[a]){var n=a;a[0]==="/"&&(n=n.substring(1));var s=n.search(u[E]),c=s>-1;c&&(n=n.substring(0,s));var l=n.split("/");if(l){var R=l.map(N);this.schemas[a]={regexp:L(R),tokens:R,useQuery:c}}}}}return this},matchRoute:function(e){if(e){var t=this.schemas,o=t[e];if(o)return d(e);for(var a in t){var n=t[a],s=e.match(n.regexp);if(s)return d(a,s)}}return null},resolveRoute:function(e){var t=p(e),o=this.matchRoute(t.pathname);if(o){var a=this.request={url:t.href},n=this.schemas[o.name];a.params=this.extractUrlParams(o.match,n),t.hash&&(a.hash=t.hash.substring(1));var s=t.search;return s&&(s=s.substring(1),a.query=n.useQuery?C.paramsFromQuery(s):s),this}return null},start:function(){this.status=f.ACTIVE},finish:function(){this.status=f.INACTIVE},flushCache:function(){this.status=f.CLEAR,this.loaded=!1,this.payload=null}};function d(r,e){return{name:r,match:e}}function N(r){for(var e in u){var t=r.match(u[e]);if(t)return new I(e,t[1])}}function D(r,e){var t;return r===g?t="\\/"+e:r===v?t="(?:\\/("+h+"))":r===U&&(t="(?:\\/("+h+"))?"),t}function L(r){for(var e="",t=0,o=r.length;t<o;t++)e+=r[t].regexp;return new RegExp("^"+e+"$")}function j(r){return r.substr(-1)==="/"?r.substr(0,r.length-1):r}function I(r,e){this.type=r,this.key=e,this.regexp=D(r,e)}function p(r){return r.startsWith("http")||(r=m(r)),new URL(r)}function m(r){var e=document.createElement("a");return e.href=r,e.href}return{construct:T,createLinkWithData:function(e,t){return O.simpleReplacer(e,t,{regexp:new RegExp("{([\\w-]+)}","g")})},Status:f,buildURL:p,createAbsoluteUrl:m}})(__jsRegistry.ta, __jsRegistry.d, __jsRegistry.fe, __jsRegistry.m)||window);
__jsRegistry.tc = __globalRegistry["RTV1K5A"] || (__globalRegistry["RTV1K5A"] = (function(A,f,y,P,Q,D,M,k,p,S,q,b,F,O){var L="SUCCESS",W="FAIL",_=window.location,d=window.history,v=Object.create(null),c=null,h=null,C=null,H=null,g=P.create(),m=P.create(),T=P.create();function R(a){var e=a.settings||{};if(!e.ractiveHandled){var t=a.target;if(t.nodeName==="A"||t.form)return u.go(a.uri,{navigationClick:!0})}}function x(a){c&&g.trigger({route:c,url:a.url})}function N(a){u.go(_.href,{isPopstate:!0,popstateEvent:a,skipMandatory:!0}),T.trigger(a)}function w(a){var e=a.route;if(e.status===f.Status.ACTIVE){e.onPageLeave(a);var t=e.pageInstance;t&&(t.teardown(),e.pageInstance=null),e.finish()}}var I=function(e){e.redirected||y.show()};function K(a,e){var t=a.split("#"),n=t[1];if(typeof n<"u"){var o=e.split("#");if(o[0]===t[0]){var s=o[1];return{prev:s,curr:n,same:s===n}}else{var i=f.buildURL(a),r=f.buildURL(e);if(i.pathname===r.pathname){var l=i.search,j=r.search;if((l===j||k.compareValues(p.paramsFromQuery(l),p.paramsFromQuery(j)))&&i.origin===r.origin)return{prev:r.hash,curr:i.hash}}}}return null}function V(a){var e=d.state;if(e){var t=e.rvjs_mandatoryParams;if(t)return p.replaceParams(a,Object.assign(t,p.params(a)))}return a}function J(){for(var a in v){var e=v[a];e.status!==f.Status.CLEAR&&e.flushCache()}}var u={init:function(e){H=e.url404,u.bind()},bind:function(){S.register(R),A.outlinkClickEvent.attach(x),window.addEventListener("popstate",N,!1),g.attach(w),m.attach(I),D.navigating.attachOnce(function(){c=null,h=null})},unbind:function(){J(),S.revoke(R),A.outlinkClickEvent.detach(x),window.removeEventListener("popstate",N,!1),g.detach(w),m.detach(I),c=null,h=null},createRoute:function(e,t,n){return new f.construct(e,n).addRoutes(t)},addRoute:function(e,t,n){var o=u.createRoute(e,t,n);return v[e]=o,o},getRoute:function(e){return v[e]},matchRoute:function(e){for(var t in v){var n=v[t];if(n.resolveRoute(e))return n}},setMandatoryParams:function(e,t){if(e===null){var n=d.state;delete n.rvjs_mandatoryParams,d.replaceState(n,document.title,null)}else{var o=!0,s={};t?t.forEach(function(i){var r=e[i];r!==void 0&&(s[i]=r,o=!1)}):o=k.isNullOrEmpty(s=e),o||q.changeHistoryState({rvjs_mandatoryParams:s})}},getPageKey:function(e){return(e||d.state||{}).pageKey},load:function(e){return M.request(e,"POST",{"st.reqType":"TEMPLATE"}).withToken().send()},go:function(e,t){t=t||{};var n=t.isPopstate,o=!0;!n&&e===C&&(e=t.url404||H,O.load("posting.topic.client").then(function(E){y.show(E.messages.pageNotFound,null,{type:y.NotificationType.WARNING})}));var s=t.urlParams;s&&(e=u.createLinkWithData(e,s)),t.skipMandatory||(e=V(e));var i=c,r=u.matchRoute(e);if(r){r.start();var l=null;if(i)if(r===i&&!t.reloadIfSamePage){if(o=!1,l=K(e,JSON.parse(h||"{}").url),l){if(l.same)return!0;r.onHashChanged(l)}r.onPageUpdate(r.request.params||{})}else g.trigger({route:i,next:r});if(n?r.request.fromHistory=!0:d[t.replace?"replaceState":"pushState"](Object.assign(d.state||{},{pageKey:r.name}),null,e),o){var j=t.controllerUrl||r.url;(!r.loaded||t.cacheIgnore)&&j?u.load(j).then(function(E){var G=this;r.loaded=!0,r.payload=E,r.onPageFetched(E).then(function(){u.render(r)},function(){m.trigger(G)})},function(){m.trigger(this)}):u.render(r)}return c=r,setTimeout(function(){h=JSON.stringify(r.request)},0),!0}else i&&g.trigger({route:i});return c=null,h=null,n?(F.treatAsSamePage=!0,b.onPopState(t.popstateEvent),!0):t.navigationClick?!1:(C=e,S.go(e,null,{ractiveHandled:!0}))},render:function(e){var t=e.onPageLoaded();t?t.then(function(n){e.pageInstance=n,e.onPageReady({status:L})},function(){e.onPageReady({status:W})}):e.onPageReady({status:L})},beforeLeaveEvent:g,popState:T,routingAjaxErrorEventAttach:function(e){m.attach(e)},routingAjaxErrorEventDetach:function(e){m.detach(e)},createLinkWithData:function(e,t){return f.createLinkWithData(e,t)}};return u})(__jsRegistry.dz, __jsRegistry.tb, __jsRegistry.es, __jsRegistry.u, __jsRegistry.ew, __jsRegistry.w, __jsRegistry.bw, __jsRegistry.aa, __jsRegistry.m, __jsRegistry.ea, __jsRegistry.os, __jsRegistry.ft, __jsRegistry.ev, __jsRegistry.gm)||window);
__jsRegistry.td = __globalRegistry["vsUQkbg"] || (__globalRegistry["vsUQkbg"] = (function(){function u(){return u=Object.assign||function(I){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var N in n)Object.prototype.hasOwnProperty.call(n,N)&&(I[N]=n[N])}return I},u.apply(this,arguments)}var _={POSTING_MAIN:null,POSTING_EDIT:null,SETTINGS_MAIN:null,PHOTO_MAIN:null,PHOTO_CROP:null,FRIENDS_MAIN:null,VIDEO_MAIN:null,VIDEO_UPLOAD:null,MUSIC_MAIN:null,POLL_MAIN:null,ADLINK_MAIN:null,LINK_MAIN:null,REORDER_MAIN:null,TEXT_INLINE_LINK_MAIN:null,HOBBY_AGREEMENT_MAIN:null,DONATE_MAIN:null};return u({},_,{updateField:function(l,n){this[l]=n}})})()||window);
__jsRegistry.te = __globalRegistry["sl5xw"] || (__globalRegistry["sl5xw"] = (function(){var t={};return{add:function(n,e){t[n]=e},get:function(n){return t[n]},getJson:function(n){var e={};return e[n]=this.get(n),e},remove:function(n){var e=!!t[n];return delete t[n],e}}})()||window);
__jsRegistry.tf = __globalRegistry["Fq7z55Q"] || (__globalRegistry["Fq7z55Q"] = (function(t){function e(){return Ractive.extend({template:"#postingFormButtonsTpl",data:function(){return{pts:t.getStore().pts,isActive:!1}}})}return{create:e}})(__jsRegistry.sz)||window);
__jsRegistry.tg = __globalRegistry["rxoaWdw"] || (__globalRegistry["rxoaWdw"] = (function(){var r={};function o(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,n).get})}o(r,{get configureRactive(){return c},get renderComponent(){return a}});function i(e){return window.Ractive.extend({template:"#"+e+"-template"})}function c(){window.Ractive.DEBUG_PROMISES=window.Ractive.DEBUG=!!window.DEVMODE}function a(e,t,n){var u=i(e);return new u(Object.assign({target:"#"+e,data:t},n))}return r})()||window);
__jsRegistry.th = __globalRegistry["pmEj7Yw"] || (__globalRegistry["pmEj7Yw"] = (function(l,O,v,r,t,c,f,u,R,I,g,S,h){var F=100,d="ractive-js";function m(){t.unbind(),u.attachHistoryManager(),r.discardStore()}var j,A=v.create({name:"postingFormView",update:function(o){if(o=o||{},window.Ractive){h.configureRactive(),u.detachHistoryManager(),t.init({url404:c.POSTING_MAIN}),T();var _=document.getElementById("pageModel").dataset,e=JSON.parse(_.model);j=e.server,r.initStore({uidGenerator:function(s){return s+"_"+e.server.uId},persistent:o.persistentStore});var i=!!e.restoreDialogHTML,w=function(s,L){return i&&!s.editTopicData&&s.formID===L.formID},M=r.createStore(e,null,w,i);t.setMandatoryParams(g.paramsFromQuery(location.search.substring(1)),["st.rtu","st.groupId","st.topicId"]);var p=y();t.go(p,{replace:!0}),i&&M.isRestored&&setTimeout(function(){S.show({url:location.href,contentHtml:e.restoreDialogHTML,dontPush:!0}).then(function(a){a&&(r.flushStore(),r.createStore(e),t.go(p,{replace:!0,reloadIfSamePage:!0}))})},F)}else l.loader.use(d,function(){A.update(o)})},discard:m});function y(){var n=location.pathname;return n==="/dk"&&window.pageCtx.stateId==="posting"?c.POSTING_MAIN:location.href}function T(){f.add("posting-footer",I.create())}return{RACTIVE_JS_ALIAS:d,appRootId:"#postingFormAppRoot",getServerData:function(){return j},discard:m}})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.x, __jsRegistry.sz, __jsRegistry.tc, __jsRegistry.td, __jsRegistry.te, __jsRegistry.ft, __jsRegistry.w, __jsRegistry.tf, __jsRegistry.m, __jsRegistry.jn, __jsRegistry.tg)||window);
__jsRegistry.ti = __globalRegistry["pibFLTg"] || (__globalRegistry["pibFLTg"] = (function(b,T,y,O,R,L,j,k,I,w){var D={};Object.defineProperty(D,"close",{enumerable:!0,get:function(){return M}});var c="ld",q="dialog",m="cmpl",G="."+q+"-"+c,N=Date.now(),s;function H(V){var e,a,g,v,r,E,i,d,C=document.getElementById("posting-form-dialog"),h=document.getElementById("content"),f=R.create("ajaxPostingFormDialog");function _(){if((!e||!e.isVisible())&&Date.now()-N>1e3){var t=f.getState(),o=t.url;o&&A(o,{dontPush:!0})}}function W(){e&&J()}f.activated.attach(_),f.deactivated.attach(W);function X(t){var o=t.indexOf("#");return o!==-1&&t.indexOf(V.hash,o)!==-1}(0,L.register)(function(t){var o=t.target,l=t.uri;return l&&X(l)?(i=o,setTimeout(function(){A(l)},0),!0):!1});function x(){i&&(i.focus(),i=null)}function A(t,o){if(!C)return;var l=o&&o.dontPush||!1;S(),z(),(0,j.clear)(r),p(!0),e.addCssClass(c).removeCssClass(m),a.appendChild(g),a.setAttribute("aria-busy","true"),e.show();function K(){F(),e.initContentScroll()}function Q(){var n=u.xhr.responseText;l||f.go({url:t}),n&&n.length>0&&setTimeout(function(){r.className=E,O(n,{onComplete:K}),e.removeCssClass(c).addCssClass(m)},0)}function U(){e.unlockScrolling(),s()}function Y(){e.removeCssClass(c).addCssClass(m),a.setAttribute("aria-busy","false"),(0,j.remove)(g);var n=u.xhr;if(n&&n.status===200){var P=n.getResponseHeader(I.ERROR_MESSAGE_HEADER);P!=null&&P.length>0&&e.unlockScrolling()}}var u=(0,y.request)(t,"GET");u.header("X-Requested-Popup","1"),u.then(Q,U).anyway(Y).send(),d=u}function z(){!e&&C&&(e=new T(C),r=e.getContentElement(),E=r?r.className:"",a=e.getElement(),g=a.querySelector(G))}function S(){d&&(d.abort(),d=null)}function p(t){h&&h.setAttribute("aria-hidden",String(t))}function F(){a.focus(),v=a}function J(){S(),e.unlockScrolling(),p(!1),s(),x()}document.addEventListener("focus",function(t){a&&!a.contains(t.target)&&setTimeout(F,0)},!0),s=function(){p(!1),(0,w.discard)(),e&&e.isVisible()&&e.close(),v&&(0,k.blurNodeFnWrapper)(v),i&&setTimeout(x,0)}}var B={name:"postingFormDialog",init:H};(0,b.create)(B);function M(){s&&s()}return D})(__jsRegistry.x, __jsRegistry.ge, __jsRegistry.bw, __jsRegistry.de, __jsRegistry.gg, __jsRegistry.ea, __jsRegistry.s, __jsRegistry.gf, __jsRegistry.et, __jsRegistry.th)||window);
__jsRegistry.tj = __globalRegistry["pFbxXLA"] || (__globalRegistry["pFbxXLA"] = (function(s){var d={};function P(r,e){for(var t in e)Object.defineProperty(r,t,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,t).get})}P(d,{get getCfg(){return y},get load(){return O},get subscribe(){return C}});var p="$Hash$",o={},f=[],u={},g=void 0,b=6e4;function j(r){for(var e=u[r]||[],t=e.length;t--;)e[t]()}function H(r){return o.hasOwnProperty(r)}function a(r){var e=o[r];return e.data}function h(r,e){return o[r]={data:e.data,hash:e[p]},j(r),a(r)}function T(){for(var r=[],e=f.length,t=0;t<e;t+=1){var n=f[t],c=o[n];r.push({alias:n,hash:c[p]||"0"})}return r}function D(){(0,s.invoke)("pms/update",{info:T()}).then(function(r){for(var e=Object.keys(r),t=e.length,n=0;n<t;n+=1){var c=e[n];h(c,r[c])}}),g=void 0,m()}function w(r){r&&(f.indexOf(r)===-1&&f.push(r),m())}function m(){!g&&b>0&&(g=window.setTimeout(D,b))}function O(r){return H(r)?Promise.resolve(a(r)):(0,s.invoke)("pms/get",{name:r}).then(function(e){return h(r,e)})}function y(r){return w(r),a(r)}function C(r,e){u[r]||(u[r]=[]),u[r].push(e)}if(typeof window<"u"){var k;window.cfgStore={getCfg:y,load:O,subscribe:C};var i=(k=window.inline_resources)==null?void 0:k.pms;if(i!==void 0){for(var v in i)i.hasOwnProperty(v)&&(h(v,i[v]),w(v));window.inline_resources.pms={}}}return d})(__jsRegistry.bx)||window);
__jsRegistry.tk = __globalRegistry["l6I2yuA"] || (__globalRegistry["l6I2yuA"] = (function(s,o,i){var t;function r(){var e=i.start();return t||(t=o.load("dailyphoto.client")),t.then(function(n){s.dailyphoto.pts=n,e.resolve()}).catch(function(){t=void 0,e.reject()}),e}function a(){s.dailyphoto.pts={getLMsg:function(n,c){return n}}}return{init:a,getLocale:r}})(__jsRegistry.c, __jsRegistry.gm, __jsRegistry.n)||window);
__jsRegistry.tl = __globalRegistry["hQEGLLQ"] || (__globalRegistry["hQEGLLQ"] = (function(c,v,f,A,u,T,m){var h="data-module",j="data-activate",y="activate",E="data-deactivate",I="deactivate",s=c.loader,r=[];function l(e){return T.get(["resolve","reject","all"]).then(function(){f.all([s.use("quasi-state"),m.getLocale()]).then(function(){s.use("dailyphoto-model").then(e)})})}function p(e){return c.dailyphoto[A.camelCase(e)]}function g(e){var t=e.getAttribute(h);r.push({module:t,element:e}),l(function(){s.use(t,function(){var o=p(t);v(r,function(a){if(!(a.hookInstance||a.module!==t))try{var n=a.element,i=n.getAttribute(j)||y;a.hookInstance=typeof o=="function"?new o:o,a.hookInstance[i](n)}catch(_){u.INSTANCE.sendErrorWithInfo(_,"dailyphoto","HookFactory activate")}})})})}function C(e){e&&d(function(t){return e.contains(t.element)})}function R(){d(),r.length=0}function d(e){for(var t=r.length;t--;){var o=r[t];if(e&&!e(o)||!o.hookInstance)return;try{var a=o.element,n=a.getAttribute(E)||I;o.hookInstance[n](a),r.splice(t,1)}catch(i){u.INSTANCE.sendErrorWithInfo(i,"dailyphoto","HookFactory deactivate")}}}return{create:g,deactivateRoot:C,deactivateAll:R,getDailyPhotoDeps:l}})(__jsRegistry.c, __jsRegistry.k, __jsRegistry.n, __jsRegistry.fe, __jsRegistry.f, __jsRegistry.ae, __jsRegistry.tk)||window);
__jsRegistry.tm = __globalRegistry["uwcSq6w"] || (__globalRegistry["uwcSq6w"] = (function(t,o,s,i,l){function u(e){var r="<!--",n="-->",a=r.length,c=n.length;return!e||e.indexOf(r)===0&&(e=e.substring(a,e.length-c).replace(/\\u0026#45;\\u0026#45;/g,"--"),!e.length)?null:JSON.parse(e)}function d(){t.dailyphoto.parseJSONCorrected=u,t.dailyphoto.debounce=function(e,r){return o(r,e)},t.dailyphoto.throttle=function(e,r){return s(r,e)},t.dailyphoto.parent=function(e,r){return i.findParent(e,function(n){return l.hasClass(n,r)})}}return{init:d,parseJSONCorrected:u}})(__jsRegistry.c, __jsRegistry.el, __jsRegistry.bb, __jsRegistry.t, __jsRegistry.s)||window);
__jsRegistry.tn = __globalRegistry["cAGk00A"] || (__globalRegistry["cAGk00A"] = (function(i){var e;return{get:function(t){if(!e){var r=document.getElementById("dailyphoto-config");r&&(e=i.parseJSONCorrected(r.innerHTML))}if(e)return t?t(e):!0}}})(__jsRegistry.tm)||window);
__jsRegistry.to = __globalRegistry["mRb8sUw"] || (__globalRegistry["mRb8sUw"] = (function(d){var o,l;return{init:function(){o=document.getElementById("dailyphoto-menu")},show:function(t,n,h){var i=t.getBoundingClientRect(),e=o.style;e.top=i.top+"px",e.left=i.left+"px",e.width=i.width+"px",e.height=i.height+"px",e.display="block",d(n),l=t},hide:function(){var t=o.style;if(t.display="none",t.top=null,t.left=null,t.width=null,t.height=null,l){var n=document.createEvent("CustomEvent");n.initCustomEvent("shortcut-menu-hide",!0,!0,void 0),l.dispatchEvent(n)}}}})(__jsRegistry.de)||window);
__jsRegistry.tp = __globalRegistry["dgEc1Cg"] || (__globalRegistry["dgEc1Cg"] = (function(i,d,f,j,h,b,r){var n={};function u(o,t){var e=n[o];e&&e.trigger(t)}function l(o,t){h.show({url:o,dontPush:!0,onShowed:function(){u(t,!0),r.hide()},onClosed:function(){u(t,!1)}})}function p(){i.dailyphoto.Layers={subscribe:function(t,e){n[t]||(n[t]=b.create()),n[t].attach(e)},unsubscribe:function(t,e){var s=n[t];s&&s.detach(e)}},i.dailyphoto.dialog=l}function c(){}return c.prototype={launch:{tap:function(t,e){var s=e.getAttribute("data-url"),a=e.getAttribute("data-layer-id");l(s,a)}},toast:{tap:function(t,e){var s=e.getAttribute("data-url");f.request(s,"POST").then(function(a){d(a.response),r.hide()}).send()}}},j.register("dailyphotoDialog",c),{init:p}})(__jsRegistry.c, __jsRegistry.de, __jsRegistry.bw, __jsRegistry.am, __jsRegistry.gh, __jsRegistry.u, __jsRegistry.to)||window);
__jsRegistry.tq = __globalRegistry["hT4hq6A"] || (__globalRegistry["hT4hq6A"] = (function(f,T,o,I,A,E,r){var i="dailyphoto",R="owner",c="group",m="system",d="contest",_="rating",D="3_2",L="1_",j="2",g="4_",a;function N(e){a=e;var t=l(window.location.href);if(!p(t)&&O())return G();if(p(t))return y(t)}function H(e){var t=l(e.uri);if(p(t)){if(O()||e.target.getAttribute("target")==="_self")return!1;if(a&&a.state){var n=l(a.state.url);if(E.areEqual(t,n))return a=void 0,!1}return y(t),!0}return!1}function h(e){var t;return e&&(t=e.match(/^\d_\d+/)),t&&t[0]?t[0]:null}function y(e){var t,n;i===e[2]?(t=e[1],n=h(e[3]),c===e[0]&&(t=L+t),n&&u(t,n)):i===e[1]?(t=e[0],n=h(e[2]),n&&u(t,n)):(R===e[1]&&(m===e[2]?Y():(t=e[2],n=e[3],u(t,n))),d===e[1]&&(t=e[2],S(e)?C(t):M(t)))}function S(e){return e.length>3&&i.equals(e[0])&&d.equals(e[1])&&_.equals(e[3])}function M(e){s(g+e,null)}function C(e){s(g+e,_)}function Y(){s(D,j)}function u(e,t){s(e,t)}function l(e){if(!e)return!1;var t=A.path(e),n=t.replace(/^https?:\/\//,"");return n.split("/").slice(1)}function p(e){return e?i===e[2]&&e.length===4||(i===e[2]||i===e[1])&&e.length===3||i===e[0]&&e.length>1:!1}function O(){return o.dailyphoto.dailyphotoModel&&o.dailyphoto.dailyphotoModel.isLayerOpened()}function G(){return o.dailyphoto.dailyphotoModel&&o.dailyphoto.dailyphotoModel.closeLayer(!0)}function s(e,t){T.getDailyPhotoDeps(function(){o.dailyphoto.dailyphotoModel&&o.dailyphoto.dailyphotoModel.handleUrl(e,t)})}function U(e){var t=l(e);if(i===t[2]&&t.length===4&&c===t[0]){var n=h(t[3]);n&&(n=n.split("_")[1]);var w=t[1];return{photoId:n,groupId:w}}return null}function v(e){var t=U(e);t&&r.sendMediascopeForMediaRequest(t.photoId,t.groupId,r.EVENT_ID.SHOW,r.PLACE_ID.FEED,r.CONTENT_TYPE.DAILY_PHOTO)}function P(){o.dailyphoto.historyManager={pushState:function(t){f.accountState({url:t},"pushState"),v(t)},replaceState:function(t){f.accountState({url:t},"replaceState"),v(t)}},f.statePopping.attach(N),I.register(H)}return{init:P}})(__jsRegistry.ft, __jsRegistry.tl, __jsRegistry.c, __jsRegistry.ea, __jsRegistry.m, __jsRegistry.bl, __jsRegistry.ja)||window);
__jsRegistry.tr = __globalRegistry["iI5FjQ"] || (__globalRegistry["iI5FjQ"] = (function(o,s,n,i,a,u,t){var l=4,c=new t().withPattern(t.UUID_VERSIONED),d={generate:function(){return c.getNewToken(l)}};return{init:function(){o.dailyphoto.import=function(r){switch(r){case"webapi":return Promise.resolve(u);case"dailyphoto-layer":return new Promise(function(e){o.loader.use(r,function(){e(o.dailyphoto.dailyphotoLayer)})});case"dailyphoto-model":return new Promise(function(e){o.loader.use(r,function(){e(o.dailyphoto.dailyphotoModel)})});case"OK/ShortcutMenuAdapter":return Promise.resolve(a);case"OK/NonBlockingTip":return Promise.resolve({create:s});case"OK/uuid":return Promise.resolve(d)}},o.dailyphoto.getImportUrl=function(r){try{return i.get(function(e){return e.paths[r]})}catch(e){n.INSTANCE.sendErrorWithInfo(e,"dailyphoto","getImportUrl fail")}}}}})(__jsRegistry.c, __jsRegistry.ee, __jsRegistry.f, __jsRegistry.tn, __jsRegistry.to, __jsRegistry.bx, __jsRegistry.cg)||window);
__jsRegistry.ts = __globalRegistry["lxgb3wg"] || (__globalRegistry["lxgb3wg"] = (function(t,u){function o(i,s,a){for(var r=[],n=0;n<arguments.length;n++)arguments[n]!==void 0&&r.push(arguments[n]);return r}return{init:function(){t.dailyphoto.logger={success:function(a,r,n,e){u.log(a,o(r,n,e))},duration:function(s,a,r,n,e){u.logTimed(s,a,o(r,n,e))},clob:function(a,r,n,e){u.log("js",["jserror",a,e],r)}}}}})(__jsRegistry.c, __jsRegistry.a)||window);
__jsRegistry.tt = __globalRegistry["uyagGkw"] || (__globalRegistry["uyagGkw"] = (function(o,n,s,l,i,c,d){return{init:function(){o.dailyphoto.vanilla={ajax:function(e){return n.request(e.url,"POST",e.data).send()},updateBlockModelCallback:function(e){var t=e.response,u=l.createDomTree(t),j=u.querySelectorAll('[action="replace"][target-id]');s(j,function(m){var r=m.getAttribute("target-id");r&&d.deactivateRoot(document.getElementById(r))}),c(t)}},o.dailyphoto.navigateOnUrlFromJS=function(a){i.change(a)}}}})(__jsRegistry.c, __jsRegistry.bw, __jsRegistry.k, __jsRegistry.cq, __jsRegistry.ew, __jsRegistry.de, __jsRegistry.tl)||window);
__jsRegistry.tu = __globalRegistry["vEXAqLA"] || (__globalRegistry["vEXAqLA"] = (function(o,r,d){var n="dailyPhotoAutoplayObserver",i,t=!1,s={registered:function(){},track:function(a){i&&i(a)}};r.addListener(s);function v(){t||(r.initObserver(n,{viewThreshold:.9}),d.rendering.attachOnce(function(){t=!1}),t=!0)}function c(e,a){i=a,v(),r.observe(e,s,n)}function f(e){r.unobserve(e,n)}return{init:function(){o.dailyphoto.viewportTracker={add:c,remove:f}}}})(__jsRegistry.c, __jsRegistry.dj, __jsRegistry.w)||window);
__jsRegistry.tv = __globalRegistry["lMhNaeg"] || (__globalRegistry["lMhNaeg"] = (function(s,e,i,o,t,d,l,a,m,j,r,n,u,h){i.domLoaded.then(function(){t.get()&&(s.dailyphoto=s.dailyphoto||{},d.init(),a.init(),l.init(),m.init(),j.init(),r.init(),n.init(),u.init(),h.init())}),e.create({name:"dailyPhotoLauncher",update:function(y){o.create(y.target)},discard:function(){o.deactivateAll()}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.p, __jsRegistry.tl, __jsRegistry.tn, __jsRegistry.tp, __jsRegistry.tq, __jsRegistry.tr, __jsRegistry.tk, __jsRegistry.ts, __jsRegistry.to, __jsRegistry.tt, __jsRegistry.tm, __jsRegistry.tu)||window);
__jsRegistry.tw = __globalRegistry["aiMxV2w"] || (__globalRegistry["aiMxV2w"] = (function(y,w,u,o,P,p){var j=function(){},c=1e3,n,t,d,f,m=P.rendering;function s(r,i,a,e){r.phase!==o.Phase.DISCARDING&&(i&&i(r),r.inViewport?r.inPlay||(a(r),r.inPlay=!0):r.inPlay&&(e(r),r.inPlay=!1))}var Y=p(function(i){s(i,function(a){var e=a.target;f&&f!==e&&(d&&d.pause&&d.pause(),o.unobserve(f)),f=e},function(a){var e=a.videoTag,l=a.target;if(e)e.play();else{var T=l.querySelector(".video-main-tag"),v=JSON.parse(T.getAttribute("data-video")||{});v.initiallyMuted=!0,v.isAutoplay=!0,a.videoTag=y.embed(T,v,function(){o.unobserve(l)}),d=a.videoTag}},function(a){var e=a.videoTag;e&&e.pause&&e.pause()})},c),b=p(function(i){s(i,function(a){var e=a.target.querySelector(".video-main-tag");if(!e){o.unobserve(a.target);return}},function(a){var e=a.target.querySelector(".video-main-tag");if(n===e){window.playYTPlayer&&window.playYTPlayer();return}var l=a.target.getAttribute("data-ytdata");y.runYTplayer(e,l,!0,{0:function(){e===n&&(o.unobserve(t),n=void 0,t=void 0)}}),t&&o.unobserve(t),n=e,t=a.target},function(a){var e=a.target.querySelector(".video-main-tag");if(n===e){window.pauseYTPlayer&&window.pauseYTPlayer();return}})},c);function V(r){s(r,null,function(i){var a=i.videoTag;if(a)a.play&&a.play();else{var e=i.target;i.videoTag=u.gifPlayer.touch(e,!1).element}},function(i){i.videoTag&&i.videoTag.pause&&i.videoTag.pause()})}function g(r){return function(i){var a=i.target;o.observe(a,{registered:j,track:r}),m.attachOnce(function(){o.unobserve(a)})}}u.autoplayVideo=g(Y),u.autoplayYTVideo=g(b),u.autoplayGif=g(V)})(__jsRegistry.gd, __jsRegistry.x, __jsRegistry.c, __jsRegistry.dj, __jsRegistry.w, __jsRegistry.el)||window);
__jsRegistry.tx = __globalRegistry["hac67ag"] || (__globalRegistry["hac67ag"] = (function(i,s,t,a){function n(){window.addEventListener("message",e),a.rendering.attachOnce(function(){window.removeEventListener("message",e)})}n.isInstant=!0,i.register("headSlide",n);function e(d){var o=d.data;o&&o.close&&(t.invoke("/headSlide/close"),s.removeClass(document.body,"head-slide"),s.remove(document.getElementById("top-slides-iframe")),window.removeEventListener("message",e))}})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.bx, __jsRegistry.w)||window);
__jsRegistry.ty = __globalRegistry["ppnbOJw"] || (__globalRegistry["ppnbOJw"] = (function(o,r,a,l){var s=function(n,e){var i=this;if(this.model=n,this.profileCopyAndToast={tap:function(){r(i.profileLink,i.toastText),a.close.trigger()}},this.shareNative={tap:function(){navigator.share({url:i.profileLink})}},this.profileLink=e.dataset.profileLink,this.toastText=e.dataset.toastText,"share"in navigator){var t=e.querySelector(".profile-share-outside_li.hidden");t&&l.removeClass(t,"hidden")}};s.isInstant=!0,o.register("profileShareOutside",s)})(__jsRegistry.am, __jsRegistry.eh, __jsRegistry.he, __jsRegistry.s)||window);
__jsRegistry.tz = __globalRegistry["tBiLDAw"] || (__globalRegistry["tBiLDAw"] = (function(v,p,m,g){var c={};Object.defineProperty(c,"HOBBY_STREAM",{enumerable:!0,get:function(){return e}});var _="discovery_hobby_menu_click",d="hobby_tag_click",f="portlet_hobby_click",e="stream/discovery";function s(u,i){p.request(g.WEB_API_PREFIX+"/hobby/log","POST").dataJson({parameters:{actions:[u]}}).anyway(function(){m.change(i)}).withToken().send()}var l=function(i,h){this._model=i,this.root=h,this.tagClick={tap:function(t,a){t.preventDefault();var r=a.href,o=a.dataset.slug?[a.dataset.slug]:[],n={operation:_,params:o};s(n,r)}},this.cardTagClick={tap:function(t,a){t.preventDefault();var r=a.href,o=a.dataset.slug?[e,a.dataset.slug]:[e],n={operation:d,params:o};s(n,r)}},this.portletItemClick={tap:function(t,a){t.preventDefault();var r=a.href,o=a.dataset.slug?[e,a.dataset.slug]:[e],n={operation:f,params:o};s(n,r)}}};return l.isInstant=!0,v.register("tagLogger",l),c})(__jsRegistry.am, __jsRegistry.bw, __jsRegistry.ew, __jsRegistry.bx)||window);
__jsRegistry.ua = __globalRegistry["lFg1bLw"] || (__globalRegistry["lFg1bLw"] = (function(u,d,f,r,m,p){var g="flow.client",n=[],s,c;function i(t){for(var e=0;e<n.length;e++)n[e](t)}function h(t){try{var e=t.getAttribute("data-value");if(e)return JSON.parse(e)}catch(l){}return{}}function v(){var t=document.getElementById("content"),e=t.querySelector(".js-loader");e&&e.classList.remove("hidden")}function j(){var t=document.getElementById("content"),e=t.querySelector(".js-loader");e&&e.classList.add("hidden")}function S(t){return function(){var e=document.getElementById("content"),l=e.querySelector(".js-initial-data"),y=h(l);Promise.all([s,c]).then(function(P){j(),window.flow(e,{version:t.version,source:t.source,initialData:y,l10n:P[0],history:{back:function(){r.back()},pushState:function(a){r.accountState({url:a},"pushState")},replaceState:function(a){r.accountState({url:a},"replaceState")},onHistoryChange:function(a){n.push(a)}},logger:m.logging.logger})})}}d.create({name:"flow",init:function(e){c=f.loadCss(e.styleSrc),s=p.load(g)},update:function(e){u.loader.use(e.scriptSrc,S(e)),r.statePopping.attach(i)},discard:function(){n=[],r.statePopping.detach(i),v()}})})(__jsRegistry.c, __jsRegistry.x, __jsRegistry.q, __jsRegistry.ft, __jsRegistry.dd, __jsRegistry.gm)||window);
__jsRegistry.ub = __globalRegistry["hnr2xiw"] || (__globalRegistry["hnr2xiw"] = (function(u,l,f,g,p){var i="__checked",c=(function(){function m(n,t){var e=this;this.model=n,this.root=t,this.onSubmit=function(s){var r=e.getCheckedInputs();if(r.length>0){var o,a=r[0].value,E={detail:{id:a}};(o=e.bannerRootElement)==null||o.dispatchEvent(new CustomEvent(p.FEED_BANNER_HIDE_EVENT_NAME,E))}},this.otherReasons=t.querySelector(".other-reason-toggle");var d=t.getAttribute("data-cntr-id");if(d&&(this.bannerRootElement=document.getElementById(d),this.form=f.closest(t,"form.js-submit"),this.form)){this.inputReasons=this.form.querySelectorAll("input"),this.form.addEventListener("submit",this.onSubmit);var h=function(s){var r=s.state,o=s.dialogDom;if(r==="close"&&o){var a;(a=e.form)==null||a.removeEventListener("submit",e.onSubmit),u.ajaxDialogState.unsubscribe(h)}};g.navigated.attachOnce(function(){var s;(s=e.form)==null||s.removeEventListener("submit",e.onSubmit),u.ajaxDialogState.unsubscribe(h)},this),u.ajaxDialogState.subscribe(h)}}var v=m.prototype;return v.getCheckedInputs=function(){return Array.from(this.inputReasons).filter(function(t){return t.checked})},m})();c.prototype.toggleView={change:function(v,n){if(this.otherReasons){var t=n.classList.contains("other-reason-toggle_input"),e=this.otherReasons.classList;t&&!e.contains(i)?e.add(i):t||e.contains(i)&&e.remove(i)}}},c.isInstant=!0,l.register("hideReasons",c)})(__jsRegistry.c, __jsRegistry.am, __jsRegistry.s, __jsRegistry.w, __jsRegistry.hw)||window);
__jsRegistry.uc = __globalRegistry["rB2ycqQ"] || (__globalRegistry["rB2ycqQ"] = (function(s,d){var n={};Object.defineProperty(n,"RoseWindChart",{enumerable:!0,get:function(){return a}});function u(l,i){return{type:"radar",data:{labels:l,datasets:[{data:i,fill:!0,backgroundColor:"rgba(255, 119, 0, 0.12)",borderColor:"rgb(255, 119, 0)",borderWidth:2,pointRadius:4,pointBackgroundColor:"rgb(255, 119, 0)",pointBorderColor:"#fff",pointHitRadius:24}]},options:{responsive:!1,elements:{line:{borderWidth:3}},scales:{r:{suggestedMin:0,suggestedMax:100,startAngle:-45,pointLabels:{color:"#999999",font:{family:"Arial",size:12,lineHeight:1.5}},ticks:{display:!1,maxTicksLimit:3},angleLines:{color:"#F0F0F0",lineWidth:2},grid:{color:"#F0F0F0",circular:!0,lineWidth:2}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#FFFFFF",bodyColor:"#666666",borderColor:"rgba(0, 0, 0, 0.04)",borderWidth:1,borderRadius:4,caretSize:0,padding:8,position:"average",usePointStyle:!0,boxWidth:0,boxHeight:0,xAlign:"center",yAlign:"bottom",callbacks:{title:function(r){return""},label:function(r){var t=r.label,o=r.raw;return t+=" "+o+"%",t}}}}}}}var a=function(i,e){this._model=i,this._root=e,(0,s.use)("chart-lib",function(){var r=JSON.parse(e.getAttribute("data-labels")),t=JSON.parse(e.getAttribute("data-numbers")),o=u(r,t),b=e.querySelector(".js-chart-rating"),g=b.getContext("2d");new window.Chart(g,o)})};return a.isInstant=!0,(0,d.register)("roseWindChart",a),n})(__jsRegistry.q, __jsRegistry.am)||window);
__jsRegistry.ud = __globalRegistry["xn6K3SA"] || (__globalRegistry["xn6K3SA"] = (function(s,o){s.addFuncHandler("xScrollableBlockArrClick",{tap:function(c){var l=c.target;if(l.classList.contains("arrow")){var n=l.classList.contains("right"),a=o.parentBySelector(l,".x-scrollable");if(a!==null){var e=a.querySelector(".js-x-scrollable-block");if(e!==null){var r=parseInt(e.getAttribute("data-x-scroll-step")||"");r=Number.isNaN(r)?100:r;var t=e.scrollLeft;e.scrollLeft=n?t+r:t-r}}}}})})(__jsRegistry.an, __jsRegistry.t)||window);
__jsRegistry.ue = __globalRegistry["a2f9omg"] || (__globalRegistry["a2f9omg"] = (function(s,a,l,o,r){var d=(0,a.calc)(!0).width,e=(0,s.create)({layout:d>=o.tablet?"desktop":"mobile"});return a.resize.attach(function(i){var m=i.width,t;m>=o.tablet?t="desktop":t="mobile",e.set("layout",t)}),r.storeFields({appStateObservableModel:e}),{layout:e,platform:l.desktop}})(__jsRegistry.ab, __jsRegistry.bd, __jsRegistry.ak, __jsRegistry.bk, __jsRegistry.c)||window);
__jsRegistry.uf = __globalRegistry["cSWDd5w"] || (__globalRegistry["cSWDd5w"] = (function(e,s){var d=(0,e.create)();s.storeFields({communityAddBus:d})})(__jsRegistry.u, __jsRegistry.c)||window);
__jsRegistry.ug = __globalRegistry["y0q7srw"] || (__globalRegistry["y0q7srw"] = (function(d,g,w){var o={};Object.defineProperty(o,"YandexMetricService",{enumerable:!0,get:function(){return c}});function u(a,s,n){window.ym(a,"reachGoal",s,n)}var c=(function(){function a(){}return a.sendGoal=function(n,i,l){i===void 0&&(i=!1);var f=window.ym,v=window.ymUrl,r=d.pageCtx.ymId;if(w.logging.info('Sending ya log "'+n+'": '+!!(f&&r)+". "+Date.now()),!r)return!1;if(f)u(r,n,l);else if(i){var e=window,t="ym";e[t]=e[t]||function(){(e[t].a=e[t].a||[]).push(arguments)},e[t].l=1*new Date,e.ym(r,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,ut:"noindex"}),u(r,n,l),(0,g.use)(v||"https://mc.yandex.ru/metrika/tag.js")}else return!1;return!0},a})();return window.OK.YM=c,o})(__jsRegistry.bv, __jsRegistry.q, __jsRegistry.dd)||window);
__jsRegistry.uh = __globalRegistry["hnvVlQ"] || (__globalRegistry["hnvVlQ"] = (function(a,l,d,o,h,v){var s={};Object.defineProperty(s,"HobbyShowLanding",{enumerable:!0,get:function(){return n}});var n=(function(){function r(g,t){var e=this;this.leftTimeToPlay=1e3*30,this.videoViewTimer=null,this.lastStartTime=null,this.isVideoStarted=!1,this.videoEl=null,this.viewBtn=null,this.goBtn=null,this.logEvent=function(i){a.YandexMetricService.sendGoal(i),l.MytrackerImpl.pushEvent({type:"reachGoal",goal:i})},this.logInitEvents=function(){e.logEvent("hobbyshow::init");var i=v.okApp;i&&e.logEvent("hobbyshow::possible_webview"),o.logging.info("isRunningInWebView: "+i)},this.showBtnClickHandler=function(){e.logEvent("hobbyshow::button::show")},this.goBtnClickHandler=function(){e.logEvent("hobbyshow::button::follow")},this.startPlaying=function(){e.leftTimeToPlay<=0||e.videoViewTimer||(e.isVideoStarted||(e.isVideoStarted=!0,e.logEvent("hobbyshow::video::start")),e.lastStartTime=Date.now(),e.videoViewTimer=setTimeout(function(){e.leftTimeToPlay=0,e.logEvent("hobbyshow::video::view")},e.leftTimeToPlay))},this.pausePlaying=function(){e.leftTimeToPlay<=0||!e.lastStartTime||(e.leftTimeToPlay-=Date.now()-e.lastStartTime,e.videoViewTimer&&e.leftTimeToPlay>0&&(clearTimeout(e.videoViewTimer),e.videoViewTimer=null))},this.addVideoHandlers=function(){h.videoStartEvent.attachOnce(function(i){o.logging.info("Player loaded: "+!!i),i&&(e.videoEl=i,i.addEventListener("play",e.startPlaying),i.addEventListener("playing",e.startPlaying),i.addEventListener("pause",e.pausePlaying),i.addEventListener("waiting",e.pausePlaying))})},this.removeVideoHandlers=function(i){i.removeEventListener("play",e.startPlaying),i.removeEventListener("playing",e.startPlaying),i.removeEventListener("pause",e.pausePlaying),i.removeEventListener("waiting",e.pausePlaying)},this.element=t,t.getAttribute("data-movie-seen-duration")&&(this.leftTimeToPlay=Number(t.getAttribute("data-movie-seen-duration"))),this.logInitEvents(),this.addVideoHandlers(),this.viewBtn=t.querySelector(".landing_button__view"),this.viewBtn&&this.viewBtn.addEventListener("click",this.showBtnClickHandler),this.goBtn=t.querySelector(".landing_button__go"),this.goBtn&&this.goBtn.addEventListener("click",this.goBtnClickHandler)}var u=r.prototype;return u.destroy=function(){this.videoEl&&this.removeVideoHandlers(this.videoEl),this.viewBtn&&this.viewBtn.removeEventListener("click",this.showBtnClickHandler),this.goBtn&&this.goBtn.removeEventListener("click",this.goBtnClickHandler),this.videoViewTimer&&(clearTimeout(this.videoViewTimer),this.videoViewTimer=null)},r})();return n.isInstant=!0,(0,d.register)("hobbyShowLanding",n),s})(__jsRegistry.ug, __jsRegistry.fy, __jsRegistry.am, __jsRegistry.dd, __jsRegistry.gd, __jsRegistry.ak)||window);
__jsRegistry.ui = __globalRegistry["hRxHQuA"] || (__globalRegistry["hRxHQuA"] = (function(S,s,f){var b="loadSubsUrl",v="field_scat",g="mkAuthorSelectBlock",p=(function(){function c(){var o=this,e;this.category=(e={},e[s.UI_EVENTS_MAPPING.change]=function(a,r){var n=r.value,i=r.dataset[b],l=o.findSubCategoriesSelect(r);!i||l===null||(l.disabled=!0,o.loadSubCategories(i,n).then(function(d){o.replaceSubCategoriesInSelect(l,d),d.length>0&&(l.disabled=!1)}))},e);var t;this.section=(t={},t[s.UI_EVENTS_MAPPING.change]=function(a,r){var n=document.getElementById(g);n!==null&&n.classList.toggle("dsn",r.value!=="MK")},t)}var u=c.prototype;return u.replaceSubCategoriesInSelect=function(e,t){e.options.length=0;var a=new DocumentFragment,r=e.dataset.unsetOptionText;if(r){var n=new Option(r,"");n.selected=!0,a.appendChild(n)}t.forEach(function(i){a.appendChild(new Option(i.title,i.slug))}),e.appendChild(a)},u.findSubCategoriesSelect=function(e){var t=(0,f.parentBySelector)(e,"form");return t===null?null:t.querySelector("#"+v)},u.loadSubCategories=function(e,t){return window.webapi.invoke(e,{categoryId:t})},c})();(0,S.register)("hobbyFilters",p)})(__jsRegistry.am, __jsRegistry.al, __jsRegistry.t)||window);
__jsRegistry.uj = __globalRegistry["y59f2GQ"] || (__globalRegistry["y59f2GQ"] = (function(r,o,n){var e=function(a,s){var c=this;this.root=s,this.log={tap:function(l,d){var t=d.getAttribute("data-goal"),i=t!=null?t:c.goal;i&&n.YandexMetricService.sendGoal(i),(0,o.onTap)(l)}},a&&(this.goal=a.goal)};e.isInstant=!0,r.register("yaClick",e)})(__jsRegistry.am, __jsRegistry.an, __jsRegistry.ug)||window);
__jsRegistry.uk = __globalRegistry["uXzEhyA"] || (__globalRegistry["uXzEhyA"] = (function(c){var p={};function u(n,r){for(var e in r)Object.defineProperty(n,e,{enumerable:!0,get:Object.getOwnPropertyDescriptor(r,e).get})}u(p,{get getRelativePosition(){return O},get isNativeAppWithMethod(){return f},get logGameOp(){return g},get prepareJsonDelegateBooleanCallbackFunc(){return v},get prepareJsonDelegateCallbackFunc(){return s}});function f(n){return!!(window.OKApp&&window.OKApp[n])}function g(n,r,e,t){var o={operation:n,appId:r?String(r):"0",eventId:e?String(e):"",eventData:t?String(t):""},a=JSON.stringify(o);(0,c.log)("FAPI",["gameOp",a])}function s(n,r,e){var t="fapi"+n+"Callback";return window[t]=function(o){try{var a=JSON.parse(o),l=a.success,i;l&&e?i=e(a):i=a.text||a.message,l?r.success(i||"ok"):r.error(i||"error")}catch(w){r.error(w.message)}},t}function v(n,r,e){e===void 0&&(e="cancel");var t="fapi"+n+"Callback";return window[t]=function(o){try{o?r.success("ok"):r.error(e)}catch(a){r.error(a.message)}},t}function O(n,r){for(var e={x:0,y:0},t=n;t!==null&&t!==r;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.parentElement;return e}return p})(__jsRegistry.a)||window);
__jsRegistry.ul = __globalRegistry["aweZMw"] || (__globalRegistry["aweZMw"] = (function(g,a,n){var p=function(r,e){var i=this;this.model=r,this.root=e,this.appClickListener=function(s){for(var t=s.target;!t.href;)t=t.parentElement;var l=t.getAttribute("data-app-id");(0,a.logGameOp)("apps_dating.click_app",l,i.logKey),n.change(t.href)},this.footerClickListener=function(s){(0,a.logGameOp)("apps_dating.click_footer","0",i.logKey),i.datingLink&&n.change(i.datingLink)},this.clickLink={tap:this.appClickListener},this.clickDating={tap:this.footerClickListener},this.logKey=e.getAttribute("data-log-key"),this.datingLink=e.getAttribute("data-dating-link")};(0,g.register)("appsDating",p)})(__jsRegistry.am, __jsRegistry.uk, __jsRegistry.ew)||window);
__jsRegistry.um = __globalRegistry["tulpZDg"] || (__globalRegistry["tulpZDg"] = (function(e,a){var t={};Object.defineProperty(t,"todayPageEventBuses",{enumerable:!0,get:function(){return r}});var r={openCityChangeModal:(0,e.create)(),newCityApplied:(0,e.create)()};return a.storeFields({todayPageEventBuses:r}),t})(__jsRegistry.u, __jsRegistry.c)||window);
__jsRegistry.un = __globalRegistry["vcoMasA"] || (__globalRegistry["vcoMasA"] = (function(c,E,S,T,u){var h="hidden",f=400,v,m=[],l,n,p=!1,y=document.getElementsByClassName("js-video-search-hider"),g=document.getElementsByClassName("js-tabs-list"),j=(0,u.debounce)(N,f),C=(0,u.debounce)(D,f);function I(e){var t=p?"st.search":"st.vdsrch";i(t,e!=null?e:""),j(!e),B(e),C()}function b(e){i("st.hd",e.hdQuality.selectedValue?"on":"off"),i("st.onlyChannels",e.onlyChannels.selectedValue?"on":"off");var t;i("st.duration",(t=e.duration.selectedValue)!=null?t:"")}function B(e){if(e){var t=document.location.href,a=m.find(function(R){return t.indexOf(o(R))!==-1});if(!a)return;n=a;var r=t.replace(o(a),o(l));return d(r)}if(n){var s=document.location.href.replace(o(l),o(n));d(s),n=void 0}}function D(){window.scrollY&&document.getElementById("wrapper").scrollIntoView({behavior:"smooth",block:"start"})}function o(e){return v+"="+e}function i(e,t){var a=new RegExp(e+"=[^&]*"),r=document.location.href,s;r.match(a)?s=e?r.replace(a,e+"="+encodeURIComponent(t)):r.replace(a,""):s=r+"&"+e+"="+t,d(s)}function d(e){return(0,S.changeHistoryState)("",e)}function N(e){e?(Array.from(y).forEach(function(t){return t.classList.remove(h)}),P()):Array.from(y).forEach(function(t){return t.classList.add(h)})}function P(){if(g[0]){var e=T.BehaviorFactory.getBehaviorIfExist(g[0],"tabsPopupSwitch");e==null||e.updateTabsDOMPosition()}}(0,E.create)({name:"videoSearch",init:function(t){v=t.stateIdParameterKey,m=t.stateIdsToBeReplaced,l=t.stateIdToReplace},update:function(t){p=t.isGlobalSearch,c.videoSearchBuses.changeQueryString.attach(I),c.videoSearchBuses.changeFilters.attach(b)},discard:function(){n=void 0,c.videoSearchBuses.changeQueryString.detach(I),c.videoSearchBuses.changeFilters.detach(b)}})})(__jsRegistry.mh, __jsRegistry.x, __jsRegistry.os, __jsRegistry.c, __jsRegistry.by)||window);
__jsRegistry.uo = __globalRegistry["tmxuIsA"] || (__globalRegistry["tmxuIsA"] = (function(e,r){var s={};Object.defineProperty(s,"toastManagerBuses",{enumerable:!0,get:function(){return t}});var t={init:(0,e.create)(),showToast:(0,e.create)(),pushToasts:(0,e.create)()};return r.storeFields({toastManagerBuses:t}),s})(__jsRegistry.u, __jsRegistry.c)||window);
__jsRegistry.up = __globalRegistry["tTFN1EA"] || (__globalRegistry["tTFN1EA"] = (function(s,i,o){var r={};Object.defineProperty(r,"registerToast",{enumerable:!0,get:function(){return n}});var t=[],e=!1;(0,o.create)({name:"toastManager",update:function(){s.toastManagerBuses.init.attach(function(){e||(e=!0,t.length>0&&(s.toastManagerBuses.pushToasts.trigger({toasts:[].concat(t)}),t.length=0))})},discard:function(){e=!1,t.length=0}});var n=function(a){e?s.toastManagerBuses.showToast.trigger({toast:a}):t.push(a)};return i.storeFields({registerToast:n}),r})(__jsRegistry.uo, __jsRegistry.c, __jsRegistry.x)||window);
__jsRegistry.uq = __globalRegistry["vZvJJHA"] || (__globalRegistry["vZvJJHA"] = (function(u){var t={};function o(e,n){for(var s in n)Object.defineProperty(e,s,{enumerable:!0,get:Object.getOwnPropertyDescriptor(n,s).get})}o(t,{get CustomMessageType(){return r},get vkMiniAppBuses(){return i}});var r=(function(e){return e.UPDATE_VIDEO_NATIVE_AD_STATUS="updateVideoNativeAdStatus",e})(r||{}),i={sendCustomMessage:(0,u.create)()};return t})(__jsRegistry.u)||window);
__jsRegistry.ur = __globalRegistry["nGfPkTQ"] || (__globalRegistry["nGfPkTQ"] = (function(A,s,o){var T="__disabled",t,a,n,i,d;function m(){s.vkMiniAppBuses.sendCustomMessage.attach(u)}function k(){s.vkMiniAppBuses.sendCustomMessage.detach(u)}function u(r){var e=r.type,M=r.payload;if(e===s.CustomMessageType.UPDATE_VIDEO_NATIVE_AD_STATUS){var c=M.isAd,v=M.erid;if(c){if(t)return o.show(t);a&&n&&o.show(v?n:a);var l=document.getElementById("native-ad-video-settings");l&&l.classList.add(T);var g=document.getElementById("native-ad-description");g&&i&&d&&(g.textContent=v?d:i)}}}(0,A.create)({name:"videoNativeAdSettings",init:function(e){e.defaultToastMessage?t=e.defaultToastMessage:(a=e.onlyMarkToastMessage,n=e.tokenAndMarkToastMessage),i=e.setOnlyMarkMessage,d=e.setTokenAndMarkMessage},update:m,discard:k})})(__jsRegistry.x, __jsRegistry.uq, __jsRegistry.ed)||window);
__jsRegistry.us = __globalRegistry["aTfmfWg"] || (__globalRegistry["aTfmfWg"] = (function(c,s,E,p,f,q,G,b,o,d,k,w,F){var v=!1,r;function j(e,t){this.model=e,this.elem=t}j.prototype={openPanel:{tap:function(){var t=this;u(t.elem,!1),p.tapPreview.attachOnce(function(){v&&u(m(),!0)})}},closePanel:{tap:function(){var t=this;u(t.elem,!0)}},uploadPhoto:function(t,n){var a=this;a.closePanel.tap.call(this);var i=t.name.split("."),y=!1;if(i.length){var T=c.messaging.config(),M=JSON.parse(T.fileUploadRestrictedExtensions),B=i[i.length-1];if(E(M,function(R){B==R&&(y=!0)}),y){var N=T.fileUploadRestrictionMessage;l("extension-validation",null,N);return}}var A=b.start(),C={file:t,task:A,uploadSuccessAdaptee:null,progressListener:null};return r=f.request(n.uploadUrl,"POST").attachFile(t).then(function(){P(n,0)},l,C).setExternal(),S(),a.currentUploadTask=C.task.currentTask=r.send(),a.currentUploadTask}};function P(e,t){setTimeout(function(){f.request(e.uploadCheckUrl,"POST").then(function(n){U(n,e)},l).anyway(h).withToken().send()},t)}function l(e,t,n){logClientEvent("messaging.file.upload.failed",[e]);var a=c.messaging.config().fileUploadUnknownError,i=n||a;k.show(i),h()}function U(e,t){var n=e.responseText;if(n&&n.length!==0){var a=JSON.parse(n).uploadStatus;a==="UPLOADING"||a==="PROCESSING"?P(t,1e3):a==="OK"?f.request(t.attachToMessageUrl,"POST").then(O,l).anyway(h).withToken().send():l(a)}}function O(e){var t=e.responseText;t&&t.length!==0&&(F(t),c.runBubbleCollapse&&c.runBubbleCollapse(!0),o.scrollDown.trigger())}function h(){s.removeClass(document.body,"js-sm-upldng");var e=o.find.postingForm();e&&s.removeClass(e,"ld");var t=document.getElementById("chat-file-upload-input");t&&(t.value=""),x()}function u(e,t){var n=e.getElementsByClassName("attachment-menu")[0];n&&(s.switchClass(n,t,"dsn"),v=!t)}function g(e){var t=m();t&&s.switchClass(t,e,"dsn")}p.register("attachmentPanel",j),o.attachmentMenuClose.attach(function(){var e=m();e&&u(e,!0)}),o.attachmentMenuHide.attach(function(){g(!0)}),d.fastPostingSucceed.attach(function(){g(!1)});function S(){var e=o.find.textarea();s.addClass(e,"untouchable")}function x(){var e=o.find.textarea();s.removeClass(e,"untouchable")}w.addFuncHandler("cancel-chat-upload",{tap:function(){d.cancelUpload.trigger()}}),d.cancelUpload.attach(function(){r&&(r.done||r.reject({isManualReject:!0}),location.reload())});function m(){return document.getElementById("chat-attachment-entrypoint")}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.k, __jsRegistry.am, __jsRegistry.bw, __jsRegistry.ls, __jsRegistry.t, __jsRegistry.n, __jsRegistry.fv, __jsRegistry.kz, __jsRegistry.es, __jsRegistry.an, __jsRegistry.de)||window);
__jsRegistry.ut = __globalRegistry["mnmIUZw"] || (__globalRegistry["mnmIUZw"] = (function(p,S,f,h){var v,r,o=h.localStorage;function u(){return"msg-input-drafts-"+r.currentUserId}function I(t,e){if(r=t,d()){var s="#conv-"+r.conversationId,n=u();try{var a=o.getItem(n);if(a){var c=JSON.parse(a),l=c[s];l&&setTimeout(function(){e.innerHTML=l,logClientEvent("messaging.recovery.success"),f.processFormControls.trigger({textInput:e}),f.checkDynamicFormInputs.trigger({focused:!0})},200)}}catch(i){logClientEvent("messaging.recovery.failed")}v=setInterval(function(){if(e)if(e.childNodes.length){var i=o.getItem(n)||"{}",g=JSON.parse(i);if(g[s]=e.innerHTML,document.querySelector("#fscaid .ic-err"))m(s);else try{o.setItem(n,JSON.stringify(g))}catch(E){logClientEvent("messaging.setItem.failed")}}else m(s)},r.messagingRecoveryTimeout)}}function j(t){if(d())try{m("#conv-"+t.conversationId)}catch(e){}}function L(t){t.messagingRecoveryEnabled&&v&&clearInterval(v)}function m(t){var e=u(),s=o.getItem(e);if(s){var n=JSON.parse(s);delete n[t];var a=JSON.stringify(n);try{o.setItem(e,a)}catch(c){logClientEvent("messaging.setItem.failed")}}}function b(t){if(r=t,r.visibleDraftAccent){var e=o.getItem(u());if(e){var s=JSON.parse(e),n=Object.keys(s);if(n.length){logClientEvent("messaging.recovery.success.drafts");for(var a=document.querySelectorAll(n.join(",")),c=0;c<a.length;c++){var l=s["#"+a[c].id],i=a[c].querySelector(".js-push-preview-cnt .stamp");if(i&&!i.jsDraftProcessed){var g=': <i class="js-local-storage-data">'+y("<br/>","\n",y("<br>","\n",l))+"</i>";i.innerHTML=r.draftMessageLabel+g,i.jsDraftProcessed=!0}}}}}}function y(t,e,s){return s.replace(new RegExp(t,"g"),e)}function d(){return r&&r.messagingRecoveryEnabled&&o&&r.conversationId&&r.conversationId!=-1}return S.messageLoaded.attach(function(){document.getElementById("dialogs")&&r!=null&&p.recoverDialogDrafts(r)}),f.fastPostingSucceed.attach(function(){d()&&j(r)}),{recoverDialogDrafts:function(e){b(e)},setupMessagingRecovery:function(e,s){return I(e,s)},stopLocalStorageThread:function(e){return L(e)}}})(__jsRegistry.c, __jsRegistry.fv, __jsRegistry.kz, __jsRegistry.bs)||window);
__jsRegistry.uu = __globalRegistry["pm2JKQ"] || (__globalRegistry["pm2JKQ"] = (function(q,r,E,b,u,C,l,L,k,N,w,_){var v=u.find,o;function p(){}p.prototype={multiUploadPhoto:function(t,a){var s=this;return o=k.uploadMultiple({fileInput:t,uploadData:a,onLimitViolation:T,onPrepareUploadContainer:S,alreadyUploaded:d(n()),uploadLimit:l.config.attachLimitValue,onSingleItemUploaded:M,onPreviewCreate:R,progressListener:A},N).then(V,I),u.smilePanelClose.trigger(),u.attachmentMenuClose.trigger(),s.currentUploadTask=o}},L.register("messagingMultiUpload",p);function S(){var e=n(),t=e.getElementsByClassName("js-clone-source")[0],a=t.cloneNode(!0);r.addClass(a,"js-m-attachment"),r.removeClass(a,"js-clone-source"),e.appendChild(a),r.removeClass(e,"dsn"),l.postingFormRelayout.trigger()}function M(e){var t=n();if(t){var a=t.lastChild,s=a.getElementsByClassName("js-upload-target")[0];if(s){if(x(e),a){var i=a.getElementsByClassName("file-progressbar")[0];i&&a.removeChild(i)}l.checkDynamicFormInputs.trigger({focused:!0})}}}function x(e){var t=e.photoId+","+e.uploadData.token,a="field_tokens",s=document.getElementById(a);s.value?s.value+=";"+t:s.value=t;var i=n().lastChild;i.setAttribute("data-photo-id",t.split(",")[0])}function R(e){var t=n().lastChild.querySelector(".js-upload-target");t.style.backgroundImage="url("+e+")"}function A(e){var t=n();t&&w.showProgress(e,t.lastChild.getElementsByClassName("file-progressbar")[0])}function T(){C.show(l.config.attachLimitLabel)}function j(e,t){e=e.filter(function(a){return a!=null}),t.value=e.join(";")}function d(e){return e.getElementsByClassName("js-m-attachment").length}function y(e){r.removeClass(document.body,"js-multi-uploading"),r.addClass(e,"dsn"),l.postingFormRelayout.trigger(),P();var t=e.getElementsByClassName("attach-list_tx")[0];t&&(r.clear(t),r.removeClass(e,"__gif-stop"))}b.addFuncHandler("remove-attachment",{tap:function(t){var a=n(),s=E.parentBySelector(t.target,".js-m-attachment"),i=s.getAttribute("data-photo-id");if(a.removeChild(s),d(a)==0)y(a);else{var h=document.getElementById("field_tokens"),c=h.value.split(";");if(c.length>1){for(var f=0;f<c.length;f++)if(i==c[f].split(",")[0]){c.splice(f,1);break}j(c,h)}else h.value=""}l.processFormControls.trigger({textInput:v.textarea()}),r.removeClass(m(),"dsn")}}),l.cancelUpload.attach(F);function F(){if(o&&!o.done){o.reject({isManualReject:!0});var e=n();if(e){var t=e.lastChild;r.hasClass(t,"js-m-attachment")&&t.getElementsByClassName("file-progressbar").length&&(e.removeChild(t),d(e)||y(e))}}}function P(){document.getElementById("field_tokens").value=""}l.fastPostingSucceed.attach(function(){var e=n();if(e){for(var t=e.getElementsByClassName("js-m-attachment");t.length>0;){var a=t[0];a.parentNode.removeChild(a)}r.removeClass(document.body,"js-multi-uploading"),r.removeClass(m(),"dsn"),r.addClass(e,"dsn"),l.postingFormRelayout.trigger(),P(),g(!0)}});function V(){B();var e=n();e&&d(e)==l.config.attachLimitValue&&r.addClass(m(),"dsn")}function I(e){var t=n();if(!(o&&e&&e.isManualReject)){C.show(l.config.uploadErrorLabel),t.removeChild(t.lastChild);var a=document.getElementById("field_tokens"),s=a.value.split(";");s.length>1?(s.pop(),j(s,a)):a.value=""}B()}function B(){var e=v.textarea(!0),t=v.postingForm(!0);r.removeClass(t,"ld"),r.removeClass(document.body,"js-sm-upldng"),e.contenteditable="plaintext-only";var a=t.querySelector(".commenter_input:checked");if(t.reset(),a&&(a.checked=!0),_.winphone){var s=t.getElementsByClassName("js-sm-upload-file-input")[0];s&&(s.value="")}l.processFormControls.trigger({textInput:e})}function g(e){var t=n(),a=m();t&&d(t)?(r.switchClass(t,!e,"dsn"),r.switchClass(a.firstChild,e,"dsn"),l.postingFormRelayout.trigger()):a&&e&&r.addClass(a.firstChild,"dsn")}function n(){return document.getElementById("msg_attach_lst")}function m(){return document.getElementById("chat-attachment-entrypoint")||document.getElementById("att-act")}return{init:function(){u.smilePanelOpen.attach(function(){g(!1)}),u.smilePanelClose.attach(function(){g(!0)})},abort:F}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.an, __jsRegistry.fv, __jsRegistry.es, __jsRegistry.kz, __jsRegistry.am, __jsRegistry.lr, __jsRegistry.ls, __jsRegistry.lt, __jsRegistry.ak)||window);
__jsRegistry.uv = __globalRegistry["sXYwSig"] || (__globalRegistry["sXYwSig"] = (function(S,T,f,O,o,l,g,p,N,R,U,x){T.animateSticker=function(a){l.observe(a.target,d)};function c(a,e,t){OK.loader.use("lottie",function(){a.lottieAnimation=window.lottie.loadAnimation({container:e,path:t,renderer:"canvas",loop:!0,autoplay:!0})})}function k(a,e,t){var u=e.getAttribute("data-rlottie"),s=e.querySelector(".js-lottie");u?OK.loader.use("rlottie-js",function(){OK.RLottie.isRLottieSupported()?a.destroyRLottie=OK.RLottie.play({container:s,url:t,stickerId:Number(e.getAttribute("data-id")),width:e.clientWidth,height:e.clientHeight}):c(a,s,t)}):c(a,s,t)}var d={supportsScrollParent:!0,aheadOfTime:!0,registered:function(e){var t=e.target;t.okStickerAnimation&&(e.stickerAnimation=t.okStickerAnimation);var u=t.querySelector(".js-lottie canvas");if(u&&R.remove(u),!e.hasLoaded){var s=t.getAttribute("data-lottie-url");s&&(e.inViewport?k(e,t,s):e.lottieUrl=s);var h=S.getOrMakeBehavior(t),j=h&&h.sticker,i=t.querySelector(".sticker.usmile"),r=j&&j.animation;if(r&&i!==null){i.style.removeProperty("display");var A=i.offsetWidth,L=i.offsetHeight,E=r.imageUrl;if(!r.sprite){var y=new Image;y.src=E,r.sprite=y}if(e.stickerAnimation=r,r.sprite.naturalWidth===0){F(i,e);return}if(A===0||L===0){e.registerOnNextTrack=!0;return}else e.registerOnNextTrack=!1;var n=t.getElementsByClassName("sticker-anim-box")[0]||document.createElement("div"),w=n.style;r.target=n,n.className="sticker-anim-box",w.width=A+"px",w.height=L+"px",n.innerHTML=i.alt;var b=i.parentNode;b.setAttribute("data-code",i.alt),b.appendChild(n),i.style.position="absolute",r.time=0,r.currentFrame=0,r.previousFrame=-1,r.spriteCanvas=null,r.spriteRows=0,r.spriteColumns=0,r.frameDuration=0,r.elementToHide=i,t.okStickerAnimation=r,e.hasLoaded=!0,(e.enrollWhenLoaded||e.inViewport)&&f.enroll(r)}}},track:function(e){e.registerOnNextTrack&&d.registered(e),e.hasLoaded&&f[e.inViewport?"enroll":"forget"](e.stickerAnimation),e.lottieAnimation?e.inViewport?e.lottieAnimation.play():e.lottieAnimation.pause():e.lottieUrl&&(k(e,e.target,e.lottieUrl),e.lottieUrl=null)},discard:function(e){e.hasLoaded&&f.forget(e.stickerAnimation),e.lottieAnimation&&e.lottieAnimation.destroy(),e.destroyRLottie&&e.destroyRLottie(),e.lottieUrl=null}};l.addListener(d);function F(a,e){var t={notice:e,stickerImage:a};(a.naturalWidth===0||e.stickerAnimation.sprite.naturalWidth===0)&&U.all(p.load(a.src),p.load(e.stickerAnimation.sprite.src)).then(I,null,t)}function I(a,e){var t=e.stickerImage;t.naturalWidth!==0?v(e):(t.okTempImageLoadedEvent=e,t.addEventListener("load",v))}function v(a){var e=a.target||a.stickerImage;e&&e.okTempImageLoadedEvent&&(a=e.okTempImageLoadedEvent,e.okTempImageLoadedEvent=null);var t=a.notice;t.registerOnNextTrack=!0,t.inViewport&&d.track(t)}function m(){setTimeout(l.reflow,300),setTimeout(l.reflow,1e3),window.okStAnimFix&&window.okStAnimFix()}O.create({name:"stickerSpriteAnimation",update:function(){o.attachUntilRendering(g.smilePanelOpened,m),o.attachUntilRendering(g.stickerTabSelected,m),o.attachUntilRendering(g.smilePanelClose,m),o.attachUntilRendering(x.stickerSent,m)}})})(__jsRegistry.am, __jsRegistry.c, __jsRegistry.nx, __jsRegistry.x, __jsRegistry.w, __jsRegistry.dj, __jsRegistry.fv, __jsRegistry.oc, __jsRegistry.aq, __jsRegistry.s, __jsRegistry.n, __jsRegistry.kz)||window);
__jsRegistry.uw = __globalRegistry["sTxitiQ"] || (__globalRegistry["sTxitiQ"] = (function(f,H,g,o,p,S,j,C,T,E){var u,d,h=".js-livesticker";function L(){u=null}function v(i){u&&u.stop();var t=i&&i.target;t&&(o.preventDefault(i),o.addClass(t,"__clicked"))}function k(i){OK.gifPlayer.touch(i.firstElementChild||i.firstChild)}function w(i){function t(c,s){return c.getContentElement().querySelector(s||".js-sticker-modal-content")}var e,r,a,n=new E(document.getElementById("sticker-preview-modal"),{clearOnExit:!1,onExit:function(){if(e){e.parentElement&&OK.gifPlayer.stop(e);var s=e.querySelector("video");s&&(s.muted=!0),r&&r.appendChild(e)}n&&(a&&(a.removeEventListener("click",n.sendButtonClickListener),n.sendButtonClickListener=null),o.clear(t(n))),e=null,r=null,n=null},closeOnShadowClick:!0});r=p.parentBySelector(i,".js-sticker-vitrine"),e=r.querySelector(h),t(n).appendChild(e),a=t(n,".js-send-sticker-preview");var y=a&&a.tagName.toLowerCase()==="a",l;y&&(l=p.parentBySelector(i,".sticker-link-app-hook"),a.href=l.href),a&&(n.sendButtonClickListener=function(c){l?c.stopPropagation():r.click(),n.close()},a.addEventListener("click",n.sendButtonClickListener)),n.show(),k(e)}var B={play:f.handle("tap",function(i){if(!u){var t=P(),e=this.sticker;if(e){var r=e.overlay;r&&g.play({name:r.name,baseUrl:r.baseUrl,createHost:function(){return __js_temp_htmlTag.contains(t)?t:null},onStarted:function(n){u=n.playing,u.isInteractive?O(n.overlay):f.tapPreview.attachOnce(v),j.rendering.attachOnce(v),o.remove(t),d=null},onFinished:L})}else logClientEvent("jserror_overlays",[this.element.className,document.readyState])}}),tapLiveStickerBadge:{tap:function(t,e){var r=p.parentBySelector(e,h);o.hasClass(r,"__video")?OK.gifPlayer.toggleAudio(t):k(r)}},previewSticker:{tap:function(t,e){t.preventDefault(),t.stopPropagation(),w(e)}}};function O(i){var t=document.getElementById("overlayCloseTemplate");if(t){var e=i.createControlsDomRoot();o.addClass(e,"sticker-overlay-close-w"),e.innerHTML=t.innerHTML;var r=e.firstChild;r.addEventListener("click",v),r.addEventListener("touchStart",v)}}function m(i,t){this.sticker=i,this.element=t}m.prototype=B,f.register("messageSticker",m);function P(){var i,t,e,r,a=document.getElementsByClassName("discus")[0];if(a){var n=document.getElementsByClassName("layout-bottom-panel")[0],y=n?n.offsetHeight:0;i=o.getTotalOffsetTop(a),t=o.getTotalOffsetLeft(a),e=a.offsetWidth,r=a.offsetHeight-y}else{var l=document.getElementById("content")||document.body;if(l){var c=C.toolbar.height;i=S.calc().scrollTop+c,t=o.getTotalOffsetLeft(l),e=l.offsetWidth,r=window.innerHeight-c}}d=document.createElement("div");var s=d.style;return s.position="absolute",s.pointerEvents="none",s.width=e+"px",s.height=r+"px",s.top=i+"px",s.left=t+"px",document.body.insertBefore(d,document.body.firstChild),d}return{autoPlay:function(t){var e=" [data-view=messageSticker]",r;if(t&&(r=document.querySelector(".discus_list_w:last-child"+e)),!r){var a=document.querySelectorAll(".__unread"+e),n=a.length;r=n>0?a[n-1]:null}this.play(r)},play:function(t){if(t){var e=f.resolve(t,"messageSticker");e&&e.play()}},StickerBehavior:m}})(__jsRegistry.am, __jsRegistry.c, __jsRegistry.ny, __jsRegistry.s, __jsRegistry.t, __jsRegistry.bd, __jsRegistry.w, __jsRegistry.bk, __jsRegistry.uv, __jsRegistry.ge)||window);
__jsRegistry.ux = __globalRegistry["s3DDznw"] || (__globalRegistry["s3DDznw"] = (function(R,c,m,f,j,v,n,q,M,H,g,b,x,F,G,k){var l,d="__active",A="hidden",S="sticker-set-icon",w=function(){};function I(){var e,t,r,i="",a=document.querySelector(".layout-bottom-panel #fscaid .reply");if(t=a!=null&&a!=null,t&&(e=a.getAttribute("data-comment-id"),e||(t=!1)),u()){var s=document.getElementById("field_ofc");r=s&&s.value=="on";var o=document.querySelector(".commenter_input:checked");o&&(i=o.value)}return{replyCommentId:e,pervertStickerReply:t,isOfficial:r,commentPublisherId:i}}function y(){return document.getElementById("user-chat")}function u(){return document.getElementById("comments-list")}f.addFuncHandler("send-sticker",{tap:function(t){var r=m.findParent(t.target,function(p){return c.hasClass(p,"usmile")||p.hasAttribute("data-code")});if(r){var i=new Date().getTime();if(r.lastClick&&i-r.lastClick<300)return;r.lastClick=i;var a=r.alt||r.getAttribute("data-code"),s=I();y()?v.sendStickerPM(l.currentConversationId,a,s.pervertStickerReply,s.replyCommentId).then(_,J):u()&&v.sendStickerDscs(l.discussionSubjectID,l.discussionTypeID,l.discussionGroupID,l.replyLinkTemplate,l.returnUrl,a,s.pervertStickerReply,s.replyCommentId,s.commentPublisherId,s.isOfficial).anyway(_),n.smilePanelClose.trigger();var o=document.querySelector(".uform_i-w");c.removeClass(o,"dsn")}}});function J(e){n.smilePanelClose.trigger();var t=document.getElementById("fscerr"),r=document.createElement("DIV");r.className="fierr reply_field",r.textContent=e,t.appendChild(r)}function _(e){if(n.smilePanelClose.trigger(),e)if(e.success){var t=y()||u();if(t.insertAdjacentHTML("beforeend",e.html),n.messageLoaded.trigger(),n.scrollDown.trigger(),q.stickerSent.trigger(),e.formUpdateTime){var r=document.getElementById("field_stamp")||document.getElementById("field_tstmp");r&&(r.value=e.formUpdateTime)}if(e.hasOverlay){var i=t.querySelector("li:last-child [data-view=messageSticker]");i&&H.play(i)}c.clear(document.getElementById("fscaid"));var a=u()?document.getElementById("field_rpl"):document.getElementById("field_reply");if(a.value="off",e.lastMessageMarker){var s=n.find.messagesList(!0),o=s.getAttribute("data-next-url");if(o){var p=g.replaceParams(o,{"st.mrkId":e.lastMessageMarker});s.setAttribute("data-next-url",p),F.updateLoadingUrls.trigger()}}G.process()}else e.paymentUrl&&b.change(e.paymentUrl,!0);v.renewStickerPanel(l.stickerContext).anyway(K)}function K(e){if(e.html){var t=document.querySelector(".sticker-set-full:first-child .sticker-list, .sticker-set-full:first-child .empty-page");t&&(t.outerHTML=e.html)}}function B(e){var t=document.querySelector(".smile-tab[data-type=smiles]"),r=document.querySelector(".smile-tab[data-type=stickers]");t&&r&&(c.switchClass(t,!e,d),c.switchClass(r,e,d))}function E(e){var t=document.querySelectorAll(".sticker-set-icon");if(t&&t.length>=2){var r=t[0];if(e){var i=c.hasClass(r,d);i&&t[1].click()}else r.click()}else w=function(){E(e)}}f.addFuncHandler("switch-to-smiles",{tap:function(t){var r=m.parentBySelector(t.target,"."+S);L(r),B(!1)}}),f.addFuncHandler("switch-sticker-set",{tap:function(t){var r=m.parentBySelector(t.target,"."+S);if(r){var i=V(r);z(r,i),n.stickerTabSelected.trigger({index:i})}B(!0)}});function L(e){var t=document.getElementsByClassName(S+" "+d)[0];t&&t!=e&&c.removeClass(t,d),c.addClass(e,d)}function V(e){var t=e.parentNode.childNodes;return Array.prototype.indexOf.call(t,e)-1}function z(e,t){var r=document.querySelectorAll(".sticker-set-full");L(e),M(r,function(i,a){c.switchClass(i,a!=t,"dsn")}),r[0].parentNode.scrollLeft=0}f.addFuncHandler("sticker-red-link-close",{tap:function(t){var r=m.parentBySelector(t.target,".sticker-red-link");if(r){r.parentNode.removeChild(r);var i=r.getElementsByClassName("sticker-promo-close")[0];v.closeRedLink(i.getAttribute("data-banner-id")),n.closeRedLink.trigger()}}});function T(){return"dismiss-timeout_"+n.config.conversationId}function P(){return"chat-alert_"+n.config.conversationId}f.addFuncHandler("dismiss-greeting-stickers",{tap:function(){if(!u()){var t=n.config.initiativeStickerForgetTimeout;t&&k.isSupported&&window.localStorage.setItem(T(),Date.now()),C()}}}),n.smilePanelOpen.attach(function(){C()}),n.smilePanelClose.attach(function(){var e=n.find.postingForm();if(e){var t=e.querySelector(".uform_i-w");c.removeClass(t,"dsn")}C()});function h(e){var t=document.querySelector(".js-chat-alert");t&&c.switchClass(t,!e,A)}function C(){var e=D();e&&e.parentNode.removeChild(e)}function Q(){var e=D();e&&c.removeClass(e,A)}function D(){return document.getElementsByClassName("greeting-sticker_list-w")[0]}function N(e,t){this.domLink=t}N.prototype={go:{tap:function(t){var r=this.domLink.href,i=g.params(r),a=i["st.sendAction"],s=JSON.parse(a);x.copy(I(),s),a=JSON.stringify(s),r=g.replaceParams(r,{"st.sendAction":a}),b.change(r)}}};function O(e,t){}return O.prototype={closeChatAlert:{tap:function(){u()||(k.isSupported&&window.localStorage.setItem(P(),"1"),h(!1))}},hideChatAlert:{tap:function(){h(!1)}}},j.register("stickersPanelAddIcon",N),j.register("chatAlertPanel",O),R.stickerAssetsLoaded=function(){w.call()},{init:function(t){l=t;var r=k.isSupported;if(y()&&r){var i=parseInt(window.localStorage.getItem(T())||0);if(i){var a=n.config.initiativeStickerForgetTimeout;if(i+a*60*60*1e3>Date.now())return}(!r||!window.localStorage.getItem(P()))&&h(!0)}Q()},switchTabs:E}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.an, __jsRegistry.am, __jsRegistry.mo, __jsRegistry.fv, __jsRegistry.kz, __jsRegistry.k, __jsRegistry.uw, __jsRegistry.m, __jsRegistry.ew, __jsRegistry.aa, __jsRegistry.lk, __jsRegistry.cx, __jsRegistry.ch)||window);
__jsRegistry.uy = __globalRegistry["ia5mbtw"] || (__globalRegistry["ia5mbtw"] = (function(s,g,d){var u={};function p(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}p(u,{get getIOSViewportInformation(){return c},get getKeyboardHeight(){return f},get isKeyboardHeightStored(){return l},get storeKeyboardHeight(){return v}});function c(){var e=window.innerHeight,t=__js_temp_htmlTag,r=t.offsetHeight,i=t.clientHeight,o=e===r,n=e===i;return{isMinimalUi:o&&!n,isURLBarAtTop:o&&n||screen.height/r<1.1}}function l(e,t){if(f(e))return!0;if(g.isSupported){var r=t?"portraitKeyboardHeight":"landscapeKeyboardHeight",i=s.localStorage.getItem(r);if(i)return e.set(r,i).then(void 0),!0}return!1}function f(e){var t=(0,d.isPortraitMode)()?"portraitKeyboardHeight":"landscapeKeyboardHeight";return parseFloat(e.get(t))}function v(e,t,r,i){var o=(0,d.isPortraitMode)();if(t===o){var n=r?visualViewport.height:innerHeight,a=i-n;if(a>0){var h=o?"portraitKeyboardHeight":"landscapeKeyboardHeight";return g.isSupported?s.localStorage.setItem(h,a.toString()):e.set(h,a).then(void 0),!0}}return!1}return u})(__jsRegistry.bs, __jsRegistry.ch, __jsRegistry.bd)||window);
__jsRegistry.uz = __globalRegistry["fuL4nNQ"] || (__globalRegistry["fuL4nNQ"] = (function(){var u={};function l(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,r).get})}l(u,{get exitFullscreen(){return c},get isFullscreen(){return i},get requestFullscreen(){return s},get supports(){return n}});var n="exitFullscreen"in document?"native":"webkitExitFullscreen"in document?"webkit":null;function c(){switch(n){case"native":return document.exitFullscreen();case"webkit":return document.webkitExitFullscreen&&document.webkitExitFullscreen();default:return Promise.reject()}}function s(t,e){switch(n){case"native":return t.requestFullscreen(e);case"webkit":return t.webkitRequestFullscreen&&t.webkitRequestFullscreen(e);default:return Promise.reject()}}function i(t){var e=document,r=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement;return r===t}return u})()||window);
__jsRegistry.va = __globalRegistry["pwI0Ew"] || (__globalRegistry["pwI0Ew"] = (function(Pe,T,i,F,G,ae,d,se,ie,oe,_e,$,k,l,z,y,re,le,A){function ce(e,n){return n!=null&&typeof Symbol<"u"&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}var B=function(){},_=document.body,o,R=0,L,E,H=d.immutable,m=d.find,h,X,Y=150,ue="finp",V=" ",me=160,g,de={scrollDown:B,postingFormReady:B,onCloseSmilePanel:B,onOpenSmilePanel:B},f={sendOnCheck:!1,sendOnCtrlEnter:!1,isWinPhone:null},J=!1,M=null,I=null,Q={};y.fastPostingDone.attach(function(){var n=m.postingForm(!0);if(n){i.removeClass(n,"txt-ld");var t=t||document.getElementById("sbmt-act"),s=document.getElementById("chat-attachment-entrypoint")||document.getElementById("att-act");t&&s&&(f.isWinPhone||(i.removeClass(t,"__mod"),t.disabled=!0))}}),y.fastPostingSucceed.attach(function(){var e=m.textarea(!0);if(e){i.clear(e);var n=document.getElementsByClassName("js-spriority-aggressive").length;n&&!f.isWinPhone&&b(e)}ae.updateLoadingUrls.trigger()});function O(e,n,t){return t.replace(new RegExp(e,"g"),n)}function D(){C();var e=document.getElementById("pasteTA");e.value=" ",e.focus(),setTimeout(function(){h=m.textarea(!0);var t=e.value,s=O("<","&lt;",t);if(s=O(">","&gt;",s),s=O("\n","<br/>",s),o){var a=se.createDomTree(s),r=ie(a);o.insertNode(r),o.collapse(!1)}else h.innerHTML=s;S(),h.removeEventListener("paste",D,!1),setTimeout(function(){h.addEventListener("paste",D,!1)},500),b(h),logClientEvent("messaging.content.pasted")},100)}y.checkDynamicFormInputs.attach(function(e){x(e.focused)});function x(e){var n=document.getElementsByClassName("js-dynamic-exp")[0];if(n){var t=K(),s=i.hasClass(n,"__initial");e=t&&t.getElementsByClassName("js-m-attachment").length>0||e,i.switchClass(n,e,"__dynamic"),i.switchClass(n,!e,"__initial"),s&&b(m.textarea(!1))}}function K(){return document.getElementById("msg_attach_lst")}function fe(e,n){f=e,g=G.clone(de),G.copy(n,g);var t=m.textarea(!0);if(t){if(l.iOS){M===null&&J&&(M=!Q.isURLBarAtTop);var s=!1,a=document.getElementById("ta-emul-stub");a.addEventListener("focus",function(){s=!0,setTimeout(S,50)})}t.addEventListener("click",we,!1),e.defaultCopyPasteBehaviour||t.addEventListener("paste",D,!1),t.addEventListener("focus",function(c){if(l.iOS){if(E&&!s){a.focus();return}s=!1}i.addClass(_,"js-kbrd"),i.removeClass(t,"plch"),x(!0),l.iOS&&setTimeout(ee,50),setTimeout(C,0),d.keyboardOpen.trigger(c)},!1),t.addEventListener("blur",function(c){C(),i.removeClass(_,"js-kbrd"),t&&!t.textContent&&(i.addClass(t,"plch"),setTimeout(function(){x(!1)},0)),d.keyboardClosed.trigger(c)},!1),t.addEventListener("input",function(c){if(!c.data){var w=document.getSelection().getRangeAt(0);if(w){var P=w.endContainer?w.endContainer.parentNode:null;P&&i.hasClass(P,"comments_smiles_img")&&i.remove(P)}}b(t)});var r=f.sendOnCheck,u=f.sendOnCtrlEnter;t.addEventListener("keydown",function(c){T.selectionRange=void 0;var w=c.ctrlKey||c.metaKey,P=c.which===13;if(r&&P&&!c.altKey&&!c.shiftKey&&(u&&w||!u&&!w)&&(v=v||document.getElementById("sbmt-act"),v.click(),c.preventDefault()),f.isWinPhone&&P&&(!r||!w)){var ne=document.createElement("BR");o.insertNode(ne),o.setStartAfter(ne),o.collapse(!1)}return!te()}),r||t.addEventListener("keyup",function(c){C(),c.which===13&&c.ctrlKey===!0&&(v=v||document.getElementById("sbmt-act"),v.click())},!1),t.addEventListener("change",C,!1),t.addEventListener("touchend",function(c){l.iOS&&be(c),C()},!1),l.iOS&&l.iOSVersion<8&&t.addEventListener("touchstart",function(){g.scrollDown()},!1),$.init();var p=K();p&&p.addEventListener("click",function(){d.smilePanelClose.trigger()},!1);var v=document.getElementById("sbmt-act");v.addEventListener("click",function(){ye()});var j=document.getElementById("sml-act");j&&j.addEventListener("click",ge),e.stickerSendConfig.initialPriorityEnabled&&k.switchTabs(!0);var N=document.getElementsByClassName("slownet-stub")[0];N&&N.parentNode.removeChild(N),l.iOSVersion?I=null:(l.androidVersion||l.winphoneVersion)&&(I=250),b(t),g.postingFormReady(),y.updateConfig(f)}else(document.querySelector(".layout-bottom-panel .empty-nop")||document.querySelector(".reply-keyboard"))&&g.postingFormReady()}y.processFormControls.attach(function(e){b(e.textInput)}),y.beforeNavigation.attach(function(){$.abort()});function b(e){var n=document.getElementById("sbmt-act"),t=document.getElementById("chat-attachment-entrypoint")||document.getElementById("att-act"),s=document.querySelector(".post-message .uform_ctrls.__right.ic-game");if(n){var a=Z(e);if(d.registerTextChange.trigger(),t){var r=K();if(r&&(a|=r.getElementsByClassName("js-m-attachment").length>0,i.switchClass(n,a,"__mod"),n.disabled=!a,s&&i.switchClass(s,a,"dsn")),!a){var u=e.getElementsByTagName("BR");u&&u.length&&i.clear(e)}var p=m.postingForm(!0);p&&document.getElementsByClassName("js-spriority-aggressive").length&&(i.hasClass(p,H.PANEL_SHOWN_CSS_MOD)||k.switchTabs(!a))}}}function Z(e){if(te())return!1;for(var n=e.childNodes,t=0,s=n.length;t<s;t++){var a=n[t],r=e.textContent;if(a&&a.classList&&i.hasClass(a,"emoji"))return!0;if(r){if(r.replace(/^\s+|\s+$/g,"").length)return!0}else a&&a.tagName=="BR"&&e.firstChild.tagName=="BR"&&e.removeChild(e.firstChild)}for(var u=e.parentNode.previousSibling;u;){if(i.hasClass(u,"reply_action"))return!0;u=u.previousSibling}return!1}function C(){var e=window.getSelection();e.rangeCount>0&&(o=e.getRangeAt(0).cloneRange(),o.collapse(!1))}function S(e){var n=window.getSelection(),t=m.textarea();(!o||n.rangeCount===0)&&(o=document.createRange(),o.setStart(t,t.childNodes.length)),o.collapse(!1),n.removeAllRanges(),e&&parseFloat(l.winphoneVersion)>=8.1?(t.contentEditable=!1,n.addRange(o),t.contentEditable=!0):n.addRange(o),e?t.blur():t.focus(),C()}function ge(e){if(i.hasClass(e.target,"js-prevent-default")&&(e.preventDefault(),e.stopPropagation()),X=m.smilesPanel(!0),E)S(),d.smilePanelClose.trigger(e);else{S(!0),R&&(X.style.minHeight=R+"px");var n=l.androidVersion?300:l.iOS||l.desktop?0:400;setTimeout(function(){d.smilePanelOpen.trigger(e)},n),m.textarea().blur()}}function ve(){var e=m.postingForm();e&&i.removeClass(e,H.PANEL_SHOWN_CSS_MOD),i.removeClass(_,"discus-keyboard-open"),z.tapPreview.detach(U),E=!1,g.onCloseSmilePanel()}function he(){re.attachUntilRendering(z.tapPreview,U),C(),i.addClass(m.postingForm(!0),H.PANEL_SHOWN_CSS_MOD),i.addClass(_,"discus-keyboard-open"),L||Ce(),E=!0,g.onOpenSmilePanel(),d.smilePanelOpened.trigger()}function Ce(){var e=document.querySelector("[data-type=stickers]");if(e){var n=e.parentNode,t=e.cloneNode(!0);i.addClass(t,"__active"),i.addClass(t,"js-fake-view"),n.appendChild(t),L=t.offsetHeight,n.removeChild(t)}}function U(e){var n=e.target,t=m.postingForm(!0),s;typeof t.contains=="function"?s=t.contains(n):s=F.findParent(n,function(a){return a===t}),s||F.parentBySelector(n,"#sticker-preview-modal")||d.smilePanelClose.trigger()}function pe(e,n){e.okEmoji=n.getAttribute("data-emoji"),f.messagingRecoveryEnabled&&e.setAttribute("data-emoji",e.okEmoji)}function W(e){var n;return i.hasClass(e,"comments_smiles_i")&&(e=e.children[0]),f.isWinPhone?(n=document.createElement("IMG"),n.className=e.className,n.okEmoji=e.getAttribute("data-emoji"),n.src=e.src,n):i.hasClass(e,"comments_smiles_native")?document.createTextNode(e.textContent):(n=document.createElement("SPAN"),n.appendChild(document.createTextNode("\uFEFF")),n.className=e.className,pe(n,e),n)}y.extractSubmitCandidate.attach(q);function q(e){for(var n=0;n<e.startNode.length;n++){var t=e.startNode.item(n);if(t.tagName=="SPAN"||t.tagName=="IMG"){if(i.hasClass(t,"emoji")){var s=t.okEmoji;e.result[n]=s||t.getAttribute("data-emoji"),e.emojiCount++}if(t.tagName=="SPAN"){var a=t.childNodes;if(a){var r=[];q({startNode:a,result:r,emojiCount:e.emojiCount});var u=r.join("");e.result[n]?e.result[n]+=u:e.result[n]=u}}}else t.textContent&&(Ee(t)?e.result[n]=t.textContent.substring(1):e.result[n]=O(" "," ",t.textContent))}}function ye(){var e=0;h=m.textarea(!0),S(E),E&&(o=null);for(var n=[],t=h.getElementsByTagName("BR");t.length;){var s=t[0];s.parentNode?s.parentNode.replaceChild(document.createTextNode("\n"),s):t=[].slice.call(t,1)}var a={startNode:h.childNodes,result:n,emojiCount:e};q(a),e=a.emojiCount,document.getElementById("field_msg").value=n.join("");var r=document.getElementById("field_emoCnt");r&&(r.value=e),i.addClass(m.postingForm(),"txt-ld")}function Ee(e){return e.parentNode&&e.textContent.charCodeAt(0)===160}T.editMessageWithSmiles=function(e){e.parentNode.className="msgc uform_i"};function be(e){setTimeout(function(){var n=window.getSelection();if(n.rangeCount>0){var t=n.getRangeAt(0),s=t.startContainer,a=e.target;F.findParent(s,function(r){return r===a})&&(T.selectionRange=t)}},100)}T.onSmileClick=function(e){e.preventDefault(),e.stopPropagation();var n=m.textarea(),t=e.target;t=t.className.match(/comments_smiles_img|comments_smiles_native/)?t:i.hasClass(t,"comments_smiles_i")?t.childNodes[0]:null;function s(){if(o){var j=o.endContainer;if(j){if(j.id==="ta-emul")return!0;var N=j.parentNode;return N&&N.id==="ta-emul"}}return!1}if(t){var a=W(t);if(Z(n)||x(!0),s()){var r=document.createTextNode(V),u,p=o.endContainer.textContent,v=p.length;a=W(t),p.charCodeAt(v-1)!==me&&(u=document.createTextNode(V),o.insertNode(u),o.setEndAfter(u),o.collapse(!1)),o.insertNode(a),o.setEndAfter(a),o.collapse(!1),o.insertNode(r),o.setStartAfter(r)}else n.childNodes.length&&n.appendChild(document.createTextNode(V)),a=W(t),n.appendChild(a),o=document.createRange(),o.setEndAfter(a),o.collapse();parseFloat(l.winphoneVersion)>=8.1&&S(!0),b(n)}},d.smilePanelOpen.attach(he),d.smilePanelClose.attach(ve);function we(e){i.hasClass(e.target,ue)&&(I!==null?setTimeout(function(){d.smilePanelClose.trigger()},I):d.smilePanelClose.trigger())}function ee(){l.iOS&&M&&!l.isIPad&&setTimeout(function(){(document.scrollingElement||__js_temp_htmlTag).scrollTop+=52,Se()},200)}function Se(){var e=Ne();je(e)&&(R=e)}function je(e){return e>Y&&e/__js_temp_htmlTag.clientHeight<.8}function Ne(){return Math.max(R,__js_temp_htmlTag.scrollTop,L||Y)}function te(){return document.querySelector(".uform_ctrls.__left.ic.ic-err")}return{init:function(n,t){var s=l.iOSVersion;s&&(J=s&&parseInt(s)>14,Q=le.getIOSViewportInformation()),E=!1,n.initContext,n.initContext,fe(n,t),k.init(n.stickerSendConfig),f.conversationId=n.stickerSendConfig.currentConversationId,l.android&&oe.calc().height-_.getBoundingClientRect().bottom>10&&(window.Promise&&A.supports!==null?setTimeout(function(){var a=document.body,r=A.requestFullscreen(a,{navigationUI:"hide"});ce(r,Promise)?r.then(function(){return A.exitFullscreen()}).then(function(){g.scrollDown()}):document.fullscreenElement&&A.exitFullscreen()},0):setTimeout(function(){var a=m.textareaElement();a&&(a.focus(),a.blur(),g.scrollDown())},100))},fixInputScrollInView:ee}})(__jsRegistry.us, __jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.aa, __jsRegistry.lk, __jsRegistry.fv, __jsRegistry.cq, __jsRegistry.ct, __jsRegistry.bd, __jsRegistry.ut, __jsRegistry.uu, __jsRegistry.ux, __jsRegistry.ak, __jsRegistry.am, __jsRegistry.kz, __jsRegistry.w, __jsRegistry.uy, __jsRegistry.uz)||window);
__jsRegistry.vb = __globalRegistry["dk8wTCQ"] || (__globalRegistry["dk8wTCQ"] = (function(p,n,a,S,k,R,w,c,o,C,l,F,m){function i(){var e=document.getElementById("cmntMsg");if(e){var t=C.fitHeight(e);if(!(t.fitTop&&t.fitBottom)){var s=document.querySelector(".two-columns-layout-content .l-sidebar_cnt"),y=document.getElementById("content");if(s&&y){var B=y.offsetHeight,_=s.offsetHeight;_>0?document.body.scrollTop=B+F.toolbar.height-window.innerHeight:e.scrollIntoView()}else e.scrollIntoView()}}}function H(){var e=window.location.hash;e=="#lst"&&setTimeout(function(){i()},250)}function u(e,t){var s=a.parentBySelector(e,".discus_dialogs_i");return n.switchClass(s.previousSibling,t,"dsn"),n.switchClass(e,!t,"js-rvrt-link-fast"),n.switchClass(e,t,"js-rexp-link-fast"),!0}function r(e){var t=document.getElementById(e);return t?t.offsetHeight:0}function b(){var e=document.querySelector(".__r-forum .title");return e&&e.offsetHeight?e.offsetHeight:0}function E(){if(!n.hasClass(__js_temp_htmlTag,"__dscs-mvlayer")){var e=document.querySelector(".dscs .list-block, .dscs #comment-list-holder"),t=document.getElementsByClassName("dlist_top")[0];if(e&&a.parentBySelector(e,".comments-in-bottom-sheet")==null){var s=window.innerHeight-r("head")-(t?t.offsetHeight:0)-r("cmntMsg")-r("comments-pager-bottom")-b()-44;e.style.minHeight=Math.max(s,48)+"px"}}}function d(){var e=document.getElementsByClassName("js-posting-ava-cnt")[0];e&&n.removeClass(e,"__disabled")}var f=function(){var t=document.getElementById("fscaid");t&&n.clear(t),i()};function h(e){var t=e.container,s=t.previousElementSibling;s&&n.hasClass(s,"__replied")&&s.parentNode.removeChild(s)}function g(){m.iOS&&m.yandexBrowser?setTimeout(function(){document.getElementById("sml-pnl").scrollIntoView()},500):i()}function v(e){var t=e.target;if(n.hasClass(t,"js-rvrt-link-fast"))return u(t,!0);if(n.hasClass(t,"js-rexp-link-fast"))return u(t,!1)}function j(){c.revoke(v),o.fastPostingSucceed.detach(d),o.stickerSent.detach(f),o.contentRemoved.detach(h),o.postingFormRelayout.detach(i),l.smilePanelOpen.detach(g)}return p.initDiscussions=S.create({update:function(t){c.register(v),w.init(t.postingConfig,{scrollDown:i,postingFormReady:H}),E(),o.fastPostingSucceed.attach(d),o.stickerSent.attach(f),o.contentRemoved.attach(h),o.postingFormRelayout.attach(i),l.smilePanelOpen.attach(g)},discard:j}),{discardDiscussions:j}})(__jsRegistry.c, __jsRegistry.s, __jsRegistry.t, __jsRegistry.x, __jsRegistry.am, __jsRegistry.k, __jsRegistry.va, __jsRegistry.ea, __jsRegistry.kz, __jsRegistry.bd, __jsRegistry.fv, __jsRegistry.bk, __jsRegistry.ak)||window);
__jsRegistry.vc = __globalRegistry["iUkPyTw"] || (__globalRegistry["iUkPyTw"] = (function(e){return{init:e.create(),close:e.create(),options:{},pictureSelected:e.create(),adjacentPhotoRequested:e.create(),pinProcessed:e.create()}})(__jsRegistry.u)||window);
__jsRegistry.vd = __globalRegistry["sYncCOw"] || (__globalRegistry["sYncCOw"] = (function(){var r=[],i="__longLivedPropKeys";function a(e){if(e){e.warehouse&&e.warehouse.cleanAll&&e.warehouse.cleanAll();var n=e[i]||[];Object.keys(e).forEach(function(t){n.indexOf(t)===-1&&(e[t]=null)})}}var o;return{create:function(){var n={};r.push(n),o=n},get:function(){var n=r[r.length-1]||o;return n},remove:function(){if(!this.isEmpty())return r.pop()},isEmpty:function(){return this.size()===0},size:function(){return r.length},cleanState:function(n){a(n)},setLongLivedProp:function(n,t,c){n[t]=c;var u=n[i]=n[i]||[];u.indexOf(t)===-1&&u.push(t)},updateCachedState:function(n){o=n}}})()||window);
__jsRegistry.ve = __globalRegistry["tUJZgEw"] || (__globalRegistry["tUJZgEw"] = (function(f){var e=document,v,E,p={},m="photos";function O(){var t={ns:m},i=e.createElement("div");i.className="np_photoBox adaptable"+(f.photoOptions.redesign2023Enabled?" __redesign2023":""),i.setAttribute("data-func","root");var n=e.createElement("div");n.className="np_photoBox_back",t.fill=n;var a=e.createTextNode(" ");n.appendChild(a),i.appendChild(n);var r=e.createElement("div");return r.className="np_gif gif",t.gifBtn=r,i.appendChild(r),i.okView="layer",t.domRoot=i,t}p.createLayer=O;function y(){var t={ns:m},i=e.createElement("div");i.className="np_img_cnt __offset",i.setAttribute("style","visibility: hidden");var n=e.createElement("img");n.className="np_img",t.img=n,i.appendChild(n);var a=e.createElement("div");return t.pinsBox=a,a.className="pin",i.appendChild(a),i.okView="picture",t.domRoot=i,t}p.createPicture=y;function q(t,i){var n={ns:m},a=e.createElement("div");return a.className="np_loading",a.okData={loading:t},a.okView="loading",n.domRoot=a,n}p.createLoading=q;function L(){var t={ns:m},i=e.createElement("div"),n=e.createElement("a");n.setAttribute("role","button"),n.className="np_near np_next",n.setAttribute("data-func","next"),t.toNext=n,i.appendChild(n);var a=e.createElement("span");a.className="np_near np_next np_near-ic",i.appendChild(a);var r=e.createElement("a");r.setAttribute("role","button"),r.className="np_near np_previous",r.setAttribute("data-func","previous"),t.toPrevious=r,i.appendChild(r);var o=e.createElement("span");return o.className="np_near np_previous np_near-ic",i.appendChild(o),i.okView="navigationButtons",t.domRoot=i,t}p.createNavigationButtons=L;function H(t,i){var n={ns:m},a=e.createElement("div");a.className="np_ctrls",a.setAttribute("aria-live","assertive"),a.setAttribute("aria-relevant","all"),a.setAttribute("aria-atomic","true");var r=e.createElement("div");r.className="np_ctrls-top",n.header=r;var o=e.createElement("div");o.className="np_ctrls-top_icons";var s=e.createElement("div");s.className="np_ctrls-top-actions",n.boxTopActions=s,o.appendChild(s);var d=e.createElement("a");if(d.setAttribute("role","button"),d.className="np_ctrls-top-icon layer-menu",d.setAttribute("data-func","menu"),n.linkMenu=d,o.appendChild(d),!f.photoOptions.redesign2023Enabled){var c=e.createElement("a");c.setAttribute("role","button"),c.className="np_ctrls-top-icon layer-close",c.setAttribute("data-func","close"),n.linkClose=c,o.appendChild(c)}if(r.appendChild(o),f.photoOptions.redesign2023Enabled){var l=e.createElement("div");l.className="np_ctrls-top-header",n.boxTopHeader=l,r.appendChild(l)}a.appendChild(r);var N=e.createElement("div");N.className="np_ctrls-top-fake-news-wrapper",n.boxFakeNews=N,a.appendChild(N);var u=e.createElement("div");if(u.className="np_ctrls-bottom",n.footer=u,f.photoOptions.redesign2023Enabled){var h=e.createElement("div");h.className="np_description",h.setAttribute("data-view","toggleView"),h.setAttribute("data-func","toggleView"),n.descriptionText=h,u.appendChild(h)}var k=e.createElement("div");k.className="np_marks-panel",n.marksPanel=k,u.appendChild(k);var _=e.createElement("div");if(_.className="np_bottom_upper",n.boxUpper=_,u.appendChild(_),!f.photoOptions.redesign2023Enabled){var w=e.createElement("div");w.className="np_vote_w "+(f.photoOptions.quickPhotoCommentsEnabled?"__compact":""),n.boxVote=w,u.appendChild(w)}var x=e.createElement("div");if(x.className="np_topic-actions_w",n.boxTopicActions=x,u.appendChild(x),f.photoOptions.redesign2023Enabled){var D=e.createElement("div");D.className="np_vote_w",n.boxVote=D,u.appendChild(D)}a.appendChild(u);var M=e.createElement("div");M.className="np_ctrls-quick-comments",n.quickComments=M,a.appendChild(M);var C=e.createElement("div");C.className="np_ctrls-bottom hidden",n.pinsFooter=C;var P=e.createElement("div");P.className="np_pins-panel",n.pinsFooterPanel=P,C.appendChild(P),a.appendChild(C);var b=e.createElement("div");b.className="np_ctrls-overlay hidden",n.overlay=b;var T=e.createElement("canvas");return T.className="np_ctrls-canvas",n.overlayCanvas=T,b.appendChild(T),a.appendChild(b),a.okData={controls:t},a.okView="controls",n.domRoot=a,n}p.createControls=H;function S(t,i){var n={ns:m},a=e.createDocumentFragment(),r=e.createElement("a");r.setAttribute("role","button"),r.className="np_ctrls-top-icon layer-close",r.setAttribute("data-func","close"),n.linkClose=r,a.appendChild(r);var o=e.createElement("div");if(o.className="np_ctrls-top-title",t.title){var s=e.createElement("div");s.className="np_ctrls-top-name";var d=e.createTextNode(t.title);s.appendChild(d),o.appendChild(s)}if(t.created){var c=e.createElement("div");c.className="np_ctrls-top-date";var l=e.createTextNode(t.created);c.appendChild(l),o.appendChild(c)}return a.appendChild(o),a.okData={topHeader:t},a.okView="topHeader",n.domRoot=a,n}p.createTopHeader=S;function j(){var t={ns:m},i=e.createElement("div");i.className="np_cropMask";var n=e.createElement("div");return n.className="crop-mask",i.appendChild(n),i.okView="cropMask",t.domRoot=i,t}p.createCropMask=j;function K(t,i){var n={ns:m},a=e.createElement("div");if(a.className="np_ctrls-top-action_w",t.can.openTopic){var r=e.createElement("a");r.setAttribute("role","button"),r.className="np_ctrls-top-action ai alnk",r.href=t.topicLink,r.setAttribute("data-view-level","doc");var o=e.createTextNode(v.openTopicShort[t.groupId?"group":"user"]);r.appendChild(o),a.appendChild(r)}if(t.can.viewPins){var s=e.createElement("a");s.setAttribute("role","button"),s.className=(f.photoOptions.redesign2023Enabled?"np_ctrls-top-font-icon fi ic-user-tag-24":"np_ctrls-top-icon layer-pins")+" "+(t.autoPinsConfirmLabel?"__scale":""),s.setAttribute("data-func","viewPins"),n.linkViewPins=s;var d=e.createElement("span");d.className="np_ctrls-top-icon_tx";var c=e.createTextNode(t.pins.length);d.appendChild(c),s.appendChild(d),a.appendChild(s)}if(f.photoOptions.redesign2023Enabled&&t.can.addBookmark){var l=e.createElement("a");l.setAttribute("role","button"),l.className="np_ctrls-top-font-icon layer-add-bookmark fi ic-bookmark-24",l.setAttribute("data-func","addBookmark"),a.appendChild(l)}return a.okData={topActions:t},a.okView="topActions",n.domRoot=a,n}p.createTopActions=K;function U(t,i){var n={ns:m},a=e.createDocumentFragment();if(!t.fakeNews){var r=e.createElement("div");r.className="fake-news-empty-container",a.appendChild(r)}if(t.fakeNews){var o=e.createElement("div");o.className="fake-news-container";var s=e.createElement("div");s.className="fake-news-default-text";var d=e.createTextNode(v.fakeNews.defaultText);s.appendChild(d),o.appendChild(s);var c=e.createElement("a");c.setAttribute("role","button"),c.className="fake-news-open-dialog-text",c.setAttribute("data-func","menu"),n.linkFakeNewsDialog=c;var l=e.createTextNode(v.fakeNews.dialogOpenBtn);c.appendChild(l),o.appendChild(c),a.appendChild(o)}return a.okData={fakeNews:t},a.okView="fakeNews",n.domRoot=a,n}p.createFakeNews=U;function z(){var t={ns:m},i=e.createElement("div");i.className="photo-description-w",i.setAttribute("data-func","toggle");var n=e.createElement("div");return n.className="photo-description",t.textBox=n,i.appendChild(n),i.okView="description",t.domRoot=i,t}p.createDescription=z;function G(){var t={ns:m},i=e.createElement("div");i.className="attach-sequence-w "+(f.photoOptions.attachmentSequenceCounterEnabled?"":"dsn"),i.setAttribute("data-func","toggle");var n=e.createElement("div");return n.className="attach-sequence",t.indexBox=n,i.appendChild(n),i.okView="attachSequence",t.domRoot=i,t}p.createAttachSequence=G;function J(t,i){var n={ns:m},a=e.createElement("div");if(a.className="np_marks "+(f.photoOptions.quickPhotoCommentsEnabled?"__collapsed":""),f.photoOptions.quickPhotoCommentsEnabled){var r=e.createElement("div");r.className="np_marks_current-mark";var o=e.createTextNode(v.marks?v.marks.current:"");r.appendChild(o),a.appendChild(r),A(t.marks,a);var s=e.createElement("a");n.btnOpenMarks=s,s.setAttribute("role","button"),s.className="np_mark-open",s.setAttribute("data-func","open"),a.appendChild(s);var d=e.createElement("a");d.setAttribute("role","button"),d.className="np_marks_raise-mark",n.raiseMark=d,d.setAttribute("data-func","raiseMark"),d.setAttribute("data-raise-mark",t.fivePlus);var c=e.createTextNode(v.marks?v.marks.raise:"");d.appendChild(c),a.appendChild(d);var l=e.createElement("a");n.btnCloseMarks=l,l.setAttribute("role","button"),l.className="np_mark-close",l.setAttribute("data-func","close"),a.appendChild(l)}if(!f.photoOptions.quickPhotoCommentsEnabled){var N=e.createElement("div");N.className="np_marks";var u=e.createElement("div");u.className="np_marks_current-mark";var h=e.createTextNode(v.marks?v.marks.current:"");u.appendChild(h),N.appendChild(u),A(t.marks,N);var k=e.createElement("a");k.setAttribute("role","button"),k.className="np_marks_raise-mark",n.raiseMark=k,k.setAttribute("data-func","raiseMark"),k.setAttribute("data-raise-mark",t.fivePlus);var _=e.createTextNode(v.marks?v.marks.raise:"");k.appendChild(_),N.appendChild(k),a.appendChild(N)}return a.okData={marks:t},a.okView="marks",n.domRoot=a,n}p.createMarks=J;function F(t,i){var n={ns:m},a=e.createElement("a");return a.setAttribute("role","button"),a.className="np_mark np_mark"+t,a.setAttribute("data-func","mark"),a.setAttribute("data-mark",t),a.okData={mark:t},a.okView="mark",n.domRoot=a,n}p.createMark=F;function g(t,i,n){for(var a=e.createDocumentFragment(),r=0,o=i.length;r<o;r++)a.appendChild(t(i[r],r).domRoot);n.appendChild(a)}var A=g.bind(null,F);p.appendMarksTo=A;function Q(t,i){var n={ns:m},a=e.createElement("div");if(a.className="np_vote topic-actions",t.can.vote){var r=e.createElement("a");r.setAttribute("role","button"),r.className="ai alnk np_vote_link",r.setAttribute("data-func","vote"),r.href="";var o=e.createElement("span");o.className="ic ic-tick __mod";var s=e.createElement("span");s.className="ic_tx np_vote_link_tx";var d=e.createTextNode(v.vote);s.appendChild(d),o.appendChild(s),r.appendChild(o),a.appendChild(r)}if(!t.can.vote){var c=e.createElement("span");c.className="votes";var l=e.createTextNode(t.votes);c.appendChild(l),a.appendChild(c)}return a.okData={vote:t},a.okView="vote",n.domRoot=a,n}p.createVote=Q;function W(t,i){var n={ns:m},a=e.createElement("div");if(a.className="pin-form-w __tag-user "+(t.canAccept&&E=="PIN_MARK"?"__mod":""),a.setAttribute("data-view","acceptPinNew"),a.setAttribute("data-func","touchPin"),t.canAccept){var r=e.createElement("div");r.className="pin-form __suggest "+(E=="PIN_MARK"?"__mod":""),r.setAttribute("data-func","pinMenu");var o=e.createElement("div");o.className="pin-form_cnt";var s=e.createElement("div");s.className="linecd";var d=e.createTextNode(t.label);s.appendChild(d),o.appendChild(s),r.appendChild(o),a.appendChild(r)}if(!t.canAccept){var c=e.createElement("div");if(c.className="pin-form",t.canDecline){var l=e.createElement("a");l.href="#",l.className="pin-tag __tag-del",l.setAttribute("data-func","deletePin"),c.appendChild(l)}var N=e.createElement("div");N.className="pin-form_cnt";var u=e.createElement("div");u.className="linecd";var h=e.createTextNode(t.label);u.appendChild(h),N.appendChild(u),c.appendChild(N),a.appendChild(c)}return a.okData={acceptPinNew:t},a.okView="acceptPinNew",n.domRoot=a,n}p.createAcceptPinNew=W;function X(t,i){var n={ns:m},a=e.createElement("div");if(t.autoPinsConfirmPreviews){var r=e.createElement("div");r.className="np_pins-panel_info";var o=e.createElement("div");o.className="np_pins-panel_info_avatars avatars-inline __mini",I(t.autoPinsConfirmPreviews,o),r.appendChild(o);var s=e.createElement("div");s.className="np_pins-panel_info_label";var d=e.createTextNode(t.autoPinsConfirmLabel);s.appendChild(d),r.appendChild(s),a.appendChild(r);var c=e.createElement("a");c.className="np_pins-panel_action",c.setAttribute("data-func","acceptAllAutoPins");var l=e.createTextNode(v.processAutoPins.confirmAll);c.appendChild(l),a.appendChild(c)}return a.okData={autoPinsPanel:t},a.okView="autoPinsPanel",n.domRoot=a,n}p.createAutoPinsPanel=X;function V(t,i){var n={ns:m},a=e.createElement("span");a.className="avatars-inline_cnt u-ava";var r=e.createElement("img");return r.src=t,r.className="avatars-inline_img u-ava_img",a.appendChild(r),a.okData={miniAvatar:t},a.okView="miniAvatar",n.domRoot=a,n}p.createMiniAvatar=V;var I=g.bind(null,V);p.appendMiniAvatarsTo=I;function Y(t,i){var n={ns:m},a=e.createElement("div");return a.setAttribute("role","menu"),a.setAttribute("data-view","controls"),B(t.items,a),a.okData={bottomMenu:t},a.okView="bottomMenu",n.domRoot=a,n}p.createBottomMenu=Y;function R(t,i){var n={ns:m},a=e.createElement("li");a.className="bottom-menu-list_item link "+t.itemClass;var r=e.createElement("a");r.className="bottom-menu-list_item_overlink clickarea",r.setAttribute("data-func",t.func),a.appendChild(r);var o=e.createElement("i");o.className="bottom-menu-list_item_icon "+t.className,a.appendChild(o);var s=e.createElement("span");s.className="bottom-menu-list_item_text";var d=e.createTextNode(t.text);return s.appendChild(d),a.appendChild(s),a.okData={bottomMenuItem:t},a.okView="bottomMenuItem",n.domRoot=a,n}p.createBottomMenuItem=R;var B=g.bind(null,R);p.appendBottomMenuItemsTo=B;function Z(){var t={ns:m},i=e.createElement("div");i.className="fake-news-dialog-wrapper";var n=e.createElement("div");n.className="fake-news-dialog-header";var a=e.createTextNode(v.fakeNews.dialogTitle);n.appendChild(a),i.appendChild(n);var r=e.createElement("div");r.className="fake-news-dialog-content";var o=e.createElement("div");o.className="fake-news-dialog-content-info";var s=e.createTextNode(v.fakeNews.dialogInfo);o.appendChild(s),r.appendChild(o);var d=e.createElement("a");d.href=v.fakeNews.dialogLink,d.className="fake-news-dialog-link";var c=e.createTextNode(v.fakeNews.dialogDetails);d.appendChild(c),r.appendChild(d),i.appendChild(r);var l=e.createElement("a");l.className="fake-news-dialog-footer",l.setAttribute("role","button");var N=e.createElement("div");N.className="fake-news-dialog-footer-text";var u=e.createTextNode(v.fakeNews.dialogAgree);return N.appendChild(u),l.appendChild(N),i.appendChild(l),i.okView="fakeNewsBottomMenu",t.domRoot=i,t}return p.createFakeNewsBottomMenu=Z,p.setPhrases=function(t){v=t},p.setViewMode=function(t){E=t},p})(__jsRegistry.c)||window);
__jsRegistry.vf = __globalRegistry["cJunuGw"] || (__globalRegistry["cJunuGw"] = (function(a,u,l){var f=l.sessionStorage;function d(n){var e=this,r=e.onSync||(e.onSync=[]);return r.push(n),e.done&&(a.runCallback(e,n),n.call(e,e.result)),e}function h(n,e,r){r=r||f;var t,s=e().then(function(c){try{r[n]=JSON.stringify(c)}catch(o){}var i=this,m=i.onSync;u(m||[],function(o){a.runCallback(i,o)})});try{t=JSON.parse(r[n])}catch(c){}return t&&(s=a.start().resolve(t)),s.synced=d,s}return{createFactory:function(e,r,t){var s;return function(){return s||(s=h(e,r,t))}}}})(__jsRegistry.n, __jsRegistry.k, __jsRegistry.bs)||window);
__jsRegistry.vg = __globalRegistry["pR2vi4w"] || (__globalRegistry["pR2vi4w"] = (function(r,o,a){var s,n=o.createFactory("photoTexts",r.texts),t={get:function(){return s||(s=n().synced(c))}};function c(e){a.setPhrases(e),t.phrases=e}return t})(__jsRegistry.lu, __jsRegistry.vf, __jsRegistry.ve)||window);
__jsRegistry.vh = __globalRegistry["aucZrVw"] || (__globalRegistry["aucZrVw"] = (function(){return{label:function(i,e,l){l&&(i.title=e),i.setAttribute("aria-label",e)}}})()||window);
__jsRegistry.vi = __globalRegistry["d3Vj4eg"] || (__globalRegistry["d3Vj4eg"] = (function(){var l=document,r={},c="visuals";function p(t,d){var n={ns:c},e=l.createElement("div");e.className="nl_modal "+(t.className||""),e.setAttribute("data-func","modal");var a=l.createElement("div");a.className="nl_dlg_w",n.wrapper=a;var o=l.createElement("h3");o.className="nl_title "+(t.titleClass||"");var g=l.createTextNode(t.title);o.appendChild(g),a.appendChild(o);var s=l.createElement("div");s.className="nl_dlg",n.content=s,s.setAttribute("data-view-level","doc"),a.appendChild(s);var i=l.createElement("div");return i.className="dialog_action_buttons "+(t.buttons.length>1?"__multichoice __size-"+t.buttons.length:""),n.buttons=i,u(t.buttons,i),a.appendChild(i),e.appendChild(a),e.okData={dialog:t},e.okView="dialog",n.domRoot=e,n}r.createDialog=p;function m(t,d){var n={ns:c},e=l.createElement("a");e.setAttribute("role","button"),e.className="dialog_action_button "+(t.className||""),e.setAttribute("data-func",t.func);var a=l.createTextNode(t.text);return e.appendChild(a),e.okData={dialogButton:t},e.okView="dialogButton",n.domRoot=e,n}r.createDialogButton=m;function v(t,d,n){for(var e=l.createDocumentFragment(),a=0,o=d.length;a<o;a++)e.appendChild(t(d[a],a).domRoot);n.appendChild(e)}var u=v.bind(null,m);return r.appendDialogButtonsTo=u,r})()||window);
__jsRegistry.vj = __globalRegistry["r8fZ7yw"] || (__globalRegistry["r8fZ7yw"] = (function(){var t=document,c={},v="visuals";function g(l,m){var n={ns:v},e=t.createElement("div");e.className="nl_modal __redesign "+(l.className||""),e.setAttribute("data-func","modal");var a=t.createElement("div");a.className="nl_dlg_w",n.wrapper=a;var r=t.createElement("div");r.className="nl_dlg_cnt_w";var o=t.createElement("h3");o.className="nl_title "+(l.titleClass||"");var s=t.createTextNode(l.title);o.appendChild(s),r.appendChild(o);var d=t.createElement("div");d.className="nl_dlg",n.content=d,d.setAttribute("data-view-level","doc"),r.appendChild(d),a.appendChild(r);var i=t.createElement("div");i.className="buttons-set";var p=t.createElement("div");return p.className="buttons-set_inner",n.buttons=p,_(l.buttons,p),i.appendChild(p),a.appendChild(i),e.appendChild(a),e.okData={dialog:l},e.okView="dialog",n.domRoot=e,n}c.createDialog=g;function u(l,m){var n={ns:v},e=t.createElement("div");e.className="base-button __modern "+(l.isAccept?"__accept":"__default")+" "+(l.isWide?"__wide":"");var a=t.createElement("a");a.setAttribute("role","button"),a.className="base-button_target",a.setAttribute("data-func",l.func);var r=t.createTextNode(l.text);a.appendChild(r),e.appendChild(a);var o=t.createElement("div");o.className="base-button_bg",e.appendChild(o);var s=t.createElement("div");s.setAttribute("aria-hidden","true"),s.className="base-button_content";var d=t.createElement("div");d.className="base-button_content_text";var i=t.createTextNode(l.text);return d.appendChild(i),s.appendChild(d),e.appendChild(s),e.okData={dialogButton:l},e.okView="dialogButton",n.domRoot=e,n}c.createDialogButton=u;function b(l,m,n){for(var e=t.createDocumentFragment(),a=0,r=m.length;a<r;a++)e.appendChild(l(m[a],a).domRoot);n.appendChild(e)}var _=b.bind(null,u);return c.appendDialogButtonsTo=_,c})()||window);
__jsRegistry.vk = __globalRegistry["dilS1Mg"] || (__globalRegistry["dilS1Mg"] = (function(C,_,l,u,r,E,f,R,S){var L="__has-scroll",g="nl_dlg_cnt_w",w="nl_dlg_w";function y(o){var t=o.prototype;u.forbidScroll(t,"modal"),E(t,function(s,n){s&&s.tap&&u.forbidScroll(t,n)})}function a(){var o=this.contentWrapper.scrollHeight>this.contentWrapper.clientHeight;f.switchClass(this.contentWrapper,o,L)}var m=function(t,s){var n=!S.findParent(s.target,function(i){return i.classList.contains(w)});n&&this.close(t)};return{show:function(t,s){var n=s.titleClass,i=s.content,d=f.hasClass(document.body,"js-dialog-redesign"),c;if((!i||s.isTitleForInput)&&(s.titleClass=[n||""," ","__over-controls"].join("")),d){if(s.buttons.length>1){for(var p=!0,h=0;h<s.buttons.length;h++)if(s.buttons[h].isAccept){p=!1;break}typeof s.buttons.every!="function"&&R.log("non-existent.method.every.failed"),p&&(s.buttons[0].isAccept=!0)}s.buttons.sort(function(b,A){return b.isAccept===A.isAccept?0:b.isAccept?-1:1}),c=_.createDialog(s)}else c=C.createDialog(s);var e=c.domRoot,v=s.onShown,j=s.behavior;return e.okView=s.view,e.style.maxHeight=l.calc().height+"px",i&&c.content.appendChild(i),t.insertBefore(e,t.firstChild),r.start(e,r.css.shown),d&&(this.contentWrapper=c.domRoot.getElementsByClassName(g)[0],a.apply(this),l.resize.attach(a,this)),v&&r.onEnd(e,v),j&&y(j),e.addEventListener("touchstart",m.bind(this,e)),this.topmost=e,e},close:function(t){this.topmost=null,this.contentWrapper=null,t.removeEventListener("touchstart",m),r.startRemoval(t,r.css.hidden),l.resize.detach(a,this)}}})(__jsRegistry.vi, __jsRegistry.vj, __jsRegistry.bd, __jsRegistry.am, __jsRegistry.cy, __jsRegistry.l, __jsRegistry.s, __jsRegistry.a, __jsRegistry.t)||window);
__jsRegistry.vl = __globalRegistry["nTQI2w"] || (__globalRegistry["nTQI2w"] = (function(r,h,j,y,g,k,w,u,d,C){var l=f("next",1),c=f("previous",-1),v=!1;function f(n,o){return{touchStart:function(t){if((t.type==="pointerdown"||t.type==="mousedown")&&t.button===2){var s=t.target,a=s.style;a.pointerEvents="none",C(document,"contextmenu",function(){setTimeout(function(){a.pointerEvents=""},0)})}else{var i=r.get().picture,p=r.get()[n];p&&(i.fold(o),p.unfold().activate())}},wheel:function(t){var s=r.get().layer;s&&s.getBehavior().handleWheel(t)}}}function m(){}m.prototype={next:l,previous:c},k.register("navigationButtons",m);function b(){var n=new Date;function o(e){if(!(n>new Date-200||v)){n=new Date;var t=e.keyCode==32||e.keyCode==13||e.keyCode==39||e.keyCode==40,s=e.keyCode==37||e.keyCode==38,a=e.keyCode==27;if((a||s||t)&&!/input|textarea/i.test(e.target.tagName)){if(!e.repeat)if(a&&r.get().controls){var i=d.topmost;i?d.close(i):r.get().controls.close()}else(t?l:c).touchStart(e);g.preventDefault(e)}}}document.addEventListener("keydown",o,!1),j.close.attachOnce(function(){document.removeEventListener("keydown",o,!1)})}return{create:function(o){var e=h.createNavigationButtons();o.appendChild(e.domRoot),w.desktop&&b(),y.get().then(function(t){u.label(e.toNext,t.nav.next),u.label(e.toPrevious,t.nav.previous)})},preventKeyboardShortcuts:function(o){v=o}}})(__jsRegistry.vd, __jsRegistry.ve, __jsRegistry.vc, __jsRegistry.vg, __jsRegistry.s, __jsRegistry.am, __jsRegistry.ak, __jsRegistry.vh, __jsRegistry.vk, __jsRegistry.o)||window);
__jsRegistry.vm = __globalRegistry["uhYNkw"] || (__globalRegistry["uhYNkw"] = (function(l,v,o){var g={};Object.defineProperty(g,"unsentCommentMessagesStore",{enumerable:!0,get:function(){return A}});function y(r,n){for(var s=0;s<n.length;s++){var e=n[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function S(r,n,s){return n&&y(r.prototype,n),r}var f="_ok_cmnt_msgs_",c=15,m=1e3*60*60*24,p=7*m,b=(function(){function r(){var s=this;this.allMessages=U(),this.updateStorage=(0,v.debounce)(function(){o.isSupported&&(Object.keys(s.allMessages).forEach(function(e){var t=s.allMessages[e];t.length>c&&(t.length=c)}),l.localStorage.setItem(f,JSON.stringify(s.allMessages)))},500)}var n=r.prototype;return n.getMessage=function(e){var t=this.getMsgIndexById(e);return t===-1||this.currentUserMessages===null?null:this.currentUserMessages[t][1]},n.updateMessage=function(e,t){var a=this.getOrCreateCurrentUserMessages();if(!u(t)||a===null){this.removeMessage(e);return}var d=Date.now(),h=this.getMsgIndexById(e);if(h!==-1){var i=a.splice(h,1)[0];i[1]=t,i[2]=d,a.unshift(i)}else a.unshift([e,t,d]);this.updateStorage()},n.removeMessage=function(e){var t=this.getMsgIndexById(e),a=this.currentUserMessages;t!==-1&&a!==null&&(a.splice(t,1),this.updateStorage())},n.getMsgIndexById=function(e){return this.currentUserMessages===null?-1:this.currentUserMessages.findIndex(function(t){return t[0]===e})},n.getOrCreateCurrentUserMessages=function(){var e=this.currentUserMessages;if(e!==null)return e;var t=M();return t!==null&&(this.allMessages[t]=[]),null},S(r,[{key:"currentUserMessages",get:function(){var e=M();return e===null||!Array.isArray(this.allMessages[e])?null:this.allMessages[e]}}]),r})();function U(){if(!o.isSupported)return{};var r=I();if(r===null)return{};var n=Date.now();return Object.keys(r).forEach(function(s){r[s]=r[s].filter(function(e){return n-e[2]<p})}),r}function I(){var r=l.localStorage.getItem(f);if(!u(r))return null;try{var n=JSON.parse(r);return Object.prototype.toString.call(n)!=="[object Object]"?null:(Object.keys(n).forEach(function(s){var e=n[s];if(Array.isArray(e))return e.filter(function(t){return Array.isArray(t)&&u(t[0])&&u(t[1])&&typeof t[2]=="number"});delete n[s]}),n)}catch(s){return null}}function u(r){return typeof r=="string"&&r.length>0}function M(){var r=window.pageCtx?window.pageCtx.uid:null;return u(r)?r:null}var A=new b;return g})(__jsRegistry.bs, __jsRegistry.by, __jsRegistry.ch)||window);
__jsRegistry.vn = __globalRegistry["ujMdO7w"] || (__globalRegistry["ujMdO7w"] = (function(r){var o={};Object.defineProperty(o,"UnsentCommentMessagesCtrl",{enumerable:!0,get:function(){return d}});var c="#ta-emul",a="data-dscid",d=(function(){function i(){var s=this;this.textArea=null,this.discussionId="",this.collectAndUpdateValue=function(){var e=s.textArea;if(e!==null){var t=e.textContent;r.unsentCommentMessagesStore.updateMessage(s.discussionId,t)}}}var n=i.prototype;return n.connectToForm=function(e){var t=this.collectDataFromDom(e);return t?(this.toggleListeners(!0),this.updateTextAreaValueIfExist(),!0):!1},n.collectDataFromDom=function(e){var t=e.querySelector(c),u=e.querySelector("["+a+"]"),l=u!==null?u.getAttribute(a):null;return t===null||!l?!1:(this.textArea=t,this.discussionId=l,!0)},n.updateTextAreaValueIfExist=function(){var e=r.unsentCommentMessagesStore.getMessage(this.discussionId);e!==null&&this.textArea&&(this.textArea.textContent=e)},n.toggleListeners=function(e){var t=this.textArea;t!==null&&t[e?"addEventListener":"removeEventListener"]("blur",this.collectAndUpdateValue)},n.destroy=function(){this.toggleListeners(!1),this.textArea=null},i})();return o})(__jsRegistry.vm)||window);
__jsRegistry.vo = __globalRegistry["o1g3Vcw"] || (__globalRegistry["o1g3Vcw"] = (function(p,v,t,C,g,a,i,c,w,u){var O="opncmnt",d="dscs";function l(e){if(!e.disableOpening){var s=new w.UnsentCommentMessagesCtrl;a.drawContent.attachOnce(function(r){window.OK.initAjaxListLoading();var o=r.getContentElement();o.classList.add(d),s.connectToForm(o),h(o,e.focusCommentId),(0,c.preventKeyboardShortcuts)(!0),u.discussionsDraw.trigger()}),a.hide.attachOnce(function(r){(0,C.discardDiscussions)(),i.init.detach(m);var o=r.getContentElement();o.classList.remove(d),s.collectAndUpdateValue(),s.destroy(),(0,c.preventKeyboardShortcuts)(!1),u.discussionsHide.trigger()}),i.init.attach(m);var n=(0,t.behavior)().initOpened();if(n){var j=(0,t.behavior)().getContentElement();h(j,e.focusCommentId)}else(0,t.behavior)().show({bmenuXhr:e.href||window.location.toString(),bmenuTitle:"",bmenuModificator:"__full-height"})}}function m(){(0,t.behavior)().getRootElement().style.zIndex="500",i.close.attachOnce(function(){(0,t.behavior)().getRootElement().style.removeProperty("z-index")})}function h(e,s){if(s){var n=e.querySelector("#"+s);if(n!==null){n.scrollIntoView();return}}e.scrollTop=e.scrollHeight}function S(){var e=window.location.href;if(e){var s=(0,v.params)(e);return O in s}}(0,p.create)({name:"openDiscussions",update:function(s){(S()||s.forceShow)&&setTimeout(function(){l(s)},0)}});function f(){}f.prototype.openBottomMenu={tap:function(s,n){n.href&&l({href:n.href})}},(0,g.register)("discussionsInBottomMenu",f)})(__jsRegistry.x, __jsRegistry.m, __jsRegistry.fi, __jsRegistry.vb, __jsRegistry.am, __jsRegistry.ff, __jsRegistry.vc, __jsRegistry.vl, __jsRegistry.vn, __jsRegistry.re)||window);
__jsRegistry.vp = __globalRegistry["sNuFkAg"] || (__globalRegistry["sNuFkAg"] = (function(g){var m={};Object.defineProperty(m,"StandardizedBannerDisclaimer",{enumerable:!0,get:function(){return c}});var c=function(o,t){var e=this;this.model=o,this.root=t,this.FALLBACK_CONTAINER_SELECTOR=".feed-card",this.disclaimerImgSelector=".js-standardized-disclaimer-img",this.setDisclaimerParams=function(){var r,a;if(!(!e.container||!e.disclaimer)){var n=(r=e.disclaimer)==null?void 0:r.getBoundingClientRect(),l=n.height,d=n.width,s=(a=e.container)==null?void 0:a.getBoundingClientRect(),h=s.height,i=s.width,v=Math.ceil(h-l),f=(i-d)/2,u=e.container?e.container.querySelector(e.disclaimerImgSelector):null;if(u){var _=e.calcDisclaimerHeight(v,i,f,e.percent);u.style.height=_+"px"}}},this.calcDisclaimerHeight=function(r,a,n,l){var d=l/100,s=r,h=n,i=a;return Math.ceil(i*d*s/(i-2*h-i*d))},this.percent=Number(t.getAttribute("data-percent")),this.feedId=t.getAttribute("data-feed-disclaimer-id"),this.disclaimer=t,this.container=this.feedId?document.getElementById(this.feedId):t.closest(this.FALLBACK_CONTAINER_SELECTOR),this.setDisclaimerParams()};return c.isInstant=!0,(0,g.register)("standardizedAdvertDisclaimer",c),m})(__jsRegistry.am)||window);
__jsRegistry.vq = __globalRegistry["pKtS9UQ"] || (__globalRegistry["pKtS9UQ"] = (function(l,C,D,p,h,T,I,b,A,q,w,M,L){var B={};Object.defineProperty(B,"showHobbyPromoMenu",{enumerable:!0,get:function(){return S}});var s,_,t,y=!1,S=(0,D.create)();S.attach(H);function H(e){j({promoId:e.promoId})}function j(e){var o="dk?st.cmd=feedPromoCarousel",r={};e&&e.promoId&&(r["st.promo"]=e.promoId,t=String(e.promoId)),q.request(o,"POST",r).then(function(n){if(n){var i=n.response;i&&M(i,{special:{showBottomMenu:{run:function(m){var d,x,P=(x=m.contentDom)==null||(d=x.querySelector("#promo-features-carousel"))==null?void 0:d.getAttribute("data-model");if(P){var c=JSON.parse(P);if(c.pages){var J=(0,L.isDarkThemeEnabled)(),R=c.pages.filter(function(f){return f.mediaType==="IMAGE"}).map(function(f){var v=f.headerImage;return v&&J?v.dark:v?v.light:f.mediaUrl});F(R).then(function(){E(i)})}else E(i);c.promoId&&(t=c.promoId)}}}}})}}).send()}function E(e){p.show({bmenuHtml:e,bmenuHeight:662,bmenuCloseOnClickOutside:!1})}function a(e,o,r,n){n?I.logTimed(O,n,[e,o,r,k]):I.log(O,[e,o,r,k])}function F(e){for(var o=[],r=0;r<e.length;r++)o.push(N(e[r]));return w.all(o)}function N(e){var o=w.start(),r=new Image;return r.onload=function(){o.resolve(r)},r.onerror=r.onabort=function(){o.reject(e)},r.src=e,o}function G(e){var o,r;b(document.querySelectorAll(".slide_description_item"),function(n){return n.classList.add("hidden")}),(o=document.querySelector(".slide_description_item[data-index='"+e+"']"))==null||o.classList.remove("hidden"),b(document.querySelectorAll(".slide_buttons_item"),function(n){return n.classList.add("hidden")}),(r=document.querySelector(".slide_buttons_item[data-index='"+e+"']"))==null||r.classList.remove("hidden"),a("promo_render_page",t,e)}(0,C.create)({name:"feedPromoService",update:function(o){o.id&&(j(),t=String(o.id))}});function g(){var e=this.carouselBehavior||(this.carouselBehavior=(0,l.getOrMakeBehavior)(document.getElementById("promo-features-carousel")));if(window.DEVMODE&&typeof e>"u")throw new Error("Error during promo feed initialization. Carousel behavoior not found.");return e.onSlideEvent.attach(function(o){var r=o.toIndex,n=o.isBack,i=o.isWithButton,u=e.currentBannerIndex;if(s){var m=Date.now();a("promo_time_on_a_page",t,u,m-s),s=m}r===e.bannersLastIndex&&(y=!0),G(r);var d=n?"back_via_slider":"forward_via_slider";i&&(d=n?"back_via_button":"forward_via_button"),a(d,t,r)}),h.hide.attachOnce(function(){var o=e==null?void 0:e.currentBannerIndex;a(y?"promo_complete":"promo_abandoning",t,o);var r=Date.now();s&&a("promo_time_on_a_page",t,o,r-s),_&&a("promo_time_total",t,o,r-_),t&&T.invoke("/feedPromo/closePromo",{promoId:t})}),h.drawContent.attachOnce(function(){s=Date.now(),_=s,a("promo_render",t,"");var o=document.querySelector(".promo-feature-banner.js-slide-active .promo_feature_img");o.onload=function(){if(window.performance&&window.performance.timing){var r=Date.now()-window.performance.timing.navigationStart;a("first_image_load_time",t,"",r)}}}),this}g.prototype={actionBtnClick:{tap:function(o,r){var n=r.getAttribute("data-action-type"),i=Number(r.getAttribute("data-index")),u=(0,l.getOrMakeBehavior)(document.getElementById("promo-features-carousel"));if(n==="NEXT")u==null||u.scrollToIndexFunc(i+1,!0);else if(n==="PREV")u==null||u.scrollToIndexFunc(i-1,!0);else if(n==="DONE"){var m=r.getAttribute("data-link");a("close_promo_via_complete_promo",t,i),p.close(),m&&A.change(m)}}},closeBtnClick:{tap:function(){var o=(0,l.getOrMakeBehavior)(document.getElementById("promo-features-carousel"));a("close_promo_via_button",t,o.currentBannerIndex),p.close()}}},g.isInstant=!0,(0,l.register)("promoFeaturesCarousel",g);var O="promo.feed",k="update_promo";return B})(__jsRegistry.am, __jsRegistry.x, __jsRegistry.u, __jsRegistry.fi, __jsRegistry.ff, __jsRegistry.bx, __jsRegistry.a, __jsRegistry.k, __jsRegistry.ew, __jsRegistry.bw, __jsRegistry.n, __jsRegistry.de, __jsRegistry.cm)||window);
__jsRegistry.vr = __globalRegistry["m8c7alw"] || (__globalRegistry["m8c7alw"] = (function(c,a){var e=function o(r,s){this.model=r,this.root=s,Object.defineProperty(this,"activeState",{get:function(){var t;return(t=this.cachedActiveState)!=null?t:this.root.getAttribute("data-active-state")},set:function(t){this.root.setAttribute("data-active-state",t),this.cachedActiveState=t}}),this.activeTab=this.root.getElementsByClassName(o.ACTIVE_CLASSNAME)[0]};e.ACTIVE_CLASSNAME="__active",e.prototype={constructor:e,toggleState:{tap:function(r,s,i){var t=this.root,h=this.activeTab;(0,a.removeClass)(t,this.activeState),(0,a.addClass)(t,i),(0,a.removeClass)(h,e.ACTIVE_CLASSNAME),(0,a.addClass)(s,e.ACTIVE_CLASSNAME),this.activeState=i,this.activeTab=s}}},(0,c.register)("tabsToggler",e)})(__jsRegistry.am, __jsRegistry.s)||window);
__jsRegistry.vs = __globalRegistry["fwEdkEA"] || (__globalRegistry["fwEdkEA"] = (function(b,v){function i(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function d(e,r){if(e){if(typeof e=="string")return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}}function y(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=d(e))||r){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l="data-tab-type",T="js-profile-content",m=".js-profile-content-button",h=".js-auth-link",s="data-log-click",p="data-login-url",A=JSON.stringify({target:"all_photo"}),S=JSON.stringify({target:"all_video"}),g=[{tabType:"PHOTOS",className:"__photos"},{tabType:"MOVIE",className:"__movie"}],O=function(r,t){var n=this;this.updateContent={tap:function(u,E){for(var a=E.getAttribute(l),L=y(g),c;!(c=L()).done;){var f=c.value;n.contentBlock.classList.toggle(f.className,a===f.tabType)}switch(n.tabs.querySelectorAll(".tabs_item").forEach(function(o){var _=o.getAttribute(l);o.classList.toggle("__active",a===_),a===_&&(n.linkElement.href=o.getAttribute(p))}),a){case"MOVIE":n.buttonElement.setAttribute(s,S);break;case"PHOTOS":n.buttonElement.setAttribute(s,A);break;default:throw new Error("Unsupported tab: "+a)}}},this.contentBlock=(0,v.findParent)(t,function(u){return u.classList.contains(T)}),this.buttonElement=this.contentBlock.querySelector(m),this.linkElement=this.buttonElement.querySelector(h),this.tabs=t};(0,b.register)("friendContentBlock",O)})(__jsRegistry.am, __jsRegistry.t)||window);
__jsRegistry.vt = __globalRegistry["pYR7XHQ"] || (__globalRegistry["pYR7XHQ"] = (function(h,u,g,c,f){var v="__closed",s=106,l=45,E=.32,d=(function(){function m(r,t){var e=this;this._model=r,this.target=t,this.closed=!0,this.dragMovement=0,this.coverClick={tap:function(){e.closed&&e.toggleClosedState(!1)}},this.onMouseTouchMove=function(o){if(e.profilePageElement){var a=(0,c.touchY)(o),i=e.startY-a;e.allowDragging(i)&&(o.type==="touchmove"&&(o.preventDefault(),o.stopPropagation()),e.dragMovement=i,e.profilePageElement.style.transform=e.getTransformStyle(i),e.coverDarkener&&(e.coverDarkener.style.opacity=e.getCoverDarkenerOpacity(i).toString()))}},this.onMouseTouchStart=function(o){e.startY=(0,c.touchY)(o),document.addEventListener("mousemove",e.onMouseTouchMove),document.addEventListener("mouseup",e.onMouseTouchEnd,{once:!0})},this.onMouseTouchEnd=function(){e.profilePageElement&&(document.removeEventListener("mousemove",e.onMouseTouchMove),e.dragMovement<-l&&e.closed?e.toggleClosedState(!1):e.dragMovement>l&&!e.closed&&e.toggleClosedState(!0),e.profilePageElement.style.transform="",e.dragMovement=0,e.coverDarkener&&(e.coverDarkener.style.opacity=""))},this.cover=t,this.profilePageElement=(0,g.parentBySelector)(t,".js-profile-page"),this.coverDarkener=t.getElementsByClassName("js-cover-darkener")[0],document.addEventListener("touchmove",this.onMouseTouchMove,{passive:!1}),document.addEventListener("touchstart",this.onMouseTouchStart),document.addEventListener("touchend",this.onMouseTouchEnd),document.addEventListener("mousedown",this.onMouseTouchStart),f.rendering.attachOnce(this.removeEventListeners,this)}var n=m.prototype;return n.allowDragging=function(t){var e=Math.abs(t)<=s,o=window.scrollY===0&&t<-10&&this.closed,a=t>0&&!this.closed;return(a||o)&&e},n.getTransformStyle=function(t){var e=this.closed?-s:0;return"translateY("+(e-t)+"px)"},n.toggleClosedState=function(t){this.profilePageElement&&(this.closed=t,(0,u.switchClass)(this.profilePageElement,t,v),(0,u.switchClass)(this.cover,t,v))},n.getCoverDarkenerOpacity=function(t){var e=t<0?s+t:t,o=Math.min(e/s,1);return E*o},n.removeEventListeners=function(){document.removeEventListener("touchmove",this.onMouseTouchMove),document.removeEventListener("touchstart",this.onMouseTouchStart),document.removeEventListener("touchend",this.onMouseTouchEnd),document.removeEventListener("mousedown",this.onMouseTouchStart)},m})();d.isInstant=!0,(0,h.register)("ProfileCover",d)})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.t, __jsRegistry.aj, __jsRegistry.w)||window);
__jsRegistry.vu = __globalRegistry["b0lbkrQ"] || (__globalRegistry["b0lbkrQ"] = (function(a,i){var n=null;function o(r,e){n=e}o.isInstant=!0,o.prototype={show:{tap:function(e,t){e.preventDefault(),i.show(t.dataset)}},applyFilters:{tap:function(e){e.preventDefault();var t=n.querySelector('input[type="radio"]:checked');t.value&&window.location.replace(t.value)}}},a.register("bottomMenuHobbyFilter",o)})(__jsRegistry.am, __jsRegistry.fi)||window);
__jsRegistry.vv = __globalRegistry["paFJEvQ"] || (__globalRegistry["paFJEvQ"] = (function(v,h,_,E,p){var c={};Object.defineProperty(c,"PromoBanner",{enumerable:!0,get:function(){return l}});function u(){return u=Object.assign||function(s){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=i[r])}return s},u.apply(this,arguments)}var a=null,O=function(){},l=(function(){function s(i,r){var e=this;this.LOG_SERVICE="promo.feed",this.LOG_PROMO_TYPE="marketing_promo",this.SHOW_EVENT_TIME=500,this.ANIMATION_CLASS="__show",this.ANIMATION_DURATION=300,this.SWIPE_BLOCK_RANGE=30,this.SWIPE_LENGTH=50,this.handleRequest=function(n){return _.run("promoBanner",u({},n,{promoId:e.promoId}))},this.handleClickCloseButton=function(n,t){e.closeAndApplyFunc(function(){t&&(t.disabled=!0),e.handleRequest({key:"CLOSE"}).anyway(function(){t&&(t.disabled=!1)}),h.log(e.LOG_SERVICE,["promo_banner_hide_via_button",e.promoId,"",e.LOG_PROMO_TYPE])})},this.handleClickSubmitButton=function(n,t){e.closeAndApplyFunc(function(){t&&(t.disabled=!0),e.handleRequest({key:"HIDE"}).anyway(function(){t&&(t.disabled=!1),e.redirectUrl&&(window.location.href=e.redirectUrl)}),h.log(e.LOG_SERVICE,["promo_banner_click_view",e.promoId,"",e.LOG_PROMO_TYPE])})},this.closeAndApplyFunc=function(n){!e.timerExitAnimation&&e.root&&(n(),e.root.classList.remove(e.ANIMATION_CLASS),e.timerExitAnimation=setTimeout(function(){e.logEndSession(),e.destroy()},e.ANIMATION_DURATION))},this.logEndSession=function(){h.logTimed(e.LOG_SERVICE,Date.now()-e.currentTimestamp,["promo_banner_end_session",e.promoId,"",e.LOG_PROMO_TYPE])},this.initSwipe=function(n){e.xDelta=0,e.yDelta=0,n.addEventListener("touchstart",e.handleTouchStart,!1),n.addEventListener("touchmove",e.handleTouchMove,!1),n.addEventListener("touchend",e.handleTouchEnd,!1)},this.destroySwipe=function(n){n==null||n.removeEventListener("touchstart",e.handleTouchStart),n==null||n.removeEventListener("touchmove",e.handleTouchMove),n==null||n.removeEventListener("touchend",e.handleTouchEnd)},this.handleTouchStart=function(n){var t=n.changedTouches[0];e.xDelta=t.screenX,e.yDelta=t.screenY},this.handleTouchMove=function(n){n.preventDefault()},this.handleTouchEnd=function(n){if(!(!e.yDelta||!e.xDelta)){var t=n.changedTouches[0].screenX,m=Math.abs(e.xDelta-t),T=n.changedTouches[0].screenY,d=e.yDelta-T;Math.abs(d)>m&&m<e.SWIPE_BLOCK_RANGE&&Math.abs(d)>e.SWIPE_LENGTH&&d<0&&e.closeAndApplyFunc(function(){e.handleRequest({key:"CLOSE"}),h.log(e.LOG_SERVICE,["promo_banner_hide_via_swipe",e.promoId,"",e.LOG_PROMO_TYPE])}),e.xDelta=0,e.yDelta=0}},this.hideBanner=function(){e.root&&(e.root.classList.remove(e.ANIMATION_CLASS),e.logEndSession())},this.unhideBanner=function(){e.root&&(e.root.classList.add(e.ANIMATION_CLASS),e.currentTimestamp=Date.now())},this.currentTimestamp=Date.now(),this.location=window.location.href,this.root=r,r.classList.add(this.ANIMATION_CLASS),this.promoId=i.promoId||"0",this.redirectUrl=i.redirectUrl||"",this.initSwipe(this.root),i.isBannerFromServer&&(this.timer=setTimeout(function(){e.handleRequest({key:"SHOW"}).then(function(){h.log(e.LOG_SERVICE,["promo_banner_show",e.promoId,"",e.LOG_PROMO_TYPE])})},this.SHOW_EVENT_TIME)),window.addEventListener("beforeunload",this.logEndSession)}var o=s.prototype;return o.destroy=function(){window.removeEventListener("beforeunload",this.logEndSession),this.closeAndApplyFunc(O),this.destroySwipe(this.root),this.timer&&clearTimeout(this.timer),this.timerExitAnimation&&clearTimeout(this.timerExitAnimation),this.root&&E.remove(this.root),a=null},s})(),f=function(o,i){var r=this;this.closeBanner={tap:function(e,n){var t;return(t=r.behavior)==null?void 0:t.handleClickCloseButton(e,n)}},this.submitBanner={tap:function(e,n){var t;return(t=r.behavior)==null?void 0:t.handleClickSubmitButton(e,n)}},a=new l(o,i),this.behavior=a};return f.isInstant=!0,(0,v.register)("promoBanner",f),(0,p.create)({name:"promoBannerService",update:function(o){a&&(o.hideBanner?a.hideBanner():a.unhideBanner())}}),c})(__jsRegistry.am, __jsRegistry.a, __jsRegistry.fx, __jsRegistry.s, __jsRegistry.x)||window);
__jsRegistry.vw = __globalRegistry["hKVq4uQ"] || (__globalRegistry["hKVq4uQ"] = (function(){var e={};Object.defineProperty(e,"create",{enumerable:!0,get:function(){return o}});function r(t,i){var n=this;this.tid=setTimeout(function(){t(),r.call(n,t,i)},i)}function u(){clearTimeout(this.tid),this.tid=null}function o(t,i){return{tid:void 0,stopHeartbit:u,restartHeartbit:function(){this.tid!=null&&this.stopHeartbit(),r.call(this,t,i)}}}return e})()||window);
__jsRegistry.vx = __globalRegistry["tRTeQaw"] || (__globalRegistry["tRTeQaw"] = (function(){var E={};Object.defineProperty(E,"PlayerState",{enumerable:!0,get:function(){return u}});var u=(function(n){return n[n.ENDED=0]="ENDED",n[n.PLAYING=1]="PLAYING",n[n.PAUSED=2]="PAUSED",n[n.BUFFERING=3]="BUFFERING",n[n.CUED=4]="CUED",n})(u||{});return E})()||window);
__jsRegistry.vy = __globalRegistry["mmYV8fQ"] || (__globalRegistry["mmYV8fQ"] = (function(y,p,l,a,A,L,S,f,T,b){var g={};function h(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,r).get})}h(g,{get EVENT_ID(){return I},get VIDEO_PLAYER_PID(){return u},get onPing(){return j}});var u=8,m=3e4,R=(0,A.throttle)(function(){return(0,y.invoke)("reports/heartbit")},15e3),v,o,s,d,c,P=a.pageCtx.uid,I=(function(e){return e[e.START=3]="START",e[e.PING=4]="PING",e[e.STOP=5]="STOP",e})(I||{}),j=(0,T.create)();function D(e,t){return[t,e,2,2,a.pageCtx.uid!=null?2:3,1].join("")}function O(e,t){return"https://"+D(e,t)+".ms.ok.ru"}function i(e,t){var r=t!=null?t:a.pageCtx.pid;j.trigger({event:e,pid:r}),R();var n=new XMLHttpRequest;n.open("GET",(0,b.insertParams)(O(e,r),x())),n.send()}function x(){var e=a.pageCtx.uid,t=a.pageCtx.statId,r=a.pageCtx.lvid,n={plt:"mob"};return e&&(n.uid=e),t&&(n.statid=t),r&&(n.lvid=r),n}function H(){s!=null&&(i(5,u),o.stopHeartbit(),s=null,d=null)}function C(e){var t=e.event;s=e.id,t===f.PlayerState.PLAYING&&(d==null?(i(3,u),o.restartHeartbit()):(o.restartHeartbit(),d===s&&i(4,u)),d=s),t===f.PlayerState.PAUSED&&(d!=null&&i(4,u),o.stopHeartbit()),t===f.PlayerState.ENDED&&(i(4,u),H())}function k(){return document.pictureInPictureElement===s}var q={name:"mediascopeLogger",init:function(t){v=(0,p.create)(function(){i(4)},m),o=(0,p.create)(function(){i(4,u)},m),t.backgroundLog||setTimeout(function(){l.addListener(function(r){(0,l.isHidden)()?(i(4),v.stopHeartbit()):(i(4),v.restartHeartbit())})}),S.playerStateChange.attach(C)},update:function(t){var r=a.pageCtx.pid,n=a.pageCtx.uid;(c==null||c!=r||P!=n)&&(v.restartHeartbit(),c!=null&&i(5,c),i(3),c=r,P=n)},discard:function(){k()||H()}};return(0,L.create)(q),g})(__jsRegistry.bx, __jsRegistry.vw, __jsRegistry.bg, __jsRegistry.bv, __jsRegistry.ba, __jsRegistry.x, __jsRegistry.gd, __jsRegistry.vx, __jsRegistry.u, __jsRegistry.m)||window);
__jsRegistry.vz = __globalRegistry["mSban2g"] || (__globalRegistry["mSban2g"] = (function(m,s,p,l,o,c,i){var g=window._ok_mytmapping||[-1,-1,32,34,33,79,37,36,35];c.playerStateChange.attach(function(a){switch(a.event){case i.PlayerState.PLAYING:n(35);break;case i.PlayerState.PAUSED:case i.PlayerState.ENDED:n(35,!0);break}}),s.onPing.attach(function(a){var e=a.event,t=a.pid;if(e!==s.VIDEO_PLAYER_PID){var r=g[t];r>-1?e===s.EVENT_ID.START?n(r):e===s.EVENT_ID.STOP&&n(r,!0):(0,m.log)("js",["jserror",p.pageCtx.statId,"invalid mapping: pid: "+t+" -> aid: "+r],"log mytracker mapping errors")}});function n(a,e){var t={type:e?"stopTimespent":"startTimespent",activity:a};e==null&&(t.canUseInBackground=!1),o.MytrackerImpl.pushEvent(t)}(0,l.create)({name:"mytrackerLog",dispose:function(e){var t=e.id,r=e.timespent;o.MytrackerImpl.trackPage({id:t,timespent:r})}})})(__jsRegistry.a, __jsRegistry.vy, __jsRegistry.bv, __jsRegistry.x, __jsRegistry.fy, __jsRegistry.gd, __jsRegistry.vx)||window);
__jsRegistry.wa = __globalRegistry["tBZKzXw"] || (__globalRegistry["tBZKzXw"] = (function(o,s){var c={};function g(a,e){for(var r in e)Object.defineProperty(a,r,{enumerable:!0,get:Object.getOwnPropertyDescriptor(e,r).get})}g(c,{get ThrottlingLog(){return h},get count(){return V},get every(){return v},get interval(){return p},get some(){return m}});var f="thl";function l(a){if(s.isSupported){var e=o.localStorage.getItem(f);if(e)try{var r=JSON.parse(e);return r[a]?r[a]:{}}catch(t){return{}}}return{}}var h=(function(){function a(r,t){this.name=r,this.predicate=t,this.state=l(r)}var e=a.prototype;return e.updateStore=function(t){var n=l(this.name);n=t(n),this.state=n;var u;return o.localStorage.setItem(f,JSON.stringify((u={},u[this.name]=n,u))),this},e.setValue=function(t,n){return this.updateStore(function(u){return u[t]=n(u[t]),u})},e.setCurrentTime=function(t){return this.updateStore(function(n){return n[t]=Date.now(),n})},e.increaseValue=function(t,n){return this.setValue(t,function(u){var i=parseInt(u,10);return i!=i&&(i=0),i+n})},e.incrementValue=function(t){return this.increaseValue(t,1)},e.decreaseValue=function(t,n){return this.increaseValue(t,-1*n)},e.decrementValue=function(t){return this.increaseValue(t,-1)},e.resetValues=function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return this.updateStore(function(i){return n.forEach(function(d){i[d]=0}),i})},e.tryPerform=function(t){if(!s.isSupported)return!1;this.predicate(this.state)&&t.call(this)},a})();function v(){for(var a=arguments.length,e=new Array(a),r=0;r<a;r++)e[r]=arguments[r];return function(t){var n=this;return e.every(function(u){return u.call(n,t)})}}function m(){for(var a=arguments.length,e=new Array(a),r=0;r<a;r++)e[r]=arguments[r];return function(t){var n=this;return e.some(function(u){return u.call(n,t)})}}function p(a,e){return function(r){var t=r[e];return t?(Date.now()-parseInt(t,10))/1e3>a:!0}}function V(a,e){return function(r){var t=r[e];return t?parseInt(t,10)>=a:!0}}return c})(__jsRegistry.bs, __jsRegistry.ch)||window);
__jsRegistry.wb = __globalRegistry["vL9owkg"] || (__globalRegistry["vL9owkg"] = (function(s,d,c,m,l){var t=null,a;function u(i){t&&r();var e=document.createElement("div");e.className="font-size-element",e.textContent=i,e.style.fontSize="10px",e.style.overflow="hidden",e.style.visibility="hidden",e.style.position="relative",e.style.lineHeight="0px",e.style.left="-9999px",t=e,document.body.append(e)}function r(){t&&(0,m.remove)(t)}function f(i,e,o){var n="unknown";o&&t&&(n=(parseInt(window.getComputedStyle(t).fontSize)/10).toFixed(2),document.body.classList.add("block-font-scale")),d.log("viewportScale",[i,e,n])}var w={name:"viewportScaleLogger",init:function(e){a=new l.ThrottlingLog("vsl",(0,l.interval)(e.fontSizeScaleInterval,"time"))},update:function(e){var o;e.fontSizeScaleEnabled?u(e.fontSizeScaleText):r();var n="unknown";c.VISUAL_VIEWPORT_API&&((o=window.visualViewport)!=null&&o.scale)&&(n=window.visualViewport.scale.toFixed(2));var v=(window.outerWidth/window.innerWidth).toFixed(2);a.tryPerform(function(){window.requestAnimationFrame&&(document.body.classList.remove("block-font-scale"),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){f(v,n,e.fontSizeScaleEnabled)})})),this.setCurrentTime("time")})}};(0,s.create)(w)})(__jsRegistry.x, __jsRegistry.a, __jsRegistry.af, __jsRegistry.s, __jsRegistry.wa)||window);
__jsRegistry.wc = __globalRegistry["yo66hjA"] || (__globalRegistry["yo66hjA"] = (function(o,s,t){(0,o.create)({name:"ymGoalsTracker",init:function(e){var a=e.onLoadGoals;a&&a.forEach(function(r){if(s.YandexMetricService.sendGoal(r,!0),e.statLog){var n;(0,t.log)("ymGoalsTracker",[r,(n=e.utm_medium)!=null?n:"none"])}})}})})(__jsRegistry.x, __jsRegistry.ug, __jsRegistry.a)||window);
__jsRegistry.wd = __globalRegistry["hjeOLLQ"] || (__globalRegistry["hjeOLLQ"] = (function(){var e={};Object.defineProperty(e,"HobbyTypes",{enumerable:!0,get:function(){return r}});var r={QA:"QA",UGC:"UGC",KB:"KB",MK:"MK"};return e})()||window);
__jsRegistry.we = __globalRegistry["h4bZH9Q"] || (__globalRegistry["h4bZH9Q"] = (function(n,b,r,s){var i={};function u(o,t){for(var e in t)Object.defineProperty(o,e,{enumerable:!0,get:Object.getOwnPropertyDescriptor(t,e).get})}u(i,{get isFirstPostInHobby(){return m},get isHobbyAllowed(){return H},get isHobbyMK(){return c},get isHobbyQuestion(){return g},get isHobbyQuestionOnStore(){return a},get isHobbySection(){return d},get isSelectedHobby(){return y},get isShowHobbyPromoButton(){return l},get postInHobby(){return p},get showHobbyPromoDialog(){return P},get visitHobbyPromoButton(){return f}});function y(o){return o.get("isHobbyEnabled")&&!!o.get("hobbyModel.currentCategory")}function g(o){return o.get("hobbyModel.type")===b.HobbyTypes.QA}function c(o){return o.get("hobbyModel.type")===b.HobbyTypes.MK}function d(o){return o.get("isHobbyEnabled")&&!!o.get("hobbyModel.isHobbySection")}function H(o){var t=o.get("covers"),e=o.get("settings.options"),h=t&&t.chosen&&!t.hidden,S=o.get("originators")&&!o.get("originators.selected.official");return!(h||S||e.deferPublication||e.hidePublication||e.isAdPublication||e.addInStatus||e.nativeAd||e.isPaidContent)}function a(o){var t=o.hobbyModel;return t&&t.type&&t.type===b.HobbyTypes.QA}function l(){return r.isSupported&&!n.localStorage.getItem("hobbyPromoButton")}function f(){r.isSupported&&n.localStorage.setItem("hobbyPromoButton","1")}function m(){return r.isSupported&&!n.localStorage.getItem("firstPostInHobby")}function p(){r.isSupported&&n.localStorage.setItem("firstPostInHobby","1")}function P(o){s.showHobbyPromoMenu.trigger({promoId:o})}return i})(__jsRegistry.bs, __jsRegistry.wd, __jsRegistry.ch, __jsRegistry.vq)||window);
__jsRegistry.wf = __globalRegistry["hZnppqQ"] || (__globalRegistry["hZnppqQ"] = (function(r){var e={};Object.defineProperty(e,"showHobbyCategoriesMenu",{enumerable:!0,get:function(){return t}});var t=(0,r.create)();return e})(__jsRegistry.u)||window);
__jsRegistry.wg = __globalRegistry["bs91lbQ"] || (__globalRegistry["bs91lbQ"] = (function(){var L={};function n(T,O){for(var R in O)Object.defineProperty(T,R,{enumerable:!0,get:Object.getOwnPropertyDescriptor(O,R).get})}n(L,{get BlockTypes(){return E},get canBeFirstBlock(){return B},get isBlockWithMention(){return i},get isListBlock(){return o},get isTextBlock(){return _}});var E={TEXT:"TEXT",TEXT_HEADER1:"TEXT_HEADER1",TEXT_HEADER2:"TEXT_HEADER2",TEXT_QUOTE:"TEXT_QUOTE",NUMBERED_LIST:"NUMBERED_LIST",BULLETED_LIST:"BULLETED_LIST",DIVIDER:"DIVIDER",PHOTOS:"PHOTOS",VIDEO:"VIDEO",MUSIC:"MUSIC",POLL:"POLL",LINK:"LINK",ADLINK:"ADLINK",RESHARE_PHOTO:"RESHARE_PHOTO",RESHARE_TOPIC:"RESHARE_TOPIC",MALL_PRODUCT:"MALL_PRODUCT",RESHARE_VIDEO:"RESHARE_VIDEO",ALI_EXPRESS_PRODUCT:"ALI_EXPRESS_PRODUCT",NATURAL_CONTENT_BLOCK:"NATURAL_CONTENT_BLOCK",READONLY_BLOCK:"READONLY_BLOCK",IMAGE_CAROUSEL_PICKER:"IMAGE_CAROUSEL_PICKER",MOTIVATOR_BATTLE:"MOTIVATOR_BATTLE",LOADING:"LOADING"},t,A=(t={},t[E.TEXT]=!0,t[E.TEXT_HEADER1]=!0,t[E.TEXT_HEADER2]=!0,t[E.TEXT_QUOTE]=!0,t),e,I=(e={},e[E.NUMBERED_LIST]=!0,e[E.BULLETED_LIST]=!0,e),r,D=(r={},r[E.TEXT]=!0,r[E.TEXT_QUOTE]=!0,r[E.NUMBERED_LIST]=!0,r[E.BULLETED_LIST]=!0,r);function _(T){return T in A}function o(T){return T in I}function i(T){return T in D}function B(T){return _(T)||T===E.MOTIVATOR_BATTLE}return L})()||window);
__jsRegistry.wh = __globalRegistry["poFSZWw"] || (__globalRegistry["poFSZWw"] = (function(n){var o={};function c(t,i){for(var D in i)Object.defineProperty(t,D,{enumerable:!0,get:Object.getOwnPropertyDescriptor(i,D).get})}c(o,{get AllTextEditTypes(){return B},get FormattingTypes(){return r},get InputMode(){return I},get LinkOptions(){return p},get PostingMenuTypes(){return _},get TextBlockEditTypes(){return a},get TextEditCommonTypes(){return T},get TextEditIconicTypes(){return O},get VisibilityModes(){return A},get appRootId(){return d},get bottomMenuMapping(){return m},get isFormattingType(){return u},get menuBlockTypeMapping(){return L}});var I=(function(t){return t.TEXT="TEXT",t.COVER="COVER",t.BLOCK="BLOCK",t.HEADER="HEADER",t.TEXT_BLOCK_EDIT_MENU="TEXT_BLOCK_EDIT_MENU",t.TEXT_EDIT_LINK_MENU="TEXT_EDIT_LINK_MENU",t.INFO_MODE_KEY="INFO",t.HOBBY_CATEGORIES="HOBBY_CATEGORIES",t.VISIBILITY_MODE="VISIBILITY_MODE",t})(I||{}),_=(function(t){return t.MAIN="MAIN",t.ADD_PHOTO="ADD_PHOTO",t.ADD_VIDEO="ADD_VIDEO",t.ADD_POLL="ADD_POLL",t.ADD_FRIENDS="ADD_FRIENDS",t.ADD_MUSIC="ADD_MUSIC",t.SETTINGS="SETTINGS",t.ADD_ADLINK="ADD_ADLINK",t.ADD_TEXT="ADD_TEXT",t})(_||{}),E,L=(E={},E.ADD_PHOTO=n.BlockTypes.PHOTOS,E.ADD_VIDEO=n.BlockTypes.VIDEO,E),e,m=(e={},e.COVER={compKey:"covers-grid",titleKey:"covers_t"},e.BLOCK={compKey:"blocks-edit-menu"},e.HEADER={compKey:"header-edit-menu"},e.TEXT_BLOCK_EDIT_MENU={compKey:"text-edit-menu",titleKey:"text-menu_t"},e.TEXT_EDIT_LINK_MENU={compKey:"text-edit-link-menu",titleKey:"text-edit-link_t"},e.INFO={compKey:"info-bottom-menu"},e.HOBBY_CATEGORIES={compKey:"hobby-categories-menu"},e.VISIBILITY_MODE={compKey:"visibility-menu",titleKey:"visibility-mode_t"},e),d="#postingFormAppRoot",T={INLINE_LINK:"inlineLink",ADD_HEADER1:"addHeader1",ADD_HEADER2:"addHeader2",ADD_QUOTE:"addQuote"},a=Object.assign({ADD_DIVIDER:"addDivider",ADD_NUMBERED_LIST:"addNumberedList",ADD_BULLETED_LIST:"addBulletedList"},T),r={BOLD:"bold",ITALIC:"italic",UNDERLINE:"underline",STRIKETHROUGH:"strikethrough"},O=Object.assign({ADD_TEXT:"addText"},r,T),p={InternalTransition:1,MotivatorVariant1:2,MotivatorVariant2:4,Donate:16,isDonate:function(i){var D=this.Donate;return(i&D)===D}};function u(t){return t===r.BOLD||t===r.ITALIC||t===r.UNDERLINE||t===r.STRIKETHROUGH}var B=Object.assign(a,O),A=(function(t){return t.PUBLIC="PUBLIC",t.FRIENDS="FRIENDS",t.HOBBY="HOBBY",t})(A||{});return o})(__jsRegistry.wg)||window);
__jsRegistry.wi = __globalRegistry["cesXV2g"] || (__globalRegistry["cesXV2g"] = (function(f){function d(n){var e=n.textContent,r=n.previousSibling;if(!r||r.nodeType!==Node.TEXT_NODE){var t=new Range,a=document.getSelection();t.setStartBefore(n),t.setEndBefore(n),t.insertNode(document.createTextNode(e)),t.collapse(!1),a.removeAllRanges(),a.addRange(t)}else r.textContent+=e;f.remove(n)}function i(n,e,r){var t=new Range,a=document.getSelection(),o=a.anchorNode,l=c(a);o.classList&&o.classList.contains("js-textarea-view")&&o.childNodes.length&&(o=o.childNodes[0],l=o.length);var s=l-n.length;s=s<0?0:s,t.setStart(o,s),t.setEnd(o,l);try{t.surroundContents(e)}catch(N){}finally{r||t.collapse(!1),a.removeAllRanges(),a.addRange(t)}}function c(n){var e=n.focusOffset,r=n.anchorOffset;return e>r?e:r}function g(n){var e=new Range,r=document.getSelection();e.selectNode(n),e.deleteContents();for(var t=1,a=arguments.length;t<a;t++)e.insertNode(arguments[t]),e.collapse(!1);r.removeAllRanges(),r.addRange(e)}function u(n){var e=new Range,r=document.getSelection();e.setStartAfter(n),e.setEndAfter(n);for(var t=1,a=arguments.length;t<a;t++)e.insertNode(arguments[t]),e.collapse(!1);r.removeAllRanges(),r.addRange(e)}function v(n,e,r){var t=document.createRange();t.selectNodeContents(n),t.setStart(e.startContainer,e.startOffset),t.setEnd(r.endContainer,r.endOffset);var a=document.createRange();a.selectNodeContents(n),a.setEnd(e.startContainer,e.startOffset);var o=document.createRange();return o.selectNodeContents(n),o.setStart(r.endContainer,r.endOffset),{range:t,rangeBefore:a,rangeAfter:o}}function p(n){var e=document.createElement("div");return e.innerHTML=n,e.textContent||""}function m(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return{getEndOffset:c,unwrapNode:d,replaceTextWithNode:i,replaceNode:g,insertAfter:u,splitByRanges:v,convertToPlainText:p,escape:m}})(__jsRegistry.s)||window);
__jsRegistry.wj = __globalRegistry["pXYw4JQ"] || (__globalRegistry["pXYw4JQ"] = (function(g,m,h,v,b){function T(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var c=m.BlockTypes,s="s",p="f",M=0;function E(e){return l(e,s)}function I(e){return l(e,s)}function w(e){return l(e,p)}function d(e){return"50% 0 / contain no-repeat linear-gradient("+[e.angle+"deg",e.startColor,e.endColor]+")"}function l(e,r){r=r||p;var n=e.background;switch(n.type){case"SIMPLE_IMAGE":var t=["50% 0 / cover no-repeat url("+n[r===s?"previewUrl":"pictureUrl"]+")"];return n.startColor&&t.push(d(n)),n.bkgColor&&t.push(n.bkgColor),t.toString();case"LINEAR_GRADIENT":return d(n);case"SIMPLE":case"COVER":return n.color}}function C(e){e.insert(document.getElementById("secret"))}function f(e,r){var n={type:e,uid:k(),_created:Date.now()};return Object.assign(n,L(e)),(typeof r>"u"?"undefined":T(r))==="object"?Object.assign(n,r):n}function L(e){switch(e){case c.PHOTOS:return{photos:[]}}return{}}function O(e,r){var n=e.length,t=n?e[n-1]:null,o=t&&t.type===r?t:null;if(o)return o;var i=f(r);return e.push(i),i}function j(e,r){return a(e,function(n){return n.type===r})}function U(e,r){return a(e,function(n){return r.indexOf(n.type)>-1})}function _(e){return a(e,function(r){return r.type!==c.TEXT})}function S(e,r){return a(e,function(n){return r.indexOf(n.type)<0})}function a(e,r){var n=!1;return e&&g(e,function(t){if(r(t))return n=!0,!0}),n}function B(e,r,n){var t=f(r.type,r);return(typeof n!="number"||n<0)&&(n=e.length),e.splice(n,0,t),t}function D(e,r,n,t){t=t||"after";var o=y(n,e).position+1;return t==="before"&&(o-=1),B(e,r,o)}function F(e,r){var n=-1,t=r.menuModel.items.find(function(o,i){var u=o.key===e;return u&&(n=i),u});return{menuItem:t,position:n}}function y(e,r){var n=-1,t=r.find(function(o,i){var u=o.uid===e;return u&&(n=i),u});return{block:t,position:n}}function P(e,r){return r.filter(function(n){return n.type===e})}function A(e){e.uid=k()}function k(){return"uid-"+Date.now()+"-"+M++}function R(e){var r=document.querySelector(h.appRootId);r&&v.switchClass(r,e,"__viewport-disabled")}function N(e,r){var n=r!==void 0?r:"<li></li>";switch(e){case c.NUMBERED_LIST:return'<ol class="media-text-ol __padding-1">'+n+"</ol>";case c.BULLETED_LIST:return'<ul class="media-text-ul">'+n+"</ul>";default:return""}}function W(e){return b.escape(JSON.stringify(e))}return{buildBackgroundPreview:E,buildBackgroundBigPreview:I,buildBackgroundFull:w,buildGradientImage:d,buildBackground:l,hideOnRendering:C,getOrCreateLastBlock:O,insertModelBlock:B,insertModelBlockByUid:D,findBlockByUid:y,findBlocksByType:P,hasBlockWithType:j,hasBlockWithTypes:U,hasContentBlock:_,hasAnyNonBlockWithTypes:S,createModelBlock:f,findMenuByKey:F,addBlockUid:A,togglePostingFormDisabled:R,buildListTemplate:N,buildLogClick:W}})(__jsRegistry.k, __jsRegistry.wg, __jsRegistry.wh, __jsRegistry.s, __jsRegistry.wi)||window);
__jsRegistry.wk = __globalRegistry["skTEriQ"] || (__globalRegistry["skTEriQ"] = (function(h,d,i,c,u,p,f,l,v,y,g){var m={};Object.defineProperty(m,"showHobbyRulesDialog",{enumerable:!0,get:function(){return a}});var s=!0,a=(0,f.create)();a.attach(function(n){var t=n.url,e=n.returnUrl,o=n.inputMode,r=o===void 0?g.InputMode.HOBBY_CATEGORIES:o;i.show({url:t,replaceHistory:!1,dontPush:!0,onClosed:function(){s&&(e?l.go(e):u.showHobbyCategoriesMenu.trigger(r)),s=!0}})});var w=function(){this.showDialog={tap:function(t){var e=t.target,o=e&&(e.dataset.url||e.href);if(o){var r={noClear:!0};d.close(r),s=!0,a.trigger({url:o,inputMode:e.dataset.inputMode})}}},this.showPromoDialog={tap:function(t){var e=t.target,o=e.dataset.showHobbyRulesDialog,r=e.dataset.url,H=e.dataset.returnUrl,b=e.dataset.promoId;s=!1,i.close(),b&&((0,c.showHobbyPromoDialog)(b),p.hide.attachOnce(function(){o?a.trigger({url:r,returnUrl:H}):u.showHobbyCategoriesMenu.trigger(g.InputMode.HOBBY_CATEGORIES)}))}},this.showAgreement={tap:function(t){var e=t.target,o=e.dataset.returnUrl,r={};e.dataset.showHobbyRulesDialog&&(r.isFirst="on",o&&(r.returnUrl=o)),l.go((0,y.insertParams)(e.href,r)),s=!1,i.close(),(0,v.togglePostingFormDisabled)(!1)}},this.closeDialog={tap:function(){i.close()}}};return h.register("showHobbyDialogFromBottomMenu",w),m})(__jsRegistry.am, __jsRegistry.fi, __jsRegistry.gh, __jsRegistry.we, __jsRegistry.wf, __jsRegistry.ff, __jsRegistry.u, __jsRegistry.ea, __jsRegistry.wj, __jsRegistry.m, __jsRegistry.wh)||window);
__jsRegistry.wl = __globalRegistry["pE3aP2w"] || (__globalRegistry["pE3aP2w"] = (function(a,n,r){var o=1e4,i;(0,a.create)({name:"initProactiveSession",update:function(e){i=setTimeout(function(){return s(e)},o),r.show(e.content,o)},discard:function(e){clearTimeout(i)}});function s(t){var e="ProactiveSupportToastTimeoutExecuted",u=[t.origin];n.log(e,u)}})(__jsRegistry.x, __jsRegistry.a, __jsRegistry.ed)||window);
__jsRegistry.wm = __globalRegistry["NIKvMlw"] || (__globalRegistry["NIKvMlw"] = (function(){function s(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function l(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function r(n,e,i){return e&&l(n.prototype,e),n}var o=(function(){function n(e){s(this,n),this.viewApi=e.view,this.hideApi=e.hide,this.answerApi=e.answer,this.logger=e.logger,this.vkGetResponse=e.vkGetResponse,this.vkGetByIdResponse=e.vkGetByIdResponse,this.interactResponse=e.interactResponse,this.interact=this.interact.bind(this),this.get=this.get.bind(this),this.getByIds=this.getByIds.bind(this),this.view=this.view.bind(this),this.hide=this.hide.bind(this),this.answer=this.answer.bind(this)}return r(n,[{key:"interact",value:function(){return this.logger("nps.api.uxpolls.interact"),Promise.resolve(this.interactResponse)}},{key:"get",value:function(){return this.logger("nps.api.uxpolls.get"),Promise.resolve(this.vkGetResponse)}},{key:"getByIds",value:function(){return this.logger("nps.api.uxpolls.getByIds"),Promise.resolve(this.vkGetByIdResponse)}},{key:"view",value:function(i){var t=this;return new Promise(function(){t.logger("nps.api.uxpolls.view",i.poll_id),t.viewApi({pollId:i.poll_id,trigger:i.trigger})})}},{key:"hide",value:function(i){var t=this;return new Promise(function(){t.logger("nps.api.uxpolls.hide",i.poll_id),t.hideApi({pollId:i.poll_id,trigger:i.trigger})})}},{key:"answer",value:function(i){return new Promise((function(){this.logger("nps.api.uxpolls.answer",i.poll_id),this.answerApi({pollId:i.poll_id,trigger:i.trigger,answerJson:i.answers})}).bind(this))}}]),n})();return o})()||window);
__jsRegistry.wn = __globalRegistry["fw9Kqw"] || (__globalRegistry["fw9Kqw"] = (function(t){var r={};function d(e,n){for(var i in n)Object.defineProperty(e,i,{enumerable:!0,get:Object.getOwnPropertyDescriptor(n,i).get})}d(r,{get addFeedHideEventListener(){return o},get removeFeedHideEventListener(){return v}});var o=function(e){return t.feedRemove.attach(e)},v=function(e){return t.feedRemove.detach(e)};return r})(__jsRegistry.lc)||window);
__jsRegistry.wo = __globalRegistry["N0rZ3Ag"] || (__globalRegistry["N0rZ3Ag"] = (function(){var s={};Object.defineProperty(s,"NpsRequest",{enumerable:!0,get:function(){return i}});var i=(function(){function t(r,e){this.attempt=0,this.request=null,this.endpoint=r,this.parameters=e}var u=t.prototype;return u.invoke=function(){return this.attempt=0,this.try()},u.try=function(){var e=this;this.attempt++;var n=window.webapi.invoke(this.endpoint,this.parameters);return this.request=n,n.catch(function(o){if(o.type>=t.SERVER_ERROR&&e.attempt<t.MAX_ATTEMPTS)return e.try();throw new Error(o.errorMessage)})},t.sendRequest=function(e,n){return new t(e,n).invoke()},t})();return i.MAX_ATTEMPTS=3,i.SERVER_ERROR=200,s})()||window);
__jsRegistry.wp = __globalRegistry["NTS40XA"] || (__globalRegistry["NTS40XA"] = (function(t,n){var i={};Object.defineProperty(i,"NetPromoterScoreService",{enumerable:!0,get:function(){return s}});var s=function(){this.getByTrigger=function(e){return n.NpsRequest.sendRequest("nps/getByTrigger",e).catch(function(r){return t.Logger.error("nps/getByTrigger failed with "+r)})},this.view=function(e){return n.NpsRequest.sendRequest("nps/view",e).catch(function(r){return t.Logger.error("nps/view failed with "+r)})},this.answer=function(e){return n.NpsRequest.sendRequest("nps/answer",e).catch(function(r){return t.Logger.error("nps/answer failed with "+r)})},this.hide=function(e){n.NpsRequest.sendRequest("nps/hide",e).catch(function(r){return t.Logger.error("nps/hide failed with "+r)})}};return i})(__jsRegistry.br, __jsRegistry.wo)||window);
__jsRegistry.wq = __globalRegistry["Nm6HPfQ"] || (__globalRegistry["Nm6HPfQ"] = (function(p,h,a,o,r,g,f){function S(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function m(l,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function E(l,s,e){return s&&m(l.prototype,s),l}var N=g,d=f,I="ok",P="vkcom_dark",k="bright_light";function c(){return h.isDarkThemeEnabled()?P:k}var w={EmptyPollsError:3},u="__loading",v="__error",D="__empty",C=(function(){function l(s){S(this,l),this.uxPollsSDKInstance=null,this.service=new N,this.onScrollAfterComplete=this.onScrollAfterComplete.bind(this),this.handleFeedHide=this.handleFeedHide.bind(this),this.handleThemeChange=this.handleThemeChange.bind(this),this.onScrollBeforeView=this.onScrollBeforeView.bind(this),this.logger=this.logger.bind(this),this.initNpsSDKService=this.initNpsSDKService.bind(this),this.initNpsSDKEvents=this.initNpsSDKEvents.bind(this),this.onNpsComplete=this.onNpsComplete.bind(this),this.onNpsInit=this.onNpsInit.bind(this),this.onNpsAnswer=this.onNpsAnswer.bind(this),this.onNpsError=this.onNpsError.bind(this),this.initialize=this.initialize.bind(this,s),OK.loader.use("vk-uxpolls-js",this.initialize)}return E(l,[{key:"initialize",value:function(e){var t=window.uxpolls.UXPollsSDK;this.uxPollsSDKInstance=new t(d.error),this.setup(e)?this.addEvents():o.addClass(this.rootEl,v)}},{key:"setup",value:function(e){var t=this,n;try{n=JSON.parse(e.vkGetResponseStr)}catch(i){return!1}return this.uxPollsSDKInstance.configure(new p({view:function(i){return t.service.view(i)},hide:function(i){return t.service.hide(i)},answer:function(i){return t.service.answer(i)},logger:this.logger,vkGetResponse:n}),{project:I,userMetaData:{userId:e.userId},theme:c()}),this.rootEl=e.rootEl,this.vkGetResponse=n,this.pollId=n?n.items[0].id:void 0,this.triggerName=e.triggerName,this.userId=e.userId,this.feedIdMarker=e.feedIdMarker,!0}},{key:"destroy",value:function(){this.removeEvents()}},{key:"addEvents",value:function(){r.changed.attach(this.onScrollBeforeView),a.addFeedHideEventListener(this.handleFeedHide),h.themeChangeEvent.attach(this.handleThemeChange),this.initNpsSDKService(),this.initNpsSDKEvents()}},{key:"removeEvents",value:function(){a.removeFeedHideEventListener(this.handleFeedHide),h.themeChangeEvent.detach(this.handleThemeChange),this.uxPollsSDKInstance.cleanup()}},{key:"handleFeedHide",value:function(e){e.id==="feed-id-"+this.feedIdMarker&&this.uxPollsSDKInstance.hide(this.triggerName)}},{key:"handleThemeChange",value:function(){this.uxPollsSDKInstance.setTheme(c())}},{key:"onScrollBeforeView",value:function(e){var t=this.rootEl;if(t){var n=t.getBoundingClientRect();n.y<e.height&&(r.changed.detach(this.onScrollBeforeView),this.pollId&&this.uxPollsSDKInstance.trackPollView(this.pollId,this.triggerName,this.uxPollsSDKInstance.getFrame()))}}},{key:"onScrollAfterComplete",value:function(){var e=this.rootEl;if(e){var t=e.getBoundingClientRect();if(t.bottom<-300){var n=o.closest(e,".js-nps-portlet");n&&o.addClass(n,"invisible"),this.logger("nps.remove.completed"),r.changed.detach(this.onScrollAfterComplete);var i=window.scrollY;window.scrollTo(window.scrollX,i-t.height+12)}}}},{key:"initNpsSDKService",value:function(){var e=this.triggerName?[this.triggerName]:[];this.vkGetResponse&&this.uxPollsSDKInstance.retrievePolls().then((function(){return this.uxPollsSDKInstance.getFrame()}).bind(this)).then((function(t){t.dontTrackViewAutomatically();var n=t.getPollId();return this.logger("nps.bind",n),t.setupWithTriggers(e,!0).then((function(){this.logger("nps.view.setup",n);var i=this.rootEl;i&&(o.removeClass(i,u),i.appendChild(t.frame_element)),this.logger("nps.view.draw",n)}).bind(this))}).bind(this))}},{key:"initNpsSDKEvents",value:function(){this.uxPollsSDKInstance.setPollsListener("onPollInited",this.onNpsInit),this.uxPollsSDKInstance.setPollsListener("onPollAnswered",this.onNpsAnswer),this.uxPollsSDKInstance.setPollsListener("onPollCompleted",this.onNpsComplete),this.uxPollsSDKInstance.setPollsListener("onPollError",this.onNpsError)}},{key:"onNpsComplete",value:function(e){this.logger("nps.completed",e),r.changed.attach(this.onScrollAfterComplete)}},{key:"onNpsInit",value:function(e){this.logger("nps.initiated",e)}},{key:"onNpsAnswer",value:function(e){this.logger("nps.answer",e)}},{key:"onNpsError",value:function(e,t){o.addClass(this.rootEl,u),e!=null?this.logger("nps.error.pollId",e.getPollId(),t):this.logger("nps.error",t),t===w.EmptyPollsError?o.addClass(this.rootEl,D):o.addClass(this.rootEl,v)}},{key:"logger",value:function(){d.debug.apply(null,arguments)}}]),l})();return C})(__jsRegistry.wm, __jsRegistry.cm, __jsRegistry.wn, __jsRegistry.s, __jsRegistry.bd, __jsRegistry.wp, __jsRegistry.br)||window);
__jsRegistry.wr = __globalRegistry["nOhM5PA"] || (__globalRegistry["nOhM5PA"] = (function(n,s){var r=null;function t(a){var e=a.dataset;return{rootEl:a,vkGetResponseStr:e.vkGetResponse,triggerName:e.triggerName,userId:e.userId,feedIdMarker:e.feedIdMarker}}n.create({name:"npsLauncher",update:function(e){r=new s(t(e.target))},discard:function(){r.destroy(),r=null}})})(__jsRegistry.x, __jsRegistry.wq)||window);
__jsRegistry.ws = __globalRegistry["enGijmQ"] || (__globalRegistry["enGijmQ"] = (function(a,l,c,u){var o=(function(){function i(s){var r=s.currentUserId,e=s.providerUrls,n=s.interval;if(this.currentUserId=r,this.providerUrls=e,this.interval=n,!a.default.isLocalStorageAvailable()){this.log("ls","unavailable");return}this.userLocalStorage=new a.default(i.LOCAL_STORAGE_KEY,this.currentUserId),this.log("ls","available")}var t=i.prototype;return t.synchronize=function(){var r=this;if(this.userLocalStorage){var e=window.requestIdleCallback||window.setTimeout;e(function(){r.synchronizeUserIdsForAllProviders()})}},t.synchronizeUserIdsForAllProviders=function(){var r=this;Object.keys(this.providerUrls).forEach(function(e){r.synchronizeUserId(e)})},t.synchronizeUserId=function(r){var e=this;if(this.shouldSynchronize(r)){var n=this.providerUrls[r];u.request(n,"GET").setExternal().withCredentials().send().then(function(){e.log("sync-success",r)},function(){e.log("sync-fail",r)}),this.setLastUpdatedStatus(r)}},t.setLastUpdatedStatus=function(r){var e=this.userLocalStorage.get()||{};e[r]={lastSyncTimestamp:Date.now()},this.userLocalStorage.save(e)},t.isExpired=function(r){return Date.now()-r>this.interval},t.shouldSynchronize=function(r){if(!this.userLocalStorage)return!1;var e=this.userLocalStorage.get();return!e||!e[r]?!0:this.isExpired(e[r].lastSyncTimestamp)},t.log=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];c.log("externalUserIdSync",e)},i})();o.LOCAL_STORAGE_KEY="external-user-id-sync";function d(i){var t=i.dataset;return{currentUserId:t.currentUserId,providerUrls:JSON.parse(t.providersUrls),interval:Number(t.interval)}}var h={name:"externalUserIdSynchronizer",init:function(t){var s=d(t.target);new o(s).synchronize()}};l.create(h)})(__jsRegistry.ci, __jsRegistry.x, __jsRegistry.a, __jsRegistry.bw)||window);
__jsRegistry.wt = __globalRegistry["bjoSJ1w"] || (__globalRegistry["bjoSJ1w"] = (function(c,u,l){var s={};Object.defineProperty(s,"openDialog",{enumerable:!0,get:function(){return d}});var r=function o(i,t){var e=this;this.show={tap:function(n,a){o.showMenu.tap(n,a)}},this.enableSubmit={change:function(){var n=e.root.querySelector('[name="button_complaint"]');n&&n.removeAttribute("disabled")}},this.goBack={tap:function(a){a.preventDefault();var m=document.getElementById("complaintPopupBackButton");m&&m.click()}},this.root=t};r.isInstant=!0,r.showMenu={tap:function(o,i){o.preventDefault(),l.hide.attachOnce(function(){var t,e=document.querySelector("#bottom-menu-header .title_aside.__before");e==null||(t=e.parentNode)==null||t.removeChild(e)}),u.show(i.dataset)}},c.register("bottomMenuComplaints",r);function d(o){var i={func:"show",view:"bottomMenuComplaints",bmenuModificator:"__compact",bmenuTitle:"Пожаловаться",bmenuXhr:o};l.hide.attachOnce(function(){var t,e=document.querySelector("#bottom-menu-header .title_aside.__before");e==null||(t=e.parentNode)==null||t.removeChild(e)}),u.show(i)}return s})(__jsRegistry.am, __jsRegistry.fi, __jsRegistry.ff)||window);
__jsRegistry.wu = __globalRegistry["sH9yPNg"] || (__globalRegistry["sH9yPNg"] = (function(r,d,c){var s=(function(){function i(a,t){var e=this;this.show={tap:function(u){var o=e.getHiddenItem();d(o,function(m,l){if(l>=e.size)return!1;(0,c.switchClass)(m,!1,"hidden")}),e.checkShowButton(o.length,u.target)}},this.size=t.dataset.size?parseInt(t.dataset.size,10):5,this.itemClass=t.dataset.itemclass;var h=t.getElementsByClassName("js-show-more")[0];h&&this.checkShowButton(this.getHiddenItem().length,h)}var n=i.prototype;return n.getHiddenItem=function(){return document.querySelectorAll("."+this.itemClass+".hidden")},n.checkShowButton=function(t,e){t-this.size<1&&e.classList.add("hidden")},i})();s.isInstant=!0,(0,r.register)("showingInParts",s)})(__jsRegistry.am, __jsRegistry.k, __jsRegistry.s)||window);
__jsRegistry.wv = __globalRegistry["wZMr0UA"] || (__globalRegistry["wZMr0UA"] = (function(a,t){var d=t.createCardReadTracking({actionName:"widget.logReads",listId:"greeting",serviceName:"trackWidget",updateLogInfo:function(e){e.itemData.info.name=e.target.getAttribute("data-name")}});a.trackWidgetReads=d.trackReadsSimple})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.ww = __globalRegistry["hNKJFTw"] || (__globalRegistry["hNKJFTw"] = (function(a,r){var e=r.createCardReadTracking({listIds:["hobby20-promo-slider"],actionName:"hobbySlider.logSeen",serviceName:"hobbySliderSeen"});return a.hobbyBannerSeen=e.trackReadsSimple,e})(__jsRegistry.c, __jsRegistry.hs)||window);
__jsRegistry.wx = __globalRegistry["vlJwNfA"] || (__globalRegistry["vlJwNfA"] = (function(l,v){var u={};Object.defineProperty(u,"VKVideoStatsController",{enumerable:!0,get:function(){return g}});function a(){return a=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},a.apply(this,arguments)}var h=window.console,c=!1;try{c=l.localStorage.getItem("_vpl-debug")==="1"}catch(n){}var f=function(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var t;c&&(h==null||(t=h).log.apply(t,[].concat(["@vpl"],r)))},g=(function(){function n(e){var t=this;this.counts={},this.lastPercent=0,this.firstPlay=!0,this.seeking=!1,this.paused=!1,this.ended=!1,this.currentTime=0,this.duration=0,this.onCrashed=function(){t.dwh("error")},this.onFullscreenEnter=function(){t.dwh("fullscreen")},this.onPlay=function(){t.counts.seek=0,t.paused=!1;var i=t.currentTime;t.ended&&Math.round(i)===0?t.dwh("replay"):t.firstPlay?t.firstPlay=!1:t.dwh("play_toggle"),t.videoStat.getWatchCoverage().start(i)},this.onStarted=function(){t.dwh("started",void 0,1)},this.onPause=function(){t.currentTime!==t.duration&&(t.paused=!0,t.dwh("pause"),t.videoStat.getWatchCoverage().end(t.currentTime),t.videoStat.getWatchCoverage().send())},this.onTimeupdate=function(i,d){if(!t.paused){t.currentTime=d,t.duration=i,t.ended&&t.currentTime>.1&&t.currentTime<t.duration&&(t.ended=!1);var p=Math.floor(100*t.currentTime/t.duration),o=25*Math.floor(t.currentTime*4/t.duration);o>0&&t.lastPercent!==o&&p-o<10&&(o!==100&&t.dwh("checkpoint",o),t.lastPercent=o)}},this.onSeek=function(i,d){t.ended||(t.dwh("seek",void 0,1),t.videoStat.getWatchCoverage().end(i),t.videoStat.getWatchCoverage().send(),t.videoStat.getWatchCoverage().start(d))},this.onEnded=function(){t.videoStat.dwh("checkpoint",100),t.videoStat.dwh("stop"),t.videoStat.getWatchCoverage().end(t.currentTime),t.videoStat.getWatchCoverage().send(),t.videoStat.dwhSendBatch(),t.ended=!0,t.resetCurrentTime()};var s=e.vars.duration;this.duration=s,this.videoStat=new v.VideoStats(a({statVersion:2,flashVersion:"html5",statType:"",dst:"",peerInfo:"cdn"},e.vars)),this.videoStat.setLog(f),this.dwh("init")}var r=n.prototype;return r.dwh=function(t,s,i){this.counts.hasOwnProperty(t)||(this.counts[t]=0),!(i!==void 0&&this.counts[t]>=i)&&(this.videoStat.dwh(t,s),this.counts[t]++)},r.destroy=function(){this.videoStat.getWatchCoverage().end(this.currentTime),this.videoStat.destroy()},r.resetCurrentTime=function(){this.currentTime=0},n})();return u})(__jsRegistry.bs, __jsRegistry.gb)||window);
__jsRegistry.wy = __globalRegistry["vQfg7cA"] || (__globalRegistry["vQfg7cA"] = (function(S){var _={};Object.defineProperty(_,"VKVideoPlayerSyncEmbedder",{enumerable:!0,get:function(){return p}});var g="vk-video-player",p=(function(){function c(e,r){var i=e.videoUrls,t=e.title,d=e.coverUrl,s=e.duration,n=e.location,y=e.providerId,h=e.movieId,l=e.statAutoplay,a=e.autoplay,u=e.contentId,v=e.language,P=e.version;this.embedded=!1,this.videoContainer=r,this.videoUrls=i,this.title=t,this.language=v,this.duration=s,this.coverUrl=d,this.autoplay=a,this.videoStats=new S.VKVideoStatsController({isAdv:!1,vars:{duration:s,location:n,providerId:y,movieId:h,autoplay:l!=null?l:a,contentId:u,version:P}})}var o=c.prototype;return o.isEmbedded=function(){return this.embedded},o.embedPlayer=function(){if(!window.OneVideoPlayerMob)throw new Error("ВК видеоплеер не загружен");this.embedded||(this.embedded=!0,this.registerPlayerWebComponentIfNecessary(),this.initPlayer())},o.removePlayer=function(){var r;this.embedded=!1,this.videoStats.destroy(),(r=this.player)==null||r.unmount()},o.registerPlayerWebComponentIfNecessary=function(){if(!window.customElements.get(g)){var r=window.OneVideoPlayerMob.registerPlayerWebComponent;r()}},o.getPlayer=function(){return this.player||(this.player=window.OneVideoPlayerMob.create(this.videoContainer)),this.player},o.initPlayer=function(){var r=window.OneVideoPlayerMob.VideoFormat,i,t=(i={},i[r.MPEG]=this.getMpegSrc(),i);this.videoUrls.HLS&&(t[r.HLS]={type:"url",url:this.videoUrls.HLS}),this.videoUrls.DASH&&(t[r.DASH_SEP]={type:"url",url:this.videoUrls.DASH}),this.videoUrls.WEBM&&(t[r.DASH_WEBM]={type:"url",url:this.videoUrls.WEBM}),this.getPlayer().mount({videos:[{thumbUrl:this.coverUrl,title:this.title,sources:t,duration:this.duration}],logoHidden:!0,interfaceLanguage:this.language,isMobile:!0,callbacks:{onCrashed:this.videoStats.onCrashed,onFullscreenEnter:this.videoStats.onFullscreenEnter,onPlay:this.videoStats.onPlay,onStarted:this.videoStats.onStarted,onPause:this.videoStats.onPause,onTimeupdate:this.videoStats.onTimeupdate,onSeek:this.videoStats.onSeek,onEnded:this.videoStats.onEnded},autoplay:this.autoplay})},o.getMpegSrc=function(){var r=this,i=window.OneVideoPlayerMob.VideoQuality,t,d=(t={},t[i.Q_144P]="MPEG_144",t[i.Q_240P]="MPEG_240",t[i.Q_360P]="MPEG_360",t[i.Q_480P]="MPEG_480",t[i.Q_720P]="MPEG_720",t[i.Q_1080P]="MPEG_1080",t[i.Q_1440P]="MPEG_1440",t[i.Q_2160P]="MPEG_2160",t),s=Object.keys(d).reduce(function(f,M){var b=r.videoUrls[d[M]];return b&&(f[M]=b),f},{}),n=this.videoUrls,y=n.MPEG_144,h=n.MPEG_240,l=n.MPEG_360,a=n.MPEG_480,u=n.MPEG_720,v,P,E;return s[i.INVARIANT]=(E=(P=(v=u!=null?u:a)!=null?v:l)!=null?P:h)!=null?E:y,s},c})();return _})(__jsRegistry.wx)||window);
__jsRegistry.wz = __globalRegistry["v3xpm2Q"] || (__globalRegistry["v3xpm2Q"] = (function(h,l,c,v,a){var u={};Object.defineProperty(u,"VKVideoPlayerController",{enumerable:!0,get:function(){return n}});function d(){return d=Object.assign||function(o){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])}return o},d.apply(this,arguments)}var n=(function(){function o(t){var e=this;this.onPlayButtonClick=function(){e.embedPlayer()},this.isEmbeddingCancelled=!1,this.target=t,this.bundleUrl=t.dataset.bundleUrl;var r;this.behavior=(r=t.dataset.embeddingBehavior)!=null?r:a.EmbeddingBehavior.INSTANTLY,this.playButton=t.querySelector(".playb"),t.dataset.movieId&&(this.movieId=Number(t.dataset.movieId)),t.dataset.model&&(this.model=JSON.parse(t.dataset.model),this.model.location=this.getLogLocation(),this.embedder=new l.VKVideoPlayerSyncEmbedder(this.model,this.target))}var i=o.prototype;return i.activate=function(){switch(o.ACTIVE_INSTANCES.push(this),this.behavior){case a.EmbeddingBehavior.CLICK:var e;(e=this.playButton)==null||e.addEventListener("click",this.onPlayButtonClick);return;default:this.embedPlayer();return}},i.dispose=function(){switch(this.behavior){case a.EmbeddingBehavior.CLICK:var e;(e=this.playButton)==null||e.removeEventListener("click",this.onPlayButtonClick);break}this.deactivate()},i.deactivate=function(){var e;this.isEmbeddingCancelled=!0,(e=this.embedder)==null||e.removePlayer()},i.embedPlayer=function(){var e=this;return this.isEmbeddingCancelled=!1,this.prepareResources().then(function(){!e.isEmbeddingCancelled&&!e.embedder.isEmbedded()&&(e.embedder.embedPlayer(),o.ACTIVE_INSTANCES.filter(function(r){return r!==e}).forEach(function(r){return r.deactivate()}))})},i.prepareResources=function(){var e=this,r=[];return this.embedder||r.push(window.webapi.invoke("/oneVideoPlayer/getModel",{movieId:this.movieId}).then(function(m){e.model=d({},m),e.model.location=e.getLogLocation(),e.embedder=new l.VKVideoPlayerSyncEmbedder(e.model,e.target)})),window.OneVideoPlayer||r.push((0,c.loadOneVideoPlayerWithEsModules)(this.bundleUrl)),r.length?Promise.all(r):Promise.resolve(this.embedder)},i.getLogLocation=function(){var e;return((e=this.model)==null?void 0:e.location)==="movieLayer"?this.model.location+(window.pageCtx&&window.pageCtx.stateId?"/"+window.pageCtx.stateId:""):(0,v.getLogLoc)(this.target)},o})();n.ACTIVE_INSTANCES=[];var s=[];return(0,h.create)({name:"vkVideoPlayer",update:function(i){var t=i.target,e=new n(t);s.push(e),e.activate()},discard:function(){s.forEach(function(i){return i.dispose()}),s=[]}}),u})(__jsRegistry.x, __jsRegistry.wy, __jsRegistry.ix, __jsRegistry.ay, __jsRegistry.iv)||window);
__jsRegistry.xa = __globalRegistry["etcwUcg"] || (__globalRegistry["etcwUcg"] = (function(v,f,o,u,p){var g="js-episode",m="__active",E="__playing",c=(function(){function a(r,e){this.episodes=[],this.currentEpisodeIndex=-1,this.goEpisode={tap:function(s,t){var i=t.dataset.time;i&&o.seek.trigger({time:i})}},this.root=e,this.initEpisodes(),o.progress.attach(this.onProgress,this),o.videoStateModel.onChanged("isPlaying",this.onPlay,this),this.onProgress({value:o.videoStateModel.get("currentTime"),duration:o.videoStateModel.get("duration")}),this.onPlay(o.videoStateModel.get("isPlaying")),u.rendering.attachOnce(this.removeListeners,this),p.hide.attachOnce(this.removeListeners,this)}var n=a.prototype;return n.removeListeners=function(){o.progress.detach(this.onProgress,this),o.videoStateModel.offChanged("isPlaying",this.onPlay,this)},n.initEpisodes=function(){this.episodeCards=this.root.getElementsByClassName(g);for(var e=0;e<this.episodeCards.length;e++){var s=this.episodeCards[e],t=this.episodeCards[e+1];if(!s.dataset.time||t&&!t.dataset.time){this.episodes=[];break}var i=t?parseInt(t.dataset.time,10)-.1:1/0;this.episodes.push({index:e,start:parseInt(s.dataset.time,10),end:i})}},n.onPlay=function(e){(0,f.switchClass)(this.root,e,E)},n.onProgress=function(e){var s=e.value,t=this.episodes.find(function(d){var P=d.start,L=d.end;return s>=P&&s<=L});if(t&&this.currentEpisodeIndex!=t.index){this.currentEpisodeIndex=t.index;var i=this.root.getElementsByClassName(m)[0];i&&(0,f.removeClass)(i,m);var h=this.episodeCards[this.currentEpisodeIndex];(0,f.addClass)(h,m),this.scrollIntoView(h)}},n.scrollIntoView=function(e){var s=e.offsetLeft-this.root.scrollLeft,t=e.offsetWidth;s>0&&s+t<this.root.offsetWidth||(this.root.scrollLeft=e.offsetLeft-(this.root.offsetWidth-t)/2)},a})();c.isInstant=!0;var I=function(){this.go={tap:function(n,r){var e=r.dataset.time;e&&o.seek.trigger({time:e})}}},l=(function(){function a(r,e){this.episodes=[],this.root=e,u.rendering.attachOnce(this.removeListeners,this),this.onInitEpisodes=this.initEpisodes.bind(this),window.webapi.invoke("oneVideoPlayer/getEpisodesModel",{movieId:e.dataset.id}).then(this.onInitEpisodes)}var n=a.prototype;return n.initEpisodes=function(e){for(var s=0;s<e.length;s++){var t=e[s],i=e[s+1],h=i?i.timeSec-.1:1/0;this.episodes.push({index:s,name:t.name,start:t.timeSec,end:h})}o.progress.attach(this.onProgress,this)},n.onProgress=function(e){var s=e.value,t=this.episodes.find(function(i){var h=i.start,d=i.end;return s>=h&&s<=d});t&&t!=this.currentEpisode&&t.name&&(this.root.textContent=t.name,this.currentEpisode=t)},n.removeListeners=function(){o.progress.detach(this.onProgress,this),this.onInitEpisodes=null},a})();l.isInstant=!0,(0,v.register)("episodes",c),(0,v.register)("videoTimestamp",I),(0,v.register)("currentEpisodeName",l)})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.iw, __jsRegistry.w, __jsRegistry.ff)||window);
__jsRegistry.xb = __globalRegistry["mDxvb6A"] || (__globalRegistry["mDxvb6A"] = (function(n,t){function e(a){var i=a.target,r=i.dataset.metaData;if(r)try{a.metaData=JSON.parse(r)}catch(c){}}(0,n.create)({name:"linkMetaInfo",update:function(){(0,t.register)(e)},discard:function(){(0,t.revoke)(e)}})})(__jsRegistry.x, __jsRegistry.ea)||window);
__jsRegistry.xc = __globalRegistry["ufCcqBA"] || (__globalRegistry["ufCcqBA"] = (function(s){function e(r,n){}e.prototype={openPanel:{longTap:function(n,o){typeof o.onLongPress=="function"&&o.onLongPress(n)}}},e.isInstant=!0,s.register("reactUserFeeds",e)})(__jsRegistry.am)||window);
__jsRegistry.xd = __globalRegistry["co7HhA"] || (__globalRegistry["co7HhA"] = (function(i,o,m,r,d){function a(t){var s=t.data;c(s)&&u(s.chatId,s.id)}function c(t){return!(0,i.isStr)(t)&&t.name==="ok-messages-complaint"&&t.type==="message"}function u(t,s){var e=window.location.pathname.split("/"),n=(0,m.insertParams)("/dk?st.cmd=chatComplaint",{"st.chatId":t.toString(),"st.messageId":s,"st.returnId":e[e.length-1]});o.openDialog(n)}d.create({name:"chatComplaint",init:function(){window.addEventListener("message",a),r.specialEnvelopes.afterChatMessage={run:function(e){e&&e.messageId&&e.chatId&&window.postMessage({name:"ok-messages-complaint-done",type:"message",chatId:Number(e.chatId),messageId:e.messageId})},parseDomNode:function(e,n){n.chatId=e.getAttribute("chatid"),n.messageId=e.getAttribute("messageid")}}},update:function(){window.removeEventListener("message",a),window.addEventListener("message",a)},discard:function(){window.removeEventListener("message",a)}})})(__jsRegistry.d, __jsRegistry.wt, __jsRegistry.m, __jsRegistry.fh, __jsRegistry.x)||window);
__jsRegistry.xe = __globalRegistry["dBuG8Nw"] || (__globalRegistry["dBuG8Nw"] = (function(t,e){var i="dzen-api-hostname",n="dzen-experiment";function c(a){if(a.uri.includes("/dzen/channel")||a.uri.includes("/dzen/article")){var d=new URL(document.location.toString()).searchParams,s=d.get(i),o=d.get(n),r=new URL(a.uri);s&&r.searchParams.append(i,s),o&&r.searchParams.append(n,o),a.uri=r.toString()}}(0,t.create)({name:"dzenCardService",update:function(){e.register(c)},discard:function(){e.revoke(c)}})})(__jsRegistry.x, __jsRegistry.ea)||window);
__jsRegistry.xf = __globalRegistry["wkVdESQ"] || (__globalRegistry["wkVdESQ"] = (function(u,o,r,c,a){var g=(function(){function s(e,i){var t=this;this.model=e,this.element=i,this.cookieValue="1",this.onShareGEOButtonClick={tap:function(h,d){navigator.geolocation.getCurrentPosition(function(){return t.hideBannerAndSetCookie(t.cookieTTLMax)},function(){return t.hideBannerAndSetCookie(t.cookieIntervalTTL)})}},this.onCloseBannerClick={tap:function(h,d){t.hideBannerAndSetCookie(t.cookieIntervalTTL)}},this.onCloseBottomMenu={tap:function(h,d){(0,r.close)()}},this.widgetWrapper=document.querySelector(".weather-widget_wrapper"),this.widgetStubBanner=document.querySelector(".weather-widget-banner"),this.cookieName=e.cn,this.cookieIntervalTTL=+e.ttl/1e3,this.cookieTTLMax=+e.ttlm/1e3}var n=s.prototype;return n.hideBannerAndSetCookie=function(i){this.hideBanner(),this.cookieName.trim()&&(0,c.set)(this.cookieName,this.cookieValue,i)},n.hideBanner=function(){this.widgetWrapper&&((0,r.close)(),(0,o.addClass)(this.widgetWrapper,"__animate"),this.widgetStubBanner&&a.transitionEndEvent!=null&&this.widgetStubBanner.addEventListener(a.transitionEndEvent,this.onBannerTransitioned.bind(this)))},n.onBannerTransitioned=function(){this.widgetWrapper&&(0,o.removeClasses)(this.widgetWrapper,"__animate __banner-showed"),this.widgetStubBanner&&this.widgetStubBanner.remove()},s})();(0,u.register)("weatherWidgetGeoRequestBehavior",g)})(__jsRegistry.am, __jsRegistry.s, __jsRegistry.fi, __jsRegistry.ga, __jsRegistry.c)||window);
__jsRegistry.xg = __globalRegistry["txFz6sg"] || (__globalRegistry["txFz6sg"] = (function(e,t){var a=function(s,o){var i=this;this.model=s,this.element=o,this.onToastShow={tap:function(r,n){t.show(i.message)}},this.message=s.message};(0,e.register)("toastBehavior",a)})(__jsRegistry.am, __jsRegistry.ed)||window);
__jsRegistry.xh = __globalRegistry["ck35j8g"] || (__globalRegistry["ck35j8g"] = (function(h){function v(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var S={},c={};(0,h.create)({name:"initCssVarsPolyFill",update:function(){document.readyState&&(document.readyState==="interactive"||document.readyState==="complete"?d():window.addEventListener("DOMContentLoaded",d))}});function d(){w(),window.removeEventListener("DOMContentLoaded",d)}function w(){typeof window.cssVars=="function"&&window.cssVars({variables:C(p()),silent:!window.DEVMODE,watch:!0})}function p(){var e=[],t=document.styleSheets,n,s,o,m,r,u,i,a,l,f,y,g=/:root\s*$/i;for(n=0,s=t.length;n<s;n++){r=t[n];try{if(r.href&&!S[r.href]&&r.cssRules){for(u=r.cssRules,i=0,o=u.length;i<o;i++)if(a=u[i],v(a,CSSStyleRule)&&a.style&&!g.test(a.selectorText))for(f=a.style,l=0,m=f.length;l<m;l++)y=f[l],y.startsWith("--")&&e.push(y);S[r.href]=!0}}catch(V){}}return e}function C(e){for(var t=window.getComputedStyle(__js_temp_htmlTag),n=0;n<e.length;n++){var s=e[n],o=t.getPropertyValue(s);o&&!c[s]&&(c[s]=o)}return c}})(__jsRegistry.x)||window);
__jsRegistry.xi = __globalRegistry["bRFHSkQ"] || (__globalRegistry["bRFHSkQ"] = (function(r,e){var a=function(d,s){var i=this;this.hide={tap:function(){var t=i.target.dataset.dialog;t&&r.show({url:t,dontPush:!0})}},this.target=s};a.isInstant=!0,(0,e.register)("broadcastPlayer",a)})(__jsRegistry.gh, __jsRegistry.am)||window);
__jsRegistry.xj = __globalRegistry["kYIqkhw"] || (__globalRegistry["kYIqkhw"] = (function(){window.coreKeeper&&window.coreKeeper.appReady()})()||window);
__jsRegistry.xk = __globalRegistry["CFxpncQ"] || (__globalRegistry["CFxpncQ"] = (function(y,l,o,v){var u=(function(){function d(a,f){var t=this;this.pageReady=!1,this.isValid=!1,this.onClipTap={tap:function(F){if(!t.pageReady||!t.isValid){t.errorFunc();return}try{var p=o.parentBySelector(F.target,".vkclip");if(!p)return;var e=p.querySelector(".one-video-player-container");if(!e)return;e.call&&e.call("togglePlay",!1);var h=JSON.parse(e.dataset.options),c=h.flashvars,r=JSON.parse(e.dataset.payload);c.ui=r.payload.playerUIConfig;var m,s={isOK:(m=r.isOK)!=null?m:!0,attrsAsString:JSON.stringify(h),meta:c.metadata,payload:{authorInfo:r.payload.authorInfo,likeInfo:r.payload.likeInfo,complaintLink:r.payload.complaintLink},bundleUrl:e.dataset.bundleUrl,marker:r.marker,hasMore:!0,isClipUnavailable:!1};if(!s.isOK){e.call&&e.call("togglePlay",!0),window.DEVMODE;return}t.appendFirst(s,e),t.setOpenState(),setTimeout(function(){if(s.isOK){var i=o.parentBySelector(e,".one-video-player-wrapper");i&&(i.style.height=""+window.innerHeight+"px",i.scrollIntoView(!0)),e.style.display="none"}},500)}catch(i){}}},this.node=document.getElementById("clips-fullscreen"),this.isValid=this.validateNode(),v.fullyLoaded.then(function(){return t.pageReady=!0})}var n=d.prototype;return n.setOpenState=function(){this.node.setOpenState(!0)},n.appendFirst=function(f,t){this.node.appendFirst(f,t)},n.errorFunc=function(){},n.validateNode=function(){return this.node?!(0,l.isFunction)(this.node.setOpenState)||!(0,l.isFunction)(this.node.appendFirst)?(this.appendFirst=this.setOpenState=this.errorFunc,!1):!0:(this.appendFirst=this.setOpenState=this.errorFunc,!1)},d})();u.isInstant=!0,(0,y.register)("clipsFullScreen",u)})(__jsRegistry.am, __jsRegistry.d, __jsRegistry.t, __jsRegistry.p)||window);
__jsRegistry.xl = __globalRegistry["ceLXB6w"] || (__globalRegistry["ceLXB6w"] = (function(u,s,p,o){var i=!1,l="/clips/getOne";function a(n){var t=n.uri,e=n.query;if(!(!t||t.indexOf("/clip")===-1)){var r=document.getElementById("clips-fullscreen");if((0,o.see)((0,o.abs)(t)).internal&&e&&e.clip_id&&e.owner_id&&r&&typeof r.appendFirst=="function")return i||(i=!0,(0,p.invoke)(l,{ownerId:e.owner_id,clipId:e.clip_id}).then(function(c){i=!1,c&&c.clips&&c.clips[0]&&(r.appendFirst(c.clips[0]),r.setOpenState(!0))}).catch(function(){i=!1})),!0}}(0,u.create)({name:"clipLinksService",update:function(){s.register(a)},discard:function(){s.revoke(a)}})})(__jsRegistry.x, __jsRegistry.ea, __jsRegistry.bx, __jsRegistry.bt)||window);
__jsRegistry.xm = __globalRegistry["pK7clYg"] || (__globalRegistry["pK7clYg"] = (function(h,r,c,d){var l=window.OK.loader,a=function(i,e,n){var s=this;i===void 0&&(i={}),e===void 0&&(e=function(){}),this.config=i,this.onLoaded=e,this.loading=!1,this.loaded=!1,this.check=function(){return s.enabled},this.enabled=i.enabled||!0,this.onLoaded=e||function(){},this.check=n||this.check};(0,r.create)({name:"postponedJs",update:function(i){i=i||{};var e=i.deps||{},n={"ractive-js":new a(e["ractive-js"],d.configureRactive,function(){return!("Ractive"in window)}),"campaigns-js":new a(e["campaigns-js"])};for(var s in e)n[s]=new a(e[s]);c.fullyLoaded.then(function(){var f=function(o){var t=n[o];!(t.loaded||t.loading)&&t.check()&&(l.use(o,t.onLoaded).then(function(){t.loaded=!0,t.loading=!1}),t.loading=!0)};for(var v in n)f(v)})}})})(__jsRegistry.ex, __jsRegistry.x, __jsRegistry.p, __jsRegistry.tg)||window);
__jsRegistry.xn = __globalRegistry["cKYfWEw"] || (__globalRegistry["cKYfWEw"] = (function(){})(__jsRegistry.bq, __jsRegistry.ca, __jsRegistry.ce, __jsRegistry.cl, __jsRegistry.af, __jsRegistry.cn, __jsRegistry.cc, __jsRegistry.co, __jsRegistry.cp, __jsRegistry.de, __jsRegistry.dk, __jsRegistry.dv, __jsRegistry.ek, __jsRegistry.em, __jsRegistry.eq, __jsRegistry.ao, __jsRegistry.fk, __jsRegistry.fo, __jsRegistry.fp, __jsRegistry.fq, __jsRegistry.fs, __jsRegistry.fu, __jsRegistry.gd, __jsRegistry.gh, __jsRegistry.fi, __jsRegistry.gs, __jsRegistry.gu, __jsRegistry.gx, __jsRegistry.gy, __jsRegistry.hg, __jsRegistry.hh, __jsRegistry.hl, __jsRegistry.hm, __jsRegistry.hb, __jsRegistry.hp, __jsRegistry.fn, __jsRegistry.hq, __jsRegistry.ih, __jsRegistry.ht, __jsRegistry.ii, __jsRegistry.ij, __jsRegistry.hu, __jsRegistry.hv, __jsRegistry.ik, __jsRegistry.il, __jsRegistry.im, __jsRegistry.io, __jsRegistry.ip, __jsRegistry.iq, __jsRegistry.ir, __jsRegistry.is, __jsRegistry.it, __jsRegistry.iu, __jsRegistry.jb, __jsRegistry.jc, __jsRegistry.jd, __jsRegistry.je, __jsRegistry.jh, __jsRegistry.ji, __jsRegistry.jj, __jsRegistry.jq, __jsRegistry.jr, __jsRegistry.js, __jsRegistry.jt, __jsRegistry.jw, __jsRegistry.jz, __jsRegistry.ka, __jsRegistry.kb, __jsRegistry.kd, __jsRegistry.ke, __jsRegistry.kh, __jsRegistry.ki, __jsRegistry.kk, __jsRegistry.kl, __jsRegistry.km, __jsRegistry.kp, __jsRegistry.kq, __jsRegistry.ks, __jsRegistry.kt, __jsRegistry.le, __jsRegistry.lf, __jsRegistry.ll, __jsRegistry.lo, __jsRegistry.ly, __jsRegistry.lz, __jsRegistry.ma, __jsRegistry.mc, __jsRegistry.me, __jsRegistry.mt, __jsRegistry.mu, __jsRegistry.mv, __jsRegistry.mw, __jsRegistry.mz, __jsRegistry.nd, __jsRegistry.ne, __jsRegistry.nf, __jsRegistry.nh, __jsRegistry.ni, __jsRegistry.nj, __jsRegistry.nk, __jsRegistry.nl, __jsRegistry.nq, __jsRegistry.nr, __jsRegistry.nv, __jsRegistry.nw, __jsRegistry.od, __jsRegistry.oe, __jsRegistry.og, __jsRegistry.oh, __jsRegistry.om, __jsRegistry.on, __jsRegistry.oo, __jsRegistry.op, __jsRegistry.oq, __jsRegistry.ot, __jsRegistry.ou, __jsRegistry.ox, __jsRegistry.oy, __jsRegistry.oz, __jsRegistry.pb, __jsRegistry.pc, __jsRegistry.pd, __jsRegistry.pe, __jsRegistry.pf, __jsRegistry.pg, __jsRegistry.ph, __jsRegistry.pi, __jsRegistry.pm, __jsRegistry.cx, __jsRegistry.pn, __jsRegistry.po, __jsRegistry.pp, __jsRegistry.pq, __jsRegistry.qd, __jsRegistry.qf, __jsRegistry.qg, __jsRegistry.qh, __jsRegistry.qi, __jsRegistry.qj, __jsRegistry.qr, __jsRegistry.qt, __jsRegistry.qu, __jsRegistry.qv, __jsRegistry.qw, __jsRegistry.qx, __jsRegistry.qy, __jsRegistry.qz, __jsRegistry.rb, __jsRegistry.ln, __jsRegistry.rc, __jsRegistry.rd, __jsRegistry.rg, __jsRegistry.ra, __jsRegistry.ri, __jsRegistry.rj, __jsRegistry.rk, __jsRegistry.rl, __jsRegistry.rm, __jsRegistry.rn, __jsRegistry.ro, __jsRegistry.rp, __jsRegistry.rr, __jsRegistry.rs, __jsRegistry.rt, __jsRegistry.ru, __jsRegistry.rv, __jsRegistry.rw, __jsRegistry.ry, __jsRegistry.sc, __jsRegistry.sd, __jsRegistry.dx, __jsRegistry.se, __jsRegistry.sp, __jsRegistry.sq, __jsRegistry.lx, __jsRegistry.sr, __jsRegistry.ss, __jsRegistry.su, __jsRegistry.sv, __jsRegistry.sx, __jsRegistry.ti, __jsRegistry.bx, __jsRegistry.gm, __jsRegistry.tj, __jsRegistry.tv, __jsRegistry.tw, __jsRegistry.tx, __jsRegistry.ty, __jsRegistry.tz, __jsRegistry.ua, __jsRegistry.gr, __jsRegistry.ub, __jsRegistry.eb, __jsRegistry.uc, __jsRegistry.ud, __jsRegistry.ue, __jsRegistry.uf, __jsRegistry.uh, __jsRegistry.ui, __jsRegistry.uj, __jsRegistry.ul, __jsRegistry.um, __jsRegistry.mh, __jsRegistry.un, __jsRegistry.up, __jsRegistry.uo, __jsRegistry.ur, __jsRegistry.vo, __jsRegistry.vp, __jsRegistry.vq, __jsRegistry.vr, __jsRegistry.vs, __jsRegistry.vt, __jsRegistry.vu, __jsRegistry.vv, __jsRegistry.vy, __jsRegistry.ja, __jsRegistry.vz, __jsRegistry.wb, __jsRegistry.wc, __jsRegistry.wk, __jsRegistry.wl, __jsRegistry.id, __jsRegistry.wr, __jsRegistry.ch, __jsRegistry.ws, __jsRegistry.wt, __jsRegistry.wu, __jsRegistry.wv, __jsRegistry.ww, __jsRegistry.hn, __jsRegistry.wz, __jsRegistry.iz, __jsRegistry.xa, __jsRegistry.xb, __jsRegistry.xc, __jsRegistry.xd, __jsRegistry.xe, __jsRegistry.xf, __jsRegistry.xg, __jsRegistry.xh, __jsRegistry.xi, __jsRegistry.xj, __jsRegistry.xk, __jsRegistry.xl, __jsRegistry.xm)||window);
__jsRegistry.xo = __globalRegistry["dvd0lw"] || (__globalRegistry["dvd0lw"] = (function(n,o){function u(t,e){this.model=t||{},this.root=e,this.associatedFields=t.fields}u.prototype={constructor:u,getValue:function(e){return parseInt(e.getAttribute("data-value"),10)},setValueToFields:function(e){var s=this.associatedFields;for(i=0,l=s.length;i<l;i++){var a=document.getElementById(s[i]);if(a){a.value=(parseInt(a.value,10)||0)+e;var d=new Event("input",{bubbles:!0,cancelable:!0});a.dispatchEvent(d)}}},addValue:{touchEnd:function(e){n.allowDefault(e)},tap:function(e,s){var a=this.getValue(s);this.setValueToFields(a),o.addClass(s,"__touched"),setTimeout(function(){o.removeClass(s,"__touched")},150)}}},n.register("donateFastInput",u)})(__jsRegistry.am, __jsRegistry.s)||window);
__jsRegistry.xp = __globalRegistry["luHezIQ"] || (__globalRegistry["luHezIQ"] = (function(){var a=window.okHead,n=a.requestBeacon;function i(o,t,r){if(n){var c=[n,"&st.lvl=",encodeURIComponent(o||e.INFO),"&st.key=",encodeURIComponent(t||""),"&st.msg=",encodeURIComponent(r||""),"&rnd=",Math.floor(Math.random()*9999999)].join(""),d=new Image;setTimeout(function(){d.src=c},10)}}var e={INFO:"info",WARNING:"warning",ERROR:"error"};return{Level:e,log:i}})()||window);
__jsRegistry.xq = __globalRegistry["d1FuAZQ"] || (__globalRegistry["d1FuAZQ"] = (function(O,c,m,j){var d={INIT:"INIT",PAYMENT_SUCCESS:"PAYMENT_SUCCESS",PAYMENT_ERROR:"PAYMENT_ERROR"},y="",g,h,n,p,E,v,l=d.INIT,s;function S(t){var e=t.data;if(e){var a;try{a=JSON.parse(e)}catch(P){}var i=t.origin;if(i.lastIndexOf("/")!==i.length-1&&(i=i+"/"),a){var r=a.action,o=a.action_params;if(r==="payError"){l=d.PAYMENT_ERROR,C(o);return}else if(r==="resizeFrame"&&!s){if(o){var f=o.height;f&&(n.style.height=f+12+"px")}}else if(r==="3dsPage")n._okHeightCache=n.style.height,n.style.height="";else if(r==="3dsFinish")n.style.height=n._okHeightCache,delete n._okHeightCache;else if(r==="waiterStart"){N("js-hide-on-pay",!0);return}else if(r==="closeWindow"){b(e,i);return}if(r!=="paySuccess")return;l=d.PAYMENT_SUCCESS,s||_(a,i)}}}function _(t,e){var a=e.indexOf(g)===0,i=s&&e.indexOf(h)===0,r=e.indexOf(y)===0;if(!r&&!a&&!i){var o="donatePay: origin mismatch, ignoring message";s&&(o+=" [VK Pay]"),m.log(m.Level.WARNING,"donatePayError",o);return}if(s&&T(),v&&v.checked){var f=v.getAttribute("data-group-id");j.run("group.payment.messages.on",{groupId:f})}w(t)}function w(t){var e;s||I(),c.removeClass(p,"hidden");var a=t==null||(e=t.action_params)===null||e===void 0?void 0:e.payment_info;a&&(u("js-pay_company",a.company),u("js-pay_number",a.transaction_id),u("js-pay_operation_type",a.operation_type),u("js-pay_amount",a.amount),u("js-pay_date",a.date))}function C(t){I(),N("js-hide-on-pay",!1),c.removeClass(E,"hidden"),m.log(m.Level.WARNING,"donatePayError",(t==null?void 0:t.code)||null)}function b(t,e){switch(l){case d.PAYMENT_SUCCESS:_(t,e);break;case d.PAYMENT_ERROR:C();break}}function u(t,e){e&&(document.getElementsByClassName(t)[0].textContent=e)}function I(){c.addClass(n,"hidden")}function T(){n==null||n.remove()}function N(t,e){for(var a=document.getElementsByClassName(t),i=a.length;i-- >0;)c.switchClass(a[i],e,"hidden")}O.create({name:"initDonateDmrListener",update:function(e){l=d.INIT,window.addEventListener("message",S),y=e.expectedOrigin,g=e.dmrStubOrigin,h=e.vkPayStubOrigin,e.dmrStubResultSuccess,p=document.getElementById("donate-pay-success"),E=document.getElementById("donate-pay-fail"),n=document.getElementById("donate-pay-frame"),v=document.getElementById("donate-pay-messages-on"),s=(n==null?void 0:n.getAttribute("data-vkdonut"))==="true"},discard:function(){window.removeEventListener("message",S)}})})(__jsRegistry.x, __jsRegistry.s, __jsRegistry.xp, __jsRegistry.fx)||window);
__globalRegistry["d7RlGog"] || (__globalRegistry["d7RlGog"] = (function(){})(__jsRegistry.xn, __jsRegistry.xo, __jsRegistry.xq)||window);})(this);